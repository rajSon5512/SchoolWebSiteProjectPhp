if (self.CavalryLogger) { CavalryLogger.start_js(["e9zsN"]); }

__d("ComposedEntityMutabilityToName",[],(function a(b,c,d,e,f,g){f.exports={0:"MUTABLE",1:"IMMUTABLE",2:"SEGMENTED"}}),null);
__d("ComposedEntityTypeToName",[],(function a(b,c,d,e,f,g){f.exports={0:"MENTION",1:"LINK",2:"IMAGE",3:"VIDEO",4:"EMOTICON",5:"TOKEN",6:"HASHTAG",7:"IMPLICIT_LINK",8:"EMBED",9:"EMOJI",10:"MATH",11:"HIGHLIGHT",12:"DELIGHT"}}),null);
__d("MessengerEmojiConfig",[],(function a(b,c,d,e,f,g){f.exports={emoji_colors:[0,127995,127996,127997,127998,127999]}}),null);
__d("MNCommerceBlockTypeJSInstance",[],(function a(b,c,d,e,f,g){f.exports={ALL:"all",PROMOTION:"promotion",NONE:"none"}}),null);
__d("P2PLinkConstants",[],(function a(b,c,d,e,f,g){f.exports={receiverIneligibleHelpURI:"http://www.facebook.com/help/1495718484027862",addDebitCardHelpURI:"http://www.facebook.com/help/200298266807261",helpCenterURI:"http://www.facebook.com/help/863171203733904",contactSupportURI:"http://www.facebook.com/help/contact/1491759007768605",disabledPaymentsSupportURI:"http://www.facebook.com/help/contact/223254857690713",complianceLearnMoreURI:"http://www.facebook.com/help/1555715811351399",complianceLearnMoreMsiteURI:"http://www.facebook.com/help/messenger-app/369959656515129",securePayInfoLearnMoreURI:"http://www.facebook.com/help/146373702454423",contactFraudTeamURI:"http://www.facebook.com/help/contact/370238886476028",payerProtectionURI:"http://www.facebook.com/payer_protection/",helpTransferSystemFailureURI:"http://www.facebook.com/help/contact/614010102040957",helpTransferManualReviewURI:"http://www.facebook.com/help/messenger-app/1463256903894928",helpTransferRecipientCanceledURI:"http://www.facebook.com/help/messenger-app/1564459413784472",helpTransferCompletedURI:"http://www.facebook.com/help/messenger-app/750020781733477",helpTransferCanceledSameCardURI:"http://www.facebook.com/help/messenger-app/818512131561533",helpTransferPushFailURI:"http://www.facebook.com/help/1386991644944095",settingsWWWURI:"http://www.secure.facebook.com/settings/?tab=payments",settingsMsiteURI:"http://m.facebook.com/settings/p2p/",mTermsURI:"http://www.facebook.com/legal/m",mHelpURI:"http://www.facebook.com/help/messenger-app/870471599656315",disputeURI:"http://www.facebook.com/help/contact/828169843971429",paymentMethodsURI:"https://www.facebook.com/settings?tab=payments&section=settings",paymentHistoryURI:"https://www.facebook.com/settings?tab=payments&section=history",paymentsTermsURI:"http://www.facebook.com/payments_terms/"}}),null);
__d("MercuryAudioPlayer",["Arbiter","DOM","Event","Flash"],(function a(b,c,d,e,f,g){__p&&__p();var h=200;function i(){var r=c("DOM").create("audio"),s=false;try{if(!!r.canPlayType)if(r.canPlayType("video/mp4;").replace(/^no$/,""))s=true}finally{return s}}function j(){return c("Flash").isAvailable()}var k=function k(){__p&&__p();this.interval=null;this.arbiterInstance=null;this.audio=c("DOM").create("audio");c("Event").listen(this.audio,"playing",function(){this.informAttachment("playing",this.audio.currentTime);this.interval=setInterval(function(){this.informAttachment("playing",this.audio.currentTime)}.bind(this),h)}.bind(this));c("Event").listen(this.audio,"ended",function(){clearInterval(this.interval);this.informAttachment("finished")}.bind(this))};Object.assign(k.prototype,{setAudio:function r(s,t){this.audio.setAttribute("src",s);this.arbiterInstance=t},informAttachment:function r(s,t){if(this.arbiterInstance)this.arbiterInstance.inform(s,t)},play:function r(){this.audio.play();this.informAttachment("played")},resume:function r(){this.audio.play();this.informAttachment("played")},pause:function r(){this.audio.pause();clearInterval(this.interval);this.informAttachment("paused")},getType:function r(){return"html5"}});var l=function l(){this.src=null;this.arbiterInstance=null;var r=c("DOM").create("div");document.body.appendChild(r);this.swf=c("Flash").embed("/swf/cigars/SoundStreamPlayer.swf",r,null,{});this.interval=null;c("Arbiter").subscribe("soundstream/finished",function(){clearInterval(this.interval);this.informAttachment("finished")}.bind(this))};Object.assign(l.prototype,{setAudio:function r(s,t){this.src=s;this.arbiterInstance=t},informAttachment:function r(s,t){if(this.arbiterInstance)this.arbiterInstance.inform(s,t)},play:function r(){this.swf.playSound(this.src);this.interval=setInterval(function(){var s=this.swf.getCurrentTime();this.informAttachment("playing",s)}.bind(this),h);this.informAttachment("played")},resume:function r(){this.swf.resume();this.informAttachment("played")},pause:function r(){clearInterval(this.interval);this.swf.pause();this.informAttachment("paused")},getType:function r(){return"flash"}});function m(){if(i())return new k();else if(j())return new l();return false}var n=null,o=null,p=0;function q(r,s){this.src=r;this.arbiterInstance=s;this.audio_id=++p;n!==null||(n=m());if(!n)return false}Object.assign(q.prototype,{getType:function r(){if(!n)return false;else return n.getType()},play:function r(s){if(s&&o==this.audio_id)n.resume();else{this.pause();o=this.audio_id;n.setAudio(this.src,this.arbiterInstance);n.play()}},pause:function r(){n.pause()}});f.exports=q}),null);
__d("MercuryAttachmentAudioClip.react",["cssVar","cx","fbt","Arbiter","ArbiterMixin","MercuryAudioPlayer","CurrentUser","JSLogger","LeftRight.react","Link.react","MercuryShareAttachmentRenderLocations","React","SubscriptionsHandler","WorkModeConfig","joinClasses","messengerCustomColorUtils","shield"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=c("React").PropTypes,l="MercuryAttachmentAudioClip/play",m="progress-bar",n=c("JSLogger").create("mercury_audio_clip"),o=c("React").createClass({displayName:"AudioClip",mixins:[c("ArbiterMixin")],propTypes:{customColor:k.string,duration:k.number,isChat:k.bool,isFromViewer:k.bool,location:k.oneOf(c("MercuryShareAttachmentRenderLocations").getValues()),onAttachmentLoad:k.func,rootClassName:k.string,showHelp:k.bool,src:k.string.isRequired,width:k.number},getInitialState:function p(){this.logged=false;return{time:0,playing:false,started:false,duration:this.props.duration,audioPlayer:new(c("MercuryAudioPlayer"))(this.props.src,this)}},componentDidMount:function p(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();this._subscriptionsHandler=new(c("SubscriptionsHandler"))();this._subscriptionsHandler.addSubscriptions(this.subscribe("playing",this.updateTime),this.subscribe("played",c("shield")(this.setState,this,{playing:true,started:true})),this.subscribe("paused",c("shield")(this.setState,this,{playing:false})),this.subscribe("finished",c("shield")(this.setState,this,{playing:false,started:false,time:this.props.duration})),c("Arbiter").subscribe(l,function(q,r){if(this.props.src!=r)this.setState({time:0})}.bind(this)))},componentWillUnmount:function p(){this._subscriptionsHandler&&this._subscriptionsHandler.release()},updateTime:function p(q,r){this.setState({time:r})},play:function p(){if(this.state.playing)this.state.audioPlayer.pause();else{this.state.audioPlayer.play(this.state.started);c("Arbiter").inform(l,this.props.src);if(!this.logged){this.logged=true;n.log("play",{uid:c("CurrentUser").getID(),duration:this.props.duration})}}},_formatSeconds:function p(q){if(q){q=Math.round(q);var r=q%60;if(r<10)r="0"+r;var s=Math.floor(q/60);return s+":"+r}else return null},_renderPlayer:function p(q,r,s){var t=this.props.isFromViewer,u=this.props.isChat,v=c("WorkModeConfig").is_work_user,w=s===m,x=u&&t&&!w,y=this.props.location===c("MercuryShareAttachmentRenderLocations").MESSENGER,z=v?"#373e4c":"#4080ff",A=s||z,B={width:q};if(x)c("messengerCustomColorUtils").customBubbleStyle(A,B);var C=s&&s!==m&&!u?{color:s}:{},D={};if(w)D["aria-disabled"]=true;return c("React").createElement(c("Link.react"),babelHelpers["extends"]({"aria-label":j._("Voice Message"),className:"_1miz _2e-1"+(!y?" _3_om":"")+(t&&u?" _3e5f":""),role:"button",style:B,onClick:this.play},D),c("React").createElement("span",{className:"_1mi- _2e-2"},c("React").createElement("i",{className:"_1mi_ _2e-3"})),c("React").createElement("span",{style:C,className:"_1mj0 _2e-4 _3oh-"},r),c("React").createElement("div",{className:"_1mj1 _2e-5"}))},render:function p(){__p&&__p();var q=this.state.time,r=this.state.playing,s=this._formatSeconds(this.state.duration),t=this.props.location===c("MercuryShareAttachmentRenderLocations").MESSENGER,u=this.props.width||170;if(t){var v=this.props.duration;if(v>10)u=240;else if(v>5)u=200;else if(v>2)u=160;else u=120}var w=null,x=Math.ceil(q*(u+2)/this.state.duration);if(t)x=Math.ceil(q*(u+24)/this.state.duration);if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var y=this._renderPlayer(u,s,this.props.customColor),z=this._renderPlayer(u,s,m),A="_1mj2 _2e-6"+(r&&q!==0?" _1mj3":"")+(r&&q===0?" _4g4x":"");w=c("React").createElement("div",{className:A},y,c("React").createElement("div",{className:"_1mj4 _2e-7",style:{width:x}},z))}else w=c("React").createElement("div",{className:"_1mj2"},c("React").createElement("div",{className:"_1miz"},c("React").createElement(c("LeftRight.react"),null,c("React").createElement("a",{className:"_1mj5",href:this.props.src},c("React").createElement("span",{className:"_3qi6"},c("React").createElement("i",{className:"_1mj6"})),c("React").createElement("span",{className:"_1mj7"},j._("Voice Message")),c("React").createElement("span",{className:"_1mj8"},s)),c("React").createElement("a",{href:this.props.src,className:"_1mj9"},c("React").createElement("i",{className:"_1mja"})))));return c("React").createElement("div",{className:c("joinClasses")("_1mjb"+(t?" _454y":""),this.props.rootClassName)},w)}});f.exports=o}),null);
__d("UFICreatorInfo.react",["cx","fbt","HelpLink.react","Image.react","React","URI"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){__p&&__p();var n=void 0,o=this.getCreatorLink();switch(this.props.labelType){case"commented":n=i._("Commented on by {creator}",[i._param("creator",o)]);break;case"edited_comment":n=i._("Edited by {creator}",[i._param("creator",o)]);break;case"sent_message":n=i._("Sent by {creator}",[i._param("creator",o)]);break;case"page_admin_note":n=i._("Noted by {creator}",[i._param("creator",o)]);break;default:return c("React").createElement("span",null)}return c("React").createElement("span",null,n,c("React").createElement(c("HelpLink.react"),{tooltip:this.getHelpText()}))};m.prototype.getCreatorLink=function(){switch(this.props.creatorType){case"application":case"gray_account":case"indirect_admin":return c("React").createElement("a",{className:"uiLinkSubtle","data-hover":"tooltip","data-tooltip-content":this.getTooltipText()},this.props.creatorName);case"business_admin":return c("React").createElement("a",{className:"uiLinkSubtle",href:this.props.profileURI},this.props.creatorName);case"direct_admin":return this.getProfileLinkWithHovercard();case"former_admin":return c("React").createElement("span",{className:"uiLinkSubtle"},c("React").createElement(c("Image.react"),{src:"/images/privacy/cant-see.png",width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard());default:return c("React").createElement("span",{className:"uiLinkSubtle"},this.props.creatorName)}};m.prototype.getTooltipText=function(){switch(this.props.creatorType){case"application":return this.getApplicationText();case"gray_account":return this.getGrayAccountText();case"indirect_admin":return this.getIndirectAdminText()}return null};m.prototype.getProfileLinkWithHovercard=function(){if(!this.props.profileURI)return c("React").createElement("span",null,this.props.creatorName);var n=new(c("URI"))("/ajax/hovercard/user.php").setQueryData({id:this.props.creatorID}).addQueryData({type:"page_admin",extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return c("React").createElement("a",{className:"uiLinkSubtle","data-hovercard":n,href:this.props.profileURI},this.props.creatorName)};m.prototype.getApplicationText=function(){switch(this.props.labelType){case"commented":return i._("This was commented on by someone using {application}.",[i._param("application",this.props.creatorName)]);case"edited_comment":return i._("This was edited by someone using {application}.",[i._param("application",this.props.creatorName)]);case"sent_message":return i._("This was sent by someone using {application}.",[i._param("application",this.props.creatorName)]);case"page_admin_note":return i._("This was noted by someone using {application}.",[i._param("application",this.props.creatorName)])}return null};m.prototype.getIndirectAdminText=function(){switch(this.props.labelType){case"commented":return i._("This was commented on by someone from {page}.",[i._param("page",this.props.creatorName)]);case"edited_comment":return i._("This was edited by someone from {page}.",[i._param("page",this.props.creatorName)]);case"sent_message":return i._("This was sent by someone from {page}.",[i._param("page",this.props.creatorName)]);case"page_admin_note":return i._("This was noted by someone from {page}.",[i._param("page",this.props.creatorName)])}return null};m.prototype.getGrayAccountText=function(){switch(this.props.labelType){case"commented":return i._("This was commented on by someone who doesn't have a personal Facebook account.");case"edited_comment":return i._("This was edited by someone who doesn't have a personal Facebook account.");case"sent_message":return i._("This was sent by someone who doesn't have a personal Facebook account.");case"page_admin_note":return i._("This was noted by someone who doesn't have a personal Facebook account.")}return null};m.prototype.getHelpText=function(){switch(this.props.labelType){case"commented":return i._("Only people who manage this Page can see who posted a comment");case"edited_comment":return i._("Only people who manage this Page can see who edited a comment");case"sent_message":return i._("Only people who manage this Page can see who sent a message");case"page_admin_note":return i._("Only people who manage this Page can see who created a note")}return null};function m(){j.apply(this,arguments)}m.propTypes={creatorID:l.string.isRequired,creatorType:l.string.isRequired,creatorName:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string};f.exports=m}),null);
__d("PagesMessengerCreatorInfo.react",["cx","React","UFICreatorInfo.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement(c("XUIGrayText.react"),{className:"_ajk"+(this.props.isNote?" _45l2":""),display:"inline",shade:"light",size:"meta1"},c("React").createElement(c("UFICreatorInfo.react"),{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI}))};function l(){i.apply(this,arguments)}l.propTypes={creator_info:k.shape({creatorID:k.string.isRequired,creatorName:k.string.isRequired,creatorType:k.string.isRequired,labelType:k.string.isRequired,pageID:k.string.isRequired,profileURI:k.string}).isRequired};f.exports=l}),null);
__d("EmojiDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("EmojiActions",["EmojiDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({CHANGE_CURRENT_CATEGORY:null,CHANGE_EMOJI_COLOR:null,EMOJI_COLOR_READY:null,GET_EMOJI_COLOR:null,TRAY_DATA_READY:null,UPDATE_TRAY_DATA:null}),i={Types:h,loadedTrayData:function j(){c("EmojiDispatcher").dispatch({type:i.Types.TRAY_DATA_READY})},updateTrayData:function j(){c("EmojiDispatcher").dispatch({type:i.Types.UPDATE_TRAY_DATA})},changeEmojiColor:function j(k){c("EmojiDispatcher").dispatch({type:i.Types.CHANGE_EMOJI_COLOR,color:k})},changeCurrentCategory:function j(k){c("EmojiDispatcher").dispatch({type:i.Types.CHANGE_CURRENT_CATEGORY,currentCategory:k})},getEmojiColor:function j(){c("EmojiDispatcher").dispatch({type:i.Types.GET_EMOJI_COLOR})},emojiColorReady:function j(k){c("EmojiDispatcher").dispatch({type:i.Types.EMOJI_COLOR_READY,color:k})}};f.exports=i}),null);
__d("XMessagingGetEmojiRecentUsageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/emoji_recent_usage/",{})}),null);
__d("EmojiServerRequests",["Promise","AsyncRequest","XMessagingGetEmojiRecentUsageController"],(function a(b,c,d,e,f,g){"use strict";var h={fetchTrayData:function j(k){return i(c("XMessagingGetEmojiRecentUsageController").getURIBuilder().getURI(),k,true)}};function i(j,k,l){return new(c("Promise"))(function(m,n){return new(c("AsyncRequest"))(j).setHandler(function(o){return m(o.getPayload())}).setAllowCrossPageTransition(l).send()}).then(k)}f.exports=h}),null);
__d("XMessagingGetEmojiColorPrefController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/get_emoji_color/",{})}),null);
__d("XMessagingSetEmojiColorPrefController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/set_emoji_color/",{})}),null);
__d("EmojiState",["fbt","AsyncRequest","EmojiActions","EmojiServerRequests","MessengerSupportedEmojiUtils","XMessagingGetEmojiColorPrefController","XMessagingSetEmojiColorPrefController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=null,j=null,k=void 0,l={onTrayDataReady:function m(n){if(!k)k=c("EmojiServerRequests").fetchTrayData(function(o){j=o});k.done(function(){n();c("EmojiActions").loadedTrayData()})},getEmojiColor:function m(){var n=c("XMessagingGetEmojiColorPrefController").getURIBuilder().getURI();new(c("AsyncRequest"))(n).setMethod("POST").setHandler(function(o){c("EmojiActions").emojiColorReady(o.payload)}).send()},changeEmojiColor:function m(n){var o=c("XMessagingSetEmojiColorPrefController").getURIBuilder().getURI();new(c("AsyncRequest"))(o).setMethod("POST").setData({color:n}).send()},addMRUCategory:function m(){if(j){var n=j.map(function(o){return c("MessengerSupportedEmojiUtils").getSupportedEmojiCodesArray(o)}).filter(function(o){return!!o});i={name:h._("Recently Sent"),emojis:n,icon:[128340]};c("EmojiActions").updateTrayData();j=null}},_addRecentlyUsedEmoji:function m(n){__p&&__p();var o,p=i&&i.emojis;if(!p)return;var q=function q(r){var s=n[r];for(var t=0;t<p.length;++t)if(p[t].length==s.length&&p[t].every(function(u,v){return u===s[v]})){p.splice(t,1);break}p.unshift(s)};for(var r=0;r<n.length;++r)q(r);c("EmojiActions").updateTrayData()},getMRUCategory:function m(){if(!i)this.addMRUCategory();return i},updateRecentlyUsed:function m(n){if(!i){this.addMRUCategory();return}this._addRecentlyUsedEmoji(n)}};f.exports=l}),null);
__d("EmojiStateStore",["EmojiActions","EmojiDispatcher","EmojiState","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("EmojiDispatcher"));this.__moduleID=f.id;this.$EmojiStateStore2=false}j.prototype.getState=function(){var k=c("EmojiState").getMRUCategory();return{currentCategory:this.$EmojiStateStore4,emojiColor:this.$EmojiStateStore3,mruCategory:[k],threadID:this.$EmojiStateStore1,trayDataReady:this.$EmojiStateStore2}};j.prototype.__onDispatch=function(k){__p&&__p();var l=c("EmojiActions").Types;switch(k.type){case l.GET_EMOJI_COLOR:c("EmojiState").getEmojiColor();break;case l.EMOJI_COLOR_READY:this.$EmojiStateStore3=k.color;break;case l.CHANGE_EMOJI_COLOR:c("EmojiState").changeEmojiColor(k.color);this.$EmojiStateStore3=k.color;break;case l.CHANGE_CURRENT_CATEGORY:this.$EmojiStateStore4=k.currentCategory;break;case l.UPDATE_TRAY_DATA:break;case l.TRAY_DATA_READY:this.$EmojiStateStore2=true;break}this.__emitChange()};f.exports=new j()}),null);
__d("MessagingThreadEventTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$MessagingThreadEventTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$MessagingThreadEventTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$MessagingThreadEventTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$MessagingThreadEventTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$MessagingThreadEventTypedLogger1)};h.prototype.updateData=function(j){this.$MessagingThreadEventTypedLogger1=babelHelpers["extends"]({},this.$MessagingThreadEventTypedLogger1,j);return this};h.prototype.setActiveTimeMs=function(j){this.$MessagingThreadEventTypedLogger1.active_time_ms=j;return this};h.prototype.setClientEventTimeMs=function(j){this.$MessagingThreadEventTypedLogger1.client_event_time_ms=j;return this};h.prototype.setEvent=function(j){this.$MessagingThreadEventTypedLogger1.event=j;return this};h.prototype.setPageData=function(j){this.$MessagingThreadEventTypedLogger1.page_data=c("GeneratedLoggerUtils").serializeMap(j);return this};h.prototype.setPageID=function(j){this.$MessagingThreadEventTypedLogger1.page_id=j;return this};h.prototype.setScriptPath=function(j){this.$MessagingThreadEventTypedLogger1.script_path=j;return this};h.prototype.setSource=function(j){this.$MessagingThreadEventTypedLogger1.source=j;return this};h.prototype.setThreadID=function(j){this.$MessagingThreadEventTypedLogger1.thread_id=j;return this};h.prototype.setVC=function(j){this.$MessagingThreadEventTypedLogger1.vc=j;return this};var i={active_time_ms:true,client_event_time_ms:true,event:true,page_data:true,page_id:true,script_path:true,source:true,thread_id:true,vc:true};f.exports=h}),null);
__d("MessengerProfileLinkTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$MessengerProfileLinkTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$MessengerProfileLinkTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$MessengerProfileLinkTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$MessengerProfileLinkTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$MessengerProfileLinkTypedLogger1)};h.prototype.updateData=function(j){this.$MessengerProfileLinkTypedLogger1=babelHelpers["extends"]({},this.$MessengerProfileLinkTypedLogger1,j);return this};h.prototype.setAction=function(j){this.$MessengerProfileLinkTypedLogger1.action=j;return this};h.prototype.setDomain=function(j){this.$MessengerProfileLinkTypedLogger1.domain=j;return this};h.prototype.setLinkLocation=function(j){this.$MessengerProfileLinkTypedLogger1.link_location=j;return this};h.prototype.setTargetID=function(j){this.$MessengerProfileLinkTypedLogger1.target_id=j;return this};h.prototype.setVC=function(j){this.$MessengerProfileLinkTypedLogger1.vc=j;return this};var i={action:true,domain:true,link_location:true,target_id:true,vc:true};f.exports=h}),null);
__d("WorkChatActivityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$WorkChatActivityTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$WorkChatActivityTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$WorkChatActivityTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$WorkChatActivityTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$WorkChatActivityTypedLogger1)};h.prototype.updateData=function(j){this.$WorkChatActivityTypedLogger1=babelHelpers["extends"]({},this.$WorkChatActivityTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$WorkChatActivityTypedLogger1.event=j;return this};h.prototype.setHscrollPosition=function(j){this.$WorkChatActivityTypedLogger1.hscroll_position=j;return this};h.prototype.setThreadIds=function(j){this.$WorkChatActivityTypedLogger1.thread_ids=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setVC=function(j){this.$WorkChatActivityTypedLogger1.vc=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$WorkChatActivityTypedLogger1=babelHelpers["extends"]({},this.$WorkChatActivityTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={event:true,hscroll_position:true,thread_ids:true,vc:true};f.exports=h}),null);
__d("MessengerSharedPhoto.react",["cx","React","CssBackgroundImage.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerSharedPhoto1=function(r){r.preventDefault();this.props.onClick(this.props.fbid)}.bind(this),n}l.prototype.render=function(){if(this.props.uri)return c("React").createElement("a",{className:this.props.className,href:this.props.uri,onClick:this.$MessengerSharedPhoto1},c("React").createElement(c("CssBackgroundImage.react"),{imageURI:this.props.uri,className:this.props.className,backgroundPosition:"center",style:{height:"100%"}},this.props.isSpherical?c("React").createElement("div",{className:"_3603 _64ks"}):null));else return c("React").createElement("a",{className:this.props.className,onClick:this.$MessengerSharedPhoto1})};l.propTypes={className:k.string.isRequired,fbid:k.string.isRequired,onClick:k.func.isRequired,uri:k.string};f.exports=l}),null);
__d("PhotosphereMetadata",["ImmutableRecordWithV4Types"],(function a(b,c,d,e,f,g){"use strict";var h=c("ImmutableRecordWithV4Types").Record,i=h({CroppedAreaImageHeightPixels:0,CroppedAreaImageWidthPixels:0,CroppedAreaLeftPixels:0,CroppedAreaTopPixels:0,FullPanoHeightPixels:0,FullPanoWidthPixels:0,InitialViewHeadingDegrees:0,InitialViewPitchDegrees:0,InitialViewRollDegrees:0,InitialViewVerticalFOVDegrees:0,PoseHeadingDegrees:0,PosePitchDegrees:0,PoseRollDegrees:0,PreProcessCropLeftPixels:0,PreProcessCropRightPixels:0,ProjectionType:"equirectangular",RendererProjectionType:"equirectangular"});f.exports={makePhotosphereMetadata:i}}),null);
__d("SphericalPhotoUtils",["PhotoRendererProjection","PhotosphereMetadata","SphericalPhotoPartialLimits"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("PhotoRendererProjection").PERSPECTIVE,i=c("PhotosphereMetadata").makePhotosphereMetadata,j=c("SphericalPhotoPartialLimits").makePartialLimits,k={getMetadataFromGraphQLResult:function l(m){return{CroppedAreaImageHeightPixels:m.cropped_area_image_height_pixels!=null?m.cropped_area_image_height_pixels.toString():null,CroppedAreaImageWidthPixels:m.cropped_area_image_width_pixels!=null?m.cropped_area_image_width_pixels.toString():null,CroppedAreaLeftPixels:m.cropped_area_left_pixels!=null?m.cropped_area_left_pixels.toString():null,CroppedAreaTopPixels:m.cropped_area_top_pixels!=null?m.cropped_area_top_pixels.toString():null,FullPanoHeightPixels:m.full_pano_height_pixels!=null?m.full_pano_height_pixels.toString():null,FullPanoWidthPixels:m.full_pano_width_pixels!=null?m.full_pano_width_pixels.toString():null,InitialViewHeadingDegrees:m.initial_view_heading_degrees!=null?m.initial_view_heading_degrees.toString():null,InitialViewPitchDegrees:m.initial_view_pitch_degrees!=null?m.initial_view_pitch_degrees.toString():null,InitialViewRollDegrees:m.initial_view_roll_degrees!=null?m.initial_view_roll_degrees.toString():null,InitialViewVerticalFOVDegrees:m.initial_view_vertical_fov_degrees!=null?m.initial_view_vertical_fov_degrees.toString():null,PoseHeadingDegrees:m.pose_heading_degrees!=null?m.pose_heading_degrees.toString():null,PosePitchDegrees:m.pose_pitch_degrees!=null?m.pose_pitch_degrees.toString():null,PoseRollDegrees:m.pose_roll_degrees!=null?m.pose_roll_degrees.toString():null,PreProcessCropLeftPixels:null,PreProcessCropRightPixels:null,ProjectionType:m.projection_type,RendererProjectionType:h}},calculatePartialLimits:function l(m){__p&&__p();var n=m.FullPanoHeightPixels,o=m.FullPanoWidthPixels,p=m.CroppedAreaImageWidthPixels,q=m.CroppedAreaImageHeightPixels,r=m.CroppedAreaLeftPixels,s=m.CroppedAreaTopPixels,t=k.parseNumber(n),u=k.parseNumber(o),v=k.parseNumber(p),w=k.parseNumber(q),x=k.parseNumber(r),y=k.parseNumber(s),z=void 0,A=void 0,B=void 0,C=void 0;if(v!==0&&v!==u){var D=360*v/u;if(D<350){z=180*(1-2*x/u);A=D-z}}if(w!==0&&w!==t){if(y!==0)B=90*(1-2*y/t);if(y+w!==t)C=180*(y+w-t/2)/t}var E=null,F=null,G=null,H=null;if(B&&B<87.5)F=B;if(C&&C<87.5)E=C;if(z)G=z;if(A)H=A;return j({partialTopDegrees:F,partialBottomDegrees:E,partialLeftDegrees:G,partialRightDegrees:H})},parseNumber:function l(m){return m?Number(m):0},getThumbnailsFromPhotoEncodings:function l(m){var n=m.find(function(r){return r.projection_type===h}),o=null,p=null;if(n&&n.thumbnails&&n.thumbnails.length>0){var q=n.thumbnails;o=q[0]?q[0].uri:null;p=q[1]?q[1].uri:null}return{smallThumbnail:o,largeThumbnail:p}},photosphereMetadataStringToNumber:function l(m){var n={};Object.keys(m).forEach(function(o){switch(o){case"ProjectionType":n.ProjectionType=m.ProjectionType;break;case"RendererProjectionType":n.RendererProjectionType=m.RendererProjectionType;break;default:n[o]=parseInt(m[o],10)}});return i(n)}};f.exports=k}),null);
__d("ChatPhotoViewFooterHScroll.react",["cx","Animation","MessengerSharedPhoto.react","React","SphericalPhotoUtils"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings,l=c("React").PropTypes,m=200,n=74,o=140,p=30;i=babelHelpers.inherits(q,c("React").Component);j=i&&i.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=j.constructor).call.apply(r,[this].concat(u)),this.$ChatPhotoViewFooterHScroll1=null,this.state={currentPhoto:"",prevScrollLeft:0,scrollLeft:0},this.$ChatPhotoViewFooterHScroll2=function(w){return w?Math.ceil((w-o*2)/n):p},s}q.prototype.componentDidMount=function(){if(this.props.width)this.props.updateNumberInOneBatch(this.$ChatPhotoViewFooterHScroll2(this.props.width));this.$ChatPhotoViewFooterHScroll1=new(c("Animation"))(this.refs.childContainer).to("scrollLeft",0).duration(m).go()};q.prototype.UNSAFE_componentWillReceiveProps=function(r){if(r.photoID!=this.state.currentPhoto||this.props.sharedPhotos.length!==r.sharedPhotos.length){var s=r.width?(r.width-n)/2-o:0,t=r.sharedPhotos.findIndex(function(u){return u.node.id===r.photoID});this.setState({currentPhoto:r.photoID,prevScrollLeft:this.state.scrollLeft,scrollLeft:t*n-s})}if(r.width!=this.props.width)this.props.updateNumberInOneBatch(this.$ChatPhotoViewFooterHScroll2(r.width))};q.prototype.componentDidUpdate=function(){if(this.$ChatPhotoViewFooterHScroll1)this.$ChatPhotoViewFooterHScroll1.from("scrollLeft",this.state.prevScrollLeft).to("scrollLeft",this.state.scrollLeft).duration(m).go()};q.prototype.componentWillUnmount=function(){this.$ChatPhotoViewFooterHScroll1&&this.$ChatPhotoViewFooterHScroll1.stop()};q.prototype.shouldComponentUpdate=function(r,s){if(r.photoID!=this.state.currentPhoto||r.sharedPhotos.length!==this.props.sharedPhotos.length)return true;return false};q.prototype.render=function(){var r=this.props.sharedPhotos,s=r.map(function(t){var u=t.node.photo_encodings?t.node.photo_encodings.length!==0:false,v=t.node.image1.uri;if(u){var w=k(t.node.photo_encodings),x=w.smallThumbnail;v=x||v}return c("React").createElement("div",{className:"_1oyb",key:t.node.legacy_attachment_id},c("React").createElement(c("MessengerSharedPhoto.react"),{className:"_1oyc"+(this.state.currentPhoto!==t.node.id?" _1oyd":""),fbid:t.node.legacy_attachment_id,onClick:this.props.onScroll,photoID:t.node.id,uri:v,isSpherical:u}))}.bind(this));return c("React").createElement("div",{className:"_1oye"},c("React").createElement("div",{className:"_1oyf",ref:"childContainer"},c("React").createElement("div",{className:"_1oyh",ref:"scrollable"},s)))};q.propTypes={onScroll:l.func,photoID:l.string,sharedPhotos:l.array,updateNumberInOneBatch:l.func,width:l.number};f.exports=q}),null);
__d("XForwardingNUXSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/chat/forwarding_nux_seen/",{})}),null);
__d("MessagingForwardingButtonNUX.react",["AsyncRequest","ChatConfig","React","XForwardingNUXSeenController","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){__p&&__p();var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={showNUX:!c("ChatConfig").get("seen_forwarding_nux")},this.$MessagingForwardingButtonNUX1=function(){if(!this.state.showNUX)return;c("ChatConfig").set("seen_forwarding_nux",true);new(c("AsyncRequest"))(c("XForwardingNUXSeenController").getURIBuilder().getURI()).send();this.setState({showNUX:false})}.bind(this),this.close=function(){this.$MessagingForwardingButtonNUX1()}.bind(this),m}k.prototype.render=function(){"use strict";return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,onCloseButtonClick:this.$MessagingForwardingButtonNUX1,position:"left",width:"auto",shown:this.state.showNUX},this.props.children)};k.propTypes={contextRef:j.func.isRequired};f.exports=k}),null);
__d("MessengerPhotoViewCloseLink.react",["cx","fbt","React","TooltipLink.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=c("React").PropTypes,k=function k(l){var m=l.customTooltip!==undefined?l.customTooltip:c("React").createElement("span",null,i._("Press Esc to close"));return c("React").createElement(c("TooltipLink.react"),{className:"_51ok _50-m _51an",onClick:l.onClick,tooltip:m},c("React").createElement("div",{className:"_387s"}))};k.propTypes={onClick:j.func,customTooltip:j.element};f.exports=k}),null);
__d("SpotlightViewerBottomBarLink",["cx","Link.react","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";var l=this.props.className||"_4_8j _4_8k";return c("React").createElement(c("Link.react"),babelHelpers["extends"]({},this.props,{className:l}),this.props.children)};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("ChatPhotoViewHeader.react",["cx","fbt","MessagingForwardingButtonNUX.react","MessengerPhotoViewCloseLink.react","React","SpotlightViewerBottomBarLink","WorkModeConfig"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$ChatPhotoViewHeader3=function(){this.$ChatPhotoViewHeader2();this.props.showForwardDialog&&this.props.showForwardDialog()}.bind(this),this.$ChatPhotoViewHeader4=function(){this.$ChatPhotoViewHeader2();this.props.showShareDialog&&this.props.showShareDialog()}.bind(this),o}m.prototype.render=function(){return c("React").createElement("div",{className:"_51an _50-m _3h_t _5l-3",role:"banner"},this.$ChatPhotoViewHeader1(),c("React").createElement(c("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onClose}))};m.prototype.$ChatPhotoViewHeader2=function(){if(this.refs.forwardNUX)this.refs.forwardNUX.close()};m.prototype.$ChatPhotoViewHeader1=function(){var n=void 0,o=void 0,p=void 0;if(!this.props.disableForward){n=c("React").createElement(c("SpotlightViewerBottomBarLink"),{className:"_3h_u",onClick:this.$ChatPhotoViewHeader3,ref:"forwardButton"},c("React").createElement("div",{className:"_3h_v _3h_w"}),i._("Forward"));o=c("React").createElement(c("MessagingForwardingButtonNUX.react"),{contextRef:function(){return this.refs.forwardButton}.bind(this),ref:"forwardNUX"},i._("Send this image to other people in separate messages."))}if(this.props.enableShareToFB)p=c("React").createElement("div",{className:"_3h_u",onClick:this.$ChatPhotoViewHeader4,ref:"shareButton",role:"button",tabIndex:"0"},c("React").createElement("div",{className:"_3tth _3h_w"}),this.$ChatPhotoViewHeader5());return c("React").createElement("div",{key:"buttonsContainer",ref:"buttons"},c("React").createElement(c("SpotlightViewerBottomBarLink"),{className:"_3h_u",rel:"async",ajaxify:this.props.url,ref:"downloadButton"},c("React").createElement("div",{className:"_3h_x _3h_w"}),i._("Download")),n,o,p,c("React").createElement("div",{className:"_3h_u",onClick:this.props.openInfo,ref:"moreInfo",role:"link",tabIndex:"0"},c("React").createElement("div",{className:"_3h_y _3h_w"}),i._("Info")))};m.prototype.$ChatPhotoViewHeader5=function(){if(c("WorkModeConfig").is_work_user)return i._("Share to Workplace");else return i._("Share to Facebook")};m.propTypes={disableForward:l.bool,enableShareToFB:l.bool,onClose:l.func,openInfo:l.func,showForwardDialog:l.func,showShareDialog:l.func,url:l.object};f.exports=m}),null);
__d("ChatSpeakingSticker.react",["React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$ChatSpeakingSticker1=function(){var q=c("ReactDOM").findDOMNode(this.refs.stickerVideo);q.play()}.bind(this),m}k.prototype.render=function(){return c("React").createElement("div",{onClick:this.$ChatSpeakingSticker1,role:"presentation"},c("React").createElement("video",{height:this.props.videoSize.height,ref:"stickerVideo",width:this.props.videoSize.width},c("React").createElement("source",{src:this.props.videoURI})))};k.propTypes={videoURI:j.string.isRequired,videoSize:j.shape({height:j.number,width:j.number}).isRequired};f.exports=k}),null);
__d("ChatEmojiPickerButton.react",["cx","fbt","Image.react","ImmutableObject","Keys","React","MessengerHotLikePreviewEvents","MessengerHotLikeUtils","MercuryMessageObject","MercuryTriodeSourceUtil","StickerConstants","clearTimeout","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryMessageObject").get(),m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ChatEmojiPickerButton1=null,this.$ChatEmojiPickerButton2=null,this.$ChatEmojiPickerButton3=null,this.$ChatEmojiPickerButton5=function(t){t.stopPropagation();this.props.onClick(this.props.emojiData.emojiCodes,this.refs.div)}.bind(this),this.$ChatEmojiPickerButton6=function(t){if(t.keyCode===c("Keys").RETURN){t.preventDefault();this.props.onClick(this.props.emojiData.emojiCodes,this.refs.div)}}.bind(this),this.$ChatEmojiPickerButton7=function(t){__p&&__p();t.preventDefault();t.stopPropagation();if(t.button!==0)return;if(!this.props.enableHotEmoji)this.$ChatEmojiPickerButton1=setTimeout(this.$ChatEmojiPickerButton9,1e3);else{this.$ChatEmojiPickerButton1=setTimeout(function(){this.$ChatEmojiPickerButton3=Date.now();this.$ChatEmojiPickerButton10();this.$ChatEmojiPickerButton11()}.bind(this),500);this.props.onMouseDown&&this.props.onMouseDown()}}.bind(this),this.$ChatEmojiPickerButton8=function(t){t.stopPropagation();c("clearTimeout")(this.$ChatEmojiPickerButton1);if(this.props.enableHotEmoji){if(!(this.props.threadID&&this.$ChatEmojiPickerButton3))return;this.$ChatEmojiPickerButton3=0;this.$ChatEmojiPickerButton13();this.$ChatEmojiPickerButton14()}}.bind(this),this.$ChatEmojiPickerButton9=function(){this.props.onLongPress(this.props.emojiData.emojiCodes,this.refs.div)}.bind(this),this.$ChatEmojiPickerButton15=function(){if(!this.props.threadID)return;c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").POP,this.props.threadID)}.bind(this),this.$ChatEmojiPickerButton4=function(){if(this.$ChatEmojiPickerButton3){this.$ChatEmojiPickerButton3=0;this.$ChatEmojiPickerButton13();this.$ChatEmojiPickerButton15()}}.bind(this),p}n.prototype.componentWillUnmount=function(){this.$ChatEmojiPickerButton4();c("clearTimeout")(this.$ChatEmojiPickerButton1);c("clearTimeout")(this.$ChatEmojiPickerButton2)};n.prototype.render=function(){return c("React").createElement("div",{"aria-label":i._("Pick an Emoji"),onClick:this.$ChatEmojiPickerButton5,onKeyDown:this.$ChatEmojiPickerButton6,onMouseDown:this.$ChatEmojiPickerButton7,onMouseLeave:this.$ChatEmojiPickerButton4,onMouseUp:this.$ChatEmojiPickerButton8,ref:"div",role:"button",tabIndex:"1"},c("React").createElement(c("Image.react"),{className:"_1lih _1ift _1ifu",style:{margin:0},src:this.props.emojiData.uri}))};n.prototype.$ChatEmojiPickerButton10=function(){this.$ChatEmojiPickerButton9();if(!this.props.threadID)return;var o=this.$ChatEmojiPickerButton12();c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").START,o,this.props.threadID,this.props.emojiData.emojiCodes)};n.prototype.$ChatEmojiPickerButton14=function(){if(!this.props.threadID)return;c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP_EMOJI,this.props.threadID,true)};n.prototype.$ChatEmojiPickerButton11=function(){this.$ChatEmojiPickerButton13();this.$ChatEmojiPickerButton2=c("setTimeoutAcrossTransitions")(this.$ChatEmojiPickerButton15,c("MessengerHotLikeUtils").SizeTimes.large)};n.prototype.$ChatEmojiPickerButton13=function(){c("clearTimeout")(this.$ChatEmojiPickerButton2)};n.prototype.$ChatEmojiPickerButton12=function(){__p&&__p();var o=this.props.threadID;if(!o)return null;var p=l.constructStickerMessageObject(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),o);l.normalizeNewMessage(p);p.is_like_preview=true;p.like_preview_since=this.$ChatEmojiPickerButton3;p.customLike=this.props.emojiData;p.body="";return new(c("ImmutableObject"))(p)};n.propTypes={emojiData:m.object.isRequired,enableHotEmoji:m.bool,onClick:m.func.isRequired,onLongPress:m.func.isRequired,threadID:m.string};f.exports=n}),null);
__d("SkinToneEmoji.bs",["bs_caml_array","EmojiFormat.bs","MessengerEmojiConfig"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(s){switch(s){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return true;default:return false}}function i(s){var t=c("bs_caml_array").caml_array_get(s,s.length-1|0)===65039;if(t)return c("bs_caml_array").caml_array_get(s,s.length-1|0);else return 0}function j(s){if(c("bs_caml_array").caml_array_get(s,s.length-1|0)===65039)return s;else{var t=s.slice(0);return t.concat([65039])}}function k(s){var t=i(s)===0;if(t)return s;else return s.slice(0,s.length-1|0)}function l(s){var t=c("MessengerEmojiConfig").emoji_colors,u=t.filter(function(v){return v===s});return u.length!==0}function m(s){var t=k(s);if(t.length<=1||!l(c("bs_caml_array").caml_array_get(t,t.length-1|0)))return 0;else return c("bs_caml_array").caml_array_get(t,t.length-1|0)}function n(s){var t=i(s),u=t===0,v=u?m(s):m(s.slice(0,s.length-1|0));if(v!==0){var w=t===0;if(w)return s.slice(0,s.length-1|0);else return j(s.slice(0,s.length-2|0))}else return s}function o(s,t){__p&&__p();if(t!==0){var u=i(s),v=u===0,w=v?s.slice(0):s.slice(0,s.length-1|0),x=m(w);if(x!==0)return s;else{var y=w.concat([t]),z=u===0;if(z)return y;else return y.concat([u])}}else return s}function p(s){return n(k(s))}function q(s){return h(c("EmojiFormat.bs").codeArrayToCodeString(n(k(s))))}var r=65039;g.emoji_modifier_code=r;g.emoji=h;g.getEmojiModifier=i;g.addEmojiModifier=j;g.removeEmojiModifier=k;g.isToneModifier=l;g.getTone=m;g.removeTone=n;g.applyTone=o;g.removeAllModifiers=p;g.hasVariations=q}),null);
__d("ChatEmojiPicker.react",["cx","ChatEmojiPickerButton.react","ChatEmojiSkinToneSelector.react","EmojiActions","EmojiFormat","EmojiLikeConstants","Grid.react","MessengerEmojiTransitionMapping.bs","MessengerHotLikePreviewEvents","MessengerScrollableArea.react","MessengerSupportedEmojiUtils","React","SkinToneEmoji.bs","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("Grid.react").GridItem,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$ChatEmojiPicker1=false,this.$ChatEmojiPicker2=null,this.state={clickedEmoji:null,selectedEmoji:[],toneSelectorShown:false,toneSelectorContext:null},this.scrollToTop=function(s){this.refs.scrollable.scrollToTop(s)}.bind(this),this.$ChatEmojiPicker7=function(s){if(this.props.shouldSaveEmojiColorChoice){var t=c("SkinToneEmoji.bs").getTone(s);c("EmojiActions").changeEmojiColor(t)}this.props.onSelect&&this.props.onSelect(s)}.bind(this),this.$ChatEmojiPicker4=function(s,t){if(this.props.shouldSaveEmojiColorChoice&&this.props.useSkinToneSelector&&c("SkinToneEmoji.bs").hasVariations(s)){this.$ChatEmojiPicker8(s,t);this.$ChatEmojiPicker1=false}else if(this.$ChatEmojiPicker1)this.$ChatEmojiPicker1=false;else this.$ChatEmojiPicker7(s)}.bind(this),this.$ChatEmojiPicker5=function(s,t){if(this.props.useSkinToneSelector&&c("SkinToneEmoji.bs").hasVariations(s))this.$ChatEmojiPicker8(s,t);else this.setState({clickedEmoji:s});this.$ChatEmojiPicker1=true}.bind(this),this.$ChatEmojiPicker6=function(){if(!this.$ChatEmojiPicker1)this.$ChatEmojiPicker3()}.bind(this),this.$ChatEmojiPicker3=function(){this.setState({toneSelectorShown:false})}.bind(this),o}m.prototype.componentDidMount=function(){this.$ChatEmojiPicker2=new(c("SubscriptionsHandler"))();this.$ChatEmojiPicker2.addSubscriptions(c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").START,function(n,o,p){if(p&&this.props.useSkinToneSelector&&!c("SkinToneEmoji.bs").hasVariations(p)&&this.state.toneSelectorShown)this.$ChatEmojiPicker3()}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(n,o,p){if(n===this.props.threadID)if(p&&this.state.clickedEmoji&&this.props.sendCustomEmoji){this.props.sendCustomEmoji({emoji:c("EmojiFormat").codeArrayToUnicode(this.state.clickedEmoji)},p,c("EmojiLikeConstants").source.PICKER);this.setState({clickedEmoji:null})}}.bind(this)))};m.prototype.componentWillUnmount=function(){this.$ChatEmojiPicker2&&this.$ChatEmojiPicker2.release()};m.prototype.render=function(){__p&&__p();var n=this.props.emojiChoices.map(function(o){var p=String.fromCodePoint.apply(String,o),q=this.props.enableHotEmoji||!c("SkinToneEmoji.bs").hasVariations(o),r=o;if(c("MessengerEmojiTransitionMapping.bs").hasGender(r))r=c("MessengerEmojiTransitionMapping.bs").makeFemale(r);if(c("MessengerEmojiTransitionMapping.bs").isBlacklisted(r))return null;var s=c("MessengerSupportedEmojiUtils").getUrl(c("EmojiFormat").codeArrayToCodeString(r),c("EmojiLikeConstants").size.SMALL);return s?c("React").createElement(k,{key:o.join("_"),className:"_3-sy"},c("React").createElement("div",{className:(p===this.props.currentEmoji?"_4rlt":"")+" _4rlu"},c("React").createElement(c("ChatEmojiPickerButton.react"),{emojiData:{emojiCodes:r,uri:s},enableHotEmoji:q,onClick:this.$ChatEmojiPicker4,onLongPress:this.$ChatEmojiPicker5,threadID:this.props.threadID}))):null}.bind(this)).filter(function(o){return!!o});return c("React").createElement(c("MessengerScrollableArea.react"),{className:this.props.className,onScroll:this.$ChatEmojiPicker3,ref:"scrollable"},c("React").createElement(c("Grid.react"),{cols:this.props.columns,className:"_3-s_"},n),this.props.useSkinToneSelector?c("React").createElement(c("ChatEmojiSkinToneSelector.react"),{context:this.state.toneSelectorContext,emojiCodes:this.state.selectedEmoji,onBlur:this.$ChatEmojiPicker6,onSelect:this.$ChatEmojiPicker7,sendCustomEmoji:this.props.sendCustomEmoji,shouldSaveEmojiColorChoice:this.props.shouldSaveEmojiColorChoice,shown:this.state.toneSelectorShown,threadID:this.props.threadID}):null)};m.prototype.$ChatEmojiPicker8=function(n,o){this.setState({toneSelectorShown:true,selectedEmoji:n,toneSelectorContext:o})};m.propTypes={className:l.string,columns:l.number,currentEmoji:l.string,emojiChoices:l.arrayOf(l.arrayOf(l.number)).isRequired,enableHotEmoji:l.bool,onSelect:l.func,sendCustomEmoji:l.func,shouldSaveEmojiColorChoice:l.bool,threadID:l.string,useSkinToneSelector:l.bool};m.defaultProps={columns:7,useSkinToneSelector:false};f.exports=m}),null);
__d("ChatEmojiSkinToneFlyout.react",["cx","fbt","ChatEmojiPicker.react","MessengerEmojiConfig","React","SkinToneEmoji.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.prototype.render=function(){__p&&__p();var n,o=this,p=[];if(this.props.emojiCodes.length>0)(function(){var r=c("SkinToneEmoji.bs").removeTone(o.props.emojiCodes);p=c("MessengerEmojiConfig").emoji_colors.map(function(s){return c("SkinToneEmoji.bs").applyTone(r,s)})})();var q=null;if(this.props.shouldSaveEmojiColorChoice)q=c("React").createElement("div",{className:"_4gww"},i._("Pick one. You can change it anytime in Settings."));return c("React").createElement("div",null,q,c("React").createElement(c("ChatEmojiPicker.react"),{className:this.props.className,columns:6,emojiChoices:p,enableHotEmoji:true,onSelect:this.props.onSelect,sendCustomEmoji:this.props.sendCustomEmoji,threadID:this.props.threadID}))};function m(){j.apply(this,arguments)}m.propTypes={className:l.string,emojiCodes:l.arrayOf(l.number).isRequired,onSelect:l.func.isRequired,sendCustomEmoji:l.func,shouldSaveEmojiColorChoice:l.bool,threadID:l.string};f.exports=m}),null);
__d("ChatEmojiSkinToneSelector.react",["cx","ChatEmojiSkinToneFlyout.react","ContextualLayerAutoFlip","React","XUIContextualDialog.react","emptyFunction"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=220;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;m.prototype.render=function(){return c("React").createElement(c("XUIContextualDialog.react"),{behaviors:{ContextualLayerAutoFlip:c("ContextualLayerAutoFlip")},context:this.props.context,contextRef:c("emptyFunction"),onBlur:this.props.onBlur,onToggle:this.$ChatEmojiSkinToneSelector1,shown:this.props.shown,width:l},c("React").createElement(c("ChatEmojiSkinToneFlyout.react"),{className:"_2ejf",emojiCodes:this.props.emojiCodes,onSelect:this.props.onSelect,sendCustomEmoji:this.props.sendCustomEmoji,shouldSaveEmojiColorChoice:this.props.shouldSaveEmojiColorChoice,threadID:this.props.threadID}))};function m(){i.apply(this,arguments)}m.propTypes={context:k.instanceOf(HTMLElement),emojiCodes:k.arrayOf(k.number).isRequired,onBlur:k.func.isRequired,onSelect:k.func.isRequired,sendCustomEmoji:k.func,shouldSaveEmojiColorChoice:k.bool,shown:k.bool,threadID:k.string};f.exports=m}),null);
__d("ChatEmojiSkinTonePreferencePicker.react",["ChatEmojiPicker.react","MessengerEmojiConfig","React","SkinToneEmoji.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k=128077;h=babelHelpers.inherits(l,c("React").PureComponent);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$ChatEmojiSkinTonePreferencePicker1=function(r){var s=c("SkinToneEmoji.bs").getTone(r);this.props.onSelect&&this.props.onSelect(s)}.bind(this),n}l.prototype.render=function(){var m=null;try{m=this.props.currentPreference?String.fromCodePoint.apply(String,c("SkinToneEmoji.bs").applyTone([k],this.props.currentPreference)):String.fromCodePoint(k)}catch(n){m=String.fromCodePoint(k)}return c("React").createElement(c("ChatEmojiPicker.react"),{className:this.props.className,columns:this.props.columns,currentEmoji:m,emojiChoices:c("MessengerEmojiConfig").emoji_colors.map(function(o){return c("SkinToneEmoji.bs").applyTone([k],o)}),onSelect:this.$ChatEmojiSkinTonePreferencePicker1})};l.propTypes={className:j.string,columns:j.number,currentPreference:j.number,onSelect:j.func};l.defaultProps={columns:6};f.exports=l}),null);
__d("MontageThreadViewContainer.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("MontageThreadViewContainerImpl.react").__setRef("MontageThreadViewContainer.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("EmojiSticker.react",["cx","Image.react","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad()};l.prototype.render=function(){var m=this.props.emojiImage?this.props.emojiImage:c("React").createElement(c("Image.react"),{src:this.props.sourceURI});return c("React").createElement("div",{"aria-label":this.props.emoji,className:c("joinClasses")(this.props.className,"_383m"),tabIndex:"0"},m)};function l(){i.apply(this,arguments)}l.propTypes={emoji:k.string,emojiImage:k.any,onAttachmentLoad:k.func,sourceURI:k.string.isRequired};f.exports=l}),null);
__d("MessengerErrorBoundary.react",["cx","fbt","ChatReliabilityInstrumentation","ErrorBoundary.react","LogHistory","React","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("LogHistory").getInstance("messenger_error_boundary"),m=function m(p){return i._({"conversation list":"Could not display conversation list.","conversation":"Could not display conversation.","composer":"Could not display composer.","conversation information":"Could not display conversation information.","attachment":"Could not display attachment."},[i._enum(p,{"conversation list":"conversation list",conversation:"conversation",composer:"composer","conversation information":"conversation information",attachment:"attachment"})])},n=function n(p,q){return function(){return c("React").createElement("div",{className:c("joinClasses")("_5jpt",q)},p)}};j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MessengerErrorBoundary1=function(u,v){var w="React error in "+v+" got "+u.message;l.error(w,JSON.stringify(u));c("ChatReliabilityInstrumentation").logERROR(w);this.props.onHandleError&&this.props.onHandleError(u,v)}.bind(this),q}o.prototype.render=function(){var p=this.props,q=p.className,r=p.component,s=babelHelpers.objectWithoutProperties(p,["className","component"]);return c("React").createElement(c("ErrorBoundary.react"),babelHelpers["extends"]({},s,{fallbackComponent:n(m(r),q),onHandleError:this.$MessengerErrorBoundary1,bigRedBox:true}))};f.exports=o}),null);
__d("MercuryShareAttachment.react",["cx","BootloadedComponent.react","DOM","Event","MercuryShareAttachmentReactShape","MercuryShareStyleMap","MessengerErrorBoundary.react","React","ReactDOM","MercuryShareAttachmentRenderLocations","emptyFunction","idx","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MercuryShareAttachment3=function(r){this.$MercuryShareAttachment1(r);c("DOM").scry(c("ReactDOM").findDOMNode(this),"img").forEach(function(s){var t=c("Event").listen(s,"load",function(){this.$MercuryShareAttachment1(s.height);t.remove()}.bind(this))}.bind(this))}.bind(this),n}l.prototype.componentDidMount=function(){this.$MercuryShareAttachment1()};l.prototype.$MercuryShareAttachment2=function(m,n){if(this.props.location===c("MercuryShareAttachmentRenderLocations").MESSENGER&&!this.props.isSubattachment)n=c("joinClasses")("_52mr _2poz _ui9","_4skb",n);return c("React").createElement("div",{className:n},m,this.props.afterDecorators)};l.prototype.render=function(){var m,n=c("MercuryShareStyleMap").getStyleFactory(this.props.attachment);if(!n)return null;var o=n.attachment,p=n.factory;return this.$MercuryShareAttachment2(c("React").createElement(c("MessengerErrorBoundary.react"),babelHelpers["extends"]({},this.props,{component:"attachment"}),c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({},this.props,{attachment:o,bootloadLoader:p.componentLoader,bootloadPlaceholder:c("React").createElement("div",null),key:(m=this)!=null?(m=m.props)!=null?(m=m.attachment)!=null?m.share_id:m:m:m,module:p.componentName,onComponentLoad:this.$MercuryShareAttachment3}))),p.cx&&p.cx.get(this.props.location))};l.prototype.$MercuryShareAttachment1=function(m){this.props.onComponentLoaded(m)};l.propTypes={attachment:c("MercuryShareAttachmentReactShape"),isFromViewer:k.bool,isPageMessage:k.bool,isSponsored:k.bool,isSubattachment:k.bool,isVisible:k.bool,location:k.oneOf(c("MercuryShareAttachmentRenderLocations").getValues()),messageID:k.string,onComponentLoaded:k.func.isRequired,onSelect:k.func,pageID:k.string,threadID:k.string.isRequired,afterDecorators:k.array};l.defaultProps={onComponentLoaded:c("emptyFunction")};f.exports=l}),null);
__d("MessagingFlowerBorderChecker",["MercuryMessageCustomizations","MessageBorderType","MessageCustomizationType","gkx"],(function a(b,c,d,e,f,g){"use strict";var h={shouldRenderWithFlowerBorder:function i(j){return c("gkx")("AT7rTubr3N_DsfglfGkvVFG3tMrhGme9-eELltAXoSOKkQuD-9JepjOeFPMl1e8XndLLgVmcw1EaaNThD3K6r4QJpohV9bITGr6_ur1k_X_RGQ")&&c("MercuryMessageCustomizations").getCustomizationValue(j,c("MessageCustomizationType").BORDER)===c("MessageBorderType").FLOWERS}};f.exports=h}),null);
__d("MessengerErrorAttachment.react",["cx","fbt","CurrentUser","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m)}l.prototype.render=function(){var m=this.props.attachment.error_msg||i._("This attachment could not be loaded.");return c("React").createElement("div",{className:"_1o12 _52mr"},c("React").createElement("div",{className:"_1o13"},m,this.$MessengerErrorAttachment1()))};l.prototype.$MessengerErrorAttachment1=function(){if(!this.props.attachment.error_msg&&c("CurrentUser").isEmployee()&&c("CurrentUser").hasWorkUser()&&!c("CurrentUser").isWorkUser())return c("React").createElement("div",null,i._("It was probably meant for your \u0040workplace account."));return null};f.exports=l}),null);
__d("MessengerFileAttachment.react",["cx","Link.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement(c("Link.react"),{className:"_4pcn _2uf4",target:"_blank",href:this.props.attachment.url},c("React").createElement("div",{className:"_2uf5"}),this.props.attachment.name)};function l(){i.apply(this,arguments)}l.propTypes={attachment:k.object.isRequired};f.exports=l}),null);
__d("MessengerFromViewerUtils",["CurrentUser","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.author===c("MercuryIDs").getParticipantIDFromUserID(c("CurrentUser").getID())}f.exports={isFromViewer:h}}),null);
__d("MessengerHotLikePreview.react",["cx","Animation","EmojiLikeConstants","HotLikeSound","MessengerHotLikePreviewEvents","MessengerHotLikeSVG.react","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","React","ReactDOM","StickerConstants","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerHotLikePreview5=function(){this.$MessengerHotLikePreview6=new(c("Animation"))(c("ReactDOM").findDOMNode(this));this.$MessengerHotLikePreview7(-2,2,150,1e3);this.$MessengerHotLikePreview7(-4,4,100,1e3);this.$MessengerHotLikePreview7(-10,10,75,1e3);this.$MessengerHotLikePreview6.go()}.bind(this),this.$MessengerHotLikePreview2=function(r,s){__p&&__p();var t=s?c("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION:c("MessengerHotLikePreviewEvents").FINISH_ANIMATION;if(this.$MessengerHotLikePreview8)return;this.$MessengerHotLikePreview8=true;var u=Date.now()-this.props.since,v=null;if(this.props.customLike)v=c("MessengerHotLikeUtils").getEmojiSizeForTime(u);var w=c("MessengerHotLikeUtils").getStickerIDForTime(u);c("HotLikeSound").snap(w);var x=c("MessengerHotLikeUtils").getMetadataForHotLike(v||w);this.$MessengerHotLikePreview6.stop();var y=30,z=-10;if(w===c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID){y=0;z=0}this.$MessengerHotLikePreview4.stop().to("width",x.width*1.2).to("height",x.height*1.2).to("rotateZ",y).duration(100).checkpoint().to("width",x.width*.9).to("height",x.height*.9).to("rotateZ",z).duration(100).checkpoint().to("width",x.width).to("height",x.height).to("rotateZ",0).duration(100).ondone(function(){c("MessengerHotLikePreviewEvents").emit(t,r,w,v)}).go()}.bind(this),this.$MessengerHotLikePreview3=function(r){c("HotLikeSound").pop();this.$MessengerHotLikePreview4.stop().to("width",0).to("height",0).duration(100).ondone(function(){c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").REMOVE,r)}).go()}.bind(this),n}l.prototype.componentDidMount=function(){this.$MessengerHotLikePreview1=new(c("SubscriptionsHandler"))();this.$MessengerHotLikePreview1.addSubscriptions(c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").STOP,this.$MessengerHotLikePreview2),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").STOP_EMOJI,this.$MessengerHotLikePreview2),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").POP,this.$MessengerHotLikePreview3));c("HotLikeSound").start();this.$MessengerHotLikePreview4=new(c("Animation"))(c("ReactDOM").findDOMNode(this)).to("width",80).to("height",80).duration(3e3).go();this.$MessengerHotLikePreview5()};l.prototype.componentWillUnmount=function(){this.$MessengerHotLikePreview1&&this.$MessengerHotLikePreview1.release()};l.prototype.render=function(){if(this.props.customLike){var m=this.props.customLike,n=c("MessengerSupportedEmojiUtils").getNewEmojiData(m.emoji,c("EmojiLikeConstants").size.LARGE),o=n?n.url:this.props.customLike.large;if(m.uri)o=m.uri;return c("React").createElement("div",{className:"_4a9g _383m",style:{backgroundImage:"url("+o+")"}})}return c("React").createElement("div",{className:"_4a9g _576q"},c("React").createElement(c("MessengerHotLikeSVG.react"),{color:this.props.customColor}))};l.prototype.$MessengerHotLikePreview7=function(m,n,o,p){var q=Math.floor(p/o),r=null;for(var s=0;s<q;s++){r=s%2?m:n;this.$MessengerHotLikePreview6.to("rotateZ",r).duration(o).checkpoint()}};l.propTypes={customLike:k.object,since:k.number};f.exports=l}),null);
__d("ChatSpeakingStickerReact.bs",["ReasonReact.bs","ChatSpeakingSticker.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact.bs").wrapJsForReason(c("ChatSpeakingSticker.react"),{videoURI:i,videoSize:j},k)}g.make=h}),null);
__d("MercuryAttachmentPayload.bs",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){var l=j?j[0]:null;return{app_attribution:null,attach_type:i,deduplication_key:null,description:null,icon_type:null,key:l,large_preview_height:null,large_preview_width:null,large_preview_url:null,media:null,metadata:null,name:null,photo_encodings:null,preview_height:null,preview_uploading:null,preview_url:null,preview_width:null,rel:null,share:null,source:null,target:null,thumbnail_url:null,upload_id:null,uri:null,url:k,video_title:null}}g.create=h}),null);
__d("MessagingFlowerBorderReact.bs",["ReasonReact.bs","MessagingFlowerBorder.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact.bs").wrapJsForReason(c("MessagingFlowerBorder.react"),{offset:i},j)}g.make=h}),null);
__d("MessagingGiftWrapReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessagingGiftWrap.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact.bs").wrapJsForReason(c("MessagingGiftWrap.react"),{isSticker:c("Utils.bs").optionBoolToNullUndefinedBoolean(i),onUnwrap:c("bs_js_null_undefined").fromOption(j)},k)}g.make=h}),null);
__d("MessengerAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={renderVideo:function i(j){c("Bootloader").loadModules(["MessagingVideoViewer.react","MessengerForwardAttachmentDialogReact.bs"],function(k,l){var m=l.jsComponent;c("MessagesViewer").renderVideo(c("React").createElement(k,babelHelpers["extends"]({},j,{forwardDialogComponent:m})))},"MessengerAttachmentViewer")},bootstrapWithConfig:function i(j,k){c("Bootloader").loadModules(["SpotlightMessagesViewer","MessengerForwardAttachmentDialogReact.bs"],function(l,m){var n=m.jsComponent;c("MessagesViewer").renderSpotlight(j,k,l,n)},"MessengerAttachmentViewer")},preload:function i(){c("Run").onAfterLoad(function(){c("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessengerForwardAttachmentDialogReact.bs"],c("emptyFunction"),"MessengerAttachmentViewer")})}};f.exports=h}),null);
__d("SphericalPhotoViewerInMessengerThreadBootloaded.react",["cx","BootloadedComponent.react","CssBackgroundImage.react","JSResource","React","PhotoProjection"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("PhotoProjection").PERSPECTIVE;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){__p&&__p();if(this.props.photoEncodings&&this.props.thumbnail){var m=this.props.photoEncodings.find(function(s){return s.projection_type===k}),n=null,o=null;if(m&&m.thumbnails&&m.thumbnails.length>0){var p=m.thumbnails;n=p[0]?p[0].uri:null;o=p[1]?p[1].uri:null}if(this.props.useRenderer&&this.props.width&&this.props.height&&this.props.fbid){var q=o||n||this.props.thumbnail;return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("SphericalPhotoViewerInMessengerThreadWrapper.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:c("React").createElement(c("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:q,className:"_3v3t"}),height:this.props.height,width:this.props.width,fbid:this.props.fbid,thumbnail:q,photoEncodings:this.props.photoEncodings,isVisible:this.props.isVisible,onClickHandler:this.props.onClickHandler})}else{var r=n||o||this.props.thumbnail;return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("SphericalPhotoMessengerThumbnail.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:c("React").createElement(c("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:r,className:"_3v3t"}),photoEncodings:this.props.photoEncodings,thumbnail:r})}}return null};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d("MessengerSphericalPhotoReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","SphericalPhotoViewerInMessengerThreadBootloaded.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q){return c("ReasonReact.bs").wrapJsForReason(c("SphericalPhotoViewerInMessengerThreadBootloaded.react"),{height:c("bs_js_null_undefined").fromOption(i),width:c("bs_js_null_undefined").fromOption(j),fbid:c("bs_js_null_undefined").fromOption(k),thumbnail:c("bs_js_null_undefined").fromOption(l),photoEncodings:c("bs_js_null_undefined").fromOption(m),isVisible:c("Utils.bs").optionBoolToBoolean(n),onClickHandler:o,useRenderer:p},q)}g.make=h}),null);
__d("MessengerPhotoReact.bs",["cx","fbt","bs_curry","React","Utils.bs","LinkReact.bs","cssURL","ImageReact.bs","ReasonReact.bs","joinClasses","bs_js_primitive","bs_caml_primitive","MercuryAttachmentType","MessengerSpinnerReact.bs","bs_caml_builtin_exceptions","MessengerSphericalPhotoReact.bs"],(function a(b,c,d,e,aa,f,ba,g){"use strict";__p&&__p();function h(s,t){__p&&__p();var u=s.metadata;if(u==null)return null;else if(s.attach_type===c("MercuryAttachmentType").VIDEO){var v=t&&c("Utils.bs").isDefined(u.large_preview);if(v)return u.large_preview;else return u.inbox_preview}else if(t)return s.large_preview_url;else return s.preview_url}function i(s){if(s==null)return[null,null];else return[s.width,s.height]}function j(s){__p&&__p();var t=window.screen.width>1800;if(c("Utils.bs").isTruthy(s.preview_uploading)){var u=function u(I,J){var v=c("Utils.bs").isDefined(I);if(v)return I;else return J},v=t&&c("Utils.bs").isDefined(s.large_preview_url);if(v)return[[u(s.large_preview_width,480),u(s.large_preview_height,480),s.large_preview_url,t]];else return[[u(s.preview_width,280),u(s.preview_height,280),s.preview_url,t]]}else{var w=h(s,t),x=c("Utils.bs").isDefined(w),y=s.metadata,z=0;if(x&&!(y==null)){var A=t&&c("Utils.bs").isDefined(y.large_size),B=A?y.large_size:y.inbox_size,C=i(B);return[[C[0],C[1],w,t]]}else z=1;if(z===1)if(c("Utils.bs").isDefined(s.preview_url)){var D=t&&c("Utils.bs").isDefined(s.large_preview_url);if(D)return[[s.large_preview_width,s.large_preview_height,s.large_preview_url,t]];else return[[s.preview_width,s.preview_height,s.preview_url,t]]}else{var E=s.media;if(E==null)return 0;else{var F=c("Utils.bs").isDefined(E.playable)&&c("Utils.bs").isDefined(E.animated_image);if(F){var G=i(E.animated_image_size);return[[G[0],G[1],E.animated_image,t]]}else{var H=i(E.image_size);return[[H[0],H[1],E.image,t]]}}}}}function k(s){__p&&__p();var t=function t(A){return[""+(String(A)+"")]};if(c("Utils.bs").isTruthy(s.preview_uploading)){var u=c("Utils.bs").isDefined(s.preview_url);return t(u?0:280)}else{var v=function v(A){var B=A[1],C=A[0];if(!(C==null)&&!(B==null))return[[C,B]];else return 0},w=function w(A){if(A){var B=A[0];return v([B[0],B[1]])}else return 0},x=c("Utils.bs").isDefined(s.media),y=x?w(j(s)):v([s.preview_width,s.preview_height]);if(y){var z=y[0];return t(c("bs_caml_primitive").caml_float_min(z[1]*c("bs_caml_primitive").caml_float_min(1,450/z[0]),450))}else return 0}}function l(s,t,u,v,w){c("Utils.bs").isTruthy(v.preview_uploading);var x=s[2];if(x==null||!w)return null;else{var y=s[3],z=y?window.screen.height*.7:window.screen.height*.65,A={maxHeight:""+(String(z)+""),maxWidth:"100%",width:"100%"};return c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make([c("joinClasses")(u,!t?"_5pf5":"")],[""],[x],0,0,0,[A],[]))}}var m=c("ReasonReact.bs").statelessComponent("MessengerPhoto");function n(s,t,u,v,w,x,y){__p&&__p();var z=s?s[0]:"";return[m[0],m[1],m[2],m[3],function(){if(w)c("bs_curry")._1(w[0],0);return 0},m[5],m[6],m[7],m[8],function(){__p&&__p();var A=j(t);if(A){var B=A[0],C=t.attach_type===c("MercuryAttachmentType").ANIMATED_IMAGE,D=c("Utils.bs").isDefined(t.app_attribution),E=t.photo_encodings,F=E==null?false:E.length!==0,G=(!C||!u)&&!F,H;if(G){var I=B[2],J=I==null?0:[c("cssURL")(I)],K=u?k(t):0;H=[J,K]}else H=[0,0];var L={},M=H[0];if(M)L.backgroundImage=M[0];var N=H[1];if(N)L.minHeight=N[0];var O=L,P=c("Utils.bs").isTruthy(t.preview_uploading),Q=P?c("ReasonReact.bs").element(0,0,c("MessengerSpinnerReact.bs").make(0,0,0,[])):null,R=C?[c("MercuryAttachmentType").ANIMATED_IMAGE]:0,S=function S(){if(x)return c("bs_curry")._1(x[0],t);else return 0},T=function T($){$.preventDefault();return S(0)},U;if(F){var V=B[2],W=t.metadata,X;if(W==null)X=0;else{var Y=W.fbid;X=Y==null?0:[Y]}var Z=t.photo_encodings;U=c("ReasonReact.bs").element(0,0,c("MessengerSphericalPhotoReact.bs").make([400],[400],X,V==null?0:[V],Z==null?0:[Z],v,S,u,[]))}else U=l(B,u&&C,(D?"_mxz":"")+(u&&!D?" _52mr":"")+(u&&!D?" _1byr":""),t,u);return c("React").cloneElement(c("React").createElement("div",{className:c("joinClasses")(z,"_4tsk"+(D?" _mxz":"")+(u&&!D?" _52mr":"")+(u&&!D?" _1byr":"")+(c("Utils.bs").isTruthy(t.preview_uploading)&&!c("Utils.bs").isDefined(B[2])?" _3etv":"")+(F&&!u?" _3603":"")),role:"presentation",style:O,onClick:T}),{"data-testid":R},c("React").createElement("div",{className:F&&!u?"_64ks":""}),c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make([g._("Open Photo")],["_4tsl"],0,0,0,0,c("bs_js_primitive").null_undefined_to_opt(B[2]),0,0,0,0,0,0,0,0,0,[y])),U,Q)}else return null},m[10],m[11],m[12],m[13]]}var o=280,p=480,q=1800,r=450;f.preview_thumbnail_size=o;f.preview_large_size=p;f.large_window_width=q;f.max_photo_width=r;f.getSrcFromAttachment=h;f.sizeToWidthHeight=i;f.extractPreviewMetadata=j;f.getMinHeightForAttachment=k;f.getImageFromMetadata=l;f.component=m;f.make=n}),null);
__d("MessengerThreadSharedMediaAfterWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1668947383157276"};j.getQueryID=function(){"use strict";return"515216185516880"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerThreadSharedMediaBeforeWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1712143858865110"};j.getQueryID=function(){"use strict";return"1694317194012102"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerThreadSharedMediaFindWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1504091236306393"};j.getQueryID=function(){"use strict";return"1829469114011976"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerSharedMediaReducer",["JSReliabilityFixesGatingConfig","MessengerSharedMediaActions","MessengerThreadSharedMediaHelper","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MessengerSharedMediaActions").Types;function i(s,t){__p&&__p();switch(t.type){case h.LOAD_CURRENT:var u=s.get("sharedMedia").get(t.threadFBID);if(u){var v=u.edges.find(function(y){return y.node.legacy_attachment_id===t.photoID});if(v)return s}var w=s.get("isLoading").get(t.threadFBID);if(!!w&&w.curr)return s;var x=q(s,t.threadFBID,"curr",true);c("MessengerThreadSharedMediaHelper").search(t.threadFBID,t.photoID,function(y){return c("MessengerSharedMediaActions").currentLoaded(y)});return x}return s}function j(s,t){__p&&__p();switch(t.type){case h.LOAD_MORE_PREVIOUS:var u=s.get("isLoading").get(t.threadFBID);if(!!u&&u.prev)return s;var v=q(s,t.threadFBID,"prev",true);if(v===null)return s;c("MessengerThreadSharedMediaHelper").loadMorePrevious(t.threadFBID,t.afterCursor,t.first,function(w){return c("MessengerSharedMediaActions").previousLoaded(w)});return v}return s}function k(s,t){__p&&__p();switch(t.type){case h.LOAD_MORE_LATEST:var u=s.get("isLoading").get(t.threadFBID);if(!!u&&u.latest)return s;var v=q(s,t.threadFBID,"latest",true);if(v===null)return s;c("MessengerThreadSharedMediaHelper").loadMoreLatest(t.threadFBID,t.beforeCursor,t.last,function(w){return c("MessengerSharedMediaActions").latestLoaded(w)});return v}return s}function l(s,t){__p&&__p();var u,v;switch(t.type){case h.CURRENT_LOADED:var w=t.data,x=Object.keys(w)[0],y=c("JSReliabilityFixesGatingConfig").should_get_fix,z=y?(u=w[x])!=null?u.message_shared_media:u:w[x].message_shared_media,A=y?(v=z)!=null?(v=v.edges)!=null?v.length:v:v:z.edges.length,B=q(s,x,"curr",false);if(A!==0){var C=p(s.get("sharedMedia").get(x),z,0),D=s.get("sharedMedia").set(x,C);B=B.set("sharedMedia",D);var E=z.edges[0];c("MessengerThreadSharedMediaHelper").loadMorePrevious(x,E.cursor,10,function(F){return c("MessengerSharedMediaActions").previousLoaded(F)});c("MessengerThreadSharedMediaHelper").loadMoreLatest(x,E.cursor,10,function(F){return c("MessengerSharedMediaActions").latestLoaded(F)})}return B}return s}function m(s,t){switch(t.type){case h.PREVIOUS_LOADED:var u=t.data,v=Object.keys(u)[0],w=u[v].message_shared_media,x=q(s,v,"prev",false),y=p(s.get("sharedMedia").get(v),w,1),z=s.get("sharedMedia").set(v,y);x=x.set("sharedMedia",z);return x}return s}function n(s,t){switch(t.type){case h.LATEST_LOADED:var u=t.data,v=Object.keys(u)[0],w=u[v].message_shared_media,x=q(s,v,"latest",false),y=p(s.get("sharedMedia").get(v),w,-1),z=s.get("sharedMedia").set(v,y);x=x.set("sharedMedia",z);return x}return s}function o(s,t){switch(t.type){case h.DELETE_PHOTOS:var u=t.threadFBID,v=t.photoFBIDs,w=s.get("sharedMedia").get(u),x=new Set(v.map(function(A){return A.toString()}));w.edges=w.edges.filter(function(A){return!x.has(A.node.legacy_attachment_id)});var y=s.get("sharedMedia").set(u,w),z=s.set("sharedMedia",y);return z}return s}function p(s,t,u){__p&&__p();var v={};v.count=t.count;if(u===1&&s){var w=s.edges;v.has_previous_page=s.has_previous_page;v.has_next_page=t.page_info.has_next_page;if(t.edges.length>0)v.edges=w.concat(t.edges);else v.edges=w}else if(u===-1&&s){var x=s.edges;v.has_previous_page=t.page_info.has_previous_page;v.has_next_page=s.has_next_page;if(t.edges.length>0)v.edges=t.edges.concat(x);else v.edges=x}else{v.has_previous_page=t.page_info.has_previous_page;v.has_next_page=t.page_info.has_next_page;if(t.edges.length>0)v.edges=t.edges}return v}function q(s,t,u,v){var w=s.get("isLoading").get(t);if(w===undefined){w={};w[u]=v}else w[u]=v;var x=s.set("isLoading",s.get("isLoading").set(t,w));return x}var r={currentLoaded:l,deletePhotos:o,latestLoaded:n,loadCurrent:i,loadMoreLatest:k,loadMorePrevious:j,previousLoaded:m};f.exports=r}),null);
__d("MessengerSharedMediaState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={sharedMedia:c("immutable").Map({}),isLoading:c("immutable").Map({})};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("MessengerSharedMediaStore",["MessengerFluxReduceDispatcher","MessengerSharedMediaActions","MessengerSharedMediaReducer","MessengerSharedMediaState","FluxReduceStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=Object.keys(c("MessengerSharedMediaReducer"));h=babelHelpers.inherits(k,c("FluxReduceStore"));i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.__moduleID=f.id,m}k.prototype.getInitialState=function(){return new(c("MessengerSharedMediaState"))()};k.prototype.reduce=function(l,m){if(m.namespace!==c("MessengerSharedMediaActions").Namespace)return l;j.forEach(function(n){l=c("MessengerSharedMediaReducer")[n](l,m)});return l};f.exports=new k(c("MessengerFluxReduceDispatcher"))}),null);
__d("MessengerSharedPhotosAlbumViewPhotoReact.bs",["bs_curry","React","cssURL","ReasonReact.bs"],(function a(b,c,d,e,f,g){"use strict";var h=c("ReasonReact.bs").statelessComponent("MessengerSharedPhotosAlbumViewPhotoReact");function i(j,k,l,m,n){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],function(){return c("React").createElement("a",{className:j,style:{backgroundImage:c("cssURL")(m)},href:"#",onClick:function o(){return c("bs_curry")._1(l,k)}},n)},h[10],h[11],h[12],h[13]]}g.component=h;g.make=i}),null);
__d("MessengerSharedPhotosAlbumViewVScrollReact.bs",["cx","bs_array","bs_curry","React","bs_string","ReactDOM","Animation","bs_caml_array","ReasonReact.bs","bs_caml_builtin_exceptions","MessengerSharedMediaActions","MessengerSharedPhotosAlbumViewPhotoReact.bs"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(C){var D=C[1],E=D.length;if(E<48){c("MessengerSharedMediaActions").loadMorePrevious(C[0],c("bs_caml_array").caml_array_get(D,D.length-1|0).cursor,48);return 0}else return 0}function j(C){if(C){var D=C[0];return(D.scrollTop+D.clientHeight|0)>=(D.scrollHeight-20|0)}else throw c("bs_caml_builtin_exceptions").not_found}function k(C){if(C)return C[0].scrollTop<=20;else throw c("bs_caml_builtin_exceptions").not_found}function l(C){if(C)return C[0].clientHeight;else throw c("bs_caml_builtin_exceptions").not_found}function m(C,D){if(C){new(c("Animation"))(C[0]).to("scrollTop",D).duration(200).go();return 0}else return 0}function n(C){var D=C[2][0];if(D)return m(C[1][0],c("ReactDOM").findDOMNode(D[0]).offsetTop-70|0);else return 0}function o(C,D){__p&&__p();var E=D[2],F=E[3],G=E[1],H=E[0],I=D[1],J=G.length;if(j(I[1][0]))if(J<E[2]&&!F.prev){c("MessengerSharedMediaActions").loadMorePrevious(H,c("bs_caml_array").caml_array_get(G,G.length-1|0).cursor,48);return 0}else return 0;else if(k(I[1][0])&&!F.latest){c("MessengerSharedMediaActions").loadMoreLatest(H,c("bs_caml_array").caml_array_get(G,0).cursor,48);return 0}else return 0}function p(C){__p&&__p();var D=C[1],E=D[1][0];if(E){var F=c("bs_curry")._1(C[0],o);E[0].addEventListener("scroll",F);c("bs_curry")._1(C[4],function(){var E=D[1][0];if(E)return E[0].removeEventListener("scroll",F);else return 0})}i(C[2]);var G=function G(){__p&&__p();if(l(D[3][0])>0){n(D);var E=D[0][0];if(E){clearInterval(E[0]);D[0][0]=0;return 0}else return 0}else return 0};D[0][0]=[setInterval(G,200)];return 0}function q(C){var D=C[1][0][0];if(D){clearInterval(D[0]);return 0}else return 0}var r=c("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerSharedPhotosAlbumViewVScrollReact");function s(C,D){D[1][1][0]=C==null?0:[C];return 0}function t(C,D){D[1][3][0]=C==null?0:[C];return 0}function u(C,D){D[1][2][0]=C==null?0:[C];return 0}function v(C,D,E,F,G,H,I){__p&&__p();var J=function J(K){__p&&__p();return c("bs_array").map(function(L){__p&&__p();var M=L.node,N=M.photo_encodings,O=N==null?false:N.length!==0,P=M.photo_encodings,Q;if(O&&!(P==null)){var R=P.find(function(U){return U.projection_type==="perspective"});if(R!==undefined&&R.thumbnails.length!==0){var S=R.thumbnails;Q=c("bs_caml_array").caml_array_get(S,0).uri}else Q=M.image1.uri}else Q=M.image1.uri;var T=M.legacy_attachment_id===H;return c("ReasonReact.bs").element([M.legacy_attachment_id],T?[c("bs_curry")._1(K[0],u)]:0,c("MessengerSharedPhotosAlbumViewPhotoReact.bs").make("_3bly"+(O?" _3603":""),M.legacy_attachment_id,D,Q,[c("React").createElement("div",{key:c("bs_string").concat("_",[M.legacy_attachment_id,["spherical_gradient",0]]),className:O?"_64ks":""})]))},E)};return[r[0],r[1],r[2],r[3],p,r[5],q,r[7],r[8],function(K){return c("React").createElement("div",{ref:c("bs_curry")._1(K[0],s),className:"_3xo8",onScroll:c("bs_curry")._1(K[0],o)},c("React").createElement("div",{ref:c("bs_curry")._1(K[0],t),className:"_3xoa"},J(K)))},function(){return[[0],[0],[0],[0]]},[F,E,G,C],function(I,K){return 0},r[13]]}var w=c("ReasonReact.bs").wrapReasonForJs(r,function(C){return v(C.isLoading,C.onClick,C.sharedPhotos,C.threadID,C.totalCount,C.viewedPhoto,[])}),x=200,y=48,z=6,A=20,B=70;g.animationDuration=x;g.imagesToLoad=y;g.photosPerRow=z;g.scrollToEdgeTolerance=A;g.headerHeight=B;g.graduallyLoadPhotos=i;g.isScrolledToBottom=j;g.isScrolledToTop=k;g.getScrollHeight=l;g.scrollTo=m;g.autoScrollWhenLoaded=n;g.handleScroll=o;g.didMount=p;g.willUnmount=q;g.component=r;g.setRefChildContainer=s;g.setRefScrollable=t;g.setRefChild=u;g.make=v;g.jsComponent=w}),null);
__d("MessengerSharedPhotosAlbumView.react",["cx","fbt","MessengerSharedPhotosAlbumViewVScrollReact.bs","MessengerPhotoViewCloseLink.react","React","ShimButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MessengerSharedPhotosAlbumViewVScrollReact.bs").jsComponent,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerSharedPhotosAlbumView2=function(){this.props.onClick(this.props.viewedPhoto)}.bind(this),p}n.prototype.render=function(){return c("React").createElement("div",{className:"_3bl- _5l-3",ref:"window"},this.$MessengerSharedPhotosAlbumView1(),c("React").createElement(l,{isLoading:this.props.isLoading,onClick:this.props.onClick,sharedPhotos:this.props.sharedPhotos,threadID:this.props.threadID,totalCount:this.props.totalCount,viewedPhoto:this.props.viewedPhoto}))};n.prototype.$MessengerSharedPhotosAlbumView1=function(){return c("React").createElement("div",{className:"_3bm0 _5l-3",ref:"header"},c("React").createElement(c("ShimButton.react"),{className:"_3bm2",onClick:this.$MessengerSharedPhotosAlbumView2},c("React").createElement("div",{className:"_3bm3"}),i._("Back to Photo")),c("React").createElement("div",{className:"_3bm4"},i._("Shared photos")),c("React").createElement(c("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onCloseSharedPhotos}))};n.propTypes={onClick:m.func.isRequired,onCloseSharedPhotos:m.func.isRequired,sharedPhotos:m.arrayOf(m.object).isRequired,totalCount:m.number.isRequired,viewedPhoto:m.string.isRequired,threadID:m.string.isRequired,isLoading:m.object.isRequired};f.exports=n}),null);
__d("MessengerSharedPhotosAlbumViewContainer.react",["FluxContainer","MessengerSharedMediaStore","React","MessengerSharedPhotosAlbumView.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={edges:[],count:0,isLoading:{}},m}k.getStores=function(){return[c("MessengerSharedMediaStore")]};k.calculateState=function(l,m){var n=c("MessengerSharedMediaStore").getState(),o=n.sharedMedia;return{edges:o.get(m.threadID).edges,count:o.get(m.threadID).count,isLoading:n.isLoading.get(m.threadID)}};k.prototype.render=function(){if(this.state.edges.length===0)return null;return c("React").createElement(c("MessengerSharedPhotosAlbumView.react"),{onClick:this.props.onClick,onCloseSharedPhotos:this.props.onCloseSharedPhotos,sharedPhotos:this.state.edges,totalCount:this.state.count,viewedPhoto:this.props.viewedPhoto,threadID:this.props.threadID,isLoading:this.state.isLoading})};k.propTypes={onClick:j.func.isRequired,onCloseSharedPhotos:j.func.isRequired,viewedPhoto:j.string.isRequired,threadID:j.string};f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("MessageShareType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({IMAGE:"image",PLATFORM_SHARE_CTA:"platform_share_CTA"})}),null);
__d("MessengerTabIndices",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({NEW_MESSAGE_TOKENIZER:9998,COMPOSER_INPUT:9999});f.exports=h}),null);
__d("MessengerComposeViewHeader.react",["cx","fbt","gkx","immutable","MessengerGraphQLTokenizer.react","MessengerTabIndices","React","clearImmediate","joinClasses","setImmediate"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=320;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={tokenizerContext:null,excludeGroups:false,excludePages:false,forGroup:false},this.$MessengerComposeViewHeader1=null,this.$MessengerComposeViewHeader2=function(){this.$MessengerComposeViewHeader1=c("setImmediate")(function(){this.refs.tokenizer&&this.refs.tokenizer.focusInput()}.bind(this))}.bind(this),p}n.prototype.componentDidMount=function(){this.$MessengerComposeViewHeader2();this.setState({tokenizerContext:this.refs.tokenizerContext})};n.prototype.componentDidUpdate=function(o){if(this.props.recipients!==o.recipients)this.props.onResize()};n.prototype.UNSAFE_componentWillReceiveProps=function(o){if(o.recipients!==this.props.recipients)if(o.recipients.size===0)this.setState({excludeGroups:false,excludePages:false,forGroup:false});else if(o.isWorkUser)this.setState({excludeGroups:true,excludePages:false,forGroup:true});else this.setState({excludeGroups:true,excludePages:true,forGroup:true})};n.prototype.componentWillUnmount=function(){this.$MessengerComposeViewHeader1&&c("clearImmediate")(this.$MessengerComposeViewHeader1)};n.prototype.render=function(){var o={enableMessageSearch:false,hasHoverState:true,originalEntryIDs:c("immutable").Set(),scrollableViewClassName:"_2y8_",shouldQueryInternalBot:true,shouldQueryVCEndpoint:false,width:m};return c("React").createElement("div",{className:c("joinClasses")("_2y8y _5l-3",this.props.className),onClick:this.$MessengerComposeViewHeader2,role:"presentation"},c("React").createElement("div",{className:"_2y8z",ref:c("gkx")("AT6Yilkln5f96nRXioOq13cDPCObGBXyvgYqCAnQUaX65pRAKq-nGqLOprquxXuHzv81m5wzzj4tuAiPBqV-ffQ_qlTKHg2SAFcZxWCm3nT90A")?"tokenizerContext":""},i._("To:")),c("React").createElement("div",{className:"_66s6"},c("React").createElement(c("MessengerGraphQLTokenizer.react"),babelHelpers["extends"]({autoFocus:true,className:"_2y8-",context:this.state.tokenizerContext,entries:this.props.recipients,excludeGroups:this.state.excludeGroups,excludePages:this.state.excludePages,forGroup:this.state.forGroup,forceHideClearButton:this.props.forceHideClearButton,onAddEntryAttempt:this.props.onAddRecipient,onClear:this.props.onClear,onRemoveEntryAttempt:this.props.onRemoveRecipient,placeholder:i._("Type the name of a person or group"),ref:"tokenizer",tabIndex:c("MessengerTabIndices").NEW_MESSAGE_TOKENIZER,useLayer:true,viewer:this.props.viewer},o)),c("gkx")("AT6Yilkln5f96nRXioOq13cDPCObGBXyvgYqCAnQUaX65pRAKq-nGqLOprquxXuHzv81m5wzzj4tuAiPBqV-ffQ_qlTKHg2SAFcZxWCm3nT90A")?null:c("React").createElement("div",{ref:"tokenizerContext"})))};n.propTypes={forceHideClearButton:l.bool.isRequired,onAddRecipient:l.func.isRequired,onClear:l.func,onRemoveRecipient:l.func.isRequired,onResize:l.func.isRequired,recipients:l.instanceOf(c("immutable").List).isRequired,viewer:l.string.isRequired,isWorkUser:l.bool.isRequired};n.defaultProps={isWorkUser:false};f.exports=n}),null);
__d("MessengerComposeViewHeaderReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerComposeViewHeader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q,r){return c("ReasonReact.bs").wrapJsForReason(c("MessengerComposeViewHeader.react"),{className:c("bs_js_null_undefined").fromOption(i),forceHideClearButton:j,onClear:c("bs_js_null_undefined").fromOption(k),onAddRecipient:l,onRemoveRecipient:m,onResize:n,recipients:o,viewer:p,isWorkUser:q},r)}g.make=h}),null);
__d("MessengerDialogBodyReact.bs",["cx","ReasonReact.bs","joinClasses","bs_js_primitive"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact.bs").statelessComponent("MessengerDialogBodyReact");function j(l,m){var n=l?l[0]:"";return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],function(){return c("ReasonReact.bs").createDomElement("div",{className:c("joinClasses")("_4eb-",n)},m)},i[10],i[11],i[12],i[13]]}var k=c("ReasonReact.bs").wrapReasonForJs(i,function(l){return j(c("bs_js_primitive").null_undefined_to_opt(l.className),l.children)});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("MessengerDialogReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessengerDialog.react","MessengerDialogTitle.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogCancelButton.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(w){if(w)switch(w[0]){case 0:return["cancel"];case 1:return["button"];case 2:return["confirm"]}else return 0}function i(w){if(w)if(w[0])return["secondary"];else return["primary"];else return 0}function j(w,x,y,z,A,B,C,D){return c("ReasonReact.bs").wrapJsForReason(c("MessengerDialog.react"),{className:c("bs_js_null_undefined").fromOption(w),onToggle:x,repositionOnUpdate:c("Utils.bs").optionBoolToNullUndefinedBoolean(y),shown:c("Utils.bs").optionBoolToNullUndefinedBoolean(z),titleID:c("bs_js_null_undefined").fromOption(A),type:c("bs_js_null_undefined").fromOption(B),width:c("bs_js_null_undefined").fromOption(C)},D)}var k=[j];function l(w,x,y){return c("ReasonReact.bs").wrapJsForReason(c("MessengerDialogHeader.react"),{className:c("bs_js_null_undefined").fromOption(w),id:c("bs_js_null_undefined").fromOption(x)},y)}var m=[l];function n(w,x){return c("ReasonReact.bs").wrapJsForReason(c("MessengerDialogTitle.react"),{className:c("bs_js_null_undefined").fromOption(w)},x)}var o=[n];function p(w,x,y){return c("ReasonReact.bs").wrapJsForReason(c("MessengerDialogFooter.react"),{className:c("bs_js_null_undefined").fromOption(w),leftContent:c("bs_js_null_undefined").fromOption(x)},y)}var q=[p];function r(w,x){return c("ReasonReact.bs").wrapJsForReason(c("MessengerDialogCancelButton.react"),{onClick:c("bs_js_null_undefined").fromOption(w)},x)}var s=[r];function t(w,x,y,z,A,B,C,D,E){return c("ReasonReact.bs").wrapJsForReason(c("MessengerDialogButton.react"),{action:c("bs_js_null_undefined").fromOption(h(w)),label:c("bs_js_null_undefined").fromOption(x),disabled:c("Utils.bs").optionBoolToNullUndefinedBoolean(y),use:c("bs_js_null_undefined").fromOption(z),onClick:c("bs_js_null_undefined").fromOption(A),type:c("bs_js_null_undefined").fromOption(i(B)),className:c("bs_js_null_undefined").fromOption(C),leftContent:c("bs_js_null_undefined").fromOption(D)},E)}var u=[t],v=0;g.stringOfButtonAction=h;g.stringOfButtonType=i;g.Dialog=k;g.Header=m;g.Title=o;g.Footer=q;g.CancelButton=s;g.Button=u;g.Body=v}),null);
__d("XMessagingForwardAttachmentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/mercury/attachments/forward/",{})}),null);
__d("XMessengerPlatformShareCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/platform/share/",{})}),null);
__d("MessengerForwardAttachmentDialogReact.bs",["ix","cx","fbt","bs_block","bs_curry","React","immutable","ImageReact.bs","CurrentUser","fbglyph","ReasonReact.bs","AsyncRequest","bs_js_primitive","MercuryLocalIDs","MessageShareType","MessengerDialogReact.bs","MessengerSpinnerReact.bs","MessengerDialogBodyReact.bs","MessengerComposeViewHeaderReact.bs","XMessengerPlatformShareCTAController","XMessagingForwardAttachmentController"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=j._("Send"),l=c("ReasonReact.bs").reducerComponent("MessengerForwardAttachmentDialogReact");function m(p,q,r){new(c("AsyncRequest"))(p.getURIBuilder().getURI()).setMethod("POST").setHandler(r).setData(q).send();return 0}function n(p,q,r,s,t,u,v){__p&&__p();var w=function w(y,v){if(y)return 0;else return c("bs_curry")._1(q,0)},x=function x(v,y){__p&&__p();var z=y[3],A=function A(D){if(D.payload.success)return c("bs_curry")._1(z,2);else return c("bs_curry")._1(z,c("bs_block").__(2,[c("bs_js_primitive").null_undefined_to_opt(D.payload.error)]))},B={};y[1][0].forEach(function(D,v,E){B[String(c("MercuryLocalIDs").generateOfflineThreadingID(undefined))]=D.getUniqueID();return true});var C=0;if(u&&r&&u[0]===c("MessageShareType").PLATFORM_SHARE_CTA)m(c("XMessengerPlatformShareCTAController"),{cta_id:p,message_id:r[0],recipient_map:B},A);else C=1;if(C===1)m(c("XMessagingForwardAttachmentController"),{attachment_id:p,recipient_map:B},A);return c("bs_curry")._1(y[3],1)};return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],function(y){__p&&__p();var z=y[1],A=z[2],B=z[1],C;if(A)C=c("React").createElement("div",undefined,c("ReasonReact.bs").element(0,0,c("MessengerSpinnerReact.bs").make(0,0,0,[])),c("React").createElement("span",{className:"_1e1n _3-99"},j._("Sending")));else if(B){var D=h("141787");C=c("React").createElement("div",{className:"_1e1n"},c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(0,0,[D],0,0,0,0,[])),c("React").createElement("span",{className:"_3-99"},B[0]))}else C=null;return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Dialog[0](0,c("bs_curry")._1(y[0],w),0,[s],0,0,[560],[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Header[0](0,0,c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Title[0](0,[t])))),c("ReasonReact.bs").element(0,0,c("MessengerDialogBodyReact.bs").make(0,[c("ReasonReact.bs").element(0,0,c("MessengerComposeViewHeaderReact.bs").make(["_1e1o"],false,[function(){return c("bs_curry")._1(y[3],0)}],function(E){return c("bs_curry")._1(y[3],c("bs_block").__(0,[E]))},function(E){return c("bs_curry")._1(y[3],c("bs_block").__(1,[E]))},function(){return 0},z[0],c("CurrentUser").getID(),c("CurrentUser").isWorkUser(),[]))])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Footer[0](0,[C],[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").CancelButton[0](0,[])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Button[0]([2],[k],[z[0].isEmpty()||z[2]],0,[c("bs_curry")._1(y[0],x)],[0],0,0,[]))]))]))},function(){return[c("immutable").List([]),0,false]},l[11],function(y){__p&&__p();if(typeof y==="number")switch(y){case 0:return function(C){return c("bs_block").__(0,[[c("immutable").List([]),C[1],C[2]]])};case 1:return function(C){return c("bs_block").__(0,[[C[0],0,true]])};case 2:c("bs_curry")._1(q,0);return function(){return c("bs_block").__(0,[[c("immutable").List([]),0,false]])}}else switch(y.tag|0){case 0:var z=y[0];return function(C){return c("bs_block").__(0,[[C[0].push(z),C[1],C[2]]])};case 1:var A=y[0];return function(C){return c("bs_block").__(0,[[C[0].filter(function(D){return D!==A}),C[1],C[2]]])};case 2:var B=y[0];return function(C){return c("bs_block").__(0,[[C[0],B,false]])}}},l[13]]}var o=c("ReasonReact.bs").wrapReasonForJs(l,function(p){return n(p.attachmentID,p.onClose,c("bs_js_primitive").null_undefined_to_opt(p.messageID),p.shown,p.title,c("bs_js_primitive").null_undefined_to_opt(p.shareType),[])});g.sendButtonLabel=k;g.component=l;g.sendData=m;g.make=n;g.jsComponent=o}),null);
__d("MessengerDialogs.bs",["bs_list","bs_curry"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[0],i=[0];function j(){var o=i[0],p=h[0];if(o){var q=o[0];if(c("bs_list").length(p)>0)return c("bs_curry")._1(q,[p]);else return c("bs_curry")._1(q,0)}else return 0}function k(o){i[0]=[o];return j(0)}function l(o){h[0]=[o,h[0]];return j(0)}function m(){var o=h[0];h[0]=o?o[1]:0;return j(0)}function n(){h[0]=0;return j(0)}g.visibleDialogs=h;g.setDialogComponentState=i;g.updateComponent=j;g.addHandler=k;g.showDialog=l;g.removeDialog=m;g.removeAllDialogs=n}),null);
__d("MessengerPhotoInfoDialog.react",["cx","fbt","MessengerEnvironment","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerDialogs.bs","MessengerSpinner.react","MercuryIDs","MercuryTimestamp","MercuryParticipants","React","RelayClassic_DEPRECATED","react-relay/classic/query/RelayQL","XUIDialog.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MessengerContactImageReact.bs").jsComponent,m=c("React").PropTypes,n=54;j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){__p&&__p();var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MessengerPhotoInfoDialog4=function(event){event.preventDefault();this.props.showHeader&&this.props.showHeader();c("MessengerDialogs.bs").removeDialog()}.bind(this),this.$MessengerPhotoInfoDialog3=function(u){if(!u){this.props.showHeader&&this.props.showHeader();this.props.closeInfo()}}.bind(this),q}o.prototype.render=function(){if(!this.props.fullMedia)return null;return c("MessengerEnvironment").messengerui?this.$MessengerPhotoInfoDialog1():this.$MessengerPhotoInfoDialog2()};o.prototype.$MessengerPhotoInfoDialog1=function(){var p=this.props.fullMedia;return c("React").createElement(c("MessengerDialog.react"),{onToggle:this.$MessengerPhotoInfoDialog3,ref:"dialog",type:"default",width:504},c("React").createElement(c("MessengerDialogHeader.react"),null,c("React").createElement(c("MessengerDialogTitle.react"),null,i._("Info")),c("React").createElement(c("MessengerDialogButton.react"),{action:"cancel",label:i._("Done"),onClick:this.$MessengerPhotoInfoDialog4,type:"primary"})),c("React").createElement("div",{className:"_2zn1"},c("React").createElement("div",{className:"_2zn2"},i._("Uploaded by")),c("React").createElement("div",{className:"_2zn4"},c("React").createElement("div",{className:"_2zn5"},p.creator.name),c("React").createElement("div",{className:"_2zn6"},c("MercuryTimestamp").getPreciseTimestamp(p.creation_time*1e3))),c("React").createElement("div",{className:"_2zn7"},this.showProfilePic())),this.$MessengerPhotoInfoDialog5(),this.$MessengerPhotoInfoDialog6())};o.prototype.$MessengerPhotoInfoDialog2=function(){var p=this.props.fullMedia;return c("React").createElement(c("XUIDialog.react"),{onToggle:this.$MessengerPhotoInfoDialog3,shown:this.props.infoOpen,ref:"dialog",type:"serif",width:504},c("React").createElement(c("XUIDialogHeader.react"),null,c("React").createElement(c("XUIDialogHeaderTitle.react"),null,i._("Info"))),c("React").createElement("div",{className:"_2zn1"},c("React").createElement("div",{className:"_2zn2"},i._("Uploaded by")),c("React").createElement("div",{className:"_2zn4"},c("React").createElement("div",{className:"_2zn5"},p.creator.name),c("React").createElement("div",{className:"_2zn6"},c("MercuryTimestamp").getPreciseTimestamp(p.creation_time*1e3))),c("React").createElement("div",{className:"_2zn7"},this.showProfilePic())),this.$MessengerPhotoInfoDialog5(),this.$MessengerPhotoInfoDialog6())};o.prototype.$MessengerPhotoInfoDialog6=function(){__p&&__p();var p=this.props.fullMedia.exif_data,q="";if(p){if(p.aperture)q=p.aperture+" ";if(p.focal_length){var r=p.focal_length.split("/"),s=parseInt(r[0],10)/(parseInt(r[1],10)||1);q+=s+"mm "}if(p.iso)q+="ISO "+p.iso}if(!q.length)return null;return c("React").createElement("div",{className:"_2zn1"},c("React").createElement("div",{className:"_2zn2"},i._("Camera")),c("React").createElement("div",{className:"_2zn4"},c("React").createElement("div",{className:"_2zn5"},p.model||"Camera"),c("React").createElement("div",{className:"_2zn6"},q)))};o.prototype.$MessengerPhotoInfoDialog5=function(){var p=this.props.fullMedia,q="";if(p.filesize>1e6)q=(p.filesize/1e6).toFixed(2)+"MB";else if(p.filesize>1e3)q=(p.filesize/1e3).toFixed(2)+"KB";else if(p.filesize>0)q=p.filesize+"B";var r=p.__typename==="MessageImage"?(p.original_dimensions.x*p.original_dimensions.y/1e6).toFixed(2)+"MP":"";return c("React").createElement("div",{className:"_2zn1"},c("React").createElement("div",{className:"_2zn2"},i._("Details")),c("React").createElement("div",{className:"_2zn4"},c("React").createElement("div",{className:"_2zn5"},p.filename),c("React").createElement("div",{className:"_2zn6"},r+" "+p.original_dimensions.x+" x "+p.original_dimensions.y+" "+q)))};o.prototype.showProfilePic=function(){var p=this.props.fullMedia;if(!p)return c("React").createElement(c("MessengerSpinner.react"),null);else{var q=c("MercuryIDs").getParticipantIDFromUserID(p.creator.id),r=c("MercuryParticipants").getNow(q);if(r)return c("React").createElement(l,{isMessengerUser:r.is_messenger_user,size:n,src:r.big_image_src||r.image_src});return c("React").createElement(c("MessengerSpinner.react"),null)}};o.propTypes={closeInfo:m.func,fullMedia:m.object,infoOpen:m.bool,photoID:m.string,showHeader:m.func};f.exports=c("RelayClassic_DEPRECATED").createContainer(o,{fragments:{fullMedia:function p(q){return function(){return{children:[{fieldName:"__typename",kind:"Field",metadata:{isRequisite:true},type:"String"},{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"},{children:[{fieldName:"creation_time",kind:"Field",metadata:{},type:"Time"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"}],fieldName:"creator",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:true},type:"Actor"},{fieldName:"filename",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"x",kind:"Field",metadata:{},type:"Float"},{fieldName:"y",kind:"Field",metadata:{},type:"Float"}],fieldName:"original_dimensions",kind:"Field",metadata:{canHaveSubselections:true},type:"Vect2"},{fieldName:"filesize",kind:"Field",metadata:{},type:"Int"},{children:[{fieldName:"iso",kind:"Field",metadata:{},type:"Int"},{fieldName:"aperture",kind:"Field",metadata:{},type:"String"},{fieldName:"focal_length",kind:"Field",metadata:{},type:"String"},{fieldName:"model",kind:"Field",metadata:{},type:"String"}],fieldName:"exif_data",kind:"Field",metadata:{canHaveSubselections:true},type:"MessageImageExifData"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageImage",type:"MessageImage"},{children:[{fieldName:"creation_time",kind:"Field",metadata:{},type:"Time"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"}],fieldName:"creator",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:true},type:"Actor"},{fieldName:"filename",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"x",kind:"Field",metadata:{},type:"Float"},{fieldName:"y",kind:"Field",metadata:{},type:"Float"}],fieldName:"original_dimensions",kind:"Field",metadata:{canHaveSubselections:true},type:"Vect2"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageVideo",type:"MessageVideo"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:true},name:"MessengerPhotoInfoDialog_FullMediaRelayQL",type:"Node"}}()}}})}),null);
__d("SpotlightMessagesViewerContainerRoute",["react-relay/classic/route/RelayRoute","react-relay/classic/query/RelayQL"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="SpotlightMessagesViewerContainerRoute";j.paramDefinition={photoID:{type:"String",required:true}};j.queries={fullMedia:function k(l){return function(m){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"photoID"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"},c("react-relay/classic/query/RelayQL").__frag(m)]),fieldName:"node",kind:"Query",metadata:{isAbstract:true,identifyingArgName:"id",identifyingArgType:"ID!"},name:"SpotlightMessagesViewerContainerRoute",type:"Node"}}(l.getFragment("fullMedia"))}};f.exports=j}),null);
__d("MessengerPhotoInfoDialogContainer.react",["MessengerPhotoInfoDialog.react","react-relay/classic/container/RelayRootContainer","SpotlightMessagesViewerContainerRoute","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"MessengerPhotoInfoDialogContainer",proptypes:{photoID:h.string.isRequired,showHeader:h.func},render:function j(){var k=new(c("SpotlightMessagesViewerContainerRoute"))({photoID:this.props.photoID});return c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("MessengerPhotoInfoDialog.react"),route:k,renderFetched:function(l){return c("React").createElement(c("MessengerPhotoInfoDialog.react"),babelHelpers["extends"]({},l,{closeInfo:this.props.closeInfo,photoID:this.props.photoID,infoOpen:this.props.infoOpen,showHeader:this.props.showHeader}))}.bind(this)})}});f.exports=i}),null);
__d("MessengerPhotoViewBottomBar.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(j){return c("React").createElement("div",{className:"_51an _50-m _16zz"},j.children)};f.exports=i}),null);
__d("MessengerPhotoViewHScroll.react",["cx","Animation","MessengerSharedPhoto.react","React","SphericalPhotoUtils"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings,l=c("React").PropTypes,m=200,n=80;i=babelHelpers.inherits(o,c("React").Component);j=i&&i.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$MessengerPhotoViewHScroll1=null,q}o.prototype.componentDidMount=function(){this.$MessengerPhotoViewHScroll2()};o.prototype.componentDidUpdate=function(){this.$MessengerPhotoViewHScroll2()};o.prototype.componentWillUnmount=function(){this.$MessengerPhotoViewHScroll1&&this.$MessengerPhotoViewHScroll1.stop();this.$MessengerPhotoViewHScroll1=null};o.prototype.render=function(){__p&&__p();var p=this.props.sharedPhotos,q=p.reduce(function(s,t){var u=t.node.image1===null?t.node.image:t.node.image1,v=t.node.photo_encodings?t.node.photo_encodings.length!==0:false,w=u.uri;if(v){var x=k(t.node.photo_encodings),y=x.smallThumbnail;w=y||w}if(u)s.push(c("React").createElement("div",{className:"_4dy9",key:t.node.legacy_attachment_id},c("React").createElement(c("MessengerSharedPhoto.react"),{className:"_42rl"+(this.props.photoID!==t.node.legacy_attachment_id?" _q1a":""),fbid:t.node.legacy_attachment_id,onClick:this.props.onScroll,uri:w,isSpherical:v})));return s}.bind(this),[]),r=(this.props.width-n)/2;return c("React").createElement("div",{className:"_463g"},c("React").createElement("div",{className:"_463h",ref:"childContainer"},c("React").createElement("div",{className:"_463j",style:{paddingLeft:r,paddingRight:r},ref:"scrollable"},q)))};o.prototype.$MessengerPhotoViewHScroll2=function(){var p=this.refs.childContainer?this.refs.childContainer.scrollLeft:0,q=this.props.sharedPhotos.findIndex(function(s){return s.node.legacy_attachment_id===this.props.photoID}.bind(this)),r=q*n;if(!this.$MessengerPhotoViewHScroll1)this.$MessengerPhotoViewHScroll1=new(c("Animation"))(this.refs.childContainer);this.$MessengerPhotoViewHScroll1.from("scrollLeft",p).to("scrollLeft",r).duration(m).go()};f.exports=o}),null);
__d("MessengerPhotoViewHeader.react",["cx","fbt","MessagingForwardingButtonNUX.react","MessengerActions","MessengerPhotoInfoDialogContainer.react","React","SpotlightViewerBottomBarLink","MessengerPhotoViewCloseLink.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerPhotoViewHeader3=function(){if(this.refs.forwardNUX)this.refs.forwardNUX.close();this.props.showForwardDialog&&this.props.showForwardDialog()}.bind(this),o}m.prototype.render=function(){return c("React").createElement("div",{className:"_51an _50-m _3c1i _5l-3",role:"banner"},this.$MessengerPhotoViewHeader1(),this.$MessengerPhotoViewHeader2())};m.prototype.$MessengerPhotoViewHeader2=function(){return c("React").createElement(c("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onClose})};m.prototype.$MessengerPhotoViewHeader1=function(){var n=void 0,o=void 0;if(!this.props.disableForward){n=c("React").createElement(c("SpotlightViewerBottomBarLink"),{className:"_3c1o",onClick:this.$MessengerPhotoViewHeader3,ref:"forwardButton"},c("React").createElement("div",{className:"_2msr _3oo2"}),i._("Forward"));o=c("React").createElement(c("MessagingForwardingButtonNUX.react"),{contextRef:function(){return this.refs.forwardButton}.bind(this),ref:"forwardNUX"},i._("Send this image to other people in separate messages."))}return c("React").createElement("div",{key:"buttonsContainer",ref:"buttons"},c("React").createElement(c("SpotlightViewerBottomBarLink"),{ajaxify:this.props.url,className:"_3c1o",rel:"async"},c("React").createElement("div",{className:"_3ooo _2msr"}),i._("Download")),n,o,c("React").createElement(c("SpotlightViewerBottomBarLink"),{className:"_3c1o",href:"#",onClick:this.props.openInfo,ref:"moreInfo"},c("React").createElement("div",{className:"_3c1k _2msr"}),i._("Info")))};m.propTypes={disableForward:l.bool,onClose:l.func,openInfo:l.func,photoID:l.string,showForwardDialog:l.func,url:l.object};f.exports=m}),null);
__d("XMessagingVideoAttachmentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/mercury/attachments/video/",{video_id:{type:"String",required:true},video_container_id:{type:"String",required:true},width:{type:"Int",required:true},height:{type:"Int",required:true},start_muted:{type:"Bool",defaultValue:false},no_fullscreen:{type:"Bool",defaultValue:false},load_player_controller:{type:"Bool",defaultValue:false},hide_controls_on_finish:{type:"Bool",defaultValue:false},hide_url_menu_option:{type:"Bool",defaultValue:false},is_share:{type:"Bool",defaultValue:false},render_play_button:{type:"Bool",defaultValue:false},start_timestamp:{type:"Int",defaultValue:0}})}),null);
__d("MessengerVideoPlayer.react",["cx","ActorURI","AsyncRequest","BackgroundImage.react","Event","FullScreen","MessengerSpinner.react","React","ShimButton.react","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","Vector","XMessagingVideoAttachmentController","SpotlightMercurySharedMediaViewer.react","SubscriptionsHandler","cssURL","getFullScreenElement","gkx","guid","joinClasses","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l="_ox1";i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(n){__p&&__p();j.constructor.call(this,n);this.$MessengerVideoPlayer2=true;this.$MessengerVideoPlayer3=[];this.$MessengerVideoPlayer4=-1;this.$MessengerVideoPlayer5=false;this.$MessengerVideoPlayer6=false;this.state={playerAPI:null,forcePause:false};this.$MessengerVideoPlayer10=function(o){__p&&__p();if(!c("gkx")("AT59RsD6Oiw6mLCf0aoZOq_3iqj624RxAYXc9aMeKCQhXLf14PDA6oVEBHRx-eSc-flBhEiq2DauG8iOn4NpXhX0rqJcIa4_Rg1Bf-oX75YjPQ")&&!this.props.onClick||!this.isVideoClicked(o))return;o.preventDefault();if(c("gkx")("AT59RsD6Oiw6mLCf0aoZOq_3iqj624RxAYXc9aMeKCQhXLf14PDA6oVEBHRx-eSc-flBhEiq2DauG8iOn4NpXhX0rqJcIa4_Rg1Bf-oX75YjPQ")&&this.props.isOnStage){o.stopPropagation();this.isState(c("VideoPlayerStates").PLAYING)?this.pause(c("VideoPlayerReason").USER):this.play(c("VideoPlayerReason").USER)}else{this.pause(c("VideoPlayerReason").USER);this.props.onClick&&this.props.onClick()}}.bind(this);this.$MessengerVideoPlayer11=function(o){if(!this.isRightClick(o))return;o.stopPropagation();o.preventDefault();c("setImmediate")(function(){this.props.onSelect&&this.props.onSelect()}.bind(this))}.bind(this);this.$MessengerVideoPlayer8=function(){if(!this.$MessengerVideoPlayer2||this.state.forcePause)return;if(this.$MessengerVideoPlayer6){this.play(new(c("VideoPlayerReasonTransitionHelper"))(c("VideoPlayerReason").PAGE_VISIBILITY));this.$MessengerVideoPlayer6=false}}.bind(this);this.$MessengerVideoPlayer7=function(){if(!this.$MessengerVideoPlayer2||this.state.forcePause||!(this.state.playerAPI&&this.state.playerAPI.isMuted()))return;this.$MessengerVideoPlayer6=!!this.state.playerAPI&&this.state.playerAPI.isState(c("VideoPlayerStates").PLAYING);this.pause()}.bind(this);this.$MessengerVideoPlayer1=c("guid")();if(this.props.isInThread){this.listeners=new(c("SubscriptionsHandler"))();this.listeners.addSubscriptions(c("Event").listen(window,"blur",this.$MessengerVideoPlayer7),c("Event").listen(window,"focus",this.$MessengerVideoPlayer8))}}m.prototype.shouldComponentUpdate=function(n){var o=document.getElementById(this.$MessengerVideoPlayer1.toString()),p=c("FullScreen").isFullScreen();if(o!=null&&p&&o.children[0].children[0]===c("getFullScreenElement")())return false;var q=!!(n.stageDimensions&&n.stageDimensions!==this.props.stageDimensions);if(q){this.$MessengerVideoPlayer4=this.getCurrentTimePosition();this.$MessengerVideoPlayer5=!this.isState(c("VideoPlayerStates").PLAYING)}return!this.props.videoData||n.videoData.id!==this.props.videoData.id||q};m.prototype.UNSAFE_componentWillReceiveProps=function(n){if(!this.$MessengerVideoPlayer2)return;if(this.props.isInThread&&n.isVisible!==this.props.isVisible)n.isVisible&&!this.state.forcePause?this.play(new(c("VideoPlayerReasonTransitionHelper"))(c("VideoPlayerReason").VIDEO_VISIBILITY)):this.pause()};m.prototype.componentDidMount=function(){if(this.props.videoData)this.$MessengerVideoPlayer9()};m.prototype.componentDidUpdate=function(){this.$MessengerVideoPlayer3.forEach(function(n){return n.abandon()});this.$MessengerVideoPlayer3=[];if(this.props.videoData)this.$MessengerVideoPlayer9()};m.prototype.componentWillUnmount=function(){this.pause(c("VideoPlayerReason").UNLOADED);this.seek(0);this.$MessengerVideoPlayer3.forEach(function(n){return n.abandon()});this.listeners&&this.listeners.release();if(this.state.playerAPI)this.state.playerAPI.detachRootNode();if(this.state.playerAPI&&this.state.playerAPI.destroy)this.state.playerAPI.destroy()};m.prototype.isVideoLoaded=function(){var n=!!this.state.playerAPI;!n;if(this.isState(c("VideoPlayerStates").FALLBACK))return false;return n};m.prototype.isVideoClicked=function(n){if(n.target instanceof HTMLElement)return n.target.classList.contains(l);return false};m.prototype.isRightClick=function(n){n=n||window.event;return n.button===2};m.prototype.play=function(n){if(!this.isVideoLoaded())return;if(this.state.playerAPI)this.state.playerAPI.play(n)};m.prototype.pause=function(n){if(!this.isVideoLoaded())return;if(this.state.playerAPI)this.state.playerAPI.pause(n)};m.prototype.seek=function(n){if(!this.isVideoLoaded())return;if(this.state.playerAPI)this.state.playerAPI.seek(n)};m.prototype.getCurrentTimePosition=function(){return this.isVideoLoaded()&&this.state.playerAPI?this.state.playerAPI.getCurrentTimePosition():-1};m.prototype.render=function(){var n=this.props.videoData,o=c("React").createElement("div",{ref:"placeholder"},c("React").createElement(c("MessengerSpinner.react"),{color:"blue",size:c("MessengerSpinner.react").large_size})),p={};if(n&&n.url){var q=n.original_dimensions;p.backgroundImage=c("cssURL")(n.url);o=c("React").createElement("div",{ref:"placeholder"},c("React").createElement(c("BackgroundImage.react"),{className:this.props.className,width:q.x,height:q.y,loadingIndicatorStyle:"large",backgroundSize:"cover",ref:"placeholder",style:p,src:n.url}))}return c("React").createElement(c("ShimButton.react"),{className:c("joinClasses")(this.props.className,"_4-od"),id:this.$MessengerVideoPlayer1,onClick:this.$MessengerVideoPlayer10,onMouseDown:this.$MessengerVideoPlayer11,style:p},o)};m.prototype.$MessengerVideoPlayer9=function(){__p&&__p();var n=this.props.videoData;if(n){var o=n.original_dimensions;if(this.props.stageDimensions)o=c("SpotlightMercurySharedMediaViewer.react").getImageDimensionsForStage(new(c("Vector"))(n.original_dimensions.x,n.original_dimensions.y),this.props.stageDimensions);var p=c("XMessagingVideoAttachmentController").getURIBuilder().setString("video_id",n.legacy_attachment_id).setString("video_container_id",this.$MessengerVideoPlayer1).setInt("width",o.x).setInt("height",o.y).setInt("start_timestamp",this.$MessengerVideoPlayer4>0?Math.round(this.$MessengerVideoPlayer4):0).setBool("start_muted",n.start_muted).setBool("no_fullscreen",n.no_fullscreen).setBool("load_player_controller",true).setBool("hide_controls_on_finish",n.hide_controls_on_finish).setBool("hide_url_menu_option",Boolean(n.hide_url_menu_option)).setBool("is_share",n.is_share).setBool("render_play_button",this.props.isInThread).getURI(),q=this.props.attachment;if(q&&q.metadata&&q.metadata.pageid)p=c("ActorURI").create(p,q.metadata.pageid);var r=new(c("AsyncRequest"))();this.$MessengerVideoPlayer3.push(r);r.setMethod("GET").setStatusElement(this.refs.placeholder).setURI(p).setRelativeTo(this).setReadOnly(true).setHandler(function(s){}).send()}};m.prototype.$MessengerVideoPlayer12=function(){if(this.props.isVisible&&this.isState(c("VideoPlayerStates").FINISHED)){this.seek(0);this.play(c("VideoPlayerReason").LOOP)}else if(this.props.isVisible&&this.isState(c("VideoPlayerStates").PAUSED)&&!this.$MessengerVideoPlayer6)this.setState({forcePause:true});else if(this.isState(c("VideoPlayerStates").PLAYING))this.setState({forcePause:false})};m.prototype.onVideoLoaded=function(){if(!this.$MessengerVideoPlayer2)return;this.state.playerAPI&&this.state.playerAPI.addListener("stateChange",function(){return this.$MessengerVideoPlayer12()}.bind(this));if(this.props.isVisible&&!this.$MessengerVideoPlayer5&&!this.state.forcePause)this.play(c("VideoPlayerReason").AUTOPLAY);else this.pause();this.$MessengerVideoPlayer4=-1;this.$MessengerVideoPlayer5=false};m.prototype.isState=function(n){return!!(this.state.playerAPI&&this.state.playerAPI.isState(n))};m.propTypes={attachment:k.object,className:k.string,isInThread:k.bool,isVisible:k.bool,isOnStage:k.bool,stageDimensions:k.instanceOf(c("Vector")),videoData:k.object,onClick:k.func,onSelect:k.func};m.invokeVideoLoaded=function(n,o,p){__p&&__p();n.$MessengerVideoPlayer2=p;o.setAllowCrossPageTransition(true);if(o.isState(c("VideoPlayerStates").LOADING))n.stateChangeListener=o.addListener("stateChange",function(){if(!o.isState(c("VideoPlayerStates").LOADING)){if(n.state&&n.state.playerAPI)return;n.setState({playerAPI:o},n.onVideoLoaded);if(n.stateChangeListener)n.stateChangeListener.remove()}});else n.setState({playerAPI:o},n.onVideoLoaded)};f.exports=m}),null);
__d("MessagingForwardAttachmentDialog.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("MessagingForwardAttachmentDialogImpl.react").__setRef("MessagingForwardAttachmentDialog.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("SpotlightMessagesViewerPagers.react",["cx","LeftRight.react","Link.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(j){return c("React").createElement(c("LeftRight.react"),null,c("React").createElement(c("Link.react"),{className:"_322u"+(!j.disablePrevArrow?" _2bbb":"")+" _50-m"},c("React").createElement("div",{className:(!j.disablePrevArrow?"_4ksl":"")+(!j.disablePrevArrow?" _4ksm":"")})),c("React").createElement(c("Link.react"),{className:"_322u"+(!j.disableNextArrow?" _2bbc":"")+" _50-m"},c("React").createElement("div",{className:(!j.disableNextArrow?"_4ksl":"")+(!j.disableNextArrow?" _4kso":"")})))};f.exports=i}),null);
__d("XMessagingPhotoDownloadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/mercury/attachments/photo/",{photo_id:{type:"String",required:true}})}),null);
__d("XMessagingShareAttachmentDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/mercury/attachments/share/dialog/",{__asyncDialog:{type:"Int"}})}),null);
__d("SpotlightMercurySharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","AsyncDialog","AsyncRequest","BootloadedComponent.react","ChatPhotoViewFooterHScroll.react","ChatPhotoViewHeader.react","Event","FunnelLogger","JSResource","KeyEventController","MessagingForwardAttachmentDialog.react","MessengerPhotoInfoDialogContainer.react","MessengerThreadSharedMediaHelper","MessengerVideoPlayer.react","Parent","PhotoUtils","React","SpotlightViewer","SpotlightViewerImage","SpotlightMessagesViewerPagers.react","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","XMessagingShareAttachmentDialogController"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("React").PropTypes,o=88,p=30,q="WWW_MESSENGER_SHARE_TO_FB_FUNNEL",r="_4-og";l=babelHelpers.inherits(s,c("React").Component);m=l&&l.prototype;function s(){__p&&__p();var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=m.constructor).call.apply(t,[this].concat(w)),this.$SpotlightMercurySharedMediaViewer1=undefined,this.$SpotlightMercurySharedMediaViewer2=[],this.state={hasPrevPage:false,hasNextPage:false,firstPhotoLoaded:false,isLoading:false,mediaData:[],numberInOneBatch:p,photoData:null,showForward:false,showInfo:false,stageDimensions:new(c("Vector"))()},this.$SpotlightMercurySharedMediaViewer11=function(){if(!this.state.photoData)return null;return c("React").createElement(c("ChatPhotoViewFooterHScroll.react"),{onScroll:this.$SpotlightMercurySharedMediaViewer18,photoID:this.state.photoData.node.id,sharedPhotos:this.state.mediaData,updateNumberInOneBatch:this.$SpotlightMercurySharedMediaViewer19,width:this.state.stageDimensions.x})}.bind(this),this.$SpotlightMercurySharedMediaViewer19=function(y){this.setState({numberInOneBatch:y})}.bind(this),this.$SpotlightMercurySharedMediaViewer18=function(y){if(!this.state.mediaData||this.state.isLoading)return;var z=this.state.mediaData.findIndex(function(B){return B.node.legacy_attachment_id===y});if(z<0)return;var A=this.state.mediaData[z];this.setState({photoData:A});this.$SpotlightMercurySharedMediaViewer22(z)}.bind(this),this.$SpotlightMercurySharedMediaViewer5=function(y,event){__p&&__p();if(this.state.photoData==null||this.state.isLoading)return;if(event&&!!c("Parent").bySelector(event.target,"._170l"))return;if(event&&event.target instanceof HTMLElement&&event.target.className===r)this.$SpotlightMercurySharedMediaViewer10();var z=this.state.mediaData.findIndex(function(B){this.state.photoData!=null||k(0);return B.node.legacy_attachment_id===this.state.photoData.node.legacy_attachment_id}.bind(this));if(z<0||z===this.state.mediaData.length-1&&!this.state.hasNextPage&&y)return;if(z===0&&!y){this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer7(this.state.photoData,1,function(B){if(B===0)return;this.$SpotlightMercurySharedMediaViewer5(y)}.bind(this))}.bind(this));return}var A=y?this.state.mediaData[z+1]:this.state.mediaData[z-1];this.setState({photoData:A});this.$SpotlightMercurySharedMediaViewer22(z)}.bind(this),this.$SpotlightMercurySharedMediaViewer10=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView()}.bind(this),this.$SpotlightMercurySharedMediaViewer16=function(){this.setState({showForward:true})}.bind(this),this.$SpotlightMercurySharedMediaViewer20=function(){this.setState({showForward:false})}.bind(this),this.$SpotlightMercurySharedMediaViewer15=function(){this.setState({showInfo:true})}.bind(this),this.$SpotlightMercurySharedMediaViewer21=function(){this.setState({showInfo:false})}.bind(this),this.$SpotlightMercurySharedMediaViewer17=function(){this.setState({showForward:false,showInfo:false});c("FunnelLogger").appendAction(q,"click");var y=this.state.photoData;if(!this.$SpotlightMercurySharedMediaViewer14()||!(y&&y.node))return;var z=y.node.legacy_attachment_id,A=c("XMessagingShareAttachmentDialogController").getURIBuilder().getURI(),B=new(c("AsyncRequest"))(A).setData({attachment_id:z}).setMethod("POST");c("AsyncDialog").send(B)}.bind(this),this.$SpotlightMercurySharedMediaViewer23=function(y,z,A){__p&&__p();var B=Object.keys(y)[0],C=y[B].message_shared_media,D=C.page_info,E=C.edges.length;if(E!==0){var F=this.state.mediaData;switch(z){case 0:this.setState({photoData:C.edges[0],mediaData:[C.edges[0]],firstPhotoLoaded:true});break;case 1:F=F.concat(C.edges);this.setState({hasNextPage:D.has_next_page,mediaData:F});break;case-1:F=C.edges;F=F.concat(this.state.mediaData);this.setState({mediaData:F,hasPrevPage:D.has_previous_page});break}}this.setState({isLoading:false});A(E)}.bind(this),this.$SpotlightMercurySharedMediaViewer3=function(){var y=new(c("Vector"))(c("Vector").getViewportDimensions().x,c("Vector").getViewportDimensions().y-o);return y},u}s.prototype.getDefaultProps=function(){return{enableShareToFB:false}};s.prototype.componentDidMount=function(){__p&&__p();this.setState({isLoading:true,stageDimensions:this.$SpotlightMercurySharedMediaViewer3()},function(){return this.$SpotlightMercurySharedMediaViewer4(this.props.photoID)}.bind(this));this.$SpotlightMercurySharedMediaViewer1=new(c("SubscriptionsHandler"))();this.$SpotlightMercurySharedMediaViewer1.addSubscriptions(c("Event").listen(window,"resize",function(){this.setState({stageDimensions:this.$SpotlightMercurySharedMediaViewer3()})}.bind(this)),c("KeyEventController").registerKey("LEFT",function(){this.$SpotlightMercurySharedMediaViewer5(false);return false}.bind(this)),c("KeyEventController").registerKey("RIGHT",function(){this.$SpotlightMercurySharedMediaViewer5(true);return false}.bind(this)));if(this.props.enableShareToFB)c("FunnelLogger").startFunnel(q)};s.prototype.UNSAFE_componentWillUpdate=function(t,u){if(u.firstPhotoLoaded!==this.state.firstPhotoLoaded)this.setState({isLoading:true},function(){this.$SpotlightMercurySharedMediaViewer6(u.photoData,u.numberInOneBatch,function(){});this.$SpotlightMercurySharedMediaViewer7(u.photoData,u.numberInOneBatch,function(){})}.bind(this));if(u.numberInOneBatch!=this.state.numberInOneBatch&&!u.isLoading)this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer6(u.mediaData[u.mediaData.length-1],u.numberInOneBatch,function(){})}.bind(this))};s.prototype.componentWillUnmount=function(){this.$SpotlightMercurySharedMediaViewer1&&this.$SpotlightMercurySharedMediaViewer1.release();this.$SpotlightMercurySharedMediaViewer1=null;this.$SpotlightMercurySharedMediaViewer2.forEach(function(t){return t.abandon()})};s.prototype.render=function(){var t=this.$SpotlightMercurySharedMediaViewer8(),u=this.state.stageDimensions,v=this.state.isLoading||this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var w=this.state.mediaData.findIndex(function(t){this.state.photoData!=null||k(0);return t.node.id===this.state.photoData.node.id}.bind(this)),x=c("React").createElement("div",null,this.$SpotlightMercurySharedMediaViewer9(),this.props.disablepaging?null:c("React").createElement(c("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:w<=0&&!this.state.hasPrevPage,disableNextArrow:!this.state.hasNextPage&&w>=this.state.mediaData.length-1}));return c("React").createElement("span",null,c("React").createElement(c("SpotlightViewer"),{className:"_53vs",onHide:this.$SpotlightMercurySharedMediaViewer10,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName},c("React").createElement(c("SpotlightViewport"),{active:false,fadeInNOut:true,media:t,onClick:this.$SpotlightMercurySharedMediaViewer5,ref:"viewport",showLoadingIndicator:v,stageDimensions:u,useWidth:true},x),this.$SpotlightMercurySharedMediaViewer11()),this.$SpotlightMercurySharedMediaViewer12(),this.$SpotlightMercurySharedMediaViewer13())};s.prototype.$SpotlightMercurySharedMediaViewer9=function(){if(!this.state.photoData)return null;var t=this.state.photoData,u=t.node.legacy_attachment_id,v=c("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",u).getURI();if(this.props.actorid)v=c("ActorURI").create(v,this.props.actorid);return c("React").createElement(c("ChatPhotoViewHeader.react"),{disableForward:this.props.disableForward,enableShareToFB:this.$SpotlightMercurySharedMediaViewer14(),onClose:this.$SpotlightMercurySharedMediaViewer10,openInfo:this.$SpotlightMercurySharedMediaViewer15,ref:"photoviewheader",showForwardDialog:this.$SpotlightMercurySharedMediaViewer16,showShareDialog:this.$SpotlightMercurySharedMediaViewer17,url:v})};s.prototype.$SpotlightMercurySharedMediaViewer12=function(){if(!this.state.photoData)return null;var t=j._("Forward in separate messages");return c("React").createElement(c("MessagingForwardAttachmentDialog.react"),{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$SpotlightMercurySharedMediaViewer20,shown:this.state.showForward,title:t})};s.prototype.$SpotlightMercurySharedMediaViewer13=function(){return this.state.showInfo?c("React").createElement(c("MessengerPhotoInfoDialogContainer.react"),{closeInfo:this.$SpotlightMercurySharedMediaViewer21,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):c("React").createElement("xhp",null)};s.prototype.$SpotlightMercurySharedMediaViewer14=function(){var t=this.state.photoData;if(!t)return false;return!!this.props.enableShareToFB&&t.node.__typename==="MessageImage"&&t.node.image1.uri.indexOf(".gif")<0};s.prototype.$SpotlightMercurySharedMediaViewer22=function(t){var u=this.state.numberInOneBatch,v=this.state.mediaData;if(t<=u/2)this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer7(v[0],u,function(){})}.bind(this));else if(t>=v.length-u/2&&this.state.hasNextPage)this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer6(v[v.length-1],u,function(){})}.bind(this))};s.prototype.$SpotlightMercurySharedMediaViewer4=function(t){var u=c("MessengerThreadSharedMediaHelper").search(this.props.threadID,String(t),function(v){return this.$SpotlightMercurySharedMediaViewer23(v,0,function(){})}.bind(this));this.$SpotlightMercurySharedMediaViewer2.push(u)};s.prototype.$SpotlightMercurySharedMediaViewer6=function(t,u,v){var w=c("MessengerThreadSharedMediaHelper").loadMorePrevious(this.props.threadID,t.cursor,u||1,function(x){return this.$SpotlightMercurySharedMediaViewer23(x,1,v)}.bind(this));this.$SpotlightMercurySharedMediaViewer2.push(w)};s.prototype.$SpotlightMercurySharedMediaViewer7=function(t,u,v){var w=t?t.cursor:null,x=c("MessengerThreadSharedMediaHelper").loadMoreLatest(this.props.threadID,w,u||1,function(y){return this.$SpotlightMercurySharedMediaViewer23(y,-1,v)}.bind(this));this.$SpotlightMercurySharedMediaViewer2.push(x)};s.prototype.$SpotlightMercurySharedMediaViewer8=function(){__p&&__p();if(this.state.photoData&&this.state.photoData.node){var t=this.state.photoData.node;if(t.__typename&&t.__typename==="MessageVideo")return this.$SpotlightMercurySharedMediaViewer24();var u=this.state.stageDimensions,v=this.$SpotlightMercurySharedMediaViewer25(t,u);if(!v)return null;if(t.photo_encodings&&t.photo_encodings.length!==0)return this.$SpotlightMercurySharedMediaViewer26(t.legacy_attachment_id,v,t.photo_encodings,u);var w=s.getImageDimensionsForStage(new(c("Vector"))(v.width,v.height),u);return this.$SpotlightMercurySharedMediaViewer27(v,w)}else return null};s.prototype.$SpotlightMercurySharedMediaViewer24=function(){if(this.state.photoData)return c("React").createElement(c("MessengerVideoPlayer.react"),{isOnStage:true,isVisible:true,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions});return null};s.prototype.$SpotlightMercurySharedMediaViewer27=function(t,u){return c("React").createElement(c("SpotlightViewerImage"),{dimensions:u,ref:"image",src:t.uri})};s.prototype.$SpotlightMercurySharedMediaViewer26=function(t,u,v,w){return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMercurySharedMediaViewer.react"),bootloadPlaceholder:c("React").createElement("div",null),height:w.y,width:w.x,fbid:t,thumbnail:u.uri,photoEncodings:v,stageDimensions:this.state.stageDimensions})};s.prototype.$SpotlightMercurySharedMediaViewer25=function(t,u){var v=null,w=c("PhotoUtils").getImagesFromData(t);w=w.sort(function(y,z){return z.width-y.width});if(window.devicePixelRatio&&window.devicePixelRatio>1)u=new(c("Vector"))(u.x*window.devicePixelRatio,u.y*window.devicePixelRatio);for(var x=0;x<w.length;x++)if(!v||w[x].width>=u.x||w[x].height>=u.y)v=w[x];return v};s.propTypes={disableForward:n.bool,enableShareToFB:n.bool,onClosePhotoView:n.func,photoID:n.string,rootClassName:n.string,threadID:n.string};s.getImageDimensionsForStage=function(t,u){__p&&__p();var v=t.x,w=t.y,x=u.x,y=u.y,z=v/w,A=x/y;if(v>=x||w>=y)if(A<z){v=x;w=Math.round(x/z)}else if(A>z){v=Math.round(y*z);w=y}else{v=x;w=y}else if(z<A)v=Math.round(w*z);else w=Math.round(v/z);return new(c("Vector"))(v,w)};f.exports=s}),null);
__d("SpotlightMessengerSharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","BootloadedComponent.react","JSResource","MessengerPhotoViewHScroll.react","Event","KeyEventController","MessengerForwardAttachmentDialogReact.bs","MessengerPhotoInfoDialogContainer.react","MessengerPhotoViewHeader.react","MessengerSharedMediaActions","MessengerVideoPlayer.react","Parent","PhotoUtils","React","SpotlightViewer","SpotlightViewerImage","SpotlightMessagesViewerPagers.react","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","MessengerPhotoViewBottomBar.react"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("MessengerForwardAttachmentDialogReact.bs").jsComponent,o=c("React").PropTypes,p=88,q=80,r=30,s="_4-og";l=babelHelpers.inherits(t,c("React").Component);m=l&&l.prototype;function t(){__p&&__p();var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=m.constructor).call.apply(u,[this].concat(x)),this.$SpotlightMessengerSharedMediaViewer1=undefined,this.$SpotlightMessengerSharedMediaViewer2=[],this.state={photoData:null,showForward:false,showInfo:false,stageDimensions:new(c("Vector"))()},this.$SpotlightMessengerSharedMediaViewer14=function(z){if(!this.props.sharedMedia)return;var A=this.props.sharedMedia.findIndex(function(C){return C.node.legacy_attachment_id===z});if(A<0)return;var B=this.props.sharedMedia[A];this.setState({photoData:B});this.$SpotlightMessengerSharedMediaViewer17(A)}.bind(this),this.$SpotlightMessengerSharedMediaViewer4=function(z,event){__p&&__p();if(this.state.photoData==null)return;var A=this.state.photoData;if(event&&!!c("Parent").bySelector(event.target,"._170l"))return;if(event&&event.target instanceof HTMLElement&&event.target.className===s)this.$SpotlightMessengerSharedMediaViewer7();var B=this.props.sharedMedia.findIndex(function(D){return D.node.legacy_attachment_id===A.node.legacy_attachment_id});if(B<0||B===this.props.sharedMedia.length-1&&!this.props.hasNextPage&&z)return;if(B===0&&!z){c("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,this.props.sharedMedia[0].cursor,r);return}var C=z?this.props.sharedMedia[B+1]:this.props.sharedMedia[B-1];this.setState({photoData:C});this.$SpotlightMessengerSharedMediaViewer17(B)}.bind(this),this.$SpotlightMessengerSharedMediaViewer7=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView()}.bind(this),this.$SpotlightMessengerSharedMediaViewer12=function(){this.setState({showForward:true})}.bind(this),this.$SpotlightMessengerSharedMediaViewer15=function(){this.setState({showForward:false})}.bind(this),this.$SpotlightMessengerSharedMediaViewer11=function(){this.setState({showInfo:true})}.bind(this),this.$SpotlightMessengerSharedMediaViewer16=function(){this.setState({showInfo:false})}.bind(this),v}t.prototype.componentDidMount=function(){__p&&__p();var u=this.props.sharedMedia.find(function(v){return v.node.legacy_attachment_id===this.props.photoID}.bind(this));this.setState({photoData:u,stageDimensions:this.$SpotlightMessengerSharedMediaViewer3()});this.$SpotlightMessengerSharedMediaViewer1=new(c("SubscriptionsHandler"))();this.$SpotlightMessengerSharedMediaViewer1.addSubscriptions(c("Event").listen(window,"resize",function(){this.setState({stageDimensions:this.$SpotlightMessengerSharedMediaViewer3()})}.bind(this)),c("KeyEventController").registerKey("LEFT",function(){this.$SpotlightMessengerSharedMediaViewer4(false);return false}.bind(this)),c("KeyEventController").registerKey("RIGHT",function(){this.$SpotlightMessengerSharedMediaViewer4(true);return false}.bind(this)))};t.prototype.componentWillUnmount=function(){this.$SpotlightMessengerSharedMediaViewer1&&this.$SpotlightMessengerSharedMediaViewer1.release();this.$SpotlightMessengerSharedMediaViewer1=null;this.$SpotlightMessengerSharedMediaViewer2.forEach(function(u){return u.abandon()})};t.prototype.render=function(){var u=this.$SpotlightMessengerSharedMediaViewer5(),v=this.state.stageDimensions,w=this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var x=this.props.sharedMedia.findIndex(function(u){this.state.photoData!=null||k(0);return u.node.id===this.state.photoData.node.id}.bind(this)),y=c("React").createElement("div",null,this.$SpotlightMessengerSharedMediaViewer6(),this.props.disablepaging?null:c("React").createElement(c("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:x<=0&&!this.props.hasPrevPage,disableNextArrow:!this.props.hasNextPage&&x>=this.props.sharedMedia.length-1}));return c("React").createElement("span",null,c("React").createElement(c("SpotlightViewer"),{className:"_53vs",onHide:this.$SpotlightMessengerSharedMediaViewer7,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName},c("React").createElement(c("SpotlightViewport"),{active:false,fadeInNOut:true,media:u,onClick:this.$SpotlightMessengerSharedMediaViewer4,ref:"viewport",showLoadingIndicator:w,stageDimensions:v,useWidth:true},y),this.$SpotlightMessengerSharedMediaViewer8()),this.$SpotlightMessengerSharedMediaViewer9(),this.$SpotlightMessengerSharedMediaViewer10())};t.prototype.$SpotlightMessengerSharedMediaViewer6=function(){if(!this.state.photoData)return null;var u=this.state.photoData.node.legacy_attachment_id,v=c("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",u).getURI();if(this.props.actorid)v=c("ActorURI").create(v,this.props.actorid);return c("React").createElement(c("MessengerPhotoViewHeader.react"),{disableForward:this.props.disableForward,onClose:this.$SpotlightMessengerSharedMediaViewer7,openInfo:this.$SpotlightMessengerSharedMediaViewer11,photoID:this.props.photoID,ref:"photoviewheader",showForwardDialog:this.$SpotlightMessengerSharedMediaViewer12,url:v})};t.prototype.$SpotlightMessengerSharedMediaViewer13=function(u){return u?Math.ceil(u/q):r};t.prototype.$SpotlightMessengerSharedMediaViewer8=function(){if(!this.state.photoData)return null;var u=this.state.photoData,v=c("React").createElement("button",{className:"_2n5b",onClick:function(){return this.props.openAlbum(u.node.legacy_attachment_id)}.bind(this),type:"button"},c("React").createElement("div",{className:"_3por"}));return c("React").createElement(c("MessengerPhotoViewBottomBar.react"),null,c("React").createElement(c("MessengerPhotoViewHScroll.react"),{onScroll:this.$SpotlightMessengerSharedMediaViewer14,photoID:u.node.legacy_attachment_id,sharedPhotos:this.props.sharedMedia,width:this.state.stageDimensions.x}),v)};t.prototype.$SpotlightMessengerSharedMediaViewer9=function(){if(!this.state.photoData||this.props.disableForward)return null;var u=j._("Forward in separate messages");return c("React").createElement(n,{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$SpotlightMessengerSharedMediaViewer15,shown:this.state.showForward,title:u})};t.prototype.$SpotlightMessengerSharedMediaViewer10=function(){return this.state.showInfo?c("React").createElement(c("MessengerPhotoInfoDialogContainer.react"),{closeInfo:this.$SpotlightMessengerSharedMediaViewer16,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):c("React").createElement("xhp",null)};t.prototype.$SpotlightMessengerSharedMediaViewer17=function(u){var v=this.$SpotlightMessengerSharedMediaViewer13(this.state.stageDimensions.x),w=this.props.sharedMedia;if(u<=v/2){c("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,w[0].cursor,v);if(w.length<v&&this.props.hasNextPage)c("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,w[w.length-1].cursor,v)}else if(u>=w.length-v/2&&this.props.hasNextPage)c("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,w[w.length-1].cursor,v)};t.prototype.$SpotlightMessengerSharedMediaViewer3=function(){var u=new(c("Vector"))(c("Vector").getViewportDimensions().x,c("Vector").getViewportDimensions().y-p);return u};t.prototype.$SpotlightMessengerSharedMediaViewer5=function(){__p&&__p();if(this.state.photoData&&this.state.photoData.node){var u=this.state.photoData.node;if(u.__typename&&u.__typename==="MessageVideo")return this.$SpotlightMessengerSharedMediaViewer18();var v=this.state.stageDimensions,w=this.$SpotlightMessengerSharedMediaViewer19(u,v);if(!w)return null;if(u.photo_encodings&&u.photo_encodings.length!==0)return this.$SpotlightMessengerSharedMediaViewer20(u.legacy_attachment_id,w,u.photo_encodings,v);var x=t.getImageDimensionsForStage(new(c("Vector"))(w.width,w.height),v);return this.$SpotlightMessengerSharedMediaViewer21(w,x)}else return null};t.prototype.$SpotlightMessengerSharedMediaViewer18=function(){if(this.state.photoData)return c("React").createElement(c("MessengerVideoPlayer.react"),{isVisible:true,isOnStage:true,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions});return null};t.prototype.$SpotlightMessengerSharedMediaViewer21=function(u,v){return c("React").createElement(c("SpotlightViewerImage"),{dimensions:v,ref:"image",src:u.uri})};t.prototype.$SpotlightMessengerSharedMediaViewer20=function(u,v,w,x){return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMessengerSharedMediaViewer.react"),bootloadPlaceholder:c("React").createElement("div",null),height:x.y,width:x.x,fbid:u,thumbnail:v.uri,photoEncodings:w,stageDimensions:this.state.stageDimensions})};t.prototype.$SpotlightMessengerSharedMediaViewer19=function(u,v){var w=c("PhotoUtils").getImagesFromData(u);return w[w.length-1]};t.propTypes={disableForward:o.bool,hasPrevPage:o.bool,hasNextPage:o.bool,onClosePhotoView:o.func,openAlbum:o.func,photoID:o.string,rootClassName:o.string,threadID:o.string,sharedMedia:o.arrayOf(o.object)};t.getImageDimensionsForStage=function(u,v){__p&&__p();var w=u.x,x=u.y,y=v.x,z=v.y,A=w/x,B=y/z;if(w>=y||x>=z)if(B<A){w=y;x=Math.round(y/A)}else if(B>A){w=Math.round(z*A);x=z}else{w=y;x=z}else if(A<B)w=Math.round(x*A);else x=Math.round(w/A);return new(c("Vector"))(w,x)};f.exports=t}),null);
__d("SpotlightMessengerSharedMediaViewerContainer.react",["FluxContainer","MessengerSharedMediaStore","MessengerSharedMediaActions","React","SpotlightMessengerSharedMediaViewer.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MessengerSharedMediaStore")]};j.calculateState=function(k,l){var m=c("MessengerSharedMediaStore").getState(),n=m.sharedMedia.get(l.threadID),o=m.isLoading.get(l.threadID);return{sharedMedia:n,isLoading:o}};j.prototype.componentDidMount=function(){c("MessengerSharedMediaActions").loadCurrent(this.props.threadID,this.props.photoID)};j.prototype.render=function(){if(!this.state.sharedMedia)return null;var k=this.state.sharedMedia&&this.state.sharedMedia.edges.find(function(l){return l.node.legacy_attachment_id===this.props.photoID}.bind(this));if(!k)return null;return c("React").createElement(c("SpotlightMessengerSharedMediaViewer.react"),{disableForward:this.props.disableForward,hasPrevPage:this.state.sharedMedia&&this.state.sharedMedia.has_previous_page,hasNextPage:this.state.sharedMedia&&this.state.sharedMedia.has_next_page,onClosePhotoView:this.props.onClosePhotoView,openAlbum:this.props.openAlbum,photoID:this.props.photoID,rootClassName:this.props.rootClassName,sharedMedia:this.state.sharedMedia&&this.state.sharedMedia.edges,threadID:this.props.threadID})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j,{withProps:true})}),null);
__d("MessengerThreadSharedPhotos.react",["cx","MessengerSharedPhotosAlbumViewContainer.react","React","SpotlightViewer","SpotlightMessengerSharedMediaViewerContainer.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={photoView:this.props.findFBID,albumView:""},this.$MessengerThreadSharedPhotos3=function(r){this.setState({albumView:r,photoView:""})}.bind(this),this.$MessengerThreadSharedPhotos4=function(){this.setState({albumView:""})}.bind(this),this.$MessengerThreadSharedPhotos5=function(r){this.setState({albumView:"",photoView:r})}.bind(this),this.$MessengerThreadSharedPhotos6=function(){this.setState({photoView:""})}.bind(this),this.$MessengerThreadSharedPhotos7=function(r){this.setState({photoView:r})}.bind(this),n}l.prototype.componentDidUpdate=function(){!this.state.photoView&&!this.state.albumView&&this.props.onCloseSharedPhotos()};l.prototype.render=function(){var m=this.state.photoView?this.$MessengerThreadSharedPhotos1():null,n=this.state.albumView?this.$MessengerThreadSharedPhotos2():null;return c("React").createElement("div",null,n,m)};l.prototype.$MessengerThreadSharedPhotos1=function(){return c("React").createElement(c("SpotlightMessengerSharedMediaViewerContainer.react"),{disableForward:false,onClosePhotoView:this.$MessengerThreadSharedPhotos6,openAlbum:this.$MessengerThreadSharedPhotos3,photoID:this.state.photoView,rootClassName:"",threadID:this.props.threadFBID})};l.prototype.$MessengerThreadSharedPhotos2=function(){return c("React").createElement(c("SpotlightViewer"),{className:"_3ode",onHide:this.$MessengerThreadSharedPhotos4,open:true,ref:"spotlightViewer"},c("React").createElement(c("MessengerSharedPhotosAlbumViewContainer.react"),{onClick:this.$MessengerThreadSharedPhotos5,onCloseSharedPhotos:this.props.onCloseSharedPhotos,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView}))};l.propTypes={findFBID:k.string,onCloseSharedPhotos:k.func,threadFBID:k.string};f.exports=l}),null);
__d("MessengerThreadSharedPhotosReact.bs",["ReasonReact.bs","MessengerThreadSharedPhotos.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){return c("ReasonReact.bs").wrapJsForReason(c("MessengerThreadSharedPhotos.react"),{findFBID:i,onCloseSharedPhotos:j,threadFBID:k},l)}g.make=h}),null);
__d("MessengerVideoPlayerReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessengerVideoPlayer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q,r){return c("ReasonReact.bs").wrapJsForReason(c("MessengerVideoPlayer.react"),{attachment:c("bs_js_null_undefined").fromOption(i),className:c("bs_js_null_undefined").fromOption(j),isInThread:c("Utils.bs").optionBoolToNullUndefinedBoolean(k),isVisible:c("Utils.bs").optionBoolToNullUndefinedBoolean(l),isOnStage:c("Utils.bs").optionBoolToNullUndefinedBoolean(m),stageDimensions:c("bs_js_null_undefined").fromOption(n),videoData:o,onClick:c("bs_js_null_undefined").fromOption(p),onSelect:c("bs_js_null_undefined").fromOption(q)},r)}g.make=h}),null);
__d("MessengerVideoReact.bs",["cx","ix","bs_curry","React","Utils.bs","ImageReact.bs","ReasonReact.bs","joinClasses","bs_js_primitive","MessengerPhotoReact.bs","MessengerVideoPlayerReact.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact.bs").statelessComponent("MessengerVideo");function k(o){var p=o.metadata,q=0;if(p==null||!c("Utils.bs").isDefined(p.fbid))q=1;else{var r=window.screen.width>1800&&c("Utils.bs").isDefined(p.large_size)&&c("Utils.bs").isDefined(p.large_preview),s=p.fbid,t=r?p.large_size:p.inbox_size,u=t==null?{x:0,y:0}:{x:t.width,y:t.height},v=r?p.large_preview:p.inbox_preview;return{legacy_attachment_id:s,original_dimensions:u,start_muted:true,hide_controls_on_finish:true,url:v,is_share:false}}if(q===1)return{legacy_attachment_id:null,original_dimensions:null,start_muted:true,hide_controls_on_finish:true,url:null,is_share:false}}function l(o){var p=o%60,q=p<10;return String(o/60|0)+(":"+((q?"0":"")+String(p)))}function m(o,p,q,r,s,t,u,v){__p&&__p();var w=o?o[0]:"",x=function x(){var A=p.metadata,B=p.media,C=A==null?B==null?0:c("bs_js_primitive").null_undefined_to_opt(B.duration):c("bs_js_primitive").null_undefined_to_opt(A.duration);if(C)return l(C[0]);else return null},y=function y(){if(t)return c("bs_curry")._1(t[0],p);else return 0},z=function z(A){var B=A.legacy_attachment_id;if(c("Utils.bs").isDefined(B))return[c("ReasonReact.bs").element(0,0,c("MessengerVideoPlayerReact.bs").make([p],[c("joinClasses")(w,"_ccq","_4tsk","_3o67",q?"_52mr":"",q?"_1byr":"")],[true],s,0,0,A,[y],u,[]))];else return 0};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],function(){var A=k(p),B=z(A);if(B)return B[0];else return c("ReasonReact.bs").element(0,0,c("MessengerPhotoReact.bs").make([c("joinClasses")(w,"_ccq")],p,q,0,r,t,[c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(["_ccr"],0,[i("27983")],0,0,0,0,[])),c("React").createElement("span",{className:"_ccs"},x(0))]))},j[10],j[11],j[12],j[13]]}var n=1800;g.component=j;g.large_window_width=n;g.constructVideoData=k;g.formatDuration=l;g.make=m}),null);
__d("MessengerXMATextBlock.react",["cx","LineClamp.react","React","ShimButton.react","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=26;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerXMATextBlock1=function(){this.props.url&&window.open(this.props.url)}.bind(this),o}m.prototype.render=function(){if(!this.props)return c("React").createElement("div",{className:"__6j"});var n=this.props.width?{maxWidth:this.props.width-l,textAlign:"left"}:{textAlign:"left"},o={textDecoration:"none"};return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"__6j _43kk"),style:n},c("React").createElement(c("ShimButton.react"),{form:"link",onClick:this.$MessengerXMATextBlock1,style:o},this.renderTitle(),this.renderDescription(),this.renderSource()))};m.prototype.renderTitle=function(){if(!this.props.title)return null;return c("React").createElement("div",{className:"__6k"},c("React").createElement(c("LineClamp.react"),{lines:2,lineHeight:16},this.props.title))};m.prototype.renderDescription=function(){if(!this.props.description)return null;return c("React").createElement("div",{className:"__6l"},c("React").createElement(c("LineClamp.react"),{lines:2,lineHeight:15},this.props.description))};m.prototype.renderSource=function(){if(!this.props.source)return null;return c("React").createElement("div",{className:"__6m"},c("React").createElement(c("LineClamp.react"),{lines:1,lineHeight:14},this.props.source))};m.propTypes={className:k.string,description:k.string,source:k.string,title:k.string,url:k.string,width:k.number};f.exports=m}),null);
__d("MessengerXMATextBlockReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerXMATextBlock.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o){return c("ReasonReact.bs").wrapJsForReason(c("MessengerXMATextBlock.react"),{className:c("bs_js_null_undefined").fromOption(i),description:c("bs_js_null_undefined").fromOption(j),source:c("bs_js_null_undefined").fromOption(k),title:c("bs_js_null_undefined").fromOption(l),url:c("bs_js_null_undefined").fromOption(m),width:c("bs_js_null_undefined").fromOption(n)},o)}g.make=h}),null);
__d("MessengerVideoXMAReact.bs",["cx","React","Utils.bs","ReasonReact.bs","joinClasses","bs_js_primitive","MessengerVideoPlayerReact.bs","MessengerXMATextBlockReact.bs"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact.bs").statelessComponent("MessengerVideoXMA");function j(p){if(p==null)return null;else{var q=p.width>p.height?p.width:p.height,r=window.screen.width>1800,s=r?640:450;if(q<=s)return{x:p.width,y:p.height};else{var t=s/q,u=p.width*t|0,v=p.height*t|0;return{x:u,y:v}}}}function k(p){var q=p.media,r=p.target;if(q==null||r==null||!(c("Utils.bs").isDefined(q.image_size)&&c("Utils.bs").isDefined(r.video_id)))return 0;else{var s=q.image_size;return[{legacy_attachment_id:r.video_id,original_dimensions:j(s),start_muted:true,hide_controls_on_finish:true,url:q.image,is_share:true}]}}function l(p,q,r,s,t){var u=p?p[0]:"",v=function v(x){if(x)return c("ReasonReact.bs").element(0,0,c("MessengerVideoPlayerReact.bs").make([q],[c("joinClasses")(u,"_ccq","_4tsk","_3o67","_52mr","_1byr")],[true],r,0,0,x[0],0,s,[]));else return null},w=function w(x){return c("ReasonReact.bs").element(0,0,c("MessengerXMATextBlockReact.bs").make(["_2f5n _4br2 _29ew _3dug"],c("bs_js_primitive").null_undefined_to_opt(q.description),c("bs_js_primitive").null_undefined_to_opt(q.source),c("bs_js_primitive").null_undefined_to_opt(q.video_title),c("bs_js_primitive").null_undefined_to_opt(q.uri),x?[x[0].x]:0,[]))};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],function(){var x=k(q),y=v(x);return c("React").createElement("div",{className:"_3duc"},y,w(x?c("bs_js_primitive").null_undefined_to_opt(x[0].original_dimensions):0))},i[10],i[11],i[12],i[13]]}var m=640,n=450,o=1800;g.large_preview_dim=m;g.thumbinail_inbox_dim=n;g.large_window_width=o;g.component=i;g.adjustSize=j;g.constructVideoData=k;g.make=l}),null);
__d("MessengerPhotosGroupReact.bs",["cx","URI","bs_list","bs_array","bs_block","bs_curry","React","Utils.bs","ActorURI","bs_caml_array","MercuryIDs","ReasonReact.bs","joinClasses","bs_js_primitive","bs_caml_primitive","bs_js_null_undefined","MessagesViewerSetID","MessengerPhotoReact.bs","MessengerVideoReact.bs","MercuryAttachmentType","getPageIDFromThreadID","MessagingGiftWrapReact.bs","MessengerVideoXMAReact.bs","bs_caml_builtin_exceptions","ChatSpeakingStickerReact.bs","MercuryAttachmentPayload.bs","MessengerAttachmentViewer","MessagingFlowerBorderReact.bs","MessengerThreadSharedPhotosReact.bs"],(function aa(ba,a,ca,da,ea,b,fa){"use strict";__p&&__p();var c="empty-spacer",d=a("ReasonReact.bs").reducerComponent("MessengerPhotosGroup");function e(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){__p&&__p();var v=i?i[0]:"",w=function w(g){var B=g.length,C=B===2||B===4;return a("joinClasses")(v,"_2n8h",B===1?"_2n8i":"",C?"_4ksk":"",B>1&&!C?"_2n8k":"","_5fk1")},x=function x(){__p&&__p();if(p){var B=p[0],C=B.thread_fbid;if(C==null)return a("MercuryIDs").getThreadFBIDFromThreadID(B.thread_id);else{var D=a("bs_caml_primitive").caml_string_compare(C,"")===0;if(D)return a("MercuryIDs").getThreadFBIDFromThreadID(B.thread_id);else return C}}else return null},y=function y(B,C){var D=x(0),E=C.metadata,F=E==null?null:E.fbid;return a("ReasonReact.bs").element(0,0,a("MessengerThreadSharedPhotosReact.bs").make(F,function(){return a("bs_curry")._1(B[3],0)},D,[]))},z=function z(B,C,D,E){__p&&__p();var F=a("Utils.bs").isDefined(C.deduplication_key),G=C.metadata,H;if(F)H=C.deduplication_key;else if(G==null)H=C.upload_id;else{var I=G.fbid;H=I==null?null:I}var J=a("Utils.bs").$pipe$unknown(H==null?0:[H],""),K;if(!D&&!a("Utils.bs").isSomeTrue(m)){var L=C.metadata,M=0;if(L==null||!a("Utils.bs").isDefined(L.fbid))M=1;else{var N=!a("Utils.bs").isDefined(C.app_attribution);K=N?[function(C){return a("bs_curry")._1(B[3],[C])}]:[function(Y){__p&&__p();var Z=L,C=Y;if(a("Utils.bs").isTruthy(C.preview_uploading))return 0;else if(C.attach_type===a("MercuryAttachmentType").VIDEO){var O=Z.dimensions,U=O==null?{x:null,y:null}:{x:O.width,y:O.height};a("MessengerAttachmentViewer").renderVideo({pageID:a("bs_js_null_undefined").fromOption(t),rootClassName:"_1j1h",videoID:Z.fbid,videoSize:U,videoURI:C.url});return 0}else if(C.attach_type===a("MercuryAttachmentType").PHOTO||C.attach_type===a("MercuryAttachmentType").THIRDPARTYSTICKER||C.attach_type===a("MercuryAttachmentType").ANIMATED_IMAGE){var ga=g.length===1,ha=C.url,R;if(!a("Utils.bs").isSomeTrue(n)&&C.attach_type===a("MercuryAttachmentType").PHOTO&&j!==0){var ia=x(0),ja=j===[1],$=new(a("URI"))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:ia,image_id:Z.fbid}),ka=t?new(a("ActorURI").create)($,t[0]):$;R=[a("MessagesViewerSetID").MESSAGES_VIEW_ALL_IN_THREAD,ka,ja]}else R=[null,ha,ga];a("MessengerAttachmentViewer").bootstrapWithConfig({actorid:a("bs_js_null_undefined").fromOption(t),dimensions:Z.dimensions,disableForward:t!==0,disablePaging:R[2],endpoint:R[1],fbid:Z.fbid,rootClassName:"_1j1h",setID:R[0],snapToPhoto:true,src:C.preview_url});return 0}else if(a("Utils.bs").isDefined(C.uri))return window.open(C.uri);else return 0}]}if(M===1){var O=a("Utils.bs").isDefined(C.uri);if(O){var P=C.uri;K=[function(){return window.open(P)}]}else K=0}}else K=0;var Q=a("Utils.bs").$pipe$unknown(h,C.attach_type);if(Q===a("MercuryAttachmentType").PHOTO||Q===a("MercuryAttachmentType").ANIMATED_IMAGE||Q===a("MercuryAttachmentType").THIRDPARTYSTICKER)return a("ReasonReact.bs").element([J],0,a("MessengerPhotoReact.bs").make(0,C,E,o,q,K,[]));else if(Q===a("MercuryAttachmentType").VIDEO){var R=C.metadata,S=0;if(R==null||!a("Utils.bs").isTruthy(R.render_as_sticker))S=1;else{var T=R.dimensions,U=T==null?{height:null,width:null}:{height:T.height,width:T.width},V=C.url;return a("ReasonReact.bs").element(0,0,a("ChatSpeakingStickerReact.bs").make(V,U,[]))}if(S===1)if(a("Utils.bs").isSomeTrue(n))return a("ReasonReact.bs").element([J],0,a("MessengerVideoXMAReact.bs").make(0,C,o,r,[]));else return a("ReasonReact.bs").element([J],0,a("MessengerVideoReact.bs").make(0,C,E,q,o,K,r,[]))}else if(Q===c){var W={className:"_4tsk _4rf-"},X=a("bs_js_primitive").null_undefined_to_opt(C.key);if(X)W.key=X[0];return a("React").createElement("div",W)}else throw[a("bs_caml_builtin_exceptions").invalid_argument,Q+" is not handled by MessengerPhotosGroup"]},A=function A(B,g,C){__p&&__p();if(g.length===1)return z(B,a("bs_caml_array").caml_array_get(g,0),C,true);else{var D=g.length===2||g.length===4,E=D?2:3,F=0,G=[0],H=g.length;while(G[0]<H){var I=a("bs_caml_primitive").caml_int_min(E,H-G[0]|0),J=a("bs_array").init(E,function(I){return function(K){var D=K<I;if(D)return z(B,a("bs_caml_array").caml_array_get(g,G[0]+K|0),C,false);else{var L="ghost"+String(E-K|0),M=a("MercuryAttachmentPayload.bs").create(c,[L],new(a("URI"))(""));return z(B,M,C,false)}}}(I));F=[a("React").createElement("div",{key:String(G[0]),className:"_2n8g"},J),F];G[0]=G[0]+E|0}return a("bs_array").of_list(a("bs_list").rev(F))}};return[d[0],d[1],d[2],d[3],function(){a("MessengerAttachmentViewer").preload();return 0},d[5],d[6],d[7],d[8],function(B){var C=p?a("Utils.bs").isDefined(a("getPageIDFromThreadID")(p[0].thread_id)):false,D=A(B,g,C),E=a("Utils.bs").isSomeTrue(l),F=E?a("React").createElement("div",undefined,D):D,G=B[1][0],H=G?y(B,G[0]):null,I=a("Utils.bs").isSomeTrue(l),J=a("Utils.bs").isSomeTrue(k);return a("React").createElement("div",{className:w(g),tabIndex:0},H,F,I?a("ReasonReact.bs").element(0,0,a("MessagingGiftWrapReact.bs").make(0,s,[])):null,J?a("ReasonReact.bs").element(0,0,a("MessagingFlowerBorderReact.bs").make(-10,[])):null)},function(){return[0]},d[11],function(B,u){if(B)return a("bs_block").__(0,[[[B[0]]]]);else return a("bs_block").__(0,[[0]])},d[13]]}var f=a("ReasonReact.bs").wrapReasonForJs(d,function(g){return e(g.attachments,a("bs_js_primitive").null_undefined_to_opt(g.attachType),a("bs_js_primitive").null_undefined_to_opt(g.className),g.count,a("Utils.bs").nullUndefinedBooleanToOptionBool(g.hasFlowerBorder),a("Utils.bs").nullUndefinedBooleanToOptionBool(g.isGiftWrapped),a("Utils.bs").nullUndefinedBooleanToOptionBool(g.isPageMessage),a("Utils.bs").nullUndefinedBooleanToOptionBool(g.isXMA),a("Utils.bs").nullUndefinedBooleanToOptionBool(g.isVisible),a("bs_js_primitive").null_undefined_to_opt(g.message),a("bs_js_primitive").null_undefined_to_opt(g.onAttachmentLoad),a("bs_js_primitive").null_undefined_to_opt(g.onSelect),a("bs_js_primitive").null_undefined_to_opt(g.onUnwrap),a("bs_js_primitive").null_undefined_to_opt(g.pageID),[])});b.empty_spacer_type=c;b.component=d;b.make=e;b.jsComponent=f}),null);
__d("MessengerPhotosGroup.react",["MessengerPhotosGroupReact.bs"],(function a(b,c,d,e,f,g){"use strict";var h=c("MessengerPhotosGroupReact.bs").jsComponent;f.exports=h}),null);
__d("MessengerStickerUtils",["MercuryAttachmentType"],(function a(b,c,d,e,f,g){"use strict";function h(k){return!!(k&&k.attach_type===c("MercuryAttachmentType").STICKER)}function i(k){var l=k.attachments;return!!(k.is_like_preview||k.sticker_id||l&&l.length===1&&h(l[0]))}function j(k){return k.size===1&&i(k.first())}f.exports={isStickerMessageGroup:j,isStickerMessage:i,isStickerAttachment:h}}),null);
__d("MessengerVoiceClipAttachment.react",["cx","MercuryAttachmentAudioClip.react","MercuryShareAttachmentRenderLocations","MessagingGiftWrap.react","MessagingFlowerBorder.react","React","messengerCustomColorUtils"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.attachment,n=m.metadata.duration/1e3,o=!!m.app_attribution,p={};if(this.props.customColor)p=c("messengerCustomColorUtils").customBubbleStyle(this.props.customColor,p);var q=this.props.isGiftWrapped?c("React").createElement(c("MessagingGiftWrap.react"),{onUnwrap:this.props.onUnwrap}):null,r=this.props.hasFlowerBorder?c("React").createElement(c("MessagingFlowerBorder.react"),{offset:-10}):null;return c("React").createElement("div",{className:"_hh7 _s1-"+(!!this.props.customColor?" _5sxi":"")+(!o?" _52mr":"")+(o?" _mxz":"")+" _1fz8"+(o?" _1-wa":"")+" _1nqp",style:p},c("React").createElement(c("MercuryAttachmentAudioClip.react"),{customColor:this.props.customColor,src:m.url,duration:n,key:"audio:"+this.props.message.message_id,showHelp:false,width:200,location:c("MercuryShareAttachmentRenderLocations").MESSENGER,rootClassName:"_3czg"+(o?" _4yjw":"")+" _2poz _ui9"}),q,r)};function l(){i.apply(this,arguments)}l.propTypes={attachment:k.object.isRequired,customColor:k.string,isGiftWrapped:k.bool,message:k.object.isRequired,onUnwrap:k.func};f.exports=l}),null);
__d("XStickerInTrayController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/stickers/in_tray/",{pack_id:{type:"Int",required:true}})}),null);
__d("StickersPackInTray",["Promise","AsyncRequest","react-relay/classic/query/RelayQL","react-relay/classic/store/RelayStore","XStickerInTrayController","react-relay/classic/query/createRelayQuery"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={onIsPackInTray:function i(j,k,l){__p&&__p();var m=c("react-relay/classic/query/createRelayQuery")(function(){return{children:[{children:[{calls:[{kind:"Call",metadata:{type:"StickerInterfaces"},name:"interface",value:{kind:"CallVariable",callVariableName:"stickerInterface"}},{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallValue",callValue:1e4}}],children:[{children:[{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"}],fieldName:"node",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:true},type:"StickerPack"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"PacksInTrayEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:"PageInfo"}],fieldName:"tray_packs",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true},type:"PacksInTrayConnection"}],fieldName:"sticker_store",kind:"Field",metadata:{canHaveSubselections:true},type:"StickerStore"}],fieldName:"viewer",kind:"Query",metadata:{},name:"StickersPackInTray",type:"Viewer"}}(),{stickerInterface:k}),n=c("react-relay/classic/store/RelayStore").readQuery(m);n=n&&n.length>0?n[0]:null;if(n&&n.sticker_store&&n.sticker_store.tray_packs&&n.sticker_store.tray_packs.edges)return new(c("Promise"))(function(p,q){return p({in_sticker_tray:n.sticker_store.tray_packs.edges.filter(function(r){return r.node.id===j}).length>0})}).then(l);var o=c("XStickerInTrayController").getURIBuilder().setInt("pack_id",j).getURI();return new(c("Promise"))(function(p,q){return new(c("AsyncRequest"))(o).setHandler(function(r){return p(r.getPayload())}).setAllowCrossPageTransition(true).send()}).then(l)}};f.exports=h}),null);
__d("StickersStateStore",["FluxReduceStore","immutable","StickersActions","StickersConfig","StickersDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.__moduleID=f.id,l}j.prototype.getInitialState=function(){return c("immutable").Map({recentStickers:[],recentStickersLoaded:false,showFlyout:false,storePackID:null,threadID:null,trayLoaded:false,trayPackID:null})};j.prototype.reduce=function(k,l){__p&&__p();var m=l,n=c("StickersActions").Types;switch(m.type){case n.ADD_RECENT_STICKER:var o=[m.sticker];k.get("recentStickers").forEach(function(p){if(p.id===m.sticker.id)return;o.push(p)});return k.set("recentStickers",o.splice(0,c("StickersConfig").max_mru_stickers));case n.HIDE_FLYOUT:return k.set("showFlyout",false);case n.LOAD_RECENT_STICKERS:return k.set("recentStickersLoaded",true).set("recentStickers",m.stickers);case n.SELECT_STORE_PACK:return k.set("storePackID",m.packID);case n.SELECT_TRAY_PACK:return k.set("trayPackID",m.packID).set("trayLoaded",true);case n.SHOW_FLYOUT:return k.set("showFlyout",true).set("threadID",m.threadID);case n.TRAY_LOADED:return k.set("trayLoaded",true);default:return k}};f.exports=new j(c("StickersDispatcher"))}),null);
__d("StickersStoreController",["cx","Bootloader","DialogFitHeight","DOM","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","PureStoreBasedStateMixin","React","ReactDOM","StickersActions","StickersDispatcher","StickersStateStore","XUIDialog.react","XUIDialogBody.react","XUISpinner.react","isSocialPlugin","requestAnimationFrame"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=688,k=320,l=null,m=c("React").createClass({displayName:"StoreLayer",mixins:[c("PureStoreBasedStateMixin")(c("StickersStateStore"))],propTypes:{isComposer:i.bool,onToggle:i.func.isRequired,shown:i.bool.isRequired},getDefaultProps:function r(){return{isComposer:false}},statics:{calculateState:function r(){return{packID:c("StickersStateStore").getState().get("storePackID")}}},getInitialState:function r(){return{renderStore:function s(){return c("React").createElement("div",{className:"_5r5e"},c("React").createElement(c("XUISpinner.react"),{background:"light",size:"large"}))}}},UNSAFE_componentWillMount:function r(){c("StickersDispatcher").explicitlyRegisterStores([c("StickersStateStore")])},shouldComponentUpdate:function r(s){return!!s.shown},componentDidMount:function r(){c("Bootloader").loadModules(["StickersStore.react","react-relay/classic/container/RelayRootContainer","StickersStorePackListRoute","StickersStorePackDetailRoute"],function(s,t,u,v){this.setState({renderStore:function(){var w=this.state.packID?new v({packID:this.state.packID}):new u();return c("React").createElement(t,{Component:s,route:w,renderFetched:function(x){return c("React").createElement(s,babelHelpers["extends"]({},x,{isComposer:this.props.isComposer,packID:this.state.packID,shown:this.props.shown}))}.bind(this)})}.bind(this)})}.bind(this),"StickersStoreController")},_onToggle:function r(s){c("requestAnimationFrame")(function(){return this.props.onToggle(s)}.bind(this))},render:function r(){var s=c("isSocialPlugin")()&&document.body.offsetWidth<j?k:j;return c("React").createElement(c("XUIDialog.react"),{behaviors:{DialogFitHeight:c("DialogFitHeight"),LayerAutoFocus:c("LayerAutoFocus"),LayerFadeOnHide:c("LayerFadeOnHide"),LayerHideOnEscape:c("LayerHideOnEscape")},onToggle:this._onToggle,shown:this.props.shown,width:s},c("React").createElement(c("XUIDialogBody.react"),{className:"_5rq- autofocus"},this.state.renderStore()))}}),n=function n(r){if(!l){l=c("DOM").create("div");c("DOM").appendContent(document.body,l)}c("ReactDOM").render(c("React").createElement(m,{isComposer:r,onToggle:p,shown:true}),l)},o=function o(){if(!l)return;c("ReactDOM").render(c("React").createElement(m,{shown:false,onToggle:p}),l)},p=function p(r){r?n():o()},q={showStore:function r(s,t){c("StickersActions").selectStorePack(s);n(!!t)}};f.exports=q}),null);
__d("isRetina",[],(function a(b,c,d,e,f,g){"use strict";f.exports=function(){return(window.devicePixelRatio||1)>1}}),null);
__d("MessengerAttachmentRenderer",["cx","EmojiSticker.react","MercuryAttachment","MercuryAttachmentType","MercuryAudioType","MercuryIDs","MercuryShareAttachment.react","MercuryShareAttachmentRenderLocations","MessagingFlowerBorder.react","MessagingFlowerBorderChecker","MessagingGiftWrap.react","MessagingGiftWrapChecker","MessengerErrorAttachment.react","MessengerFileAttachment.react","MessengerFromViewerUtils","MessengerHotLikePreview.react","MessengerHotLikeUtils","MessengerPhotosGroup.react","MessengerStickerUtils","MessengerSupportedEmojiUtils","MessengerVoiceClipAttachment.react","MessengerWebDriverTestIDs","React","Sticker.react","StickerAssetType","StickerConstants","StickerInterfaces","StickerUtils","StickersActions","StickersPackInTray","StickersStoreController","StoryAttachmentStyle","XStickerAssetController","idx","isRetina","wrapNullableForReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=700,j="sticker:",k="giftwrap:",l="share:",m="_1c_u",n="_3o6m",o=function o(q){return q===Object(q)},p={getAttachmentsInsideBubble:function q(r,s){var t=c("MercuryAttachment").get(r).filter(o).filter(function(u){return!this.attachmentShouldAppearOutsideBubble(u)}.bind(this));return this._getAttachmentComponents(t,r,s)},getAttachmentsOutsideBubble:function q(r,s,t,u){var v=c("MercuryAttachment").get(r).filter(o).filter(function(w){return this.attachmentShouldAppearOutsideBubble(w)}.bind(this));return this._getAttachmentComponents(v,r,s,t,u)},_getAttachmentComponents:function q(r,s,t,u,v){var w=this._getPhotosGroup(r.filter(c("MercuryAttachment").isPhotoGroupAttachment),s,t,u),x=r.filter(function(y){return!c("MercuryAttachment").isPhotoGroupAttachment(y)}).map(function(y){return this._getAttachmentComponent(y,s,t,u,v)}.bind(this));if(w)x.push(w);return x},_getAttachmentComponent:function q(r,s,t,u,v){__p&&__p();var w=u&&u.customColor,x=u&&u.onUnwrap,y=u&&u.isVisible,z=u&&u.isFromViewer,A=u&&u.isPageMessage,B=u&&u.onSelect;if(c("MessengerStickerUtils").isStickerAttachment(r))return this._getStickerComponent(r,s,w,x);if(this.isEmojiLikeAttachment(r))return this._getEmojiLikeAttachment(r,s,x);if(this.isVoiceClip(r))return this._getVoiceClip(r,s,w,x);if(this.isFileAttchment(r))return this._getFileComponent(r,s);if(this.isP2P(r)||this.isShareAttachment(r))return this._getShareAttachment(r,s,t,y,z,A,B,v);if(this.isErrorAttachment(r))return this._getErrorAttachment(r,s);return null},_getStickerComponent:function q(r,s,t,u){__p&&__p();if(s.is_like_preview)return this._maybeGiftWrapSticker(c("React").createElement(c("MessengerHotLikePreview.react"),{customColor:t,customLike:s.customLike,key:"hlp:"+s.like_preview_since,since:s.like_preview_since}),s,u);var v=r.metadata;if(!v){v=c("MessengerHotLikeUtils").getMetadataForHotLike(s.sticker_id);if(!v){v={};var w=c("StickerUtils").getScaledDimensions(c("StickerConstants").THREAD_SIZE,c("StickerConstants").THREAD_SIZE,c("StickerConstants").THREAD_SIZE),x=w.height,y=w.width;v.height=x;v.width=y}v.stickerID=s.sticker_id}var z=c("XStickerAssetController").getURIBuilder().setInt("sticker_id",v.stickerID),A=null,B=null;if(c("isRetina")()){A=v.paddedSpriteURI2x;B=v.spriteURI2x}else{A=v.paddedSpriteURI;B=v.spriteURI}var C=v.stickerID.toString(),D=c("React").createElement(c("Sticker.react"),{accessibilityLabel:v.accessibilityLabel,className:"_2poz _ui9"+(c("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(s)&&!!c("MessengerHotLikeUtils").getMetadataForHotLike(C)?" _4ue_":""),animationTrigger:"hover",customColor:t,frameCount:v.frameCount||1,frameRate:v.frameRate||c("StickerConstants").DEFAULT_FRAME_RATE,framesPerCol:v.framesPerCol||1,framesPerRow:v.framesPerRow||1,key:j+s.message_id,onStickerClick:function E(F,C){c("StickersPackInTray").onIsPackInTray(F,c("StickerInterfaces").MESSAGES,function(G){if(G.in_sticker_tray){c("StickersActions").selectTrayPack(F);c("StickersActions").showStickerFlyout(s.thread_id)}else c("StickersStoreController").showStore(F)})},packID:v.packID&&v.packID.toString(),paddedSpriteURI:A,sourceHeight:v.height,sourceURI:z.setEnum("image_type",c("StickerAssetType").IMAGE).getURI().toString(),sourceWidth:v.width,spriteURI:B,stickerID:C,testID:c("MessengerWebDriverTestIDs").STICKER});return this._maybeGiftWrapSticker(D,s,u)},_getEmojiLikeAttachment:function q(r,s,t){var u=c("MessengerSupportedEmojiUtils").transferSize(r.size),v=c("MessengerSupportedEmojiUtils").getHotLikeEmojiData(s.body,u),w=v?v.emoji:undefined;if(!v)return this._getErrorAttachment(r,s);var x=c("React").createElement(c("EmojiSticker.react"),{className:"_2poz _ui9",key:j+s.message_id,emoji:s.body,emojiImage:w,sourceURI:""});return this._maybeGiftWrapSticker(x,s,t)},_getShareAttachment:function q(r,s,t,u,v,w,x,y){var z,A,B=null;if(s&&s.platform_xmd)B=JSON.parse(s.platform_xmd);var C=(z=r)!=null?(z=z.share)!=null?(z=z.messenger_ctas)!=null?(z=z[0])!=null?z.page_id:z:z:z:z,D=(A=r)!=null?(A=A.share)!=null?(A=A.target)!=null?(A=A.items)!=null?(A=A[0])!=null?(A=A.call_to_actions)!=null?(A=A[0])!=null?A.page_id:A:A:A:A:A:A:A,E=C||D,F=E?c("MercuryIDs").getParticipantIDFromUserID(E):s.author;return c("React").createElement(c("MercuryShareAttachment.react"),{attachment:r.share,isFromViewer:v,isPageMessage:w,isSponsored:s.is_sponsored,isVisible:!!u,key:l+s.message_id,location:c("MercuryShareAttachmentRenderLocations").MESSENGER,maxWidth:i,messageID:s.message_id,mnMessageType:B&&B.template_type,onComponentLoaded:t,onSelect:x,pageID:F,threadID:s.thread_id,afterDecorators:y})},_getVoiceClip:function q(r,s,t,u){t=c("MessengerFromViewerUtils").isFromViewer(s)?t||undefined:undefined;return c("React").createElement(c("MessengerVoiceClipAttachment.react"),{attachment:r,customColor:t,isGiftWrapped:c("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(s),hasFlowerBorder:c("MessagingFlowerBorderChecker").shouldRenderWithFlowerBorder(s),key:"audio:"+s.message_id,message:s,onUnwrap:function(v){function u(){return v.apply(this,arguments)}u.toString=function(){return v.toString()};return u}(function(){u&&u()})})},_getErrorAttachment:function q(r,s){return c("React").createElement(c("MessengerErrorAttachment.react"),{attachment:r,key:"error:"+s.message_id})},_getPhotosGroup:function q(r,s,t,u){__p&&__p();if(!r.length)return null;var v=u&&u.onUnwrap,w=u&&u.isVisible,x=u&&u.onSelect,y=u&&u.isPageMessage,z=u&&u.pageID,A=c("MessagingFlowerBorderChecker").shouldRenderWithFlowerBorder(s),B=c("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(s)&&this._rendersWithoutAttribution(r);return c("React").createElement(c("MessengerPhotosGroup.react"),{attachments:r,className:"_2poz _52mr _ui9",count:r.length,hasFlowerBorder:A,isGiftWrapped:B,isPageMessage:y,isVisible:!!w,key:"photos:"+s.message_id,message:s,onSelect:x,onUnwrap:function(C){function v(){return C.apply(this,arguments)}v.toString=function(){return C.toString()};return v}(function(){v&&v()}),pageID:z})},getVideoElem:function q(r,s){var t=s.getMessageElement(r);if(!t)return null;var u=t.getElementsByClassName(m);return u&&u.length?u[0]:t},getSphericalPhotoElem:function q(r,s){var t=s.getMessageElement(r);if(!t)return null;var u=t.getElementsByClassName(n);return u&&u.length?u[0]:t},_rendersWithoutAttribution:function q(r){return r.length!=1||!c("MercuryAttachment").hasAttribution(r[0])},_getFileComponent:function q(r,s){return c("React").createElement(c("MessengerFileAttachment.react"),{attachment:r,className:"_2poz",key:"file:"+r.url})},attachmentShouldAppearOutsideBubble:function q(r){return c("MessengerStickerUtils").isStickerAttachment(r)||c("MercuryAttachment").isPhotoGroupAttachment(r)||this.isShareAttachment(r)||this.isP2P(r)||this.isVoiceClip(r)||this.isErrorAttachment(r)||this.isEmojiLikeAttachment(r)},isPhotosGroupAttachment:function q(r){var s=r.props.attachments;return!!s&&s.length>1&&s.some(function(t){return!!t&&c("MercuryAttachment").isPhotoGroupAttachment(t)})},isRenderedShareAttachment:function q(r){return!!(r.key&&r.key.startsWith(l))},isFileAttchment:function q(r){return r.attach_type===c("MercuryAttachmentType").FILE},isShareAttachment:function q(r){return!!(this._isStoryBased(r)&&!this.isP2P(r)&&(r.share.style_list.indexOf(c("StoryAttachmentStyle").SHARE)>-1||r.share.style_list.indexOf(c("StoryAttachmentStyle").FALLBACK)>-1))},isSharedVideoAttachment:function q(r){var s=r.attach_type===c("MercuryAttachmentType").SHARE&&r.share&&r.share.subattachments&&r.share.subattachments[0];return!!(s&&s.target&&s.target.video_id)},isP2P:function q(r){return!!(this._isStoryBased(r)&&r.share.style_list.indexOf(c("StoryAttachmentStyle").ORION)>-1)},_isStoryBased:function q(r){return!!(r.attach_type===c("MercuryAttachmentType").SHARE&&r.share&&r.share.style_list)},isEmojiLikeAttachment:function q(r){return r.attach_type===c("MercuryAttachmentType").EMOJI_LIKE},isVoiceClip:function q(r){var s=r.metadata;return!!s&&(!!s.isAudio||s.type===c("MercuryAudioType").AudioClip||s.type===c("MercuryAudioType").VoiceMessageWithTranscript)},isVoiceClipAttachment:function q(r){var s=c("MercuryAttachment").get(r).filter(o).filter(function(t){return this.isVoiceClip(t)}.bind(this));return!!s.length},isP2PAttachment:function q(r){var s=c("MercuryAttachment").get(r).filter(function(t){return o(t)&&this.isP2P(t)}.bind(this));return!!s.length},isSingleVideoAttachment:function q(r){var s=c("MercuryAttachment").get(r).filter(o).filter(function(t){return c("MercuryAttachment").isVideoAttachment(t)});return s.length===1},isSharedVideoAttachmentMessage:function q(r){var s=c("MercuryAttachment").get(r).filter(o).filter(function(t){return this.isSharedVideoAttachment(t)||this.isGenieSharedVideoAttachment(t)}.bind(this));return s.length===1},isGenieSharedVideoAttachment:function q(r){return!!(r.attach_type===c("MercuryAttachmentType").SHARE&&r.share&&r.share.style_list.indexOf(c("StoryAttachmentStyle").GENIE_MESSAGE)>-1&&r.share.target&&r.share.target.attachment&&this.isSharedVideoAttachment(r.share.target.attachment))},isSingleSphericalPhotoAttachment:function q(r){var s=c("MercuryAttachment").get(r).filter(o);if(s.length!==1)return false;var t=s.filter(function(u){return u.photo_encodings&&u.photo_encodings.length!==0}).length===1;return t},isErrorAttachment:function q(r){return r.attach_type===c("MercuryAttachmentType").ERROR},_maybeGiftWrapComponentForMessage:function q(r,s,t){var u=c("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(s),v=c("MessagingFlowerBorderChecker").shouldRenderWithFlowerBorder(s);if(!u&&!v)return r;return c("React").createElement("div",{key:k+s.message_id},r,u?c("React").createElement(c("MessagingGiftWrap.react"),{onUnwrap:c("wrapNullableForReact")(t)}):null,v?c("React").createElement(c("MessagingFlowerBorder.react"),{offset:-10}):null)},_maybeGiftWrapSticker:function q(r,s,t){var u=c("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(s),v=c("MessagingFlowerBorderChecker").shouldRenderWithFlowerBorder(s);if(!u&&!v)return r;return c("React").createElement("div",{key:k+s.message_id},r,u?c("React").createElement(c("MessagingGiftWrap.react"),{isSticker:true,onUnwrap:c("wrapNullableForReact")(t)}):null,v?c("React").createElement(c("MessagingFlowerBorder.react"),{offset:-10}):null)}};f.exports=p}),null);
__d("MessengerCodePasteUtils",["cx","BanzaiODS","MessengerBubble.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=/`{3,}/;function j(l){return!!(l&&l.search(i)!==-1&&l.split("\n").length>1)}function k(l,m,n,o,p){__p&&__p();var q=l.split(i),r=[];for(var s=0;s<q.length;s+=2){var t=q[s].trim();if(t&&t.length>0)r.push(c("React").createElement(c("MessengerBubble.react"),{key:s,body:t,customColor:o||undefined,className:"clearfix _3058 _ui9",isFromViewer:p,ranges:m,threadID:n}));if(s+1<q.length&&q[s+1]){var u=q[s+1].split("\n"),v=u[0].replace(/[^a-zA-Z]+/g,""),w=u.slice(1).join("\n");c("BanzaiODS").bumpEntityKey("messenger_code_paste","render_bubble");r.push(c("React").createElement("div",{key:s+1,className:"_3058 _wu0 _52mr"},c("React").createElement("div",{ref:"syntaxTarget"+s,className:"language-"+v},w)))}}return r}f.exports={containsCodeBlock:j,getCodeAndMessageBubbles:k}}),null);
__d("MNRTCCallabilityStore",["MessengerDispatcher","RTCCallabilityStore"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("RTCCallabilityStore"))(c("MessengerDispatcher"))}),null);
__d("shouldNotRenderSegoe",["MessengerConfig","UserAgent"],(function a(b,c,d,e,f,g){"use strict";var h=new RegExp("[\u0530-\u05f4\u10a0-\u10ff]"),i=c("UserAgent").isBrowser("Chrome")&&c("UserAgent").isPlatform("Windows 10");f.exports=function j(k){return!c("MessengerConfig").SegoeUIDisabled&&i&&h.test(k)}}),null);
__d("MessengerBubble.react",["cx","fbt","invariant","EmojiOnlyMessage.react","immutable","ImmutableObject","MercuryIDs","MercuryMessageBody.react","MessengerCodeBubble.react","MercuryMessageRenderLocations","MessengerActions","MessengerContactActions.bs","MessengerDecorator","MessengerSupportedEmojiUtils","React","SimpleXUIDialog","joinClasses","shouldNotRenderSegoe"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("MessengerContactActions.bs").actions,n=c("React").PropTypes;k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;function o(){__p&&__p();var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={emojis:undefined},this.$MessengerBubble1=function(u,v,w){__p&&__p();switch(u){case m.MESSAGE:this.$MessengerBubble2(v,w);break;case m.PROFILE:var x=c("MercuryIDs").getParticipantIDFromUserID(v.id),y=this.props.participants&&this.props.participants.get(x);if(y&&y.href)window.open(y.href);else this.$MessengerBubble2(v,w);break;case m.FREE_CALL:e(["FBRTCCore","MNRTCCallabilityStore"],function(z,A){var B=v.id;B||j(0);if(z.isAvailableForWebrtcCalling(B)||A.isCallable(B))z.startOutgoingCall(B,"messenger_dot_com",false);else c("SimpleXUIDialog").show(i._("{firstname} can't be reached at the moment.",[i._param("firstname",v.contactName)]),i._("Can't Connect Call"))});break}}.bind(this),q}o.prototype.componentDidMount=function(){if(!this.props.emojis){var p=this.props.body||"",q=c("MessengerSupportedEmojiUtils").getEmojiOnlyContents(p);if(q&&q.length)this.setState({emojis:q})}};o.prototype.render=function(){__p&&__p();var p=false,q=null;if(this.state.emojis)q=c("React").createElement(c("EmojiOnlyMessage.react"),{contents:this.state.emojis});else{p=true;q=c("React").createElement(c("MercuryMessageBody.react"),{ref:this.props.bodyRef,body:this.props.body,className:"_3oh-"+(c("shouldNotRenderSegoe")(this.props.body||"")?" _2por":"")+" _58nk",threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,ranges:this.props.ranges,metaRanges:this.props.metaRanges,plainText:this.props.plainText,threadID:this.props.threadID,customLike:this.props.customLike,onContactSelect:this.$MessengerBubble1,renderLocation:c("MercuryMessageRenderLocations").MESSENGER})}var r=[],s=[],t=this.props.message,u=!!this.props.isFromViewer;if(t&&!this.props.excludeAfterDecorators){c("MessengerDecorator").getInsideDecorators().concat(c("MessengerDecorator").getAfterDecorators()).forEach(function(x){if(x.check(t)){r.push(x.render(t,u,this.props));s.push(x.getAdditionalClassNames())}}.bind(this));c("MessengerDecorator").getBeforeDecorators().forEach(function(x){if(x.check(t))s.push(x.getAdditionalClassNames())})}var v=s.join(" "),w=null;if(this.props.body)if(this.props.containsCode)w=c("React").createElement(c("MessengerCodeBubble.react"),babelHelpers["extends"]({},this.props,{attachments:this.props.attachments,body:this.props.body,customColor:this.props.customColor,isFromViewer:this.props.isFromViewer,ranges:this.props.ranges||[],threadID:this.props.threadID||""}));else w=c("React").createElement("div",{className:"_aok"},q,this.props.attachments);return c("React").createElement("div",babelHelpers["extends"]({},this.props,{className:c("joinClasses")(v,this.props.className,(!this.props.containsCode?"_hh7":"")+(!this.props.isFromViewer&&this.props.containsCode?" _65sp":"")+(this.props.isFromViewer&&this.props.containsCode?" _65sq":"")+(!this.props.containsCode?" _s1-":"")+(!this.props.containsCode&&!this.props.notBubblish?" _52mr":"")+(!this.props.containsCode&&this.props.isP2PAttachment?" _4z55":"")+(!this.props.containsCode&&!!this.state.emojis?" _2f5r":"")+(!this.props.containsCode&&!!this.state.emojis?" _581a":"")+(this.props.isFromViewer&&!this.state.emojis&&!this.props.containsCode?" _43by":"")+(!this.props.containsCode&&p?" _3oh-":""))}),w,!w?q:null,!w?this.props.attachments:null,r)};o.prototype.$MessengerBubble2=function(p,q){q&&q.preventDefault();var r=c("MercuryIDs").getThreadIDFromUserID(p.id);r&&c("MessengerActions").selectThread(r)};o.propTypes={attachments:n.instanceOf(c("immutable").List),body:n.string,customColor:n.string,customLike:n.object,excludeAfterDecorators:n.bool,isFromViewer:n.bool,message:n.instanceOf(c("ImmutableObject")),metaRanges:n.array,notBubblish:n.bool,onUnwrap:n.func,participants:n.object,plainText:n.bool,ranges:n.array,threadID:n.string,threadCustomColor:n.string};f.exports=o}),null);
__d("MessengerCodeBubble.react",["Bootloader","immutable","MessengerCodePasteUtils","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;k.prototype.componentDidMount=function(){c("Bootloader").loadModules(["Prism.Complete"],function(l){for(var m in this.refs){var n=c("ReactDOM").findDOMNode(this.refs[m]);l.highlightElement(n)}}.bind(this),"MessengerCodeBubble.react")};k.prototype.render=function(){var l=c("MessengerCodePasteUtils").getCodeAndMessageBubbles(this.props.body,this.props.ranges,this.props.threadID,this.props.customColor,this.props.isFromViewer);return c("React").createElement("div",{className:this.props.className},l)};function k(){h.apply(this,arguments)}k.propTypes={attachments:j.instanceOf(c("immutable").List),body:j.string.isRequired,customColor:j.string,isFromViewer:j.bool.isRequired,ranges:j.array.isRequired,threadID:j.string.isRequired};f.exports=k}),null);
__d("MessengerDesktopNotificationPermissions",[],(function a(b,c,d,e,f,g){var h=Object.freeze({DEFAULT:"default",DENIED:"denied",GRANTED:"granted"});f.exports=h}),null);
__d("MessengerDesktopNotifications",["MessengerDesktopNotificationPermissions","Run","UserAgent","WorkplaceChatHelper"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=5e3,i=new Map();function j(){i.forEach(function(l,m,n){l.close&&l.close()})}var k={_closeTimer:null,isSupported:function l(){return!!window.Notification},checkPermission:function l(){if(window.Notification)return window.Notification.permission},hasDefaultSound:function l(){return c("UserAgent").isBrowser("FireFox")&&c("UserAgent").isPlatform("Mac OS X")},isDenied:function l(){return this.checkPermission()===c("MessengerDesktopNotificationPermissions").DENIED},isGranted:function l(){return this.checkPermission()===c("MessengerDesktopNotificationPermissions").GRANTED},requestPermission:function l(m){if(window.Notification)window.Notification.requestPermission(m)},showNotification:function l(m){__p&&__p();if(this.isGranted()){var n=window.Notification?new window.Notification(m.title,{body:m.body,icon:m.icon,tag:m.tag,silent:m.silent}):{};i.set(m.tag,n);n.onclick=function(){if(c("WorkplaceChatHelper").isDesktopChatApp())c("WorkplaceChatHelper").showWindow();m.onClick()};n.onclose=function(){i["delete"](m.tag)};this._closeTimer=setTimeout(function(){n.close()},m.closeTime||h);return n}else return null}};c("Run").onUnload(j);f.exports=k}),null);
__d("ComposedEntityMutability",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MUTABLE:0,IMMUTABLE:1,SEGMENTED:2})}),null);
__d("MessengerConstants",[],(function a(b,c,d,e,f,g){"use strict";var h={NEW_THREAD_KEY:"new",BROWSER_EXTENSIONS_DIALOG_DIMENSIONS:{HEIGHT:604,WIDTH:405}};f.exports=h}),null);
__d("MessengerEditorStateManager",["CacheStorage","ComposedEntityMutability","ComposedEntityMutabilityToName","ComposedEntityTypeToName","DraftEntityInstance","EditorState","MessengerConstants","SelectionState","decodeBlocks","encodeBlocks","mapObject"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("CacheStorage"))("localstorage"),i=c("ComposedEntityMutability").IMMUTABLE,j=void 0,k={get:function l(m){__p&&__p();if(!m)return this._getEmptyEditorState();if(m===c("MessengerConstants").NEW_THREAD_KEY)return j||this._getEmptyEditorState();var n=h.get(m,false);if(!n)return this._getEmptyEditorState();var o=n.encodedBlocks,p=c("mapObject")(o.entityMap,function(s,t){return new(c("DraftEntityInstance"))({type:c("ComposedEntityTypeToName")[s.type],mutability:c("ComposedEntityMutabilityToName")[i],data:s.data})}),q=c("decodeBlocks")(o.blocks,p),r=c("EditorState").createWithContent(q);return c("EditorState").acceptSelection(r,new(c("SelectionState"))(n.selection))},set:function l(m,n){if(m===c("MessengerConstants").NEW_THREAD_KEY){j=n;return}var o=c("encodeBlocks")(n.getCurrentContent()),p=n.getSelection().toJS();h.set(m,{encodedBlocks:o,selection:p})},_getEmptyEditorState:function l(){var m=c("EditorState").createEmpty();return c("EditorState").forceSelection(m,m.getSelection())}};f.exports=k}),null);
__d("MessengerPresenceStatusUtils",["fbt","AvailableListConstants","CurrentUser","LastActiveTimes","MercuryIDs","PresenceStatus"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={getStatusFromCanonicalThread:function j(k,l){__p&&__p();var m=null;if(l&&l.is_canonical){var n=k.get(c("MercuryIDs").getParticipantIDFromFromThreadID(l.thread_id));if(n){var o=void 0;if(n.is_messenger_user)o=c("CurrentUser").isWorkUser()?h._("Workplace Chat"):h._("Messenger");else o=c("CurrentUser").isWorkUser()?h._("Workplace"):h._("Facebook");var p=c("PresenceStatus").get(n.fbid),q=void 0,r=void 0;if(p!==c("AvailableListConstants").ACTIVE){q=c("LastActiveTimes").get(n.fbid);r=c("LastActiveTimes").getShortDisplay(n.fbid)}m={contact:n,platform:o,isUserActive:p===c("AvailableListConstants").ACTIVE,lastActiveTS:q,lastActive:r}}}return m}};f.exports=i}),null);
__d("MessagingThreadEventType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTIVE:"active",INACTIVE:"inactive"})}),null);
__d("MessagingThreadSourceName",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHAT_NUB:"chat_nub",MESSENGER:"messenger"})}),null);
__d("MessengerLoggerUtils",["MercuryIDs","MessagingThreadEventType","MessagingThreadEventTypedLogger","MessagingThreadSourceName","ScriptPath","pageID"],(function a(b,c,d,e,f,g){var h={logThreadChangeEvent:function i(j,k,l,m){if(l.activeThreadID&&j)this.log({activeThreadID:l.activeThreadID,event:c("MessagingThreadEventType").INACTIVE,clientEventTimeMs:k,activeTimeMs:k-j});if(m.activeThreadID)this.log({activeThreadID:m.activeThreadID,event:c("MessagingThreadEventType").ACTIVE,clientEventTimeMs:k,activeTimeMs:0})},log:function i(j){var k=c("MercuryIDs").tokenize(j.activeThreadID.toString()),l=c("ScriptPath").getPageInfo();new(c("MessagingThreadEventTypedLogger"))().setEvent(j.event).setClientEventTimeMs(j.clientEventTimeMs).setActiveTimeMs(j.activeTimeMs).setPageID(c("pageID")).setPageData(l?l.extraData:{}).setThreadID(k.value).setSource(c("MessagingThreadSourceName").MESSENGER).log()}};f.exports=h}),null);
__d("MessengerURIStore",["MessengerActions","MessengerLoggerUtils","MessengerStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MessengerStore"));i=h&&h.prototype;function j(){i.constructor.call(this);this.$MessengerURIStore1={activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null,extraQueryParams:null,threadIDs:null};this.$MessengerURIStore2=babelHelpers["extends"]({},this.$MessengerURIStore1);this.$MessengerURIStore4=this.$MessengerURIStore3=null}j.prototype.getState=function(){return this.$MessengerURIStore1};j.prototype.getPrevState=function(){return this.$MessengerURIStore2};j.prototype.__onDispatch=function(k){switch(k.type){case c("MessengerActions").Types.REPLACE_STATE:this.$MessengerURIStore2=this.$MessengerURIStore1;this.$MessengerURIStore4=this.$MessengerURIStore3;this.$MessengerURIStore1=babelHelpers["extends"]({activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null,extraQueryParams:null,threadsIDs:null},k.nextState);var l=Date.now();this.$MessengerURIStore3=l;c("MessengerLoggerUtils").logThreadChangeEvent(this.$MessengerURIStore4,l,this.$MessengerURIStore2,this.$MessengerURIStore1);this.emitChange();break}};f.exports=new j()}),null);
__d("MessengerComposerActions",["MessengerDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null}),i={Types:h,addToken:function j(k){c("MessengerDispatcher").dispatch({type:h.ADD_TOKEN,entry:k})},moveDraftToNextThread:function j(k){c("MessengerDispatcher").dispatch({type:h.MOVE_DRAFT,threadID:k})},removeToken:function j(k){c("MessengerDispatcher").dispatch({type:h.REMOVE_TOKEN,entry:k})},focusComposer:function j(){c("MessengerDispatcher").dispatch({type:h.FOCUS_COMPOSER})},focusTypeahead:function j(){c("MessengerDispatcher").dispatch({type:h.FOCUS_TYPEAHEAD})},exitComposeState:function j(){c("MessengerDispatcher").dispatch({type:h.EXIT_COMPOSE_STATE})}};f.exports=i}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/settings/edit/",{})}),null);
__d("MessengerSettingsActions",["AsyncRequest","CurrentEnvironment","MessengerDispatcher","MessengerDesktopNotifications","MessengerDesktopNotificationPermissions","MessengerURIConstants","XMessengerDotComSettingsEditController","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null}),i={Types:h,changeSettings:function j(k){var l=c("XMessengerDotComSettingsEditController").getURIBuilder().getURI();if(c("CurrentEnvironment").facebookdotcom)l.setPath(c("MessengerURIConstants").FACEBOOK_PREFIX+l.getPath());new(c("AsyncRequest"))().setData({settings:k}).setURI(l).send();c("MessengerDispatcher").dispatch({type:h.CHANGE_SETTINGS,newSettings:k})},changeDesktopNotifs:function j(k,l){if(k&&!c("MessengerDesktopNotifications").isGranted())c("MessengerDesktopNotifications").requestPermission(function(m){if(m!==c("MessengerDesktopNotificationPermissions").GRANTED){if(c("MessengerDesktopNotifications").checkPermission()===c("MessengerDesktopNotificationPermissions").DENIED)l&&l();return}c("MessengerDispatcher").dispatch({type:h.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:k})});else c("MessengerDispatcher").dispatch({type:h.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:k})}};f.exports=i}),null);
__d("LinkWithHiddenURLBar.react",["Link.react","React","ReactDOM","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(){__p&&__p();var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.link=null,this.$LinkWithHiddenURLBar5=function(p){this.link=p}.bind(this),this.$LinkWithHiddenURLBar4=function(p){this.$LinkWithHiddenURLBar6();this.props.onFocus&&this.props.onFocus(p)}.bind(this),this.$LinkWithHiddenURLBar2=function(p){this.$LinkWithHiddenURLBar1();this.props.onBlur&&this.props.onBlur(p)}.bind(this),this.$LinkWithHiddenURLBar3=function(p){this.$LinkWithHiddenURLBar6();if(!p.metaKey&&this.props.onClick){this.props.onClick(p);p.preventDefault()}this.props.onAllClicks&&this.props.onAllClicks(p);c("setImmediate")(function(){return this.$LinkWithHiddenURLBar1()}.bind(this))}.bind(this),l}j.prototype.componentDidMount=function(){this.$LinkWithHiddenURLBar1()};j.prototype.render=function(){var k=this.props,l=k.label,m=k.onBlur,n=k.onAllClicks,o=k.onClick,p=k.onFocus,q=babelHelpers.objectWithoutProperties(k,["label","onBlur","onAllClicks","onClick","onFocus"]);return c("React").createElement(c("Link.react"),babelHelpers["extends"]({},q,{label:l,onBlur:this.$LinkWithHiddenURLBar2,onClick:this.$LinkWithHiddenURLBar3,onFocus:this.$LinkWithHiddenURLBar4,ref:this.$LinkWithHiddenURLBar5}))};j.prototype.$LinkWithHiddenURLBar1=function(){if(this.link){var k=c("ReactDOM").findDOMNode(this.link);if(k.href){k.setAttribute("data-href",k.href);k.removeAttribute("href")}}};j.prototype.$LinkWithHiddenURLBar6=function(){if(this.link){var k=c("ReactDOM").findDOMNode(this.link),l=k.getAttribute("data-href");if(l){k.setAttribute("href",l);k.removeAttribute("data-href")}}};f.exports=j}),null);
__d("MessengerAddIconSVG.react",["React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=function i(j){return c("React").createElement("div",{className:j.className},c("React").createElement("svg",{viewBox:"-8 -8 48 48"},c("React").createElement("title",null,"add to group"),c("React").createElement("path",{d:"M16,0 V32 M0,16 H32",fillRule:"evenodd",clipRule:"evenodd",fill:"none",stroke:j.customColor,strokeWidth:2,strokeMiterlimit:10,strokeLinecap:"round"})))};i.propTypes={className:h.string,customColor:h.string.isRequired};f.exports=i}),null);
__d("MercuryAttachmentAttribution.react",["cx","fbt","Image.react","ImmutableObject","Link.react","React","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=this.$MercuryAttachmentAttribution1();if(!n)return null;return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_29ew")},c("React").createElement(c("Image.react"),{src:n.icon_url,className:"_29ex"}),c("React").createElement("span",{className:"_29ey"},n.name),this.$MercuryAttachmentAttribution2())};m.prototype.$MercuryAttachmentAttribution1=function(){return this.props.attachment&&this.props.attachment.app_attribution};m.prototype.$MercuryAttachmentAttribution2=function(){__p&&__p();var n=this.$MercuryAttachmentAttribution1();if(!n||!n.metadata)return null;var o="_439n",p=void 0;try{p=JSON.parse(n.metadata)}catch(q){return null}if(p.spotify_link)return c("React").createElement(c("Link.react"),{className:o,href:p.spotify_link,target:"_blank"},i._("Open"));return null};function m(){j.apply(this,arguments)}m.propTypes={attachment:l.instanceOf(c("ImmutableObject"))};f.exports=m}),null);
__d("MessengerAttachmentAttribution.react",["cx","ImmutableObject","MercuryAttachmentAttribution.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement(c("MercuryAttachmentAttribution.react"),{attachment:this.props.attachment,className:"_2f5n _4br2"})};function l(){i.apply(this,arguments)}l.propTypes={attachment:k.instanceOf(c("ImmutableObject"))};f.exports=l}),null);
__d("MessengerBootloadedLogMessage.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("MessengerLogMessage.react").__setRef("MessengerBootloadedLogMessage.react"),placeholder:c("React").createElement("div",{className:"_497p"},"...")})};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MessengerBubbleBlock.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("div",{className:"_52mr _4h13 _3058"},this.props.children)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MessengerCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={collapsed:true},n}l.prototype.render=function(){var m=i._("See latest activity"),n=i._("See less activity");return c("React").createElement("div",{className:"_497p"},c("React").createElement(c("Link.react"),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed})}.bind(this)},this.state.collapsed?m:n),!this.state.collapsed?c("React").createElement("div",null,c("React").createElement("div",{className:"_4ea2"}),this.props.children,c("React").createElement("div",{className:"_4ea2"})):null)};f.exports=l}),null);
__d("MessageThreadAssociatedObjectKey",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTION_LINK:"action_link",APPROVAL_MODE_TOGGLEABLE:"approval_mode_toggleable",EVENT_PLACE:"event_place",ID:"id",IS_WORKPLACE_COMMUNITY:"is_workplace_community",MENTORSHIP_PROGRAM:"mentorship_program",NAME:"name",PRIVACY_MODE:"privacy_mode",PROFILE_PICTURE:"profile_picture",ROOM_TYPE:"room_type",START_TIMESTAMP:"start_timestamp"})}),null);
__d("MessengerProfileLinkAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CLICK:"click",HOVER:"hover"})}),null);
__d("MessengerProfileLinkDomain",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",FB_SLASH_MESSAGES:"fb_slash_messages",WORK_CHAT:"work_chat"})}),null);
__d("MessengerProfileLinkLogger.bs",["MessengerProfileLinkTypedLogger"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){new(c("MessengerProfileLinkTypedLogger"))().setTargetID(i).setDomain(j).setLinkLocation(k).setAction(l).log();return 0}g.logItemImpression=h}),null);
__d("ProfileLinkReact.bs",["ReasonReact.bs","bs_js_null_undefined","ProfileLink.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p){return c("ReasonReact.bs").wrapJsForReason(c("ProfileLink.react"),{className:c("bs_js_null_undefined").fromOption(i),href:c("bs_js_null_undefined").fromOption(j),onClick:c("bs_js_null_undefined").fromOption(k),onMouseEnter:c("bs_js_null_undefined").fromOption(l),onMouseLeave:c("bs_js_null_undefined").fromOption(m),target:c("bs_js_null_undefined").fromOption(n),uid:o},p)}g.make=h}),null);
__d("MessengerProfileLink.bs",["URI","bs_block","bs_curry","React","Arbiter","LinkReact.bs","QE2Logger","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerConfig","ProfileLinkReact.bs","isMessengerDotComURI","MessengerProfileLinkAction","MessengerProfileLinkDomain","MessengerProfileLinkLogger.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ReasonReact.bs").reducerComponent("MessengerProfileLink");function i(k,l,m,n,o){__p&&__p();var p=c("isMessengerDotComURI")(new(c("URI"))(window.location.href)),q=c("CurrentUser").isWorkUser(),r=q?c("MessengerProfileLinkDomain").WORK_CHAT:p?c("MessengerProfileLinkDomain").MESSENGER_DOT_COM:c("MessengerProfileLinkDomain").FB_SLASH_MESSAGES,s=function s(){return c("MessengerProfileLinkLogger.bs").logItemImpression(n,r,l,c("MessengerProfileLinkAction").HOVER)},t=function t(){return c("MessengerProfileLinkLogger.bs").logItemImpression(n,r,l,c("MessengerProfileLinkAction").CLICK)};return[h[0],h[1],h[2],h[3],function(u){var v=c("Arbiter").subscribe("Hovercard/show",function(o,x){return c("bs_curry")._1(u[3],0)}),w=c("Arbiter").subscribe("Hovercard/hide",function(o,x){return c("bs_curry")._1(u[3],1)});c("bs_curry")._1(u[4],function(){v.unsubscribe();w.unsubscribe();return 0});return 0},h[5],h[6],h[7],h[8],function(u){__p&&__p();var v;if(k){c("QE2Logger").logExposureForUser("www_messenger_profile_links",c("CurrentUser").getID());var q=c("MessengerConfig").PLIS;v=q?p?c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make(0,0,0,0,0,0,[k[0]],0,[function(){if(u[1][0])s(0);return t(0)}],0,0,0,0,0,0,0,[m])):c("ReasonReact.bs").element(0,0,c("ProfileLinkReact.bs").make(0,0,[function(){return t(0)}],0,[function(){var q=u[1][0];if(q)return s(0);else return 0}],0,n,[m])):m}else v=m;return c("React").createElement("div",undefined,v)},function(){return[false]},h[11],function(u,o){if(u)return c("bs_block").__(0,[[false]]);else return c("bs_block").__(0,[[true]])},h[13]]}var j=c("ReasonReact.bs").wrapReasonForJs(h,function(k){return i(c("bs_js_primitive").null_undefined_to_opt(k.href),k.location,k.name,k.uid,[])});g.component=h;g.make=i;g.jsComponent=j}),null);
__d("MessengerProfileLinkLocation",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONTEXT_BANNER:"context_banner",INFOPANEL:"infopanel"})}),null);
__d("TimeSpentRoomTypeEnum$FbtEnum",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({GROUP:"Group",EVENT:"Event"});f.exports=h}),null);
__d("MessengerContextBanner.react",["cx","fbt","Badge.react","CurrentUser","Image.react","ImageBlock.react","immutable","Link.react","MercuryParticipantsConstants","MercuryParticipantsImage.react","MercuryThreadImage.react","MessageThreadAssociatedObjectKey","MessengerProfileLink.bs","MessengerProfileLinkLocation","React","MercuryShareAttachmentRenderLocations","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum","requireWeak"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MessengerProfileLink.bs").jsComponent,m=c("React").PropTypes,n=void 0;c("requireWeak")("MessengerThreadImageReact.bs",function(p){n=p.jsComponent});j=babelHelpers.inherits(o,c("React").PureComponent);k=j&&j.prototype;o.prototype.render=function(){var p=c("React").createElement(c("ImageBlock.react"),{className:"_llj"+(this.props.location===c("MercuryShareAttachmentRenderLocations").MESSENGER?" _2eu-":"")+(this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT?" _2eu_":""),spacing:"large",style:this.props.style},this.$MessengerContextBanner1(),c("React").createElement("div",{className:"_lll"},this.$MessengerContextBanner2(),this.$MessengerContextBanner3(),this.$MessengerContextBanner4())),q=this.props.associatedObject;if(q&&q[c("MessageThreadAssociatedObjectKey").ACTION_LINK])p=c("React").createElement(c("Link.react"),{href:q[c("MessageThreadAssociatedObjectKey").ACTION_LINK],target:"_blank",style:{textDecoration:"none"}},p);return p};o.prototype.$MessengerContextBanner1=function(){__p&&__p();var p=this.props.location===c("MercuryShareAttachmentRenderLocations").MESSENGER,q=this.props.associatedObject,r=null;if(!this.props.contactName&&q&&p)r=c("React").createElement(c("Image.react"),{className:"_4ld- _1wrc",src:q[c("MessageThreadAssociatedObjectKey").PROFILE_PICTURE]});else if(this.props.thread){var s=n&&p?n:c("MercuryThreadImage.react");r=c("React").createElement(s,{showBadge:false,participants:this.props.participants,size:p?60:null,thread:this.props.thread,viewer:this.props.viewer})}else if(this.props.participantIDs)r=c("React").createElement(c("MercuryParticipantsImage.react"),{participants:this.props.participantIDs,size:c("MercuryParticipantsConstants").BIG_IMAGE_SIZE});return c("React").createElement("div",{className:"_llk"},r)};o.prototype.$MessengerContextBanner2=function(){if(this.props.location!==c("MercuryShareAttachmentRenderLocations").MESSENGER)return null;var p=this.props.isVerified?c("React").createElement(c("Badge.react"),{size:"medium",type:"verified"}):null,q=this.props.contactName;if(!q){var r=this.props.associatedObject;q=r?r[c("MessageThreadAssociatedObjectKey").NAME]:null}var s=this.props.contactFBProfile,t=this.props.contactID;return c("React").createElement("div",{className:"_llq"},c("React").createElement("span",{className:"_3oh-"},c("React").createElement(l,{href:s,location:c("MessengerProfileLinkLocation").CONTEXT_BANNER,name:q,uid:t}),p))};o.prototype.$MessengerContextBanner3=function(){return c("React").createElement("div",{className:"_1n-e _36zg"},this.props.connectionContext)};o.prototype.$MessengerContextBanner4=function(){__p&&__p();if(!this.props.contextItems.length){var p=this.props.associatedObject;if(p){var q=c("TimeSpentRoomTypeEnum")[p[c("MessageThreadAssociatedObjectKey").ROOM_TYPE]],r=c("CurrentUser").isWorkUser()?"Workplace":"Facebook";return c("React").createElement("div",{className:"_1n-e"},i._({"EVENT":"Go to {productName} event","GROUP":"Go to {productName} group"},[i._param("productName",r),i._enum(q,c("TimeSpentRoomTypeEnum$FbtEnum"))]))}return null}return c("React").createElement("div",null,this.props.contextItems.map(function(s,t){return c("React").createElement("div",{className:"_1n-e",key:"item:"+t},s)}))};function o(){j.apply(this,arguments)}o.propTypes={contactFBProfile:m.string,contactID:m.string,contactName:m.string,associatedObject:m.object,connectionContext:m.string,contextItems:m.arrayOf(m.string).isRequired,isVerified:m.bool,location:m.string.isRequired,participantIDs:m.arrayOf(m.string),participants:m.instanceOf(c("immutable").Map),thread:m.object,viewer:m.string.isRequired};f.exports=o}),null);
__d("XMessengerContextBannerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/messenger/context_banner/",{profile_id:{type:"Int",required:true},max_context_items:{type:"Int",defaultValue:3}})}),null);
__d("MessengerContextInformationStore",["AsyncRequest","EventEmitter","TimeSlice","XMessengerContextBannerController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=new Map(),k=new Map();h=babelHelpers.inherits(l,c("EventEmitter"));i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$MessengerContextInformationStore1=function(r){if(k.get(r))return;var s=c("XMessengerContextBannerController").getURIBuilder().setInt("profile_id",r).getURI(),t=new(c("AsyncRequest"))().setAllowCrossPageTransition(true).setURI(s).setHandler(this.$MessengerContextInformationStore2.bind(this,r));k.set(r,t);t.send()}.bind(this),n}l.prototype.getOrFetch=function(m){var n=j.get(m);n||c("TimeSlice").guard(this.$MessengerContextInformationStore1,"Chat Tab Messenger Context Banner Fetch",{propagationType:c("TimeSlice").PropagationType.ORPHAN})(m);return n};l.prototype.$MessengerContextInformationStore2=function(m,n){j.set(m,{connectionContext:n.payload.connection_context||"",contextItems:n.payload.context_items||[]});k["delete"](m);this.emit("change")};f.exports=new l()}),null);
__d("PagesMessengerContextBanner.react",["cx","MercuryThreadImage.react","ProfileHeaderCoverPhoto.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=83,l=260,m=60;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;n.prototype.render=function(){var o=this.props.coverPhotoData?c("React").createElement(c("ProfileHeaderCoverPhoto.react"),{coverPhotoData:this.props.coverPhotoData,height:k,width:l}):null;return c("React").createElement("div",{className:"_fj3",style:this.props.style},o,c("React").createElement("div",{className:"_2-0o"},c("React").createElement(c("MercuryThreadImage.react"),{size:m,thread:this.props.thread,viewer:this.props.viewer})))};function n(){i.apply(this,arguments)}f.exports=n}),null);
__d("MessengerContextBannerContainer.react",["DOMDimensions","immutable","MercuryIDs","MercuryParticipants","MercuryThreads","MessengerContextBanner.react","MessengerContextInformationStore","PagesMessagingMercuryChatTabStore","PagesMessengerContextBanner.react","ReactComponentWithPureRenderMixin","React","ReactDOM","MercuryShareAttachmentRenderLocations","StoreAndPropBasedStateMixin"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"MessengerContextBannerContainer",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MercuryParticipants"),c("MercuryThreads"),c("MessengerContextInformationStore"),c("PagesMessagingMercuryChatTabStore"))],propTypes:{location:h.string.isRequired,onResize:h.func,otherUserFBIDs:h.arrayOf(h.string),threadID:h.string,viewer:h.string.isRequired},statics:{calculateState:function j(k){__p&&__p();var l=null,m=null;if(k.threadID){l=c("MercuryThreads").getForFBID(k.viewer).getOrFetch(k.threadID);m=l&&l.participants}else if(k.otherUserFBIDs&&k.otherUserFBIDs.length===1)m=k.otherUserFBIDs.map(function(s){return c("MercuryParticipants").getIDFromVanityOrFBID(s)});var n=c("immutable").Map();if(m)n=n.withMutations(function(s){m&&m.forEach(function(t){s.set(t,c("MercuryParticipants").getOrFetch(t))})});var o=null,p=null;if(l){o=n.get(c("MercuryIDs").getParticipantIDFromFromThreadID(l.thread_id));p=l.associated_object}else o=m&&n.get(m[0]);var q=c("PagesMessagingMercuryChatTabStore").getStateByThread(k.threadID),r=q.coverPhotoData;return babelHelpers["extends"]({associatedObject:p,contact:o,coverPhotoData:r,participantIDs:m,participants:n,thread:l},i.getContextInformation(o&&o.fbid&&o.fbid.toString()))},getContextInformation:function j(k){var l=void 0;if(k)l=c("MessengerContextInformationStore").getOrFetch(k.toString());return l||{connectionContext:"",contextItems:[]}}},componentDidUpdate:function j(){var k=c("ReactDOM").findDOMNode(this);if(!k)return;var l=c("DOMDimensions").getElementDimensions(k).height;if(this.props.onResize)this.props.onResize(l)},render:function j(){__p&&__p();if(!this.state.contact){if(this.state.associatedObject&&this.props.location==c("MercuryShareAttachmentRenderLocations").MESSENGER)return c("React").createElement(c("MessengerContextBanner.react"),{associatedObject:this.state.associatedObject,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer});return null}if(this.state.contact.type==="page"){if(!this.state.connectionContext&&!this.state.contextItems.length)return null;if(this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT)return c("React").createElement(c("PagesMessengerContextBanner.react"),{coverPhotoData:this.state.coverPhotoData,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer})}return c("React").createElement(c("MessengerContextBanner.react"),{contactFBProfile:this.state.contact.href,contactID:this.state.contact.fbid,contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,isVerified:this.state.contact.is_verified,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer})}});f.exports=i}),null);
__d("MessengerDateBreak.react",["cx","React","formatDate","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){"use strict";return this.props.date.getTime()!==m.date.getTime()};l.prototype.render=function(){"use strict";var m=c("formatDate")(this.props.date,{today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return c("React").createElement("h4",{className:c("joinClasses")(this.props.className,"_497p _2lpt")},c("React").createElement("time",{className:"_3oh-"},m))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={date:k.instanceOf(Date).isRequired};f.exports=l}),null);
__d("MessengerDeliveryReceipt.bs",["Utils.bs","bs_js_primitive"],(function a(b,c,d,e,f,g){"use strict";function h(j,k){return c("Utils.bs").$pipe$unknown(c("bs_js_primitive").undefined_to_opt(j[k]),0)}var i=c("Utils.bs").$pipe$unknown;g.$pipe$unknown=i;g.getDeliveryTimeOfThread=h}),null);
__d("MessengerSignals.bs",["EventEmitter"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("EventEmitter"))(),i="resize";function j(){h.emit(i);return 0}function k(l){return h.addListener(i,l)}g.emitter=h;g.resizeEvent=i;g.resize=j;g.onResize=k}),null);
__d("MessengerFlexArea.react",["cx","CSS","Event","MessengerSignals.bs","React","ReactDOM","ResponsiveBlock.react","Style","SubscriptionsHandler","Vector","getElementRect","getScrollPosition","joinClasses","throttle"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"MessengerFlexArea",propTypes:{beforeResize:i.func,onResize:i.func},_subscriptions:null,_onResizeTimeout:null,getInitialState:function k(){return{height:0}},componentDidMount:function k(){var l=new(c("SubscriptionsHandler"))();l.addSubscriptions(c("Event").listen(window,"resize",c("throttle")(this.recalculateHeight,51)),c("MessengerSignals.bs").onResize(function(){this.recalculateHeight()}.bind(this)));this._subscriptions=l;this.recalculateHeight()},componentWillUnmount:function k(){this._subscriptions&&this._subscriptions.release();clearTimeout(this._onResizeTimeout)},render:function k(){return c("React").createElement(c("ResponsiveBlock.react"),{className:c("joinClasses")(this.props.className,"_9hq"),onResize:this._handleResponsiveBlockResize,style:{height:this.state.height+"px"}},this.props.children)},recalculateHeight:function k(){__p&&__p();if(!this.isMounted())return;var l=c("ReactDOM").findDOMNode(this),m=l.parentNode,n=this.state.height,o=c("Vector").getViewportDimensions().y,p=false;if(m&&c("Style").get(m,"display")==="none"){c("Style").set(m,"display","initial");p=true}var q=false;if(m instanceof Element&&c("CSS").hasClass(m,"hidden_elem")){c("CSS").removeClass(m,"hidden_elem");q=true}o-=c("Vector").getElementPosition(m||l).y;var r=c("getScrollPosition")(window);o+=r.y;if(m){Array.from(m.childNodes).forEach(function(s){if(s.nodeType===Node.COMMENT_NODE||c("Style").get(s,"position")==="absolute")return;o-=c("getElementRect")(s).height});o+=c("getElementRect")(l).height}if(p)c("Style").set(m,"display","");if(q&&m instanceof Element)c("CSS").addClass(m,"hidden_elem");if(isNaN(o)||o<0)o=0;if(o!==n){this.props.beforeResize&&this.props.beforeResize();this.setState({height:o},this.props.onResize)}},_handleResponsiveBlockResize:c("throttle")(function(k,l){if(!this.isMounted())return;if(l===this.state.height){this.props.beforeResize&&this.props.beforeResize();clearTimeout(this._onResizeTimeout);if(this.props.onResize)this._onResizeTimeout=setTimeout(this.props.onResize,0)}},51)});f.exports=j}),null);
__d("MessengerFlexScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={shouldTrackBottom:this.props.shouldStickToBottom},this.$MessengerFlexScrollableArea2=function(){this.props.onScroll&&this.props.onScroll();if(!this.props.shouldStickToBottom)return;this.$MessengerFlexScrollableArea3()}.bind(this),this.$MessengerFlexScrollableArea1=function(){this.trackBottomIfRequired()}.bind(this),m}k.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount()};k.prototype.render=function(){return c("React").createElement(c("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$MessengerFlexScrollableArea1,ref:"flexArea"},this.props.flexChildren,c("React").createElement(c("MessengerScrollableArea.react"),{height:"100%",needsFastScrollHandler:this.state.shouldTrackBottom,onScroll:this.$MessengerFlexScrollableArea2,ref:"scrollable",tabIndex:this.props.tabIndex},this.props.children),this.props.footerChildren)};k.prototype.$MessengerFlexScrollableArea3=function(){if(this.isScrolledToBottom())this.setState({shouldTrackBottom:true});else this.setState({shouldTrackBottom:false})};k.prototype.getArea=function(){return this.refs.scrollable&&this.refs.scrollable.getArea()};k.prototype.handleResize=function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight()};k.prototype.trackBottomIfRequired=function(){if(this.state.shouldTrackBottom)this.scrollToBottom()};k.prototype.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom()};k.prototype.scrollToTop=function(l){this.refs.scrollable&&this.refs.scrollable.scrollToTop(l)};k.prototype.scrollToPosition=function(l,m,n){this.refs.scrollable&&this.refs.scrollable.scrollToPosition(l,m,n)};k.prototype.isScrolledToBottom=function(){var l=this.refs.scrollable;return l?l.isScrolledToBottom():true};k.prototype.isScrolledToBottomWithHeight=function(l){return this.refs.scrollable.isScrolledToBottomWithHeight(l)};k.prototype.isScrolledToTop=function(){return this.refs.scrollable&&this.refs.scrollable.isScrolledToTop()};k.prototype.getScrollTop=function(){return this.refs.scrollable&&this.refs.scrollable.getScrollTop()||0};k.propTypes={flexChildren:j.node,footerChildren:j.node,onMount:j.func,onScroll:j.func,shouldStickToBottom:j.bool,tabIndex:j.number};f.exports=k}),null);
__d("MessengerMessageActionsWrapper.react",["ImmutableObject","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"MessengerMessageActionsWrapper",propTypes:{message:h.instanceOf(c("ImmutableObject")).isRequired,onShowMenu:h.func.isRequired},render:function j(){return c("React").createElement("div",babelHelpers["extends"]({onMouseEnter:this._handleShowMenu,onMouseLeave:this._handleHideMenu},this.props),this.props.children)},_handleShowMenu:function j(){this.props.onShowMenu(this.props.message.message_id,true)},_handleHideMenu:function j(){this.props.onShowMenu(this.props.message.message_id,false)}});f.exports=i}),null);
__d("MessengerMessageSeenHeadsReact.bs",["cx","fbt","cssVar","React","immutable","ImageReact.bs","ReasonReact.bs","joinClasses","MessengerConfig","MercuryTimestamp","MercuryAttachment","MercuryMessageInfo","getViewportDimensions"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("MessengerConfig").MaxSeenHeadCount;function l(){var p=c("getViewportDimensions")().width;if(p<parseInt("920px".replace("px",""),10))if(k<8)return k;else return 8;else if(p<parseInt("1211px".replace("px",""),10)&&k>=3)return 3;else return k}var m=c("ReasonReact.bs").statelessComponent("MessengerMessageSeenHeadsReact");function n(p,q,r,s,t,u,v){__p&&__p();return[m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],function(){__p&&__p();if(c("MercuryMessageInfo").isSending(r)||u.isEmpty()||c("MercuryMessageInfo").hasError(r))return null;else{var w=c("immutable").Seq(u).filter(function(E){var F=E.watermark>=r.timestamp&&E.watermark<s;if(F)return true;else return false}).sort(function(E,F){return E.action-F.action|0});if(w.isEmpty())return null;else{var x=q?k:l(0),y=w.count()>(x+1|0),z=y?w.slice(0,x):w,A=z.map(function(E,F,v){var G=t.get(F);if(G==null)return null;else{var H=i._("Seen by {full name} at {seen time}",[i._param("full name",G.name),i._param("seen time",c("MercuryTimestamp").getPreciseTimestamp(E.action))]);return c("ReasonReact.bs").element([String(F)],0,c("ImageReact.bs").make(["_jf2"],[H],[G.image_src],0,[H],0,0,[]))}}).toArray(),B=A.length;if(B===0)return null;else{var C=y?w.slice(x,undefined).count():0;if(C>0){var D=w.slice(x,undefined).map(function(v,E,F){var G=t.get(E);if(G==null)return"";else return G.name}).filter(function(E){var F=E==="";if(F)return false;else return true}).join("\n")+" ";A.unshift(c("React").createElement("span",{key:"overflow",className:"_jf3",title:D},"+"+String(C)))}return c("React").createElement("span",{className:c("joinClasses")(p,"_jf4"+((B+C|0)===1?" _jf5":"")+(c("MercuryAttachment").isSinglePhotoGroupAttachment(r)?" _ba3":""))},A)}}}},m[10],m[11],m[12],m[13]]}var o=c("ReasonReact.bs").wrapReasonForJs(m,function(p){return n(p.className,p.isFromViewer,p.message,p.nextTimestamp,p.participants,p.readReceipts,[])});g.maxSeenHeads=k;g.calculateSliceNumber=l;g.component=m;g.make=n;g.jsComponent=o}),null);
__d("MessengerURIUtils.bs",["URI","MercuryIDs","MessengerView","MessengerURISerializer"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){var l=c("MessengerURISerializer").deserialize(new(c("URI"))(window.location.href)),m=c("MessengerView").DETAIL.THREAD,n=l.queryAll;return c("MessengerURISerializer").serialize(Object.assign(Object.assign({},l),{activeThreadID:k,detailView:m,query:n?l.query:undefined}))}function i(k){return h(c("MercuryIDs").getThreadIDFromUserID(k))}function j(k){return new(c("URI"))("/m/"+k)}g.getURIForThreadID=h;g.getURIForUserID=i;g.getURIForMessageID=j}),null);
__d("messengerRTLClasses",["cx","isRTL"],(function a(b,c,d,e,f,g,h){"use strict";function i(j,k){var l=c("isRTL")(j||"");return k?l?"_4pv0":"":(!l?"direction_ltr":"")+(l?" direction_rtl":"")+(!l?" text_align_ltr":"")+(l?" text_align_rtl":"")+(l?" _4pv0":"")}f.exports=i}),null);
__d("MessengerMessage.react",["cssVar","cx","fbt","EmojiLikeUtils","MercuryDisplayTimeFilterMessageRenderer","FluxContainer","ifRequired","immutable","ImmutableObject","MercuryAttachment","MercuryMessageDeliveryState","MercuryMessageError.react","MercuryMessageInfo","MercuryTimestamp","MessengerAttachmentAttribution.react","MessengerAttachmentRenderer","MessengerBubble.react","MessengerBubbleBlock.react","MessengerCodeBubble.react","MessengerCodePasteUtils","MessengerDecorator","MessengerInnerDecorators.react","MessengerMessageActionsWrapper.react","MessengerMessageSeenHeadsReact.bs","MessengerURIUtils.bs","MessengerVideoAutoplayStore","MNCommerceMessageType","React","TooltipData","emptyFunction","getViewportDimensions","joinClasses","messengerRTLClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("MessengerMessageSeenHeadsReact.bs").jsComponent,n=c("React").PropTypes;function o(r){switch(r){case c("MercuryMessageDeliveryState").SENDING:return j._("Sending");case c("MercuryMessageDeliveryState").SENT:return j._("Sent");case c("MercuryMessageDeliveryState").DELIVERED:return j._("Delivered");case c("MercuryMessageDeliveryState").ERROR:return j._("Error")}return null}k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(){__p&&__p();var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=l.constructor).call.apply(r,[this].concat(u)),this.state={isVisible:false,plainText:false,shown:{}},this.$MessengerMessage15=function(w){w.stopPropagation();this.props.onSelect(this.props.message.message_id)}.bind(this),this.$MessengerMessage5=function(w,x){var y;this.setState({shown:babelHelpers["extends"]({},this.state.shown,(y={},y[w]=x,y))})}.bind(this),this.$MessengerMessage6=function(){this.setState({plainText:!this.state.plainText})}.bind(this),this.$MessengerMessage13=function(){this.props.onSelect(this.props.message.message_id)}.bind(this),this.$MessengerMessage7=function(){return c("MessengerCodePasteUtils").containsCodeBlock(this.props.message.body)||!!this.messageBody&&this.messageBody.hasFormatting()}.bind(this),s}p.getStores=function(){var r=[c("MessengerVideoAutoplayStore")],s=c("ifRequired")("MessengerSphericalRendererStore",function(t){return t},function(){return null});if(s)r.push(s);return r};p.calculateState=function(r,s){return{isVisible:c("MessengerVideoAutoplayStore").isVisible(s.message.thread_id,s.message.message_id)||c("ifRequired")("MessengerSphericalRendererStore",function(t){return t.isVisible(s.message.thread_id,s.message.message_id)},function(){return false})}};p.prototype.shouldComponentUpdate=function(r,s){return r.isActive!==this.props.isActive||r.isFromViewer!==this.props.isFromViewer||r.message!==this.props.message||r.nextTimestamp!==this.props.nextTimestamp||r.showDeliveryState!==this.props.showDeliveryState||r.deliveryTimestamp!==this.props.deliveryTimestamp||!c("immutable").is(r.readReceipts,this.props.readReceipts)||!c("immutable").is(r.participants,this.props.participants)||r.customColor!==this.props.customColor||s.isVisible!==this.state.isVisible};p.prototype.render=function(){__p&&__p();var r=this.props,s=r.isActive,t=r.isFromViewer,u=r.isPageMessage,v=r.message,w=j._("{time}",[j._param("time",c("MercuryTimestamp").getPreciseTimestamp(v.timestamp))]),x=c("TooltipData").propsFor(w,q(t)),y=[],z=[],A=this.props.message,B=t||false;if(A&&!this.props.hideBeforeDecorator){c("MessengerDecorator").getBeforeDecorators().forEach(function(G){if(G.check(A))y.push(G.render(A,B))});c("MessengerDecorator").getInnerDecorators().forEach(function(G){if(G.check(A))z.push(G.getAdditionalClassNames())})}var C=this.$MessengerMessage1(x,false),D=this.$MessengerMessage2(x,null);if(D)C=this.$MessengerMessage1(x,true);var E=!!D&&this.$MessengerMessage3(),F=this.$MessengerMessage4(y);return c("React").createElement(c("MessengerMessageActionsWrapper.react"),{className:c("joinClasses").apply(undefined,["clearfix _o46 _3erg"+(s?" _-5k":"")+(t?" _3i_m":"")+(t?" _nd_":"")+(!t?" _29_7":"")+(v.isSelected?" _3xsz":"")+(E?" _q4a":""),c("messengerRTLClasses")(v.body)].concat(z)),message:v,onShowMenu:this.$MessengerMessage5},F&&!D?F:y,C,F||D||u?null:c("React").createElement(c("MessengerInnerDecorators.react"),{message:A,isFromViewer:t,hovered:this.state.shown[A.message_id],onReplyToMessage:this.props.onReplyToMessage,messageProps:babelHelpers["extends"]({},this.props,{handleToggleOriginal:this.$MessengerMessage6,hasFormatting:this.$MessengerMessage7,isShowingOriginal:this.state.plainText})}),D,this.$MessengerMessage8(A,B),this.$MessengerMessage9(),this.$MessengerMessage10(),c("React").createElement(m,{className:"_4jzq",isFromViewer:t,message:v,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts}))};p.prototype.$MessengerMessage4=function(r){if(!this.props.message.replied_to_message)return null;return c("React").createElement("div",{key:"renderedMessageReply",className:"_3058 _68c4"},r,c("React").createElement(c("MessengerInnerDecorators.react"),{message:this.props.message,isFromViewer:this.props.isFromViewer||false,hovered:this.state.shown[this.props.message.message_id],messageProps:this.props}))};p.prototype.$MessengerMessage8=function(r,s){__p&&__p();var t,u=this;if(r&&!this.props.hideAfterExternalDecorator){var t=function(){__p&&__p();var v=[],w=[];c("MessengerDecorator").getAfterExternalDecorators().forEach(function(y){if(r&&y.check(r)){v.push(y.render(r,s,this.props));w.push(y.getAdditionalClassNames())}},u);var x=w.join(" ");if(v.length===0)return{v:null};return{v:c("React").createElement("span",{className:c("joinClasses")(x,"_31gm"+(!s?" isFromOther":""))},v)}}();if(typeof t==="object")return t.v}return null};p.prototype.$MessengerMessage11=function(r){return r.every(function(s){return!s||!c("MessengerAttachmentRenderer").isRenderedShareAttachment(s)})};p.prototype.$MessengerMessage12=function(){return this.props.message.attachments.length===1&&c("MercuryAttachment").hasAttribution(this.props.message.attachments[0])};p.prototype.$MessengerMessage2=function(r,s){__p&&__p();if(this.props.message.is_filtered_content)return null;if(this.props.message.commerce_message_type===c("MNCommerceMessageType").RIDE_INTENT)return null;var t=[],u=[],v=this.props.message,w=this.props.isFromViewer||false;if(v)c("MessengerDecorator").getAfterDecorators().forEach(function(B){if(B.check(v,w)){t.push(B.render(v,w,this.props,this.state.shown[this.props.message.message_id]));u.push(B.getAdditionalClassNames())}}.bind(this));var x=c("MessengerAttachmentRenderer").getAttachmentsOutsideBubble(this.props.message,this.props.onAttachmentLoad,{customColor:this.props.customColor,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,isVisible:this.state.isVisible,onSelect:this.$MessengerMessage13,onUnwrap:null,pageID:this.props.pageID},t);if(!x||!x.length)return null;if(r){var y=x.some(function(B){return!!B&&c("MessengerAttachmentRenderer").isPhotosGroupAttachment(B)});if(this.$MessengerMessage12())x=[c("React").createElement("span",{key:"AttachmentWithAttribution"},x[0],c("React").createElement(c("MessengerAttachmentAttribution.react"),{attachment:new(c("ImmutableObject"))(this.props.message.attachments[0])}))];x=this.$MessengerMessage11(x)?c("React").createElement("div",babelHelpers["extends"]({},r,{className:c("joinClasses").apply(undefined,["_3zvs"+(y?" _2-x3":"")].concat(u))}),x,t):x.map(function(B){return B&&c("React").cloneElement(B,r)})}var z=c("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(this.props.message),A=c("React").createElement("div",{key:"renderedAttachments",className:"_3058 _15gf"+(z?" _3duc":"")},x,this.props.isPageMessage?null:c("React").createElement(c("MessengerInnerDecorators.react"),{message:this.props.message,isFromViewer:this.props.isFromViewer||false,hovered:this.state.shown[this.props.message.message_id],messageProps:this.props}));if(this.$MessengerMessage12())return c("React").createElement(c("MessengerBubbleBlock.react"),null,A);return A};p.prototype.$MessengerMessage14=function(){return c("MessengerAttachmentRenderer").isP2PAttachment(this.props.message)};p.prototype.$MessengerMessage1=function(r,s){__p&&__p();var t=this.props.message,u=c("immutable").List(c("MessengerAttachmentRenderer").getAttachmentsInsideBubble(t,this.props.onAttachmentLoad)),v=t.ranges;if(t.profile_ranges&&t.profile_ranges.length)v=(v||[]).concat(t.profile_ranges.map(function(y){return babelHelpers["extends"]({},y,{url:c("MessengerURIUtils.bs").getURIForUserID(y.id)})}));var w=c("MessengerCodePasteUtils").containsCodeBlock(t.body)&&!this.state.plainText;if(t.is_filtered_content)return c("React").createElement("div",{className:"_3058 _wiu _52mr uiBoxYellow clearfix"},c("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(t));var x=t.body&&!c("EmojiLikeUtils").isEmojiLike(t);if(x||!u.isEmpty())return c("React").createElement(c("MessengerBubble.react"),babelHelpers["extends"]({attachments:u,body:t.body,bodyRef:function(y){this.messageBody=y}.bind(this),className:w?(this.props.isFromViewer?"_3uhm":"")+(!this.props.isFromViewer?" _3uhn":""):"_3058 _ui9",containsCode:w,customColor:this.props.isFromViewer?this.props.customColor:"",customLike:t.customLike,excludeAfterDecorators:s,isFromViewer:this.props.isFromViewer,isP2PAttachment:this.$MessengerMessage14(),ranges:v,message:t,metaRanges:t.meta_ranges,plainText:this.state.plainText,threadCustomColor:this.props.threadCustomColor||"#0084ff",threadID:t.thread_id,participants:this.props.participants},r||{}));return null};p.prototype.$MessengerMessage10=function(){__p&&__p();if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var r=c("MercuryMessageInfo").getDeliveryState(this.props.message,this.props.deliveryTimestamp);if(r===c("MercuryMessageDeliveryState").UNKNOWN)return null;var s={};if(this.props.customColor&&(r===c("MercuryMessageDeliveryState").SENT||r===c("MercuryMessageDeliveryState").SENDING||r===c("MercuryMessageDeliveryState").DELIVERED))s.color=this.props.customColor;var t=o(r);return c("React").createElement("span",{className:"_2her"+(r===c("MercuryMessageDeliveryState").SENDING?" _4jzp":"")+(r===c("MercuryMessageDeliveryState").SENT?" _3zzf":"")+(r===c("MercuryMessageDeliveryState").DELIVERED?" _9ah":"")+(r===c("MercuryMessageDeliveryState").ERROR?" _5ei9":""),style:s,title:t},c("React").createElement("i",{"aria-label":t,"aria-roledescription":j._("Status icon"),className:"_57e_",role:"img"}))};p.prototype.$MessengerMessage9=function(){var r=this.props.message;if(!c("MercuryMessageInfo").hasError(r))return null;return c("React").createElement(c("MercuryMessageError.react"),{className:"_3058 _2ygi",message:r,authorFBID:this.props.authorFBID})};p.prototype.$MessengerMessage3=function(){var r=this.props.message,s=false;if(r)s=!!(r.reactions&&Object.keys(r.reactions).length>0);return s};p.propTypes={customColor:n.string,deliveryTimestamp:n.number.isRequired,hideAfterExternalDecorator:n.bool,hideBeforeDecorator:n.bool,isActive:n.bool,isFromViewer:n.bool,isPageMessage:n.bool,message:n.instanceOf(c("ImmutableObject")).isRequired,nextTimestamp:n.number.isRequired,onAttachmentLoad:n.func.isRequired,onDeselect:n.func.isRequired,onSelect:n.func.isRequired,onReplyToMessage:n.func,participants:n.instanceOf(c("immutable").Map).isRequired,readReceipts:n.instanceOf(c("immutable").OrderedMap).isRequired,showDeliveryState:n.bool,authorFBID:n.string,threadCustomColor:n.string,pageID:n.string};p.defaultProps={onAttachmentLoad:c("emptyFunction"),threadCustomColor:"#0084ff"};function q(r){if(c("getViewportDimensions")().width<=parseInt("700px".replace("px",""),10))return"above";return r?"right":"left"}f.exports=c("FluxContainer").create(p,{withProps:true})}),null);
__d("MessengerPageAdminNoteList.react",["cx","fbt","LeftRight.react","MessengerBubble.react","PagesMessengerCreatorInfo.react","ReactComponentWithPureRenderMixin","React","enumerate","classWithMixins","immutable","mixin"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("classWithMixins")(c("React").Component,c("mixin")(c("ReactComponentWithPureRenderMixin"))));k=j&&j.prototype;m.prototype.render=function(){var n=[],o=this.calculateGroups(this.props.notes);o.forEach(function(p,q){n.push(c("React").createElement("li",{className:"_4kd2",key:"group:"+q},this.$MessengerPageAdminNoteList1(p)))}.bind(this));return c("React").createElement("ul",{className:"_4kd3"},n)};m.prototype.$MessengerPageAdminNoteList1=function(n){var o=[];n.forEach(function(p,q){o.push(c("React").createElement("div",{className:"_4kd4",key:"note:"+q},this.$MessengerPageAdminNoteList2(p,n)))}.bind(this));return o};m.prototype.$MessengerPageAdminNoteList2=function(n,o){var p=c("immutable").List([c("React").createElement(c("LeftRight.react"),{className:"_561k"},c("React").createElement("div",{className:"_561l"},i._("Private note")),c("React").createElement(c("PagesMessengerCreatorInfo.react"),{key:"creator_info",creator_info:o[0].creator_info,isNote:true}))]);return c("React").createElement("div",{className:"_o46 _3i_m _nd_"},c("React").createElement("div",{className:"clearfix"},c("React").createElement(c("MessengerBubble.react"),{body:n.body.text,attachments:p,className:"_3058 _4kd5"})))};m.prototype.calculateGroups=function(n){__p&&__p();var o=[],p=null,q=null,r=c("enumerate")(n),s=void 0;while(!(s=r.next()).done){var t=q&&q.value.creator_info.creatorID===s.value.creator_info.creatorID;if(!t){p=[];o.push(p)}if(p)p.push(s.value);q=s}return o};function m(){j.apply(this,arguments)}m.propTypes={notes:l.arrayOf(l.shape({id:l.string,body:l.object.isRequired,creator_info:l.shape({creatorID:l.string.isRequired,creatorName:l.string.isRequired,creatorType:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string}),timestamp:l.number.isRequired})).isRequired};f.exports=m}),null);
__d("MessengerMessageGroup.react",["cx","fbt","invariant","BootloadOnRender.react","CurrentUser","Image.react","immutable","ImmutableObject","JSResource","LazyComponent.react","Link.react","MercuryIDs","MercuryParticipants","MercuryParticipantSilhouettes","MessengerActions","MessengerContactActions.bs","MessengerMessage.react","MessengerPageAdminNoteList.react","MessengerProfileImageWrapperReact.bs","MessengerStickerUtils","MessengerTextWithEmoticons.react","MessengerURIUtils.bs","PagesMessengerCreatorInfo.react","React","ReactDOM","SimpleXUIDialog","gkx"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("MessengerContactActions.bs").actions,l=c("MessengerProfileImageWrapperReact.bs").jsComponent,m=c("immutable").List,n=c("immutable").OrderedMap,o=c("React").PropTypes,p=32,q=new(c("ImmutableObject"))({image_src:c("MercuryParticipantSilhouettes").neutralSilhouette,is_messenger_user:true,name:""}),r=c("React").createClass({displayName:"MessengerMessageGroup",_subscription:null,propTypes:{activeMessageID:o.string,deliveryTimestamp:o.number.isRequired,hasDateBreak:o.bool,isCanonical:o.bool,isFromViewer:o.bool,isPageMessage:o.bool,lastReadTimestamp:o.number.isRequired,messages:o.instanceOf(m).isRequired,nextTimestamp:o.number.isRequired,onAttachmentLoad:o.func,onMessageDeselect:o.func.isRequired,onMessageSelect:o.func.isRequired,personaID:o.string,onReplyToMessage:o.func,readReceipts:o.instanceOf(n).isRequired,thread:o.object,pageID:o.string},getInitialState:function u(){return{participants:{}}},componentDidMount:function u(){this._subscription=this._computeParticipants()},shouldComponentUpdate:function u(v,w){return this.props.activeMessageID!==v.activeMessageID||this.props.isFromViewer!==v.isFromViewer||this.props.deliveryTimestamp!==v.deliveryTimestamp||this.props.lastReadTimestamp!==v.lastReadTimestamp||!c("immutable").is(this.props.messages,v.messages)||!c("immutable").is(this.props.readReceipts,v.readReceipts)||this.state.participants!==w.participants||Boolean(v.thread&&this.props.thread&&this.props.thread!==v.thread)},componentDidUpdate:function u(){var v=s(this.props);if(!this._subscription&&!v.every(function(w){return this.state.participants[w]}.bind(this)))this._subscription=this._computeParticipants()},componentWillUnmount:function u(){this._subscription&&this._subscription.remove()},render:function u(){return c("React").createElement("div",null,c("React").createElement("div",{className:"_1t_p clearfix"+(c("MessengerStickerUtils").isStickerMessageGroup(this.props.messages)?" _5tx1":"")+(this._hasSeenHeadsAtBottom()?" _35fy":"")},this._renderProfileColumn(),c("React").createElement("div",{className:"_41ud"},this._renderName(),this._renderMessages())),this.props.isPageMessage?this._renderNotes():null)},_renderProfileColumn:function u(){__p&&__p();if(this.props.isFromViewer)return null;var v=this.props.messages.last(),w=this.state.participants[v.author]||q;if(this.props.personaID)w=this.state.participants[this.props.personaID]||q;var x=i._("{name}",[i._param("name",w.name)]),y=c("CurrentUser").isWorkUser()&&w.is_coworker===false,z=c("React").createElement(l,{className:"_1t_r",isMessengerUser:w.is_messenger_user,size:p,showBadge:y,isMultiCompany:y,tooltipContent:x},c("React").createElement(c("Image.react"),{alt:w.name,src:w.image_src,height:p,width:p}));if(w.fbid){var A=c("MessengerURIUtils.bs").getURIForUserID(w.fbid);if(!this.props.personaID&&c("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu"))z=c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("MessengerAvatarActions.react").__setRef("MessengerMessageGroup.react"),placeholder:!this.props.isCanonical?c("React").createElement(c("Link.react"),{className:"_5f0v",href:A.toString(),onClick:this._handleContactSelect.bind(this,w),tabIndex:-1},z):z,component:c("React").createElement(c("LazyComponent.react"),{avatar:z,contact:w,showSendMessageItem:!this.props.isCanonical,onAction:this._handleContactAction})});else if(!this.props.isCanonical)z=c("React").createElement(c("Link.react"),{className:"_5f0v",href:A.toString(),onClick:this._handleContactSelect.bind(this,w),tabIndex:-1},z)}return c("React").createElement("div",{className:"_1t_q"},z)},_handleContactAction:function u(v,w,x){__p&&__p();switch(v){case k.MESSAGE:this._handleContactSelect(w,x);break;case k.PROFILE:var y=this.state.participants[w.id];if(y&&y.href)window.open(y.href);else this._handleContactSelect(w,x);break;case k.FREE_CALL:e(["FBRTCCore","MNRTCCallabilityStore"],function(z,A){var B=w.fbid;B||j(0);if(z.isAvailableForWebrtcCalling(B)||A.isCallable(B))z.startOutgoingCall(B,"messenger_dot_com",false);else c("SimpleXUIDialog").show(i._("{firstname} can't be reached at the moment.",[i._param("firstname",w.short_name)]),i._("Can't Connect Call"))});break}},_renderMessages:function u(){var v=this.props.messages.size,w=[];this.props.messages.forEach(function(x,y,z){var A=x.message_id===this.props.activeMessageID,B=c("MercuryIDs").getUserIDFromParticipantID(this.props.author),C=this.props.thread?this.props.thread.custom_color:"",D=this.props.onAttachmentLoad;w.push(c("React").createElement(c("MessengerMessage.react"),{customColor:C,deliveryTimestamp:this.props.deliveryTimestamp,isActive:A,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,key:x.message_id,message:x,messageActionsWrapper:this.props.messageActionWrapper,onAttachmentLoad:D,participants:c("immutable").Map(this.state.participants),nextTimestamp:this._getNextTimestamp(z,v,y),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.props.readReceipts,showDeliveryState:x.timestamp>this.props.lastReadTimestamp,ref:x.message_id,authorFBID:B==null?undefined:B,threadCustomColor:C,pageID:this.props.pageID}));if(t(this.props.isPageMessage,z,y,x))w.push(c("React").createElement(c("PagesMessengerCreatorInfo.react"),{key:"creator_info:"+y,creator_info:x.creator_info}))}.bind(this));return w},_renderNotes:function u(){var v=[];this.props.messages.forEach(function(w,x,y){if(this.props.isPageMessage&&w.page_admin_notes)v.push(c("React").createElement(c("MessengerPageAdminNoteList.react"),{key:"notes:"+w.message_id,notes:w.page_admin_notes}))}.bind(this));return v},_renderName:function u(){__p&&__p();var v=this.props.messages.first(),w=this.props.personaID?this.state.participants[this.props.personaID]:this.state.participants[v.author];if(!w)return null;if(v.replied_to_message)return null;var x=w.short_name;if(this.props.thread){var y=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null,z=c("MercuryIDs").getUserIDFromParticipantID(w.id);if(y&&z&&y[z])x=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:y[z]})}if(this.props.personaID){var A=this.state.participants[v.author];x=A?i._("{persona name} from {page name}",[i._param("persona name",w.name),i._param("page name",A.short_name)]):w.name}return c("React").createElement("h5",{className:"_ih3"+(this.props.isFromViewer?" accessible_elem":"")+(this.props.isCanonical&&!this.props.personaID?" _-ne":"")},x)},getMessageElement:function u(v){return c("ReactDOM").findDOMNode(this.refs[v])},_hasSeenHeadsAtBottom:function u(){var v=this.props,w=v.messages,x=v.nextTimestamp,y=v.readReceipts,z=w.last().timestamp,A=0;y.forEach(function(B){if(B>=z&&B<x)if(++A===2)return false});return A===2},_getNextTimestamp:function u(v,w,x){return x<w-1?v.get(x+1).timestamp:this.props.nextTimestamp},_handleContactSelect:function u(v,w){w&&w.preventDefault();var x=c("MercuryIDs").getThreadIDFromParticipantID(v.id);x&&c("MessengerActions").selectThread(x)},_computeParticipants:function u(){__p&&__p();var v=s(this.props),w={},x=[];v.forEach(function(y){var z=c("MercuryParticipants").getNow(y);w[y]=z;if(!z)x.push(y)});this.setState({participants:w});if(x.length>0)return c("MercuryParticipants").getMulti(x,function(y){var w=this.state.participants;x.forEach(function(z){w[z]=y[z]});this._subscription=null;this.setState({participants:w})}.bind(this));return null}});function s(u){var v=u.personaID?u.personaID:u.messages.first().author,w=[v];u.readReceipts.forEach(function(x,y){return w.push(y)});return w}function t(u,v,w,x){if(!u||!x.creator_info)return false;if(w===v.size-1)return true;var y=v.get(w+1).creator_info;if(!y)return true;return x.creator_info.creatorID!==y.creatorID}f.exports=r}),null);
__d("MessengerNewMessagesNoticeReact.bs",["cx","ix","fbt","React","LinkReact.bs","ImageReact.bs","ReasonReact.bs"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=i("86939"),l=j._("New messages"),m=c("ReasonReact.bs").statelessComponent("MessengerNewMessagesNoticeReact");function n(p,q,r,s){var t=r?r[0]:l;return[m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],function(){return c("React").cloneElement(c("React").createElement("div",{className:"_4wzq"+(p?" _4wzr":"")+(!p?" _4-je":"")},c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make(0,["_5f0v _4wzs"],0,0,0,0,0,0,[q],0,0,0,0,[p?0:-1],0,0,[c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(["_4wzt"],0,[k],0,0,0,0,[])),c("React").createElement("div",{className:"_1bqr"},t)]))),{"aria-hidden":!p})},m[10],m[11],m[12],m[13]]}var o=c("ReasonReact.bs").wrapReasonForJs(m,function(p){return n(p.isOpen,p.onClick,[p.label],[])});g.newMessageSrc=k;g.defaultLabel=l;g.component=m;g.make=n;g.jsComponent=o}),null);
__d("MessengerPlatformSubscriptionMessageClassification",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({EXEMPTED_TEMPLATE_MESSAGE:"exempted_template_message",MESSAGE_WITHIN_24HRS:"message_within_24hrs",SUBSCRIPTION_MESSAGE:"subscription_message",ACCEPTABLE_EXTRA_MESSAGE:"acceptable_extra_message",UNACCEPTABLE_EXTRA_MESSAGGE:"unacceptable_extra_message",AD_MESSAGE:"ad_message",FREE_LIMIT:"FREE_LIMIT"})}),null);
__d("XSetNUXSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/chat/nux_seen/",{setting_name:{type:"String"}})}),null);
__d("MessagingShowNUX.react",["AsyncRequest","ChatConfig","React","XSetNUXSeenController","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={showNUX:!c("ChatConfig").get(this.props.settingName)},this.$MessagingShowNUX1=function(){if(!this.state.showNUX)return;c("ChatConfig").set(this.props.settingName,true);new(c("AsyncRequest"))(c("XSetNUXSeenController").getURIBuilder().getURI()).setData({setting_name:this.props.settingName}).send();this.setState({showNUX:false});this.props.onHidden()}.bind(this),m}k.prototype.render=function(){return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,onCloseButtonClick:this.$MessagingShowNUX1,position:"left",width:"auto",shown:this.state.showNUX&&this.props.shown},this.props.children)};k.propTypes={children:j.any,contextRef:j.func.isRequired,onHidden:j.func.isRequired,settingName:j.string.isRequired,shown:j.bool.isRequired};f.exports=k}),null);
__d("MessengerQuickCamDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=new j({strict:false})}),null);
__d("MessengerQuickCamActions",["MessengerQuickCamDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CLOSE:null,COUNT_DOWN_TIMER:null,COUNT_DOWN_TIMER_START:null,PROCESS_RECORDING:null,REGISTER_QUICKCAM:null,REMOVE_ALL_LISTENERS:null,REQUEST_USER_MEDIA:null,RETAKE:null,SEND_PHOTO:null,SEND_VIDEO:null,SET_MEDIA:null,SHUTTER_OFF:null,STOP_VIDEO:null,TAKE_VIDEO:null,UPDATE_PROGRESS:null,UPLOAD_COMPLETE:null,UPLOAD_ERROR:null,USER_MEDIA_ERROR:null}),i={Types:h,close:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.CLOSE})},countDownTimer:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.COUNT_DOWN_TIMER})},countDownTimerStart:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.COUNT_DOWN_TIMER_START})},processRecording:function j(k){c("MessengerQuickCamDispatcher").dispatch({type:h.PROCESS_RECORDING,videoBlob:k})},registerQuickCam:function j(k,l){c("MessengerQuickCamDispatcher").dispatch({type:h.REGISTER_QUICKCAM,source:k,quickcam:l})},requestUserMedia:function j(k,l){c("MessengerQuickCamDispatcher").dispatch({type:h.REQUEST_USER_MEDIA,viewer:k,threadID:l})},retake:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.RETAKE})},sendPhoto:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.SEND_PHOTO})},sendVideo:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.SEND_VIDEO})},setMedia:function j(k,l){c("MessengerQuickCamDispatcher").dispatch({type:h.SET_MEDIA,videoSrc:k,videoStream:l})},stopVideo:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.STOP_VIDEO})},shutterOff:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.SHUTTER_OFF})},takeVideo:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.TAKE_VIDEO})},updateProgress:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.UPDATE_PROGRESS})},uploadError:function j(k){c("MessengerQuickCamDispatcher").dispatch({type:h.UPLOAD_ERROR,error:k})},uploadComplete:function j(k){c("MessengerQuickCamDispatcher").dispatch({type:h.UPLOAD_COMPLETE,data:k})},userMediaError:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.USER_MEDIA_ERROR})}};f.exports=i}),null);
__d("MessengerQuickCamButtonHTML5.react",["cx","fbt","BootloadedComponent.react","ChatConfig","JSResource","AutoFocusableLink.react","MessagingShowNUX.react","MessengerDialog.react","MessengerQuickCamActions","MessengerQuickCamOrigins","MessengerSpinner.react","React","XUIDialog.react","XUISpinner.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="seen_cam_button_nux";j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={dialogOpen:!!this.props.clicked,nuxShown:!!c("ChatConfig").get(m),nuxOpen:false},this.$MessengerQuickCamButtonHTML53=function(){this.setState({nuxOpen:false,nuxShown:true,dialogOpen:true})}.bind(this),this.$MessengerQuickCamButtonHTML56=function(){if(this.state.dialogOpen)this.setState({dialogOpen:false})}.bind(this),this.$MessengerQuickCamButtonHTML57=function(t){if(!t)this.$MessengerQuickCamButtonHTML56();else c("MessengerQuickCamActions").requestUserMedia(this.props.viewer,this.props.threadID)}.bind(this),this.$MessengerQuickCamButtonHTML51=function(t){if(!this.state.nuxShown){this.setState({nuxOpen:true});return}if(this.state.dialogOpen)return;t.stopPropagation();this.setState({dialogOpen:!this.state.dialogOpen})}.bind(this),p}n.prototype.render=function(){var o=this.props.textChild;return c("React").createElement(c("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,className:c("joinClasses")(this.props.className,"_30yy"),onClick:this.$MessengerQuickCamButtonHTML51,ref:"photoButton",role:"button",title:i._("Take a picture using quick cam")},!!o&&o,this.$MessengerQuickCamButtonHTML52())};n.prototype.$MessengerQuickCamButtonHTML52=function(){if(!this.state.nuxShown)return c("React").createElement(c("MessagingShowNUX.react"),{contextRef:function(){return this.refs.photoButton}.bind(this),settingName:m,shown:this.state.nuxOpen,onHidden:this.$MessengerQuickCamButtonHTML53,ref:"camNUX"},i._("Send photos and videos from your computer's camera."));if(!this.state.dialogOpen)return null;return this.props.location===c("MessengerQuickCamOrigins").MESSENGER?this.$MessengerQuickCamButtonHTML54():this.$MessengerQuickCamButtonHTML55()};n.prototype.$MessengerQuickCamButtonHTML54=function(){var o=window.innerWidth/3;return c("React").createElement(c("MessengerDialog.react"),{overflow:"hidden",contextRef:function(){return this.refs.photoButton}.bind(this),shown:this.state.dialogOpen,onBlur:this.$MessengerQuickCamButtonHTML56,onToggle:this.$MessengerQuickCamButtonHTML57,width:400>o?400:o},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("MessengerSpinner.react"),null)),bootloadLoader:c("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerQuickCamButtonHTML5.react"),location:this.props.location,onShown:function(p){this.$MessengerQuickCamButtonHTML57(true);if(this.props.onDialogShown)this.props.onDialogShown(p)}.bind(this),onHidden:this.$MessengerQuickCamButtonHTML56,onEscKeyDown:this.$MessengerQuickCamButtonHTML56,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};n.prototype.$MessengerQuickCamButtonHTML55=function(){var o=window.innerWidth/3;return c("React").createElement(c("XUIDialog.react"),{overflow:"hidden",contextRef:function(){return this.refs.photoButton}.bind(this),shown:this.state.dialogOpen,onBlur:this.$MessengerQuickCamButtonHTML56,hideOnEscape:true,onToggle:this.$MessengerQuickCamButtonHTML57,width:400>o?400:o},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("XUISpinner.react"),null)),bootloadLoader:c("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerQuickCamButtonHTML5.react"),location:this.props.location,onShown:function(p){this.$MessengerQuickCamButtonHTML57(true);if(this.props.onDialogShown)this.props.onDialogShown(p)}.bind(this),onHidden:this.$MessengerQuickCamButtonHTML56,onEscKeyDown:this.$MessengerQuickCamButtonHTML56,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};n.propTypes={autoFocus:l.bool,className:l.string.isRequired,clicked:l.bool,location:l.oneOf(c("MessengerQuickCamOrigins").getValues()).isRequired,textChild:l.node,threadID:l.string.isRequired,viewer:l.string.isRequired};f.exports=n}),null);
__d("MessengerTypingIndicator.react",["cx","Image.react","immutable","MercuryParticipants","MercuryTypingAnimation.react","MessengerProfileImageWrapperReact.bs","MessengerBubble.react","ReactComponentWithPureRenderMixin","React","createReactClass_DEPRECATED"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("MessengerProfileImageWrapperReact.bs").jsComponent,j=c("React").PropTypes,k=32,l=c("createReactClass_DEPRECATED")({displayName:"MessengerTypingIndicator",_subscription:null,mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{userID:j.string,showName:j.bool},getInitialState:function m(){var n=this.props.userID;if(!n)return{author:null};return{author:c("MercuryParticipants").getNow(n)}},componentDidMount:function m(){var n=this.props.userID;if(!this.state.author&&n){var o=c("MercuryParticipants").getNow(n);if(!o)this._subscription=this._computeAuthor(this.props);this.setState({author:o})}},componentDidUpdate:function m(){if(this._subscription)return;if(this.state.author&&this.state.author.id===this.props.userID)return;this._subscription=this._computeAuthor(this.props)},componentWillUnmount:function m(){this._subscription&&this._subscription.remove()},_computeAuthor:function m(n){var o=n.userID;if(!o)return null;return c("MercuryParticipants").getMulti([o],function(p){this._subscription=null;this.setState({author:p[o]})}.bind(this))},render:function m(){if(!this.state.author)return null;var n=this.state.author;return c("React").createElement("div",{className:"_1t_p _1hbw"},c("React").createElement("div",{className:"_1t_q"},c("React").createElement(i,{className:"_1t_r",isMessengerUser:n.is_messenger_user,size:k,showBadge:true},c("React").createElement(c("Image.react"),{alt:"",src:n.image_src,height:k,width:k}))),c("React").createElement("div",{className:"_41ud"},c("React").createElement("div",{className:"_o46 _3erg _29_7"},c("React").createElement(c("MessengerBubble.react"),{attachments:c("immutable").List([c("React").createElement(c("MercuryTypingAnimation.react"),{key:"animation"})]),body:"",className:"_3058",ref:"bubble"}))))},getBubble:function m(){return this.refs.bubble}});f.exports=l}),null);
__d("MessengerConversation.react",["csx","cx","fbt","Bootloader","BootloadOnRender.react","ChatTypingIndicatorsWrapper.react","CSS","DOM","DOMDimensions","Event","EventProfiler","immutable","ImmutableObject","JSReliabilityFixesGatingConfig","JSResource","KeyEventController","LazyComponent.react","MercuryActionType","MercuryIDs","MessengerReadReceipt.bs","MercuryShareAttachmentRenderLocations","MessageList.react","MessengerAttachmentRenderer","MessengerButtonReact.bs","MessengerCollapsedLogMessageGroup.react","MessengerContextBannerContainer.react","MessengerDateBreak.react","MessengerDeliveryReceipt.bs","MessengerFlexScrollableArea.react","MessengerBootloadedLogMessage.react","MessengerMessageGroup.react","MessengerNewMessagesNoticeReact.bs","MessengerPlatformSubscriptionMessageClassification","MessengerQuickCamButtonHTML5.react","MessengerQuickCamOrigins","MessengerSpinner.react","MessengerTypingIndicator.react","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","MessengerViewerContactMethodsWebGraphQLQuery","Parent","React","ReactDOM","SubscriptionsHandler","UserActivity","WebGraphQL","WebMessengerConstants","convertMIGColorToFIGColor","getPageIDFromThreadID","gkx","idx","ifRequired","joinClasses","setImmediate","throttle"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("MessengerButtonReact.bs").jsComponent,n=c("MessengerNewMessagesNoticeReact.bs").jsComponent,o=c("immutable").OrderedMap,p=c("React").PropTypes,q=20,r=100,s=1e3;function t(event,x){return!!(c("KeyEventController").filterEventTypes(event,x)&&c("KeyEventController").filterEventModifiers(event,x)&&event.target instanceof Element&&c("Parent").bySelector(event.target,"._4_j4"))}k=babelHelpers.inherits(u,c("React").PureComponent);l=k&&k.prototype;function u(){__p&&__p();var x,y;for(var z=arguments.length,A=Array(z),B=0;B<z;B++)A[B]=arguments[B];return y=(x=l.constructor).call.apply(x,[this].concat(A)),this.state={readReceipts:v(this.props),scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:this.props.thread?this.props.thread.unread_count:0,width:0,viewerEmail:null,viewerPhone:null},this.$MessengerConversation1=null,this.$MessengerConversation2=null,this.$MessengerConversation4=[],this.$MessengerConversation5={originalScrollHeight:0,originalScrollTop:0},this.$MessengerConversation15=function(){__p&&__p();var C=this.$MessengerConversation17();if(!this.refs||!C||this.props.isLoading){this.$MessengerConversation4=[];return}var D=c("getPageIDFromThreadID")(this.props.threadID),E=this.refs.messageList;if(!E||!D){this.$MessengerConversation4=[];return}var F=10,G=C.getElement().getBoundingClientRect(),H=[];this.$MessengerConversation3.forEach(function(I){__p&&__p();var J=I.message_id,K=this.refs.messageList.getMessageElement(J);if(K){var L=K.getBoundingClientRect();if(L.top>G.top-F&&L.bottom<G.bottom+F){H.push(J);if(!this.$MessengerConversation4.includes(J))c("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(M,N){M.log(I.ad_client_token,I.ad_id,N.MESSAGE_SEEN_THREAD,true,J,D)},"MessengerConversation.react")}}}.bind(this),this);this.$MessengerConversation4=H}.bind(this),this.$MessengerConversation8=function(){var C=this.$MessengerConversation17();C&&C.pageUp();return false}.bind(this),this.$MessengerConversation9=function(){var C=this.$MessengerConversation17();C&&C.pageDown();return false}.bind(this),this.$MessengerConversation10=function(C){if(C.target===document.body){this.scrollToTop();return false}return null}.bind(this),this.$MessengerConversation11=function(C){if(C.target===document.body){this.scrollToBottom();return false}return null}.bind(this),this.$MessengerConversation14=function(){__p&&__p();if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(!this.refs.scrollable)return;var C=this.$MessengerConversation17(),D=this.refs.quickReply;D&&c("CSS").conditionClass(D,"_1mzg",!this.isScrolledToBottom());this.$MessengerConversation12();this.$MessengerConversation13();if(C&&this.state.unreadCount&&this.$MessengerConversation21(C))this.setState({showUnreadNotice:false,unreadCount:0});this.$MessengerConversation31(C);this.$MessengerConversation32(C);this.$MessengerConversation7()}.bind(this),this.$MessengerConversation30=function(C){C.preventDefault();this.setState({showUnreadNotice:false});this.$MessengerConversation19()}.bind(this),this.$MessengerConversation13=function(){__p&&__p();if(this.props.messages.size===0||this.props.thread&&this.props.thread.unread_count===0||!this.isScrolledToBottom())return;if(c("UserActivity").isOnTab()&&c("UserActivity").isActive())this.props.onRead(this.props.threadID);else if(!this.$MessengerConversation2)this.$MessengerConversation2=c("UserActivity").subscribe(function(){if(c("UserActivity").isOnTab()){this.$MessengerConversation16();this.props.onRead(this.props.threadID)}}.bind(this))}.bind(this),this.handleResize=function(){__p&&__p();if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(this.refs.scrollable){this.refs.scrollable.handleResize();var C=c("DOMDimensions").getElementDimensions(c("ReactDOM").findDOMNode(this.refs.scrollable)).width;if(C!==this.state.width)this.setState({width:C})}var D=this.refs.quickReply;D&&c("CSS").conditionClass(D,"_1mzg",!this.isScrolledToBottom());this.trackBottomIfRequired()}.bind(this),y}u.prototype.componentDidMount=function(){__p&&__p();var x=new(c("SubscriptionsHandler"))();x.addSubscriptions(c("Event").listen(window,"resize",c("throttle")(this.handleResize,50)),c("KeyEventController").registerKey("PAGE_UP",this.$MessengerConversation8,t),c("KeyEventController").registerKey("PAGE_DOWN",this.$MessengerConversation9,t),c("KeyEventController").registerKey("HOME",this.$MessengerConversation10,t),c("KeyEventController").registerKey("END",this.$MessengerConversation11,t));this.$MessengerConversation1=x;this.$MessengerConversation12();this.handleResize();this.$MessengerConversation13();this.$MessengerConversation6=c("throttle")(this.$MessengerConversation14,r);this.$MessengerConversation7=c("throttle")(this.$MessengerConversation15,s);this.$MessengerConversation3=this.props.messages.filter(function(y){return y.is_sponsored});this.$MessengerConversation7()};u.prototype.UNSAFE_componentWillReceiveProps=function(x){var y=x.threadID!==this.props.threadID;if(y){this.$MessengerConversation16();this.setState({scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:x.thread?x.thread.unread_count:0})}if(y||x.messages!==this.props.messages)this.$MessengerConversation3=x.messages.filter(function(z){return z.is_sponsored});this.setState({readReceipts:v(x)})};u.prototype.componentWillUnmount=function(){this.$MessengerConversation16();this.$MessengerConversation1&&this.$MessengerConversation1.release()};u.prototype.UNSAFE_componentWillUpdate=function(x){var y=this.$MessengerConversation17();if(y)this.$MessengerConversation5={originalScrollHeight:y.getScrollHeight(),originalScrollTop:y.getScrollTop()};else this.$MessengerConversation5={originalScrollHeight:0,originalScrollTop:0}};u.prototype.componentDidUpdate=function(x,y){__p&&__p();if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(!this.refs.scrollable)return;var z=this.props.threadID!==x.threadID;if(z||w(x,this.props)){this.scrollToBottom();this.$MessengerConversation18()}else{var A=this.$MessengerConversation17();if(A){var B=A.getScrollHeight();if(B!==this.$MessengerConversation5.originalScrollHeight){var C=A.getScrollHeight()-this.$MessengerConversation5.originalScrollHeight+this.$MessengerConversation5.originalScrollTop;this.refs.scrollable.scrollToPosition(C)}else this.$MessengerConversation18()}}if(this.props.messages!==x.messages){this.$MessengerConversation13();if(this.state.scrollingToUnreadMessage)this.$MessengerConversation19();this.$MessengerConversation20()}setTimeout(function(){var F=this.$MessengerConversation17();this.trackBottomIfRequired();if(F&&this.state.unreadCount&&!this.state.scrollingToUnreadMessage&&!this.props.isLoading)if(this.$MessengerConversation21(F))this.setState({showUnreadNotice:false,unreadCount:0});else this.setState({showUnreadNotice:true});this.$MessengerConversation12();this.$MessengerConversation7()}.bind(this),0);var D=x.messages&&x.messages.size||0,E=this.props.messages&&this.props.messages.size||0;if(z||D===0&&(E>0||!this.props.isLoading))c("EventProfiler").informManualInteractionTimestamp(["MessengerThredRow"],true,"click")};u.prototype.render=function(){__p&&__p();if(this.props.isLoading&&this.props.messages.isEmpty())return this.$MessengerConversation22();var x=this.props.messages.last(),y=c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),z=this.$MessengerConversation23(x),A=this.$MessengerConversation24(x);this.$MessengerConversation25(x);var B=x&&x.author!==y?z||A:null,C=null;if(Array.isArray(B)){var D=B.every(function(M){return M.content_type==="user_email"&&this.state.viewerEmail===null||M.content_type==="user_phone_number"&&this.state.viewerPhone===null}.bind(this));if(!D)C=c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{options:B,threadID:x.thread_id,onVoiceClipCreate:this.props.onVoiceClipCreate,viewer:this.props.viewer,quickCamOriginLocation:c("MessengerQuickCamOrigins").MESSENGER,messageId:x.message_id,pageId:c("MercuryIDs").getUserIDFromParticipantID(x.author),isMessengerAdPreview:this.props.isMessengerAdPreview,isSponsored:x.is_sponsored,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone}),loader:c("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MessengerConversation.react"),placeholder:c("React").createElement("div",null)})}var E=null;if(x&&x.message_source&&x.author!==y&&c("gkx")("AT7Fdvvof3gB21NGh8Fo7o5af68El03cTnUDtqQrI_yHQbziWN3MyQvvj6iMavHBZ0fTg3S3rpHTM9337zgjjUnM")){var F=x.message_source;if(F==="camera"){var G=this.props.thread?c("convertMIGColorToFIGColor")(this.props.thread.custom_color):null,H=c("React").createElement("div",{className:"_1gc5",style:G&&{color:G}},j._("Send a photo reply"));E=c("React").createElement("div",{className:"_1gc6"},c("React").createElement(c("MessengerQuickCamButtonHTML5.react"),{className:"_4rv5 _1gcb",location:c("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer,textChild:H}))}}var I=null,J=null;if(E||C){I=c("React").createElement("div",{className:"_51op"},c("React").createElement("div",{className:"_51oq",onResize:this.handleResize}));J=c("React").createElement("div",{ref:"quickReply",className:"_1mzb",onResize:this.handleResize},E,C)}var K=j._("Messages"),L=j._("Load more...");return c("React").createElement(c("MessengerFlexScrollableArea.react"),{className:this.props.className,flexChildren:this.$MessengerConversation26(),footerChildren:J,onMount:function(){return c("setImmediate")(this.$MessengerConversation13)}.bind(this),onScroll:this.props.useManualFetch?undefined:this.$MessengerConversation6,ref:"scrollable",shouldStickToBottom:true,tabIndex:0},c("React").createElement("div",{"aria-label":K,className:c("joinClasses")("__i_",this.props.innerClassName),role:"region"},c("React").createElement("h3",{className:"accessible_elem"},K),this.$MessengerConversation27(),this.props.useManualFetch&&!this.props.upExhausted?c("React").createElement(m,{className:"_41jf",label:L,onClick:function(){return this.props.fetchMessages(c("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP)}.bind(this),type:"primary",use:"default"}):null,this.$MessengerConversation28(),c("React").createElement(c("MessageList.react"),{DateBreak:c("MessengerDateBreak.react"),deliveryTimestamp:this.props.deliveryReceipts?c("MessengerDeliveryReceipt.bs").getDeliveryTimeOfThread(this.props.deliveryReceipts,this.props.threadID):0,isCanonical:this.props.isCanonical,LogMessage:c("MessengerBootloadedLogMessage.react"),CollapsedLogMessageGroup:c("MessengerCollapsedLogMessageGroup.react"),MessageGroup:c("MessengerMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.$MessengerConversation29(this.props.threadID),onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.state.readReceipts,ref:"messageList",location:c("MercuryShareAttachmentRenderLocations").MESSENGER,viewer:this.props.viewer,thread:this.props.thread}),this.props.useManualFetch&&!this.props.downExhausted?c("React").createElement(m,{className:"_41jf",label:L,onClick:function(){return this.props.fetchMessages(c("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN)}.bind(this),type:"primary",use:"default"}):null,c("React").createElement(c("ChatTypingIndicatorsWrapper.react"),{indicatorClass:c("MessengerTypingIndicator.react"),indicatorsDidShow:function(){this.trackBottomIfRequired()}.bind(this),rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),I))};u.prototype.$MessengerConversation23=function(x){var y=null,z=x&&x.platform_xmd&&JSON.parse(x.platform_xmd),A=z&&z.message_classification===c("MessengerPlatformSubscriptionMessageClassification").AD_MESSAGE;if(A&&Array.isArray(z&&z.quick_replies))y=z&&z.quick_replies;return y};u.prototype.$MessengerConversation24=function(x){var y=x&&x.platform_xmd&&JSON.parse(x.platform_xmd);return Array.isArray(y&&y.quick_replies)?y&&y.quick_replies:null};u.prototype.$MessengerConversation12=function(){if(this.props.useManualFetch)return;var x=this.$MessengerConversation17();if(x&&x.getScrollTop()<q){this.props.fetchMessages(c("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP);this.$MessengerConversation20()}};u.prototype.$MessengerConversation25=function(x){__p&&__p();var y=this.$MessengerConversation24(x);if(!y)return;if(y.some(function(z){return z.content_type==="user_email"||z.content_type==="user_phone_number"}))c("WebGraphQL").exec(new(c("MessengerViewerContactMethodsWebGraphQLQuery"))({})).done(function(z){var A,B,C,D,E=(A=z)!=null?(A=A.viewer)!=null?(A=A.user)!=null?A.all_phones:A:A:A,F=(B=z)!=null?(B=B.viewer)!=null?B.all_emails:B:B,G=!E?null:E.find(function(I){return I.is_preferred});if(!G&&E)G=E[0];var H=!F?null:F.find(function(I){return I.is_primary});this.setState({viewerEmail:(C=H)!=null?C.display_email:C,viewerPhone:(D=G)!=null?(D=D.phone_number)!=null?D.universal_number:D:D})}.bind(this))};u.prototype.isScrolledToBottom=function(){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom())};u.prototype.isScrolledToBottomWithHeight=function(x){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(x))};u.prototype.$MessengerConversation26=function(){return c("React").createElement(n,{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} unread messages","_1":"1 unread message"},[j._plural(this.state.unreadCount,"number")]),onClick:this.$MessengerConversation30})};u.prototype.$MessengerConversation27=function(){if(!this.props.isLoaded)return null;return c("React").createElement(c("MessengerContextBannerContainer.react"),{location:c("MercuryShareAttachmentRenderLocations").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer})};u.prototype.$MessengerConversation28=function(){if(this.props.isLoaded)return null;return c("React").createElement("div",{className:"_2k8v"},this.props.isLoading?c("React").createElement(c("MessengerSpinner.react"),null):null)};u.prototype.$MessengerConversation22=function(){return c("React").createElement("div",{className:"_4xu0"},c("React").createElement(c("MessengerSpinner.react"),{className:"_4xu1",size:c("MessengerSpinner.react").large_size}))};u.prototype.trackBottomIfRequired=function(){if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired()};u.prototype.scrollToBottom=function(){if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToBottom()};u.prototype.scrollToTop=function(x){if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToTop(x)};u.prototype.$MessengerConversation29=function(x){return function(){if(this.props.threadID!==x)return;this.trackBottomIfRequired()}.bind(this)};u.prototype.$MessengerConversation18=function(){c("DOM").scry(c("ReactDOM").findDOMNode(this),"img").forEach(function(x){if(x.complete)return;var y=this.props.threadID,z=c("Event").listen(x,"load",function(){if(this.props.threadID===y)this.trackBottomIfRequired();z.remove()}.bind(this))}.bind(this))};u.prototype.$MessengerConversation33=function(){var x=this.props.messages,y=this.state.unreadCount;if(!y||y>x.size)return null;return x.get(x.size-y)};u.prototype.$MessengerConversation21=function(x){__p&&__p();var y=this.props.messages,z=this.$MessengerConversation33();if(!z)return false;var A=x.getElement().getBoundingClientRect();return y.filter(function(B){return B.timestamp<=z.timestamp}).some(function(B){var C=this.refs.messageList.getMessageElement(B.message_id);if(!C)return false;var D=C.getBoundingClientRect();return D.bottom>A.top&&D.top<A.bottom}.bind(this))};u.prototype.$MessengerConversation34=function(x){return!!this.props.messages.find(function(y){return y.message_id===x})};u.prototype.$MessengerConversation19=function(){__p&&__p();if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:true});var x=this.$MessengerConversation33();if(!x){this.scrollToTop(false);return}this.$MessengerConversation35(x.message_id,function(){this.setState({scrollingToUnreadMessage:false,unreadCount:0})}.bind(this))};u.prototype.$MessengerConversation35=function(x,y){var z=this.refs.messageList.getMessageElement(x,true),A=this.$MessengerConversation17();if(!z||!A)return;var B=z.getBoundingClientRect().top,C=c("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,D=A.getElement().getBoundingClientRect().top,E=B+Math.abs(C)+D;A.setScrollTop(E,true,{callback:y})};u.prototype.$MessengerConversation17=function(){if(c("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;return this.refs.scrollable&&this.refs.scrollable.getArea()};u.prototype.$MessengerConversation16=function(){this.$MessengerConversation2&&this.$MessengerConversation2.unsubscribe();this.$MessengerConversation2=null};u.prototype.$MessengerConversation36=function(){return this.props.messages.filter(function(x){return c("MessengerAttachmentRenderer").isSingleVideoAttachment(x)||c("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(x)}).reverse().map(function(x){return x.message_id})};u.prototype.$MessengerConversation31=function(x){__p&&__p();var y=this.refs.messageList;if(!y||!x)return;var z=[],A=x.getElement().getBoundingClientRect(),B=c("MessengerVideoAutoplayStore").getMessageIDs(this.props.threadID),C=B||this.$MessengerConversation36()||c("immutable").List();C.map(function(D){var E=c("MessengerAttachmentRenderer").getVideoElem(D,y);if(E)z.push([D,E.getBoundingClientRect()])});if(z.length)c("MessengerVideoAutoplayActions").onScroll(this.props.threadID,B?null:C,c("immutable").Map(z),A)};u.prototype.$MessengerConversation37=function(){return this.props.messages.filter(function(x){return c("MessengerAttachmentRenderer").isSingleSphericalPhotoAttachment(x)}).map(function(x){return x.message_id})};u.prototype.$MessengerConversation32=function(x){__p&&__p();c("ifRequired")("MessengerSphericalRendererActions",function(y){__p&&__p();c("ifRequired")("MessengerSphericalRendererStore",function(z){__p&&__p();var A=this.refs.messageList;if(!A||!x)return;var B=[],C=x.getElement().getBoundingClientRect(),D=z.getMessageIDs(this.props.threadID),E=D||this.$MessengerConversation37()||c("immutable").List();E.map(function(F){var G=c("MessengerAttachmentRenderer").getSphericalPhotoElem(F,A);if(G)B.push([F,G.getBoundingClientRect()])});if(B.length)y.onScroll(this.props.threadID,E,c("immutable").Map(B),C)}.bind(this),function(){})}.bind(this),function(){})};u.prototype.$MessengerConversation20=function(){c("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$MessengerConversation36());var x=this.$MessengerConversation37();if(x&&x.count()!==0)c("ifRequired")("MessengerSphericalRendererActions",function(y){y.updateStore(this.props.threadID,x)}.bind(this),function(){c("Bootloader").loadModules(["MessengerSphericalRendererActions","MessengerSphericalRendererStore"],function(y,z){y.updateStore(this.props.threadID,x)}.bind(this),"MessengerConversation.react")}.bind(this))};u.propTypes={contact:p.instanceOf(c("ImmutableObject")),deliveryReceipts:p.object,downExhausted:p.bool,fetchMessages:p.func.isRequired,innerClassName:p.string,isCanonical:p.bool,isLoaded:p.bool,isLoading:p.bool,isMessengerAdPreview:p.bool,messages:p.instanceOf(c("immutable").List).isRequired,onVoiceClipCreate:p.func,onReplyToMessage:p.func,participants:p.instanceOf(c("immutable").Map),readReceipts:p.object.isRequired,thread:p.object,threadID:p.string.isRequired,upExhausted:p.bool,useManualFetch:p.bool,viewer:p.string.isRequired};function v(x){__p&&__p();var y=c("MercuryIDs").getParticipantIDFromUserID(x.viewer),z=c("MessengerReadReceipt.bs").getSeenTimestamps(x.readReceipts,x.threadID),A=new Set(x.thread?x.thread.participants:z.keys());A["delete"](y);var B=null;c("immutable").Seq(x.messages).reverse().forEach(function(C){if(C.action_type!==c("MercuryActionType").LOG_MESSAGE){B=C;return false}return true});return z.withMutations(function(z){__p&&__p();c("immutable").Seq(x.messages).reverse().forEach(function(C){__p&&__p();if(A.size===0)return false;if(!A.has(C.author))return;z.update(C.author,function(D){var E=D;if(!D||D.watermark<=C.timestamp)E={watermark:C.timestamp,action:C.timestamp};if(B&&B.timestamp<E.watermark)E={watermark:B.timestamp,action:B.timestamp};return E});A["delete"](C.author)})})}function w(x,y){var z=c("MercuryIDs").getParticipantIDFromUserID(y.viewer);return y.threadID===x.threadID&&y.messages!==x.messages&&!y.messages.isEmpty()&&y.messages.last()!==x.messages.last()&&y.messages.last().author===z}f.exports=u}),null);
__d("MessengerMessageRequestsInfo.react",["cx","fbt","React"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=function j(){return c("React").createElement("div",{className:"_5u15"},i._("Open a request to get more info about who's messaging you.")," ",i._("They won't know that you've seen it until you accept."))};f.exports=j}),null);
__d("MessengerResponsiveBlock.react",["React","createCancelableFunction","requestAnimationFrame","shallowEqual","throttle"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,visibility:"hidden",zIndex:-1},l={left:0,position:"absolute",top:0,transition:"0s"},m={height:"200%",left:0,position:"absolute",top:0,transition:"0s",width:"200%"};h=babelHelpers.inherits(n,c("React").Component);i=h&&h.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.dirty=false,this.lastWidth=null,this.lastHeight=null,this.lastBreakpointsToggles=null,this.setupWeirdScrollTracking=function(){this.refs.expandChild.style.width="10000px";this.refs.expandChild.style.height="10000px";this.refs.expand.scrollLeft=1e5;this.refs.expand.scrollTop=1e5;this.refs.shrink.scrollLeft=1e5;this.refs.shrink.scrollTop=1e5}.bind(this),this.$MessengerResponsiveBlock2=function(){__p&&__p();var t=this.refs.outer.offsetWidth,u=this.refs.outer.offsetHeight;if(t!=this.lastWidth||u!=this.lastHeight)if(!this.dirty){if(Math.abs(t-(this.lastWidth||0))<10&&Math.abs(u-(this.lastHeight||0))<16)return;this.dirty=true;this.lastWidth=t;this.lastHeight=u;var v=this.props.breakpointsToggles(t,u);if(c("shallowEqual")(this.lastBreakpointsToggles,v))this.dirty=false;else this.forceUpdate(function(){c("requestAnimationFrame")(function(){this.dirty=false}.bind(this))}.bind(this));this.lastBreakpointsToggles=v}this.setupWeirdScrollTracking()}.bind(this),p}n.prototype.componentDidMount=function(){this.$MessengerResponsiveBlock1=c("createCancelableFunction")(this.$MessengerResponsiveBlock2);this.onScroll=c("throttle")(this.$MessengerResponsiveBlock1,50);this.setupWeirdScrollTracking();this.onScroll()};n.prototype.componentWillUnmount=function(){this.$MessengerResponsiveBlock1.cancel()};n.prototype.render=function(){return c("React").createElement("div",{ref:"outer"},this.props.children(this.props.breakpointsToggles(this.lastWidth,this.lastHeight)),c("React").createElement("div",{style:k,onScroll:this.onScroll,ref:"expand"},c("React").createElement("div",{style:l,ref:"expandChild"})),c("React").createElement("div",{style:k,onScroll:this.onScroll,ref:"shrink"},c("React").createElement("div",{style:m})))};n.propTypes={children:j.func.isRequired,breakpointsToggles:j.func.isRequired};f.exports=n}),null);
__d("MessengerThreadListGridWrapper.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.label;return c("React").createElement("div",null,c("React").createElement("h2",{className:"accessible_elem"},m),c("React").createElement("ul",{"aria-label":m,role:"grid"},this.props.children))};function l(){i.apply(this,arguments)}l.propTypes={label:k.string.isRequired};f.exports=l}),null);
__d("MessengerContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function a(b,c,d,e,f,g,h){"use strict";var i=12,j=c("ReactLayer").createClass(c("ReactAbstractContextualDialog").createSpec({addedBehaviors:[c("ContextualLayerAutoFlipHorizontal"),c("ContextualLayerUpdateOnScroll"),c("LayerHideOnEscape"),c("AccessibleLayer")],displayName:"MessengerContextualDialog",shouldSetARIAProperties:false,theme:{wrapperClassName:"_1r_9",arrowDimensions:{offset:i,length:16}}}));f.exports=j}),null);
__d("MessengerRadioButton.react",["cx","React","XUIRadioInput.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("XUIRadioInput.react"),babelHelpers["extends"]({},this.props,{className:"__rm"}))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MessengerRadioList.react",["invariant","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","MessengerRadioButton.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l,m=c("React").PropTypes;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$MessengerRadioListItem1=function(event){event.target instanceof HTMLInputElement||h(0);this.props.onSelect&&this.props.onSelect(this.props.value)}.bind(this),q}n.prototype.render=function(){return c("React").createElement("li",{className:this.props.className},c("React").createElement(c("InputLabel_DEPRECATED.react"),{display:"inline"},c("React").createElement(c("MessengerRadioButton.react"),{checked:this.props.selectedValue===this.props.value,disabled:!!this.props.disabled,name:this.props.name,onChange:this.$MessengerRadioListItem1,value:this.props.value}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),null,this.props.children)))};n.propTypes={disabled:m.bool,name:m.string,onSelect:m.func,selectedValue:m.any,value:m.any};k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;o.prototype.render=function(){var p=c("React").Children.map(this.props.children,function(q){return c("React").cloneElement(q,{name:this.props.name,onSelect:this.props.onValueChange,selectedValue:this.props.selectedValue})},this);return c("React").createElement("ul",babelHelpers["extends"]({},this.props,{name:null}),p)};function o(){k.apply(this,arguments)}o.propTypes={name:m.string,onValueChange:m.func,selectedValue:m.any};o.Item=n;f.exports=o}),null);
__d("MNCommerceAttachmentConstants",[],(function a(b,c,d,e,f,g){var h={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:"subTotal",SHIPPING:"shippingCost",TAX:"tax",TOTAL:"totalCost"}};f.exports=h}),null);
__d("MNCommerceDialog.react",["cx","MessengerEnvironment","LayerFadeOnHide","LayerHideOnEscape","MNCommerceAttachmentConstants","MessengerDialog.react","React","XUIDialog.react","emptyFunction","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"MNCommerceDialog",propTypes:{onToggle:i.func,shown:i.bool,width:i.number.isRequired},getDefaultProps:function k(){return{onToggle:c("emptyFunction"),repositionOnUpdate:true,shown:true,width:c("MessengerEnvironment").messengerui?c("MNCommerceAttachmentConstants").MDOTCOMDIALOG.WIDTH:c("MNCommerceAttachmentConstants").DIALOG.WIDTH}},componentDidUpdate:function k(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition()}.bind(this),0)},render:function k(){var l=c("MessengerEnvironment").messengerui,m=l?c("MessengerDialog.react"):c("XUIDialog.react");return c("React").createElement(m,babelHelpers["extends"]({behaviors:{LayerFadeOnHide:c("LayerFadeOnHide"),LayerHideOnEscape:c("LayerHideOnEscape")}},this.props,{className:c("joinClasses")(this.props.className,l?"_3rx0":""),ref:"dialog"}),this.props.children)}});f.exports=j}),null);
__d("MNCommerceDialogBody.react",["MessengerEnvironment","MessengerDialogBody.react","React","XUIDialogBody.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){var k=c("MessengerEnvironment").messengerui,l=k?c("MessengerDialogBody.react"):c("XUIDialogBody.react");return c("React").createElement(l,this.props,this.props.children)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MNCommerceDialogTitle.react",["MessengerEnvironment","MessengerDialogHeader.react","React","XUIDialogTitle.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){var k=c("MessengerEnvironment").messengerui,l=k?c("MessengerDialogHeader.react"):c("XUIDialogTitle.react");return c("React").createElement(l,this.props,this.props.children)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MNCommerceDetailsDialog.react",["cx","fbt","React","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogTitle.react","XUISpinner.react","XUIButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MNCommerceDetailsDialog2=function(){return c("React").createElement("div",{className:"_4y9b"},c("React").createElement("p",{className:"_4y9c"},i._("Sorry, something went wrong")),c("React").createElement("p",{className:"_4y9d"},this.props.errorMessage),c("React").createElement(c("XUIButton.react"),{onClick:this.props.onTryAgain,label:i._("Try Again")}))}.bind(this),this.$MNCommerceDetailsDialog1=function(){return c("React").createElement("div",{className:"_4y9e"},c("React").createElement(c("XUISpinner.react"),{background:"light",size:"large",paused:false}))},o}m.prototype.render=function(){var n=null;if(this.props.loading)n=this.$MNCommerceDetailsDialog1();else if(this.props.error)n=this.$MNCommerceDetailsDialog2();else n=this.props.children;return c("React").createElement(c("MNCommerceDialog.react"),{className:this.props.className,modal:true,onToggle:this.props.onToggle,shown:this.props.shown},this.$MNCommerceDetailsDialog3(),c("React").createElement(c("MNCommerceDialogBody.react"),{useCustomPadding:true},n))};m.prototype.$MNCommerceDetailsDialog3=function(){return this.props.title?c("React").createElement(c("MNCommerceDialogTitle.react"),null,this.props.title):null};m.propTypes={error:l.object,errorMessage:l.node,loading:l.bool.isRequired,onToggle:l.func,onTryAgain:l.func,title:l.node,shown:l.bool.isRequired};m.defaultProps={shown:false};f.exports=m}),null);
__d("MNCommerceButton.react",["MessengerEnvironment","MessengerDialogButton.react","React","XUIButton.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){var k=c("MessengerEnvironment").messengerui,l=k?c("MessengerDialogButton.react"):c("XUIButton.react"),m=this.props.type;if(!m)m=this.props.type==="confirm"?"primary":"secondary";var n=k?"default":this.props.use,o=babelHelpers["extends"]({},this.props,{type:m,use:n});return c("React").createElement(l,o,this.props.children)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MNCommerceDialogFooter.react",["cx","MessengerEnvironment","MessengerDialogFooter.react","React","XUIDialogFooter.react","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){var l=c("MessengerEnvironment").messengerui,m=l?c("MessengerDialogFooter.react"):c("XUIDialogFooter.react"),n=void 0,o=this.props.children;if(l){n=c("React").Children.count(this.props.children);o=c("React").Children.map(this.props.children,function(p,q){if(!p)return null;return c("React").cloneElement(p,{className:c("joinClasses")(p.props.className,"_4ec0"),type:q===0&&n===2?"secondary":"primary"})})}return c("React").createElement(m,this.props,o)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MNCommercePromotionManageBlockDialog.react",["fbt","MessengerEnvironment","Link.react","MessengerRadioList.react","MNCommerceButton.react","MNCommerceDetailsDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","MNCommerceBlockTypeJSInstance","React","URI","WorkModeConfig","XUIRadioList.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("MessengerRadioList.react").Item,l=c("XUIRadioList.react").Item,m=c("React").PropTypes;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(p,q){j.constructor.call(this,p,q);o.call(this);this.state=this.$MNCommercePromotionManageBlockDialog1()}n.prototype.UNSAFE_componentWillReceiveProps=function(p){this.setState(this.$MNCommercePromotionManageBlockDialog1(p))};n.prototype.$MNCommercePromotionManageBlockDialog1=function(p){var q=p||this.props,r=c("MNCommerceBlockTypeJSInstance").ALL;if(q.isAllBlocked||q.isPromotionBlocked)r=c("MNCommerceBlockTypeJSInstance").NONE;return{type:r}};n.prototype.render=function(){var p=this.props.merchantName||"",q=h._("Manage messages from {label for merchant name}",[h._param("label for merchant name",p)]),r=h._("Cancel"),s=h._("Confirm"),t=h._("Manage Options couldn't be shown."),u=c("WorkModeConfig").is_work_user?new(c("URI"))("https://facebook.com/help/work/1731361900459513").setSubdomain(c("WorkModeConfig").company_subdomain||""):new(c("URI"))("https://www.facebook.com/help/389645087895231"),v=c("React").createElement(c("Link.react"),{href:u,target:"_blank"},h._("Learn more"));return c("React").createElement(c("MNCommerceDetailsDialog.react"),babelHelpers["extends"]({errorMessage:t,onToggle:this.props.onToggle,shown:this.props.shown},this.props),c("React").createElement(c("MNCommerceDialogTitle.react"),{showCloseButton:true},q),c("React").createElement(c("MNCommerceDialogBody.react"),null,this.$MNCommercePromotionManageBlockDialog2()),c("React").createElement(c("MNCommerceDialogFooter.react"),{leftContent:v},c("React").createElement(c("MNCommerceButton.react"),{label:r,onClick:this.props.onCancelButtonClick,use:"default"}),c("React").createElement(c("MNCommerceButton.react"),{label:s,onClick:this.$MNCommercePromotionManageBlockDialog3,use:"confirm"})))};n.prototype.$MNCommercePromotionManageBlockDialog2=function(){var p=c("MessengerEnvironment").messengerui,q=p?c("MessengerRadioList.react"):c("XUIRadioList.react"),r=p?k:l;return c("React").createElement(q,{selectedValue:this.state.type,onValueChange:this.onTypeChange},c("React").createElement(r,{value:c("MNCommerceBlockTypeJSInstance").ALL},h._("Receive all messages")),c("React").createElement(r,{value:c("MNCommerceBlockTypeJSInstance").NONE},h._("Turn off all messages")))};n.propTypes={isAllBlocked:m.bool,isPromotionBlocked:m.bool,error:m.object,loading:m.bool.isRequired,merchantName:m.string,onCancelButtonClick:m.func,onConfirmButtonClick:m.func.isRequired,pageID:m.string};var o=function o(){this.onTypeChange=function(p){this.setState({type:p})}.bind(this);this.$MNCommercePromotionManageBlockDialog3=function(p){var q=this.props;q.onToggle(false);if(!q.onConfirmButtonClick)return;var r=q.pageID;q.onConfirmButtonClick(r,this.state.type)}.bind(this)};f.exports=n}),null);
__d("MNCommerceCacheTimeoutLimits",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({SUCCESS_TIMEOUT:10,ERROR_TIMEOUT:1});f.exports=h}),null);
__d("XMNCommercePromotionStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/promotion/state/",{page_id:{type:"String",required:true}})}),null);
__d("MNCommercePromotionStateDataManager",["AsyncRequest","MNCommercePromotionStateActions","XMNCommercePromotionStateController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.prototype.fetchPromotionState=function(i){var j=c("XMNCommercePromotionStateController").getURIBuilder().setString("page_id",i).getURI();new(c("AsyncRequest"))().setURI(j).setHandler(this.$MNCommercePromotionStateDataManager1).setErrorHandler(this.$MNCommercePromotionStateDataManager2).send()};h.prototype.$MNCommercePromotionStateDataManager1=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;i.payload.pageID=k;c("MNCommercePromotionStateActions").stateLoaded(i.payload)};h.prototype.$MNCommercePromotionStateDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c("MNCommercePromotionStateActions").stateLoadError(k)};function h(){}f.exports=new h()}),null);
__d("MNCommercePromotionStateStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommercePromotionStateDataManager"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("MessengerDispatcher"));this.__moduleID=f.id;this.$MNCommercePromotionStateStore1=new(c("Cache"))()}j.prototype.__onDispatch=function(k){__p&&__p();var l=k.type,m=k.pageID||k.state&&k.state.pageID;switch(l){case c("MNCommerceActionTypes").PROMOTION_STATE.LOADED:var n=k.state;this.$MNCommercePromotionStateStore1.set(m,c("LoadObject").empty().setValue(n),null,c("MNCommerceCacheTimeoutLimits").SUCCESS_TIMEOUT);this.__emitChange();break;case c("MNCommerceActionTypes").PROMOTION_STATE.LOAD_ERROR:this.$MNCommercePromotionStateStore1.set(m,c("LoadObject").empty().setError(new Error("Unable to load permissions for: "+m)),null,c("MNCommerceCacheTimeoutLimits").ERROR_TIMEOUT);this.__emitChange();break;case c("MNCommerceActionTypes").PROMOTION_STATE.RELOAD:if(m){this.$MNCommercePromotionStateStore1.set(m,c("LoadObject").loading());c("MNCommercePromotionStateDataManager").fetchPromotionState(m)}this.__emitChange();break}};j.prototype.getPromotionState=function(k){if(k&&!this.$MNCommercePromotionStateStore1.has(k)){this.$MNCommercePromotionStateStore1.set(k,c("LoadObject").loading().setValue({pageID:k}));c("MNCommercePromotionStateDataManager").fetchPromotionState(k)}return this.$MNCommercePromotionStateStore1.get(k)||c("LoadObject").empty()};f.exports=new j()}),null);
__d("MNCommercePromotionManageBlockDialogContainer.react",["MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialog.react","MNCommercePromotionStateActions","MNCommercePromotionStateStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").createClass({displayName:"MNCommercePromotionManageBlockDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("MNCommercePromotionStateStore"))],statics:{calculateState:function i(){var j=c("MNCommerceDialogStateStore").getState(),k=null;if(j)k=j.pageID;var l=c("MNCommercePromotionStateStore").getPromotionState(k);return{shown:!!j,loading:l.isLoading(),pageID:k,promotionState:l.getValue(),error:l.getError()}}},render:function i(){var j=this.state.promotionState;return c("React").createElement(c("MNCommercePromotionManageBlockDialog.react"),{error:this.state.error,isAllBlocked:j&&j.is_all_blocked,isPromotionBlocked:j&&j.is_promotion_blocked,loading:this.state.loading,merchantName:j&&j.name,onCancelButtonClick:this._hideDialog,onToggle:this._onToggle,pageID:this.state.pageID,onTryAgain:this._onTryAgainClick,onConfirmButtonClick:this._handleConfirmButtonClick,shown:this.state.shown})},_onToggle:function i(j){if(!j)this._hideDialog()},_onTryAgainClick:function i(){c("MNCommercePromotionStateActions").stateReload(this.state.pageID)},_hideDialog:function i(){c("MNCommerceDialogStateActions").hideDialog()},_handleConfirmButtonClick:function i(j,k){return c("MNCommercePromotionBlockDataManager").block(j,k)}});f.exports=h}),null);
__d("MessengerPlatformAbuseReportType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SPAM:"spam",INAPPROPRIATE:"inappropriate",OTHER_ABUSE:"other_abuse"})}),null);
__d("XMNReportPageConversationActionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messenger_platform/report_page_conversation/submit/",{page_id:{type:"FBID",required:true},report_type:{type:"String",required:true},surface:{type:"String"}})}),null);
__d("MNCommerceReportConversationDialog.react",["cx","fbt","AsyncRequest","Link.react","MercuryIDs","MercuryParticipants","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerEnvironment","MessengerPlatformAbuseReportType","MNCommerceDialogStateActions","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialogContainer.react","React","XMNReportPageConversationActionController","XUIRadioList.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("XUIRadioList.react").Item,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={error:false,pageName:"",reportType:c("MessengerPlatformAbuseReportType").SPAM},this.$MNCommerceReportConversationDialog9=function(){this.$MNCommerceReportConversationDialog1();var t=function t(u,v){return c("MNCommercePromotionBlockDataManager").block(u,v)},u=this.props.pageID;c("MNCommerceDialogStateActions").showDialog(c("MNCommercePromotionManageBlockDialogContainer.react"),{pageID:u,onConfirmButtonClick:t})}.bind(this),this.$MNCommerceReportConversationDialog7=function(t){this.setState({reportType:t})}.bind(this),this.$MNCommerceReportConversationDialog1=function(){if(this.props.onToggle)this.props.onToggle();else c("MessengerDialogs.bs").removeDialog()}.bind(this),this.$MNCommerceReportConversationDialog6=function(){var t=c("MessengerEnvironment").messengerui?"www_messenger":"www_chat_tabs",u=c("XMNReportPageConversationActionController").getURIBuilder().setFBID("page_id",this.props.pageID).setString("report_type",this.state.reportType).setString("surface",t).getURI();new(c("AsyncRequest"))().setURI(u).setHandler(function(){this.$MNCommerceReportConversationDialog1()}.bind(this)).setErrorHandler(function(){this.setState({error:true})}.bind(this)).send()}.bind(this),p}n.prototype.UNSAFE_componentWillMount=function(){var o=c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(this.props.pageID));this.setState({pageName:o?o.short_name:""})};n.prototype.render=function(){if(this.props.showDialog===false)return null;return c("React").createElement(c("MessengerDialog.react"),{onToggle:this.$MNCommerceReportConversationDialog1},c("React").createElement(c("MessengerDialogHeader.react"),null,i._("Report")),this.$MNCommerceReportConversationDialog2(),this.$MNCommerceReportConversationDialog3())};n.prototype.$MNCommerceReportConversationDialog2=function(){var o=c("React").createElement("div",{className:"_5zjy"},i._("Help us understand what's happening:")),p=this.$MNCommerceReportConversationDialog4(),q=c("React").createElement("div",{className:"_5zjz"},i._("Reporting this conversation will also turn off all messages from {page name}.",[i._param("page name",this.state.pageName)])),r=this.$MNCommerceReportConversationDialog5();return this.state.error?c("React").createElement(c("MessengerDialogBody.react"),{className:"_5zj-"},i._("Sorry, something went wrong.")):c("React").createElement(c("MessengerDialogBody.react"),{className:"_5zj_"},o,p,q,r)};n.prototype.$MNCommerceReportConversationDialog3=function(){var o=i._("Report"),p=i._("Cancel"),q=i._("OK");if(this.state.error)return c("React").createElement(c("MessengerDialogFooter.react"),{className:"_5zk0"},c("React").createElement(c("MessengerDialogButton.react"),{label:q,onClick:this.$MNCommerceReportConversationDialog1,type:"primary",use:"default"}));return c("React").createElement(c("MessengerDialogFooter.react"),{className:"_5zk0"},c("React").createElement(c("MessengerDialogButton.react"),{label:p,type:"secondary",onClick:this.$MNCommerceReportConversationDialog1,use:"default"}),c("React").createElement(c("MessengerDialogButton.react"),{label:o,onClick:this.$MNCommerceReportConversationDialog6,type:"primary",use:"default"}))};n.prototype.$MNCommerceReportConversationDialog4=function(){return c("React").createElement(c("XUIRadioList.react"),{selectedValue:this.state.reportType,onValueChange:this.$MNCommerceReportConversationDialog7},c("React").createElement(l,{value:c("MessengerPlatformAbuseReportType").SPAM},i._("It's spam")),c("React").createElement(l,{value:c("MessengerPlatformAbuseReportType").INAPPROPRIATE},i._("It's inappropriate")),c("React").createElement(l,{value:c("MessengerPlatformAbuseReportType").OTHER_ABUSE},i._("Other")))};n.prototype.$MNCommerceReportConversationDialog5=function(){return c("React").createElement("div",{className:"_5zk1"},i._("To stop receiving messages without reporting {page name}, you can manage your messages instead.",[i._param("page name",this.state.pageName)]),this.$MNCommerceReportConversationDialog8())};n.prototype.$MNCommerceReportConversationDialog8=function(){return c("React").createElement(c("Link.react"),{className:"_5zk2",onClick:this.$MNCommerceReportConversationDialog9},i._("Manage"))};n.propTypes={pageID:m.string.isRequired,showDialog:m.bool,onToggle:m.func};f.exports=n}),null);
__d("MessengerDeleteAllMenuBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("messengerDeleteAllMenuReactComponent").__setRef("MessengerDeleteAllMenuBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MessengerDeleteDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("messengerDeleteDialogReactComponent").__setRef("MessengerDeleteDialogBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MessengerMarkSpamDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("messengerMarkSpamDialogReactComponent").__setRef("MessengerMarkSpamDialogBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MessengerMuteDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("messengerMuteDialogReactComponent").__setRef("MessengerMuteDialogBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("WorkchatNotificationsJewelBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("workchatNotificationsJewelReactComponent").__setRef("WorkchatNotificationsJewelBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MessengerRTCUnavailableDialog.react",["fbt","MessengerDialogs.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("MessengerDialogBodyReact.bs").jsComponent,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.render=function(){return c("React").createElement(c("MessengerDialog.react"),{onToggle:this.$MessengerRTCUnavailableDialog1},c("React").createElement(c("MessengerDialogHeader.react"),null,h._("Can't make call")),c("React").createElement(k,null,this.$MessengerRTCUnavailableDialog2()),c("React").createElement(c("MessengerDialogFooter.react"),null,c("React").createElement(c("MessengerDialogButton.react"),{action:"cancel",label:h._("OK"),type:"primary"})))};m.prototype.$MessengerRTCUnavailableDialog2=function(){return c("React").createElement("div",null,h._("{name} is not available at the moment.",[h._param("name",this.props.name)]))};m.prototype.$MessengerRTCUnavailableDialog1=function(n){if(!n)c("MessengerDialogs.bs").removeDialog()};function m(){i.apply(this,arguments)}m.propTypes={name:l.string.isRequired};f.exports=m}),null);
__d("MessengerRTCGroupCallUnsupportedBrowserDialog.react",["fbt","Link.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("MessengerDialogBodyReact.bs").jsComponent,j=function j(m){var n=m.browserName,o=m.hasVideo,p=m.onUnmount,q=m.hideDialog;return c("React").createElement(c("MessengerDialog.react"),{onToggle:p},c("React").createElement(c("MessengerDialogHeader.react"),null,k(o)),c("React").createElement(i,null,l(n,o)),c("React").createElement(c("MessengerDialogFooter.react"),null,c("React").createElement(c("MessengerDialogButton.react"),{label:h._("OK"),onClick:q,type:"primary"})))};function k(m){return m?h._("Switch browsers to start group video chats"):h._("Switch browsers to make group calls")}function l(m,n){return n?h._("Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group video chat, open in {link to install chrome}.",[h._param("browser name, i.e. Internet Explorer or Safari",m),h._param("link to install chrome",c("React").createElement(c("Link.react"),{href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome"))]):h._("Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group call, open in {link to install chrome}.",[h._param("browser name, i.e. Internet Explorer or Safari",m),h._param("link to install chrome",c("React").createElement(c("Link.react"),{href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome"))])}f.exports=j}),null);
__d("MessengerRTCUnsupportedBrowserDialog.react",["cx","fbt","CurrentUser","FBRTCConfig","Link.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MessengerDialogBodyReact.bs").jsComponent;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props,o=n.browserName,p=n.hasVideo,q=n.onUnmount,r=n.hideDialog;return c("React").createElement(c("MessengerDialog.react"),{onToggle:q},c("React").createElement(c("MessengerDialogHeader.react"),null,i._("Switch browsers to make calls")),c("React").createElement(l,null,this.$MessengerRTCUnsupportedBrowserDialog1(o,p)),c("React").createElement(c("MessengerDialogFooter.react"),null,c("React").createElement(c("MessengerDialogButton.react"),{className:"_30vt",label:i._("Learn More"),onClick:r,type:"secondary",href:c("FBRTCConfig").unsupportedBrowserUrl(),target:"_blank"}),c("React").createElement(c("MessengerDialogButton.react"),{label:i._("OK"),onClick:r,type:"primary"})))};m.prototype.$MessengerRTCUnsupportedBrowserDialog1=function(n,o){if(c("CurrentUser").isWorkUser())return o?i._("Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our video calling feature yet. To make a video call, open Workplace Chat in {link to install chrome} or {link to install firefox}.",[i._param("browser name, i.e. Internet Explorer or Safari",n),i._param("link to install chrome",this.$MessengerRTCUnsupportedBrowserDialog2()),i._param("link to install firefox",this.$MessengerRTCUnsupportedBrowserDialog3())]):i._("Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our calling feature yet. To make a call, open Workplace Chat in {link to install chrome} or {link to install firefox}.",[i._param("browser name, i.e. Internet Explorer or Safari",n),i._param("link to install chrome",this.$MessengerRTCUnsupportedBrowserDialog2()),i._param("link to install firefox",this.$MessengerRTCUnsupportedBrowserDialog3())]);else return o?i._("Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our video calling feature yet. To make a call, open Messenger in {link to install chrome} or {link to install firefox}.",[i._param("browser name, i.e. Internet Explorer or Safari",n),i._param("link to install chrome",this.$MessengerRTCUnsupportedBrowserDialog2()),i._param("link to install firefox",this.$MessengerRTCUnsupportedBrowserDialog3())]):i._("Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our calling feature yet. To make a call, open Messenger in {link to install chrome} or {link to install firefox}.",[i._param("browser name, i.e. Internet Explorer or Safari",n),i._param("link to install chrome",this.$MessengerRTCUnsupportedBrowserDialog2()),i._param("link to install firefox",this.$MessengerRTCUnsupportedBrowserDialog3())])};m.prototype.$MessengerRTCUnsupportedBrowserDialog2=function(){return c("React").createElement(c("Link.react"),{onClick:this.props.hideDialog,href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome")};m.prototype.$MessengerRTCUnsupportedBrowserDialog3=function(){return c("React").createElement(c("Link.react"),{onClick:this.props.hideDialog,href:"https://www.mozilla.org/en-US/firefox/new/",target:"_blank"},"Mozilla Firefox")};function m(){j.apply(this,arguments)}f.exports=m}),null);
__d("MessengerRTCUnsupportedBrowserDialogController",["fbt","MessengerDialogs.bs","MessengerRTCUnsupportedBrowserDialog.react","MessengerRTCGroupCallUnsupportedBrowserDialog.react","React","UserAgent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={_dialog:null,_handleToggle:function j(k){if(!k)c("MessengerDialogs.bs").removeAllDialogs()},hideDialog:function j(){c("MessengerDialogs.bs").removeAllDialogs()},_browserName:function j(){if(c("UserAgent").isBrowser("Firefox"))return h._("Firefox");else if(c("UserAgent").isBrowser("IE"))return h._("Internet Explorer");else if(c("UserAgent").isBrowser("Safari"))return h._("Safari");else return h._("your browser")},render:function j(k){var l=k.hasVideo,m=k.isGroupCall;c("MessengerDialogs.bs").showDialog(function(){return!m?c("React").createElement(c("MessengerRTCUnsupportedBrowserDialog.react"),{browserName:this._browserName(),hasVideo:l,hideDialog:this.hideDialog,onUnmount:this._handleToggle}):c("React").createElement(c("MessengerRTCGroupCallUnsupportedBrowserDialog.react"),{browserName:this._browserName(),hasVideo:l,hideDialog:this.hideDialog,onUnmount:this._handleToggle})}.bind(this))},dismiss:c("MessengerDialogs.bs").removeAllDialogs};f.exports=i}),null);
__d("MessengerRTCInvokeHandler",["invariant","MercuryIDs","MercuryThreadIDMap","MessengerDialogs.bs","MessengerRTCFunnelLogger","MessengerRTCUnavailableDialog.react","MNRTCCallabilityStore","React","RTCCallState","FBRTCLogger","VideoCallTypedLogger"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MercuryThreadIDMap").get(),j=c("FBRTCLogger").Trigger,k={isCallable:function l(m,n){var l=false;if(c("MercuryIDs").isGroupChat(m))l=true;else{var o=c("MercuryIDs").getUserIDFromThreadID(m);l=o?c("MNRTCCallabilityStore").isCallable(o,n):false}return l},handleStartCall:function l(m,n,o,p,q,r,s){__p&&__p();c("MessengerRTCFunnelLogger").startFunnel("FBMessagesPage");if(s)if(c("MercuryIDs").isGroupChat(m)){c("MessengerRTCFunnelLogger").appendAction("start_in_group_thread");e(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController"],function(t,u,v,w){__p&&__p();var x=n.rtc_call_data;if(x&&x.call_state!==c("RTCCallState").NO_ONGOING_CALL&&x.server_info_data){c("MessengerRTCFunnelLogger").appendAction("join_existing_call");t.startGroupCall({conferenceName:"GROUP:"+n.thread_fbid,hasVideo:o,serverInfoData:x.server_info_data,trigger:x.call_state!==c("RTCCallState").AUDIO_GROUP_CALL?o?j.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:j.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:o?j.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:j.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON});return}if(!u.isGroupCallWebtrcSupported()){c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser");v.render({hasVideo:o,isGroupCall:true});return}var y=function y(z){c("MessengerRTCFunnelLogger").appendAction("render_participant_picker");w.render({participants:q.filter(function(A){var B=A.fbid;return B!==p}),thread:n,viewerID:p,trigger:o?j.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:j.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,conferenceName:"GROUP:"+z,hasVideo:o})};if(c("MercuryIDs").isLocalThread(m))i.getServerIDFromClientID(m,function(z){return y(z)});else y(c("MercuryIDs").getThreadFBIDFromThreadID(m))})}else{c("MessengerRTCFunnelLogger").appendAction("start_in_p2p_thread");new(c("VideoCallTypedLogger"))().setEvent("web_messenger_call_click").log();e(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController"],function(t,u,v){if(!u.isWebrtcSupported()){c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser");v.render({hasVideo:o,isGroupCall:false});return}var w=c("MercuryIDs").getUserIDFromThreadID(m);w||h(0);t.startOutgoingCall(w,"messenger_dot_com",!o)})}else{c("MessengerRTCFunnelLogger").endFunnel("callee_not_callable");c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(c("MessengerRTCUnavailableDialog.react"),{name:r})})}}};f.exports=k}),null);
__d("MessengerRTCVideoCallButtonReact.bs",["ix","cx","fbt","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","VideoCallWebDriverIDs"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k={height:"32px",width:"32px"};function l(q,r){return{clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:q,strokeMiterlimit:"10",strokeWidth:"2"}}var m=l("#888888",0),n=c("ReasonReact.bs").statelessComponent("MessengerRTCVideoCallButtonReact");function o(q,r,s,t){return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],function(){var u=s?j._("Start a group video chat"):j._("Start a video chat"),v=r?l(q,0):m,w=c("React").createElement("div",{className:"_2phz"},c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(0,0,[h("470488")],0,[u],0,0,[]))),x=c("React").createElement("div",{style:k,title:u},c("React").createElement("svg",{style:v,viewBox:"0 0 64 64"},c("React").createElement("title",undefined,u),c("React").createElement("g",undefined,c("React").createElement("g",undefined,c("React").createElement("path",{d:"M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3\nc3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z"}))))),y=c("VideoCallWebDriverIDs").START_VIDEO_CALL,z=c("CurrentUser").isWorkUser();return c("React").cloneElement(z?w:x,{"data-testid":y})},n[10],n[11],n[12],n[13]]}var p=c("ReasonReact.bs").wrapReasonForJs(n,function(q){return o(q.customColor,q.isAvailable,q.isGroupChat,[])});g.videoCallWebDriverIDs=c("VideoCallWebDriverIDs");g.svgWrapperStyle=k;g.svgStyle=l;g.unavailable=m;g.component=n;g.make=o;g.jsComponent=p}),null);
__d("MessengerRTCVoiceCallButtonReact.bs",["ix","cx","fbt","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","VideoCallWebDriverIDs"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k={height:"32px",width:"32px"};function l(q,r){return{clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:q,strokeMiterlimit:"10",strokeWidth:"2"}}var m=l("#888888",0),n=c("ReasonReact.bs").statelessComponent("MessengerRTCVoiceCallButtonReact");function o(q,r,s,t){return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],function(){var u=s?j._("Start a group call"):j._("Start a voice call"),v=r?l(q,0):m,w=c("React").createElement("div",{className:"_2phz"},c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(0,0,[h("470545")],0,[u],0,0,[]))),x=c("React").createElement("div",{style:k,title:u},c("React").createElement("svg",{style:v,viewBox:"0 0 64 64"},c("React").createElement("title",undefined,u),c("React").createElement("path",{d:"M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7\nc0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2\nc1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z"}))),y=c("VideoCallWebDriverIDs").START_VOICE_CALL,z=c("CurrentUser").isWorkUser();return c("React").cloneElement(z?w:x,{"data-testid":y})},n[10],n[11],n[12],n[13]]}var p=c("ReasonReact.bs").wrapReasonForJs(n,function(q){return o(q.customColor,q.isAvailable,q.isGroupChat,[])});g.videoCallWebDriverIDs=c("VideoCallWebDriverIDs");g.svgWrapperStyle=k;g.svgStyle=l;g.unavailable=m;g.component=n;g.make=o;g.jsComponent=p}),null);
__d("MessengerRTCCallButton.react",["immutable","ImmutableObject","Link.react","MercuryIDs","MessengerRTCInvokeHandler","MessengerRTCVideoCallButtonReact.bs","MessengerRTCVoiceCallButtonReact.bs","MNRTCCallabilityStore","React","StoreAndPropBasedStateMixin"],(function a(b,c,d,e,f,g){"use strict";var h=c("MessengerRTCVideoCallButtonReact.bs").jsComponent,i=c("MessengerRTCVoiceCallButtonReact.bs").jsComponent,j=c("React").PropTypes,k=c("React").createClass({displayName:"MessengerRTCCallButton",mixins:[c("StoreAndPropBasedStateMixin")(c("MNRTCCallabilityStore"))],statics:{calculateState:function l(m){return{isCallable:c("MessengerRTCInvokeHandler").isCallable(m.threadID,m.thread)}}},propTypes:{className:j.string.isRequired,customColor:j.string.isRequired,isVideo:j.bool.isRequired,participants:j.instanceOf(c("immutable").Map).isRequired,thread:j.instanceOf(c("ImmutableObject")).isRequired,threadID:j.string.isRequired,viewer:j.string.isRequired,calleeName:j.string.isRequired},render:function l(){var m={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:c("MercuryIDs").isGroupChat(this.props.threadID)};return c("React").createElement(c("Link.react"),{className:this.props.className,onClick:this._handleStartCall},this.props.isVideo?c("React").createElement(h,m):c("React").createElement(i,m))},_handleStartCall:function l(m){m.preventDefault();c("MessengerRTCInvokeHandler").handleStartCall(this.props.threadID,this.props.thread,this.props.isVideo,this.props.viewer,this.props.participants,this.props.calleeName,this.state.isCallable)}});f.exports=k}),null);
__d("XMessengerDotComSpoofIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/spoof/fb_iframe_target/",{gk_spoof:{type:"String"}})}),null);
__d("XSpoofMessengerDotComIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/spoof/messenger_dot_com_iframe/",{redirect_uri:{type:"String",required:true}})}),null);
__d("MessengerSpoof",["Arbiter","DOM","JSXDOM","URI","XSpoofMessengerDotComIFrameController","XMessengerDotComSpoofIFrameController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=6e3;function i(k){var l=c("JSXDOM").iframe({src:j().toString(),width:0,height:0});c("DOM").appendContent(document.body,l);c("Arbiter").subscribeOnce("messengerdotcom_spoof",function(){c("DOM").remove(l);k()});setTimeout(function(){c("Arbiter").inform("messengerdotcom_spoof")},h)}function j(){var k=new(c("URI"))(document.URL),l=c("XMessengerDotComSpoofIFrameController").getURIBuilder().getURI().getQualifiedURI().toString(),m=c("XSpoofMessengerDotComIFrameController").getURIBuilder().setString("redirect_uri",l).getURI();return m.setDomain(k.getDomain().replace("messenger.com","facebook.com")).setPort(k.getPort()).setProtocol("https")}f.exports={init:i}}),null);
__d("MessengerThreadlistMessageRequestsRow.react",["cx","fbt","ix","CurrentUser","Image.react","ImmutableObject","Keys","LinkWithHiddenURLBar.react","MercuryConfig","MercuryIDs","MercuryParticipants","MessagingTag","MessengerActions","MessengerMessageRequestsTypedLogger","MNAdsLogMessageUtils","React","intlList","shallowEqual"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=50,n=j("86936"),o=c("React").PropTypes;k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MessengerThreadlistMessageRequestsRow3=function(v){if(this.props.aggregatedThreads.length>0){var w=this.props.aggregatedThreads,x=w.map(function(y){return y.thread_id});c("MessengerActions").selectAggregation(x);this.props.onAggregationClick&&this.props.onAggregationClick(v,w)}else{v.preventDefault();c("MessengerActions").changeFolder(c("MessagingTag").PENDING)}}.bind(this),r}p.prototype.shouldComponentUpdate=function(q){return!c("shallowEqual")(this.props,q)};p.prototype.componentDidUpdate=function(q){if(this.props.isFocused)this.$MessengerThreadlistMessageRequestsRow1&&this.$MessengerThreadlistMessageRequestsRow1.focus&&this.$MessengerThreadlistMessageRequestsRow1.focus()};p.prototype.render=function(){var q=this.props.newMessageRequestThreads.length||this.props.aggregatedThreads.length;if(q===0)return null;return c("React").createElement("li",{className:"_5l-3 _1ht1 _2il3 _2kt",ref:function(r){this.$MessengerThreadlistMessageRequestsRow1=r}.bind(this),onKeyPress:this.$MessengerThreadlistMessageRequestsRow2,role:"row",tabIndex:-1},c("React").createElement(c("LinkWithHiddenURLBar.react"),{tabIndex:-1,onAllClicks:this.$MessengerThreadlistMessageRequestsRow3,className:"_1ht5 _5l-3"},c("React").createElement("div",{className:"_5l-3 _1qt3 _5nxe"},c("React").createElement(c("Image.react"),{alt:"",height:m,src:n,width:m}),this.$MessengerThreadlistMessageRequestsRow4()?this.$MessengerThreadlistMessageRequestsRow5():null),c("React").createElement("div",{className:"_1qt4 _5l-m"},c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement("div",{className:"_1ht6 _5nxa"+(this.$MessengerThreadlistMessageRequestsRow4()?" _3xsd":"")},this.$MessengerThreadlistMessageRequestsRow6())),c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement("div",{className:"_1htf"+(this.$MessengerThreadlistMessageRequestsRow4()?" _3xsd":"")},this.$MessengerThreadlistMessageRequestsRow7())))))};p.prototype.$MessengerThreadlistMessageRequestsRow4=function(){return this.props.pendingFolderUnseenCount!==0};p.prototype.$MessengerThreadlistMessageRequestsRow6=function(){var q=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;return c("MercuryConfig").RTCR?i._({"*":"Connection requests","_1":"Connection request"},[i._plural(q.length)]):i._({"*":"New message requests","_1":"New message request"},[i._plural(q.length)])};p.prototype.$MessengerThreadlistMessageRequestsRow5=function(){return c("React").createElement("span",{className:"_3xse"})};p.prototype.componentDidMount=function(){var q,r=this;if(this.props.aggregatedThreads&&this.props.aggregatedThreads.length>0)(function(){var s=c("CurrentUser").getID(),t=r.props.aggregatedThreads.map(function(u){return c("MercuryIDs").getThreadKeyfromThreadIDUserID(u.thread_id,s)});new(c("MessengerMessageRequestsTypedLogger"))().setAction("aggregation_unit_impression").setThreadKeyList(t.filter(function(u){return u}).join(", ")).setEntryPoint("inbox_aggregation").setSurface("inbox").setFolderType("pending").log()})()};p.prototype.$MessengerThreadlistMessageRequestsRow8=function(){__p&&__p();var q=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads,r=i._({"*":"From people you may know","_1":"From someone you may know"},[i._plural(q.length)]),s=c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),t=[];for(var u=0,v=0;v<3&&u<q.length;u++){var w=q[u].participants.find(function(y){return y!==s});if(w){var x=c("MercuryParticipants").getOrFetch(w);if(x){v++;t.push(x.name.split(" ")[0])}}}if(!t||t.length==0)return r;if(q.length>0)c("MNAdsLogMessageUtils").logAdsThreadListImpression(q[0]);return q.length-t.length==0?i._("From {name}",[i._param("name",c("intlList")(t,c("intlList").CONJUNCTIONS.NONE))]):i._({"*":"From {name} and {count} more"},[i._param("name",c("intlList")(t,c("intlList").CONJUNCTIONS.NONE)),i._param("count",q.length-t.length,[0])])};p.prototype.$MessengerThreadlistMessageRequestsRow7=function(){__p&&__p();if(c("MercuryConfig").MCMA)return this.$MessengerThreadlistMessageRequestsRow8();var q=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads,r=i._({"someone":"From someone you may know","people":"From people you may know"},[i._enum(q.length===1?"someone":"people",{someone:"someone",people:"people"})]),s=c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),t=q[0].participants.find(function(v){return v!==s});if(!t)return r;var u=c("MercuryParticipants").getOrFetch(t);if(!u||!u.name)return r;if(q.length>0)c("MNAdsLogMessageUtils").logAdsThreadListImpression(q[0]);return q.length===1?i._("From {name}",[i._param("name",u.name)]):i._({"*":"From {name} and {count} more"},[i._param("name",u.name),i._param("count",q.length-1,[0])])};p.prototype.$MessengerThreadlistMessageRequestsRow9=function(q){q.preventDefault();var r=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;this.props.onFocus(r[0].thread_id)};p.prototype.$MessengerThreadlistMessageRequestsRow2=function(q){q.preventDefault();var r=q.charCode;if(r===c("Keys").RETURN)c("MessengerActions").changeFolder(c("MessagingTag").PENDING)};p.propTypes={onAggregationClick:o.func,isFocused:o.bool,newMessageRequestThreads:o.arrayOf(o.instanceOf(c("ImmutableObject"))).isRequired,pendingFolderUnseenCount:o.number,aggregatedThreads:o.arrayOf(o.instanceOf(c("ImmutableObject"))),viewer:o.string.isRequired};f.exports=p}),null);
__d("MessengerComposerState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").Record({step:null,recipients:c("immutable").List()});h.__TCmeta={type:"MessengerComposerState"};f.exports=h}),null);
__d("MessengerComposerSteps",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});f.exports=h}),null);
__d("MessengerComposerStore",["EditorState","immutable","MessengerActions","MessengerComposerActions","MessengerComposerState","MessengerComposerSteps","MessengerConstants","MessengerDispatcher","MessengerEditorStateManager","MessengerURIStore","MessengerStore","MessengerView"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=new(c("MessengerComposerState"))({step:c("MessengerComposerSteps").NULL,recipients:c("immutable").List()});h=babelHelpers.inherits(k,c("MessengerStore"));i=h&&h.prototype;function k(){i.constructor.call(this);this.$MessengerComposerStore1=j}k.prototype.getState=function(){return this.$MessengerComposerStore1};k.prototype.__onDispatch=function(l){__p&&__p();c("MessengerDispatcher").waitFor([c("MessengerURIStore").getDispatchToken()]);var m=c("MessengerURIStore").getState().detailView,n=this.$MessengerComposerStore1.recipients,o=this.$MessengerComposerStore1.step,p=null,q=null;switch(l.type){case c("MessengerComposerActions").Types.ADD_TOKEN:if(n.some(function(v){return v.getUniqueID()===l.entry.getUniqueID()}))break;p=n.push(l.entry);break;case c("MessengerComposerActions").Types.REMOVE_TOKEN:var r=l.entry.getUniqueID(),s=n.findIndex(function(v){return v.getUniqueID()===r});if(s!==-1)p=n["delete"](s);break;case c("MessengerComposerActions").Types.FOCUS_COMPOSER:if(o===c("MessengerComposerSteps").SELECT_RECIPIENTS)q=c("MessengerComposerSteps").COMPOSE;break;case c("MessengerComposerActions").Types.FOCUS_TYPEAHEAD:if(o===c("MessengerComposerSteps").COMPOSE)q=c("MessengerComposerSteps").SELECT_RECIPIENTS;break;case c("MessengerActions").Types.REPLACE_STATE:var t=c("MessengerURIStore").getPrevState().detailView;if(t!==c("MessengerView").DETAIL.COMPOSE&&m===c("MessengerView").DETAIL.COMPOSE)q=c("MessengerComposerSteps").SELECT_RECIPIENTS;break;case c("MessengerComposerActions").Types.MOVE_DRAFT:c("MessengerEditorStateManager").set(l.threadID,c("MessengerEditorStateManager").get(c("MessengerConstants").NEW_THREAD_KEY));break;case c("MessengerComposerActions").Types.EXIT_COMPOSE_STATE:var u=c("EditorState").createEmpty();setTimeout(function(){c("MessengerEditorStateManager").set(c("MessengerConstants").NEW_THREAD_KEY,c("EditorState").forceSelection(u,u.getSelection()))},0);q=c("MessengerComposerSteps").NULL;p=c("immutable").List();break}if(p||q){this.$MessengerComposerStore1=new(c("MessengerComposerState"))({step:q||o,recipients:p||n});this.emitChange()}};f.exports=new k()}),null);
__d("MessengerThreadlistNewMessageRow.react",["cx","fbt","ix","Image.react","LinkWithHiddenURLBar.react","MercuryIDs","MercuryParticipantListRenderer","MercuryParticipants","MercuryParticipantsImage.react","MessengerActions","MessengerComposerStore","MessengerProfileImageWrapperReact.bs","MessengerView","ReactComponentWithPureRenderMixin","PureStoreBasedStateMixin","React","ShimButton.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("MessengerProfileImageWrapperReact.bs").jsComponent,l=50,m=j("86935"),n=c("React").PropTypes,o=c("React").createClass({displayName:"MessengerThreadlistNewMessageRow",mixins:[c("ReactComponentWithPureRenderMixin"),c("PureStoreBasedStateMixin")(c("MercuryParticipants"),c("MessengerComposerStore"))],propTypes:{isActive:n.bool,onClose:n.func.isRequired},statics:{calculateState:function p(){return{participants:c("MessengerComposerStore").getState().recipients.map(function(q){return c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(q.getUniqueID()))}).filter(function(q){return!!q})}}},render:function p(){return c("React").createElement("li",{className:"_5l-3 _1ht1"+(this.props.isActive?" _1ht2":"")},c("React").createElement(c("LinkWithHiddenURLBar.react"),{onAllClicks:this._handleClickRow,className:"_1ht5 _2il3 _5l-3"},this._renderImage(),c("React").createElement("div",{className:"_1qt4 _5l-m"},c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement("div",{className:"_1ht6"},this._renderTitle()),c("React").createElement(c("ShimButton.react"),{className:"_23ct",onClick:this.props.onClose})),c("React").createElement("div",{className:"_1qt5 _5l-3"},"\xa0"))))},_renderImage:function p(){var q=this.state.participants;if(!q.isEmpty())return c("React").createElement("div",{className:"_1qt3 _5l-3"},c("React").createElement(k,{isMessengerUser:q.size===1&&q.first().is_messenger_user,size:l,showBadge:false},c("React").createElement(c("MercuryParticipantsImage.react"),{participants:q.map(function(r){return r.id}).slice(0,3).toArray(),size:l})));return c("React").createElement("div",{className:"_1qt3 _5l-3"},c("React").createElement(c("Image.react"),{height:l,src:m,width:l}))},_renderTitle:function p(){if(this.state.participants.isEmpty())return i._("New message");return i._("New message to {List of message recipients}",[i._param("List of message recipients",new(c("MercuryParticipantListRenderer"))().renderParticipantList(this.state.participants.toArray()))])},_handleClickRow:function p(q){q.preventDefault();c("MessengerActions").changeDetailView(c("MessengerView").DETAIL.COMPOSE)}});f.exports=o}),null);
__d("Keys.bs",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=8,i=9,j=13,k=18,l=27,m=32,n=33,o=34,p=35,q=36,r=37,s=38,t=39,u=40,v=46,w=188,x=190,y=65,z=90,A=48,B=96,C=105;g.backspace=h;g.tab=i;g.$$return=j;g.alt=k;g.esc=l;g.space=m;g.page_up=n;g.page_down=o;g.end_=p;g.home=q;g.left=r;g.up=s;g.right=t;g.down=u;g.$$delete=v;g.comma=w;g.period=x;g.a=y;g.z=z;g.zero=A;g.numpad_0=B;g.numpad_9=C}),null);
__d("MNCommerceReportConversationDialogReact.bs",["ReasonReact.bs","MNCommerceReportConversationDialog.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact.bs").wrapJsForReason(c("MNCommerceReportConversationDialog.react"),{pageID:i},j)}g.make=h}),null);
__d("MessengerBlockDialogReact.bs",["cx","fbt","bs_curry","React","Utils.bs","LinkReact.bs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact.bs").statelessComponent("MessengerBlockDialogReact");function k(o,p){return c("React").createElement("div",{className:"_1q73"},i._("If you want, you can also {link}",[i._param("link",c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make(0,0,0,0,0,0,[p],0,0,0,0,0,0,0,["_blank"],0,i._("block {short_name_or_description} on Facebook.",[i._param("short_name_or_description",c("Utils.bs").$pipe$unknown(o,i._("this person")))]))))]))}function l(o,p,q,r,s){__p&&__p();return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],function(){__p&&__p();var t=function t(){c("bs_curry")._1(p,false);return c("bs_curry")._1(o,0)},u;if(q){var v=q[0],w=c("CurrentUser").isMessengerOnlyUser();u=[[v.short_name],w?0:c("bs_js_primitive").null_undefined_to_opt(v.href)]}else u=[0,0];var x=u[1],y=u[0];if(!(r==null)){var z=new(c("IgnoreMessagesTypedLogger"))().setEvent("block_clicked").setThreadID(r).setPlatform("messengerdotcom");z.log()}return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Dialog[0](0,p,0,0,0,0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Header[0](0,0,i._("Block messages"))),c("ReasonReact.bs").element(0,0,c("MessengerDialogBodyReact.bs").make(0,[c("React").createElement("div",{className:"_1q73"},i._("Stop getting messages and calls from {short_name_or_description} in Messenger.",[i._param("short_name_or_description",c("Utils.bs").$pipe$unknown(y,i._("this person")))])),x?k(y,x[0]):null,c("React").createElement("div",undefined,c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make(0,0,0,0,0,0,["https://www.facebook.com/help/389645087895231"],0,0,0,0,0,0,0,["_blank"],0,i._("Learn more"))))])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Footer[0](0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").CancelButton[0](0,[])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Button[0](0,[i._("Block messages")],0,["danger"],[t],[0],0,0,[]))]))]))},j[10],j[11],j[12],j[13]]}var m=c("ReasonReact.bs").wrapReasonForJs(j,function(o){return l(o.onBlock,o.onToggle,c("bs_js_primitive").null_undefined_to_opt(o.contact),o.threadID,[])}),n=c("Utils.bs").$pipe$unknown;g.$pipe$unknown=n;g.component=j;g.renderBlockOnFacebook=k;g.make=l;g.jsComponent=m}),null);
__d("MessengerDeleteDialogBootloaderReact.bs",["ReasonReact.bs","MessengerDeleteDialogBootloader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o){return c("ReasonReact.bs").wrapJsForReason(c("MessengerDeleteDialogBootloader.react"),{folder:i,isGroupChat:j,onArchive:k,onBlock:l,onDelete:m,onToggle:n},o)}g.make=h}),null);
__d("MessengerIgnoreDialogReact.bs",["cx","fbt","bs_curry","React","Utils.bs","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact.bs").statelessComponent("MessengerIgnoreDialogReact");function k(n,o,p,q,r,s){return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],function(){var t=function t(){c("bs_curry")._1(n,0);return c("bs_curry")._1(o,false)},u=p?[p[0].short_name]:0;if(!(q==null)){var v=new(c("IgnoreMessagesTypedLogger"))().setEvent("ignore_clicked").setThreadID(q).setPlatform("messengerdotcom");v.log()}return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Dialog[0](0,o,0,0,0,0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Header[0](0,0,r?i._("Ignore group?"):i._("Ignore this conversation?"))),c("ReasonReact.bs").element(0,0,c("MessengerDialogBodyReact.bs").make(0,[c("React").createElement("div",{className:"_1q73"},r?i._("You won't be notified when someone messages this group, and the group will be moved to Filtered messages. We won't tell anyone in the group that the messages have been ignored."):i._("You won't be notified when {short_name_or_description} messages you directly, and the conversation will be moved to Filtered requests. We won't tell {sameParam} that the messages have been ignored.",[i._param("short_name_or_description",c("Utils.bs").$pipe$unknown(u,i._("this person"))),i._param("sameParam",c("Utils.bs").$pipe$unknown(u,i._("this person")))]))])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Footer[0](0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").CancelButton[0](0,[])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Button[0](0,[i._("Ignore Messages")],0,["danger"],[t],[0],0,0,[]))]))]))},j[10],j[11],j[12],j[13]]}var l=c("ReasonReact.bs").wrapReasonForJs(j,function(n){return k(n.onIgnore,n.onToggle,c("bs_js_primitive").null_undefined_to_opt(n.contact),n.threadID,n.isGroupChat,[])}),m=c("Utils.bs").$pipe$unknown;g.$pipe$unknown=m;g.component=j;g.make=k;g.jsComponent=l}),null);
__d("MessengerMarkSpamDialogBootloaderReact.bs",["ReasonReact.bs","MessengerMarkSpamDialogBootloader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact.bs").wrapJsForReason(c("MessengerMarkSpamDialogBootloader.react"),{onMarkSpam:i,onToggle:j},k)}g.make=h}),null);
__d("MessengerMenuReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerMenu.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(n){return c("ReasonReact.bs").wrapJsForReason(c("MessengerMenu.react"),{},n)}var i=[h];function j(n,o,p,q,r){return c("ReasonReact.bs").wrapJsForReason(c("MessengerMenu.react").Item,{href:c("bs_js_null_undefined").fromOption(n),label:o,onclick:c("bs_js_null_undefined").fromOption(p),target:c("bs_js_null_undefined").fromOption(q)},r)}var k=[j];function l(n){return c("ReasonReact.bs").wrapJsForReason(c("MessengerMenu.react").Separator,{},n)}var m=[l];g.Menu=i;g.MenuItem=k;g.MenuSeparator=m}),null);
__d("MessengerMuteDialogBootloaderReact.bs",["ReasonReact.bs","MessengerMuteDialogBootloader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact.bs").wrapJsForReason(c("MessengerMuteDialogBootloader.react"),{onMute:i,onToggle:j},k)}g.make=h}),null);
__d("MessengerPopoverMenuReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessengerPopoverMenu.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o){return c("ReasonReact.bs").wrapJsForReason(c("MessengerPopoverMenu.react"),{className:c("bs_js_null_undefined").fromOption(i),disableArrowKeyActivation:c("Utils.bs").optionBoolToNullUndefinedBoolean(j),isOpen:c("Utils.bs").optionBoolToNullUndefinedBoolean(k),menu:l,onHide:c("bs_js_null_undefined").fromOption(m),onShow:c("bs_js_null_undefined").fromOption(n)},o)}g.make=h}),null);
__d("XNFXStartForMessageThreadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/nfx/start_message_thread/",{thread_fbid:{type:"String",required:true},responsible_fbid:{type:"Int"},av:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("MessengerThreadlistRowActionsReact.bs",["cx","fbt","Keys.bs","bs_block","bs_curry","React","Utils.bs","gkx","MercuryIDs","AsyncDialog","CurrentUser","ReasonReact.bs","joinClasses","AsyncRequest","bs_js_primitive","MessagingTag","MessengerDialogs.bs","MercuryThreadIDMap","MessengerMenuReact.bs","MessengerBlockDialogReact.bs","MessengerPopoverMenuReact.bs","MessengerIgnoreDialogReact.bs","MessengerMuteDialogBootloaderReact.bs","XNFXStartForMessageThreadController","MessengerDeleteDialogBootloaderReact.bs","MessengerMarkSpamDialogBootloaderReact.bs","MNCommerceReportConversationDialogReact.bs"],(function aa(ba,a,ca,da,ea,b,fa,c){"use strict";__p&&__p();function d(k){if(k)return 0;else return a("MessengerDialogs.bs").removeDialog(0)}function e(k){k.preventDefault();k.stopPropagation();return 0}var f=a("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerThreadlistRowActionsReact"),g="_5blh _4-0h",h="_5blh _4-0h _4-0i";function i(k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L){__p&&__p();var M=k?k[0]:"",N=function N(){return a("MessengerDialogs.bs").showDialog(function(){return a("ReasonReact.bs").element(0,0,a("MessengerDeleteDialogBootloaderReact.bs").make(K.folder,m,s,D,t,d,[]))})},O=function O(){if(o)return a("bs_curry")._1(B,0);else return a("MessengerDialogs.bs").showDialog(function(){return a("ReasonReact.bs").element(0,0,a("MessengerMuteDialogBootloaderReact.bs").make(y,d,[]))})},P=function P(){if(q)return a("bs_curry")._1(v,0);else return a("bs_curry")._1(x,0)},Q=function Q(){return a("MessengerDialogs.bs").showDialog(function(){return a("ReasonReact.bs").element(0,0,a("MessengerMarkSpamDialogBootloaderReact.bs").make(w,d,[]))})},R=function R(){return a("MessengerDialogs.bs").showDialog(function(){return a("ReasonReact.bs").element(0,0,a("MessengerIgnoreDialogReact.bs").make(C,d,l,K.thread_fbid,a("MercuryIDs").isGroupChat(K.thread_id),[]))})},S=function S(){if(r)return a("bs_curry")._1(E,0);else return a("MessengerDialogs.bs").showDialog(function(){return a("ReasonReact.bs").element(0,0,a("MessengerBlockDialogReact.bs").make(D,d,l,K.thread_fbid,[]))})},T=function T(){var W=a("MercuryThreadIDMap").get();W.getServerIDFromClientID(K.thread_id,function(X){a("AsyncDialog").send(new(a("AsyncRequest"))(a("XNFXStartForMessageThreadController").getURIBuilder().setString("thread_fbid",X).getURI()));return 0});return 0},U=function U(){var W=K.other_user_fbid;if(W==null)return 0;else return a("MessengerDialogs.bs").showDialog(function(){return a("ReasonReact.bs").element(0,0,a("MNCommerceReportConversationDialogReact.bs").make(W,[]))})},V=function V(){return[R,S,N,P,Q,O,U,T]};return[f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],function(W){var X=W[1],Y=W[0];if(X[2]||X[2]!==Y[2])return true;else return X[1]!==Y[1]},function(W){__p&&__p();var X=W[1];if(p){var Y=n?m?c._("Leave chat"):c._("Leave room"):c._("Leave Group"),ga=c._("Ignore messages"),ha=r?c._("Unblock messages"):c._("Block messages"),Z=a("Utils.bs").isSomeTrue(H),ia=a("Utils.bs").isSomeTrue(H),ja=K.is_archived,ka=a("Utils.bs").isSomeTrue(I),la=a("Utils.bs").isSomeTrue(I),ma=!a("CurrentUser").isWorkUser()&&!r&&(G||K.folder===a("MessagingTag").INBOX&&a("MercuryIDs").isGroupChat(K.thread_id)&&a("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U")),na=!a("CurrentUser").isWorkUser()&&G,oa=a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").Menu[0]([Z?a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,c._("Rename"),z,0,[])):null,ia?a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuSeparator[0]([])):null,a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,o?c._("Unmute"):c._("Mute"),[X[5]],0,[])),a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuSeparator[0]([])),F?a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,Y,u,0,[])):null,ja?null:a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,c._("Archive"),[s],0,[])),a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,c._("Delete"),[X[2]],0,[])),a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuSeparator[0]([])),a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,q?c._("Mark as Read"):c._("Mark as Unread"),[X[3]],0,[])),ka?null:a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,c._("Mark as Spam"),[X[4]],0,[])),la?a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,c._("Report..."),[X[6]],0,[])):a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,c._("Report Spam or Abuse..."),[X[7]],0,[])),ma?a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,ga,[X[0]],0,[])):null,na?a("ReasonReact.bs").element(0,0,a("MessengerMenuReact.bs").MenuItem[0](0,ha,[X[1]],0,[])):null])),pa=M==="",qa=pa?h:a("joinClasses")(M,h);return a("React").createElement("div",{className:"_3d85"},a("ReasonReact.bs").element(0,[function($){return a("bs_curry")._1(W[3],[$==null?0:[$]])}],a("MessengerPopoverMenuReact.bs").make(0,[true],[p],oa,[function(){return a("bs_curry")._1(W[3],1)}],0,[a("React").cloneElement(a("React").createElement("div",{ref:"button",className:qa,role:"button",tabIndex:0,onClick:e}),{"aria-label":c._("Conversation actions")})])))}else{var ra=M==="",sa=ra?g:a("joinClasses")(M,g);return a("React").createElement("div",{className:"_3d85"},a("React").cloneElement(a("React").createElement("div",undefined),{"aria-label":c._("Conversation actions"),className:sa,onClick:function $(){return a("bs_curry")._1(W[3],0)},onKeyUp:function $(ta){var Z=ta.keyCode===a("Keys.bs").$$return;return a("bs_curry")._1(W[3],Z?0:2)},role:"button",ref:"button",tabIndex:J}))}},V,p,function(W,L){__p&&__p();if(typeof W==="number")switch(W){case 0:return a("bs_block").__(2,[[R,S,N,P,Q,O,U,T],function(){return a("bs_curry")._1(A,true)}]);case 1:return a("bs_block").__(1,[function(){return a("bs_curry")._1(A,false)}]);case 2:return 0}else{var X=W[0];if(X){var Y=X[0];return a("bs_block").__(1,[function(){return Y.showPopover()}])}else return 0}},f[13]]}var j=a("ReasonReact.bs").wrapReasonForJs(f,function(k){return i(a("bs_js_primitive").null_undefined_to_opt(k.className),a("bs_js_primitive").null_undefined_to_opt(k.contact),k.isGroupChat,k.isJoinableThread,k.isMuted,k.isOpen,k.isUnread,k.isBlocked,k.onArchive,k.onDelete,a("bs_js_primitive").null_undefined_to_opt(k.onLeaveGroup),k.onMarkRead,k.onMarkSpam,k.onMarkUnread,k.onMute,a("bs_js_primitive").null_undefined_to_opt(k.onRename),k.onToggle,k.onUnmute,k.onIgnore,k.onBlock,k.onUnblock,k.showLeaveGroup,k.showBlock,a("Utils.bs").nullUndefinedBooleanToOptionBool(k.showRename),a("Utils.bs").nullUndefinedBooleanToOptionBool(k.showReport),k.tabIndex,k.thread,[])});b.handleReasonDialogToggle=d;b.handleClick=e;b.component=f;b.actionButtonClassesClosed=g;b.actionButtonClassesOpen=h;b.make=i;b.jsComponent=j}),null);
__d("MessengerThreadlistRowSeenHeadReact.bs",["cx","ImageReact.bs","MercuryIDs","ReasonReact.bs","joinClasses","bs_js_primitive","MercuryMessageInfo"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(m,n,o,p){__p&&__p();var q=o.snippet_sender;if(p){var r=p[0];if(r.author===m&&n.watermark>=r.timestamp&&!c("MercuryMessageInfo").isSending(r))return!c("MercuryMessageInfo").hasError(r);else return false}else if(!(q==null)&&q===m)return n.watermark>=o.timestamp;else return false}var j=c("ReasonReact.bs").statelessComponent("MessengerThreadlistRowSeenHeadReact");function k(m,n,o,p,q,r,s,t){__p&&__p();var u=m?m[0]:"";return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],function(){var v=r.is_canonical,w=r.other_user_fbid;if(n&&v&&!(w==null||n[0])){var x=c("MercuryIDs").getParticipantIDFromUserID(s),y=c("MercuryIDs").getParticipantIDFromUserID(w),z=q.get(y),A=p.get(y);if(!(A==null)&&!(z==null)&&i(x,z,r,o))return c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make([c("joinClasses")(u,"_2_a2")],0,[A.image_src],0,[A.name],0,0,[]));else return null}else return null},j[10],j[11],j[12],j[13]]}var l=c("ReasonReact.bs").wrapReasonForJs(j,function(m){return k(c("bs_js_primitive").null_undefined_to_opt(m.className),c("bs_js_primitive").null_undefined_to_opt(m.isHidden),c("bs_js_primitive").null_undefined_to_opt(m.lastMessage),m.participants,m.readReceipts,m.thread,m.viewer,[])});g.shouldRender=i;g.component=j;g.make=k;g.jsComponent=l}),null);
__d("MessengerThreadlistRow.react",["cx","fbt","ix","Bootloader","FBRTCCore","Image.react","immutable","ImmutableObject","LinkWithHiddenURLBar.react","MercuryConfig","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryMessageInfo","MercuryParticipants","MercuryThreadActions","MercuryThreadSnippet.react","MercuryThreadTimestampReact.bs","MercuryThreadTitle.react","MercuryTimestamp","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerButtonReact.bs","MessengerDialogs.bs","MessengerPresenceStatusUtils","MessengerMessageRequestsTypedLogger","MessengerThreadImageReact.bs","MessengerThreadlistRowActionsReact.bs","MessengerThreadlistRowSeenHeadReact.bs","MessengerURIStore","MessengerURIUtils.bs","MNAdsMessageUtils","MercuryParticipantListRenderer","React","ReactDOM","RTCCallState","Tooltip","FBRTCLogger","UserAgent","CurrentUser","getPageIDFromThreadID","gkx","joinClasses","messengerRTLClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("MercuryThreadTimestampReact.bs").jsComponent,n=c("MessengerButtonReact.bs").jsComponent,o=c("MessengerThreadImageReact.bs").jsComponent,p=c("MessengerThreadlistRowActionsReact.bs").jsComponent,q=c("MessengerThreadlistRowSeenHeadReact.bs").jsComponent,r=c("FBRTCLogger").Trigger,s=c("React").PropTypes,t=50,u=j("86913"),v=j("86914"),w=function w(y){var z=void 0;switch(y){case"pending":case"other":case"inbox":case"thread":z=y;break;default:z=null}return z};k=babelHelpers.inherits(x,c("React").PureComponent);l=k&&k.prototype;function x(){__p&&__p();var y,z;for(var A=arguments.length,B=Array(A),C=0;C<A;C++)B[C]=arguments[C];return z=(y=l.constructor).call.apply(y,[this].concat(B)),this.state={actionsOpen:false,participantNames:""},this.$MessengerThreadlistRow1=0,this.$MessengerThreadlistRow2=null,this.$MessengerThreadlistRow15=function(){__p&&__p();var D=c("CurrentUser").getID(),E=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,D);c("MercuryThreadActions").get()["delete"](this.props.thread.thread_id);if(this.props.isActive)c("MessengerActions").selectThread(null);if(this.props.showAggregation){var F=c("MessengerURIStore").getState().threadIDs;if(F){var G=F.filter(function(H){return this.props.thread.thread_id!==H}.bind(this));c("MessengerActions").selectAggregation(G)}}new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(w(this.props.folder)).setFolderType("pending").setThreadKey(E).setEntryPoint("inbox_banner").log()}.bind(this),this.$MessengerThreadlistRow16=function(D){var E=c("CurrentUser").getID(),F=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,E);if(!D){c("MessengerDialogs.bs").removeDialog();new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(w(this.props.folder)).setFolderType("pending").setThreadKey(F).setEntryPoint("inbox_banner").log()}}.bind(this),this.$MessengerThreadlistRow3=function(D){D.preventDefault();this.props.onFocus(this.props.thread.thread_id)}.bind(this),this.$MessengerThreadlistRow4=function(D){this.$MessengerThreadlistRow1++;if(this.$MessengerThreadlistRow2)return;this.$MessengerThreadlistRow2=setTimeout(function(){this.props.onSelect&&this.props.onSelect();this.$MessengerThreadlistRow1=0;this.$MessengerThreadlistRow2=null}.bind(this),1e3)}.bind(this),this.$MessengerThreadlistRow5=function(D){this.$MessengerThreadlistRow1--;if(this.$MessengerThreadlistRow1===0){clearTimeout(this.$MessengerThreadlistRow2);this.$MessengerThreadlistRow2=null}}.bind(this),this.$MessengerThreadlistRow7=function(D){this.props.onSelect()}.bind(this),this.$MessengerThreadlistRow8=function(D){if(this.props.logClickHandler){var E=this.props.thread.is_canonical?c("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id)||"0":this.props.thread.thread_fbid;this.props.logClickHandler&&this.props.logClickHandler(E)}}.bind(this),this.$MessengerThreadlistRow14=function(D){this.setState({actionsOpen:D})}.bind(this),this.$MessengerThreadlistRow17=function(D){D.preventDefault();D.stopPropagation();var E=window.callWindow&&!window.callWindow.closed&&window.callWindow.focus;if(E)window.callWindow.focus();else{var F=this.props.thread,G=F.rtc_call_data,H=F.thread_fbid;c("FBRTCCore").startGroupCall({conferenceName:"GROUP:"+H,hasVideo:G.call_state===c("RTCCallState").VIDEO_GROUP_CALL,serverInfoData:G.server_info_data,trigger:r.MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON})}}.bind(this),z}x.prototype.componentDidMount=function(){this.getParticipantNames()};x.prototype.componentDidUpdate=function(y){__p&&__p();if(this.props.isFocused)if(!y.isFocused)if(this.props.isActionsFocused)c("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus();else c("ReactDOM").findDOMNode(this.refs.link).focus();else if(!y.isActionsFocused&&this.props.isActionsFocused)c("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus();else if(y.isActionsFocused&&!this.props.isActionsFocused)c("ReactDOM").findDOMNode(this.refs.link).focus();this.getParticipantNames()};x.prototype.getParticipantNames=function(){__p&&__p();if(this.state.participantNames!=="")return;var y=this.props,z=y.thread,A=y.viewer,B=z.participants||[],C=c("MercuryIDs").getParticipantIDFromUserID(A);if(B.length>1)B=B.filter(function(E){return E!=C});var D=z.custom_nickname?{}:null;if(D)for(var E in z.custom_nickname)D[E]=z.custom_nickname[E];c("MercuryParticipants").getMulti(B,function(F){var G=B.map(function(I){return F[I]}),H=new(c("MercuryParticipantListRenderer"))().setNickname(D).renderParticipantList(G);this.setState({participantNames:H})}.bind(this))};x.prototype.render=function(){var y=this.props,z=y.isActive,A=y.isActionsFocused,B=y.isTabbable,C=y.participants,D=y.thread,E=y.viewer,F=D.unread_count>0,G=c("MessengerURIUtils.bs").getURIForThreadID(D.thread_id),H=D.name?D.name:this.state.participantNames;return c("React").createElement("li",{"aria-live":F?"polite":null,"aria-relevant":z||F?"additions text":null,onFocus:this.$MessengerThreadlistRow3,className:"_5l-3 _1ht1"+(D.folder===c("MessagingTag").PENDING?" _4as3":"")+(this.props.isActive?" _1ht2":"")+(F?" _1ht3":"")+(this.state.actionsOpen?" _13aa":"")+(this.props.isMuted?" _569x":"")+(this.props.isFocused?" _23_m":"")+(F&&c("UserAgent").isBrowser("Chrome")&&c("UserAgent").isPlatform("Mac")?" _5fx8":""),onDragEnter:z?null:this.$MessengerThreadlistRow4,onDragLeave:z?null:this.$MessengerThreadlistRow5,role:"row",ref:function(I){return I&&this.props.registerThreadRefs&&this.props.registerThreadRefs(I)}.bind(this),tabIndex:-1},c("React").createElement("div",{className:"_5l-3 _1ht5",id:this.$MessengerThreadlistRow6(D.thread_id),role:"gridcell",tabIndex:-1},c("React").createElement(c("LinkWithHiddenURLBar.react"),{href:G.toString(),onClick:this.$MessengerThreadlistRow7,onAllClicks:this.$MessengerThreadlistRow8,className:"_1ht5 _2il3 _5l-3 _3itx",s:"true",ref:"link",role:"link",tabIndex:B&&!A?0:-1},c("React").createElement("div",babelHelpers["extends"]({},c("Tooltip").propsFor(H,"right","center"),{"data-tooltip-root-class":"_33g_","aria-hidden":true,className:"_1qt3 _5l-3"}),c("React").createElement(o,{isPresenceForWork:this.props.isPresenceForWork,isDoNotDisturb:this.props.isDoNotDisturb,participants:C,size:t,thread:D,viewer:E})),c("React").createElement("div",{className:"_1qt4 _5l-m"},c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement(c("MercuryThreadTitle.react"),{className:"_1ht6",showUnreadCount:false,thread:D,useShortName:false,viewer:E}),c("React").createElement("div",null,c("MNAdsMessageUtils").isAdsMessageRequest(D)?c("MNAdsMessageUtils").renderAdsMessageRequestStatus():this.$MessengerThreadlistRow9(D))),c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement(c("MercuryThreadSnippet.react"),{className:c("joinClasses")("_1htf",c("messengerRTLClasses")(D.snippet,true)),participants:C,shouldRenderYou:true,thread:D,viewer:E})),this.$MessengerThreadlistRow10(),this.$MessengerThreadlistRow11()))),this.$MessengerThreadlistRow12())};x.prototype.$MessengerThreadlistRow12=function(){if(this.props.showActions===false)return null;var y=this.props,z=y.blockedIds,A=y.isActionsFocused,B=y.isTabbable,C=y.participants,D=y.thread,E=y.viewer,F=c("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(this.props.participants,D),G=F&&F.contact,H=c("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(E,z,D),I=c("MessengerAdminGroupUtils").isJoinableThread(D),J=c("MercuryIDs").isGroupChat(this.props.thread.thread_id),K=D.unread_count>0;return c("React").createElement("div",{role:"gridcell"},c("React").createElement("div",{"aria-describedby":this.$MessengerThreadlistRow6(D.thread_id),"aria-haspopup":"true","aria-label":i._("Actions"),className:"_2j6 _5l-3",tabIndex:B&&A?0:-1,role:"button"},c("React").createElement(q,{className:"_5bli",isHidden:this.state.actionsOpen,lastMessage:this.props.lastMessage,participants:C,readReceipts:this.props.readReceipts,thread:D,viewer:E}),this.$MessengerThreadlistRow13(),c("React").createElement(p,{contact:G,isGroupChat:J,isJoinableThread:I,isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isUnread:K,isBlocked:H,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onToggle:this.$MessengerThreadlistRow14,onUnmute:this.props.onUnmute,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showLeaveGroup:this.props.showLeaveGroup,showMute:true,showIgnoreGroup:c("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U"),showBlock:D.is_canonical_user&&D.other_user_fbid&&E!==D.other_user_fbid,showReport:c("getPageIDFromThreadID")(this.props.thread.thread_id),tabIndex:-1,thread:D,ref:"actions"}),c("React").createElement("div",{className:"_56ck"})))};x.prototype.$MessengerThreadlistRow13=function(){var y=this.props.lastMessage;if(this.state.actionsOpen||!y)return null;var z=c("MercuryMessageInfo").isSending(y),A=c("MercuryMessageInfo").hasError(y);if(!z&&!A)return null;return c("React").createElement(c("Image.react"),{className:"_wtw"+(z?" _3qh2":""),src:z?v:u})};x.prototype.$MessengerThreadlistRow9=function(y){return c("React").createElement(m,{className:"_1ht7",time:y.timestamp,title:c("MercuryTimestamp").getAbsoluteTimestamp(y.timestamp),text:c("MercuryTimestamp").getRelativeTimestamp(y.timestamp)})};x.prototype.$MessengerThreadlistRow10=function(){__p&&__p();if(this.props.thread.folder!==c("MessagingTag").PENDING||!c("MercuryConfig").EPB)return null;var y=c("CurrentUser").getID(),z=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,y);return c("React").createElement("div",{className:"_5l-3"},c("React").createElement(n,{className:"_3yvh",type:"primary",label:i._("Accept"),onClick:function(A){__p&&__p();A.preventDefault();A.stopPropagation();if(this.props.showAggregation){var B=c("MessengerURIStore").getState().threadIDs;if(B){var C=B.filter(function(D){return this.props.thread.thread_id!==D}.bind(this));c("MessengerActions").selectAggregation(C)}}c("MercuryThreadActions").get().changeFolder(this.props.thread.thread_id,c("MessagingTag").INBOX);new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(w(this.props.folder)).setFolderType("pending").setThreadKey(z).setEntryPoint("inbox_banner").log()}.bind(this)}),c("React").createElement(n,{className:"_3yvh _1d-z",type:"faded",label:i._("Decline"),onClick:function(A){A.preventDefault();A.stopPropagation();c("Bootloader").loadModules(["MessengerDeclineDialogReact.bs"],function(B){var C=B.jsComponent,D=c("MercuryIDs").isGroupChat(this.props.thread.thread_id);c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(C,{onBlock:this.props.onBlock,onDelete:this.$MessengerThreadlistRow15,onToggle:this.$MessengerThreadlistRow16,isGroupChat:D})}.bind(this));new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(w(this.props.folder)).setFolderType("pending").setThreadKey(z).setEntryPoint("inbox_banner").log()}.bind(this),"MessengerThreadlistRow.react")}.bind(this)}))};x.prototype.$MessengerThreadlistRow11=function(){if(!this.props.thread.rtc_call_data||this.props.thread.rtc_call_data.call_state===c("RTCCallState").NO_ONGOING_CALL)return null;var y=window.callWindow&&!window.callWindow.closed?i._("Return To Call"):i._("Join Call");return c("React").createElement(n,{className:"_4ry5",label:y,onClick:this.$MessengerThreadlistRow17,type:"primary"})};x.prototype.$MessengerThreadlistRow6=function(y){return"row_header_id_"+y};x.propTypes={isActive:s.bool.isRequired,blockedIds:s.instanceOf(Set).isRequired,isActionsFocused:s.bool,isFocused:s.bool,isMuted:s.bool.isRequired,isDoNotDisturb:s.bool,isPresenceForWork:s.bool,lastMessage:s.instanceOf(c("ImmutableObject")),logClickHandler:s.func,onArchive:s.func.isRequired,onDelete:s.func.isRequired,onMarkRead:s.func.isRequired,onMarkSpam:s.func.isRequired,onMarkUnread:s.func.isRequired,onMute:s.func.isRequired,onSelect:s.func.isRequired,onUnmute:s.func.isRequired,onIgnore:s.func.isRequired,onBlock:s.func.isRequired,onUnblock:s.func.isRequired,participants:s.instanceOf(c("immutable").Map).isRequired,readReceipts:s.instanceOf(c("immutable").OrderedMap).isRequired,registerThreadRefs:s.func,showAggregation:s.bool,thread:s.instanceOf(c("ImmutableObject")).isRequired,viewer:s.string.isRequired};f.exports=x}),null);
__d("MessengerConfirmBlockThreadDialogReact.bs",["fbt","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact.bs").statelessComponent("MessengerConfirmBlockThreadDialogReact");function j(l,m){var n=function n(p){if(p)return 0;else return c("MessengerDialogs.bs").removeDialog(0)},o=function o(){return n(false)};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],function(){return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Dialog[0](0,n,0,0,0,0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Header[0](0,0,h._("You have blocked {sender name}",[h._param("sender name",l)]))),c("ReasonReact.bs").element(0,0,c("MessengerDialogBodyReact.bs").make(0,[h._("You can access people you've blocked by going to the filtered requests list.")])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Footer[0](0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Button[0](0,[h._("OK")],0,0,[o],[1],0,0,[]))]))]))},i[10],i[11],i[12],i[13]]}var k=c("ReasonReact.bs").wrapReasonForJs(i,function(l){return j(l.participantName,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("MessengerConfirmLeaveGroupDialogReact.bs",["bs_curry","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ReasonReact.bs").statelessComponent("MessengerConfirmLeaveGroupDialogReact");function i(l){if(l)return 0;else return c("MessengerDialogs.bs").removeDialog(0)}function j(l,m,n,o){var p=function p(o,q){c("bs_curry")._1(m,0);return c("MessengerDialogs.bs").removeDialog(0)};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],function(q){var r=c("MessengerAdminGroupUtils").getLeaveGroupBodyText(l,n),s=c("MessengerAdminGroupUtils").getLeaveGroupButtonText(l,n),t=c("MessengerAdminGroupUtils").getLeaveGroupTitleText(l,n);return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Dialog[0](0,i,0,0,0,0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Header[0](0,0,t)),c("ReasonReact.bs").element(0,0,c("MessengerDialogBodyReact.bs").make(0,[r])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Footer[0](0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").CancelButton[0](0,[])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Button[0](0,[s],0,["danger"],[c("bs_curry")._1(q[0],p)],[0],0,0,[]))]))]))},h[10],h[11],h[12],h[13]]}var k=c("ReasonReact.bs").wrapReasonForJs(h,function(l){return j(l.isViewerAdmin,l.onLeave,l.thread,[])});g.component=h;g.handleToggle=i;g.make=j;g.jsComponent=k}),null);
__d("MessengerThreadlistRowContainer.react",["fbt","IgnoreMessagesTypedLogger","ImmutableObject","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryMessages","MercuryParticipants","MessengerReadReceipt.bs","MercuryThreadActions","MercuryThreadInfo","MercuryThreadlistRowContainer.react","MercuryTriodeSourceUtil","MessagingSourceEnum","MessengerActions","MessengerDialogs.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerConfirmBlockThreadDialogReact.bs","MessengerBlockDialogReact.bs","MessageRequestUtils","MessengerAdminGroupUtils","MessengerMessageRequestsTypedLogger","MessengerThreadlistRow.react","MessagingTag","MNPlatformTagsDataManager","ReactComponentWithPureRenderMixin","React","ReactDOM","StoreAndPropBasedStateMixin","CurrentUser"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,j=c("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,k=c("MessengerBlockDialogReact.bs").jsComponent,l=c("React").PropTypes,m=c("React").createClass({displayName:"MessengerThreadlistRowContainer",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MercuryMessages"))],propTypes:{blockedIds:l.instanceOf(Set).isRequired,isActive:l.bool.isRequired,isTabbable:l.bool,folder:l.string,onOverrideSelect:l.func,showAggregation:l.bool,showActions:l.bool,readReceipts:l.object,thread:l.instanceOf(c("ImmutableObject")).isRequired,viewer:l.string.isRequired},statics:{calculateState:function n(o){var p=c("MercuryMessages").getForFBID(o.viewer),q=o.thread.thread_id,r=p.getThreadMessagesRangeNow(q,0,1)[0];return{lastMessage:r||null}}},getInitialState:function n(){return{readReceipts:c("MessengerReadReceipt.bs").getSeenTimestamps(this.props.readReceipts,this.props.thread.thread_id)}},UNSAFE_componentWillReceiveProps:function n(o){if(o.readReceipts)this.setState({readReceipts:c("MessengerReadReceipt.bs").getSeenTimestamps(o.readReceipts,o.thread.thread_id)})},componentDidUpdate:function n(o){if(this.props.isActive&&!o.isActive)this.props.onScrollIntoView(c("ReactDOM").findDOMNode(this))},render:function n(){return c("React").createElement(c("MercuryThreadlistRowContainer.react"),babelHelpers["extends"]({},this.props,{ChildClass:c("MessengerThreadlistRow.react"),isMuted:c("MercuryThreadInfo").isMuted(this.props.thread),lastMessage:this.state.lastMessage,onArchive:this._handleArchive,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onSelect:this._handleSelect,onUnmute:this._handleUnmute,onIgnore:this._handleIgnore,onBlock:this._handleBlockFromSettingOrDecline,onUnblock:this._handleUnblock,readReceipts:this.state.readReceipts,showActions:this.props.showActions,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical}))},_handleArchive:function n(){var o=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);o&&c("MessengerActions").selectThread(null)},_handleDelete:function n(){var o=this.props.isActive;this._getThreadActions()["delete"](this.props.thread.thread_id);o&&c("MessengerActions").selectThread(null)},_handleMarkRead:function n(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function n(){var o=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);o&&c("MessengerActions").selectThread(null)},_handleMarkUnread:function n(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function n(o){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,o)},_handleSelect:function n(){__p&&__p();var o=c("CurrentUser").getID(),p=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,o);if(this.props.onOverrideSelect){this.props.onOverrideSelect(this.props.thread);return}c("MessengerActions").selectThread(this.props.thread.thread_id);var q=c("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id),r=void 0;switch(this.props.folder){case"inbox":r="inbox";break;case"pending":r="pending";break;case"other":r="other";break}if(this.props.thread.folder!==c("MessagingTag").INBOX)new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_thread_open").setThreadID(q).setSurface(r).setFolderType(this.props.thread.folder).setThreadKey(p).log();c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(c("MessagingSourceEnum").MESSENGER_WEB_SEARCH,q)},_handleUnmute:function n(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleLeaveGroup:function n(){var o,p=this;if(this.props.viewer)(function(){var q=c("MessengerAdminGroupUtils").isAdmin(p.props.thread.admin_ids,p.props.viewer);c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(i,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:q,thread:this.props.thread})}.bind(p))})()},_handleIgnore:function n(){var o=this.props.isActive;this._getThreadActions().changeFolder(this.props.thread.thread_id,"other");o&&c("MessengerActions").selectThread(null);new(c("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlockFromSettingOrDecline:function n(){var o=this.props.thread.thread_id,p=c("MercuryIDs").isGroupChat(o);if(p){this._handleIgnore();return}var q=c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(this.props.thread.other_user_fbid)),r=q&&q.short_name||h._("sender");c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(k,{onBlock:function(){this._handleConfirmBlock(r)}.bind(this),contact:q,onToggle:this._handleBlockDialogToggle})}.bind(this))},_handleBlockDialogToggle:function n(){c("MessengerDialogs.bs").removeDialog()},_handleConfirmBlock:function n(o){var p=this.props.thread.thread_id;if(p)this._getThreadActions().blockIgnoreOnMessengerDotCom(this.props.isActive,p,function(){this._handleAfterBlock(o)}.bind(this))},_handleAfterBlock:function n(o){var p=this.props.thread;c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(j,{participantName:o})});var q=c("MercuryIDs").getThreadKeyfromThreadIDUserID(p.thread_id,c("CurrentUser").getID()),r=!!p&&c("MessageRequestUtils").isFiltered(p);new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(p.thread_id)).setSurface("thread").setFolderType(r?c("MessagingTag").OTHER:c("MessagingTag").PENDING).setThreadKey(q).setEntryPoint(null).log()},_handleUnblock:function n(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_onLeaveGroupConfirm:function n(){if(!c("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){var o=this._getMessageObject().constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),this.props.thread.thread_id,c("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(o)}},_getThreadActions:function n(){return c("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function n(){return c("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function n(){return c("MercuryMessageObject").getForFBID(this.props.viewer)}});f.exports=m}),null);
__d("AbstractCheckboxInputReact.bs",["ReasonReact.bs","AbstractCheckboxInput.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){return c("ReasonReact.bs").wrapJsForReason(c("AbstractCheckboxInput.react"),{className:i,checked:j,onChange:k},l)}g.make=h}),null);
__d("AbstractPopoverButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","AbstractPopoverButton.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n){return c("ReasonReact.bs").wrapJsForReason(c("AbstractPopoverButton.react"),{config:c("bs_js_null_undefined").fromOption(i),haschevron:c("bs_js_null_undefined").fromOption(j),image:c("bs_js_null_undefined").fromOption(k),label:c("bs_js_null_undefined").fromOption(l),maxwidth:c("bs_js_null_undefined").fromOption(m)},n)}g.make=h}),null);
__d("ArchiveWarningReact.bs",["cx","React","ReasonReact.bs","TooltipData","bs_js_primitive","bs_js_null_undefined"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact.bs").statelessComponent("ArchiveWarningReact");function j(l,m){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],function(){var n=c("TooltipData").propsFor("All employee-to-employee conversations will be archived","above");if(l){var o=c("React").createElement("i",{className:"_3olv _14lt"});return c("React").cloneElement(c("React").createElement("div",{className:"_3a61"},o),{"data-tooltip-content":c("bs_js_null_undefined").fromOption(c("bs_js_primitive").undefined_to_opt(n["data-tooltip-content"])),"data-hover":c("bs_js_null_undefined").fromOption(c("bs_js_primitive").undefined_to_opt(n["data-hover"])),"data-tooltip-position":c("bs_js_null_undefined").fromOption(c("bs_js_primitive").undefined_to_opt(n["data-tooltip-position"]))})}else return null},i[10],i[11],i[12],i[13]]}var k=c("ReasonReact.bs").wrapReasonForJs(i,function(l){return j(l.shown,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("Bootload.bs",["bs_curry"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=function j(k){return c("bs_curry")._1(i[0],function(l){return c("bs_curry")._1(k,l.bootloadable)})};return[j]}g.Create=h}),null);
__d("ChatEmojiSkinTonePreferencePickerReact.bs",["ReasonReact.bs","ChatEmojiSkinTonePreferencePicker.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact.bs").wrapJsForReason(c("ChatEmojiSkinTonePreferencePicker.react"),{currentPreference:i,onSelect:j},k)}g.make=h}),null);
__d("ChatSidebarSheetChatOffline.react",["fbt","Link.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement("div",null,h._("{=Go online} to see who's available.",[h._param("=Go online",c("React").createElement(c("Link.react"),{className:"fbChatGoOnlineLink",onClick:this.props.onGoOnlineClick},h._("Turn on chat")))]))};function l(){i.apply(this,arguments)}l.propTypes={onGoOnlineClick:k.func.isRequired};f.exports=l}),null);
__d("ChatSidebarSheetChatReconnectMsg.react",["fbt","ChannelConstants","Link.react","MessengerSpinner.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.isMessenger,o=m.msecs,p=c("React").createElement(c("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},h._("No Internet connection"));if(o==null||false===navigator.onLine)return n?p:c("React").createElement("div",null,h._("Unable to connect to chat. Check your Internet connection."));else if(o>c("ChannelConstants").WARNING_COUNTDOWN_THRESHOLD_MSEC)return n?p:c("React").createElement("div",null,h._("Unable to connect to chat. {try-again-link}",[h._param("try-again-link",c("React").createElement(c("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},h._("Try again")))]));else if(o>1e3)return n?p:c("React").createElement("div",null,h._("Unable to connect to chat. Reconnecting in {seconds}",[h._param("seconds",Math.floor(o/1e3))]));else return n?c("React").createElement("div",null,c("React").createElement(c("MessengerSpinner.react"),{color:"grey"}),h._("Connecting...")):c("React").createElement("div",null,h._("Unable to connect to chat. Reconnecting..."))};function l(){i.apply(this,arguments)}l.propTypes={isMessenger:k.bool,msecs:k.number,onManuallyConnectClick:k.func};f.exports=l}),null);
__d("ChatSidebarSheetChatShutdownMsg.react",["fbt","ChannelConstants","CurrentUser","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.hint,o=m.isMessenger;switch(n){case c("ChannelConstants").HINT_AUTH:return c("React").createElement("div",null,h._("Your session has timed out. Please log in."));case c("ChannelConstants").HINT_MAINT:return o?c("React").createElement("div",null,h._("Messenger is currently down for maintenance.")):c("React").createElement("div",null,h._("{Chat} is currently down for maintenance.",[h._param("Chat",h._("Chat"))]));case c("ChannelConstants").HINT_CONN:default:if(!o)return c("React").createElement("div",null,h._("{Chat} is currently unavailable.",[h._param("Chat",h._("Chat"))]));else if(c("CurrentUser").isWorkUser())return c("React").createElement("div",null,h._("Workplace Chat is currently unavailable."));else return c("React").createElement("div",null,h._("Messenger is currently unavailable."))}};function l(){i.apply(this,arguments)}l.propTypes={hint:k.string,isMessenger:k.bool};f.exports=l}),null);
__d("ChatSidebarSheet.react",["fbt","Arbiter","Bootloader","ChannelConnection","ChatBehavior","ChatSidebarSheetChatOffline.react","ChatSidebarSheetChatReconnectMsg.react","ChatSidebarSheetChatShutdownMsg.react","ChatVisibility","MercuryConfig","MessengerEnvironment","CSS","JSLogger","LogHistory","MercurySyncConstants","PresencePrivacy","React","SubscriptionsHandler","clearTimeout","emptyFunction","joinClasses","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("JSLogger").create("sidebar_sheet"),l=c("LogHistory").getInstance("sidebar_sheet"),m=c("React").PropTypes;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.$ChatSidebarSheet3=function(p,q){this.setState({channelStatus:p,channelData:q});this.$ChatSidebarSheet4()}.bind(this);this.$ChatSidebarSheet4=function(){this.setState({isConnected:!c("ChannelConnection").disconnected(),isOnline:c("ChatVisibility").isOnline(),notifiesUserMessages:c("ChatBehavior").notifiesUserMessages()})}.bind(this);this.state={channelStatus:null,channelData:null,isConnected:!c("ChannelConnection").disconnected(),isOnline:c("ChatVisibility").isOnline(),notifiesUserMessages:c("ChatBehavior").notifiesUserMessages(),syncStateInvalid:false,syncStateReconnecting:false}}n.prototype.componentDidMount=function(){this.$ChatSidebarSheet1=new(c("SubscriptionsHandler"))();this.$ChatSidebarSheet1.addSubscriptions(c("ChannelConnection").subscribe([c("ChannelConnection").CONNECTED,c("ChannelConnection").SHUTDOWN,c("ChannelConnection").RECONNECTING],this.$ChatSidebarSheet3),c("ChannelConnection").subscribe([c("ChannelConnection").MUTE_WARNING,c("ChannelConnection").UNMUTE_WARNING],this.$ChatSidebarSheet4),c("PresencePrivacy").subscribe("privacy-user-presence-changed",this.$ChatSidebarSheet4),c("ChatBehavior").subscribe(c("ChatBehavior").ON_CHANGED,this.$ChatSidebarSheet4),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE,function(){l.log("invalid state fatal","{}");this.setState({syncStateInvalid:true,syncStateReconnecting:false})}.bind(this)),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY,function(){l.log("retry from invalid state","{}");this.$ChatSidebarSheet5()}.bind(this)),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER,function(){l.log("recover from invalid state","{}");this.$ChatSidebarSheet6()}.bind(this)))};n.prototype.UNSAFE_componentWillUpdate=function(){if(this.$ChatSidebarSheet2){c("clearTimeout")(this.$ChatSidebarSheet2);this.$ChatSidebarSheet2=null}};n.prototype.componentWillUnmount=function(){this.$ChatSidebarSheet1&&this.$ChatSidebarSheet1.release()};n.prototype.render=function(){__p&&__p();var o=c("MessengerEnvironment").messengerui,p=void 0,q=void 0;if(!this.state.isOnline&&!o){p="offline";q=this.$ChatSidebarSheet7()}else if(!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting){p="error";q=this.$ChatSidebarSheet8(o)}else if(!this.state.notifiesUserMessages&&!o){p="notice";q=this.$ChatSidebarSheet9()}if(this.state.channelStatus===c("ChannelConnection").RECONNECTING&&this.state.channelData<1e3||this.state.syncStateReconnecting)p=c("joinClasses")(p,"reconnecting");return c("React").createElement("div",{className:c("joinClasses")(this.props.className,p)},o?null:c("React").createElement("div",{className:"img"}),c("React").createElement("div",{className:"message"},q))};n.prototype.$ChatSidebarSheet8=function(o){__p&&__p();if(this.state.channelStatus===c("ChannelConnection").SHUTDOWN||this.state.syncStateInvalid)return c("React").createElement(c("ChatSidebarSheetChatShutdownMsg.react"),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:o});else if(this.state.channelStatus===c("ChannelConnection").RECONNECTING||this.state.syncStateReconnecting){var p=this.state.syncStateReconnecting?1:this.state.channelData;if(p>1e3)this.$ChatSidebarSheet2=c("setTimeoutAcrossTransitions")(this.$ChatSidebarSheet3.bind(this,c("ChannelConnection").RECONNECTING,p-1e3),1e3);return c("React").createElement(c("ChatSidebarSheetChatReconnectMsg.react"),{isMessenger:o,msecs:p,onManuallyConnectClick:function(){if(!this.state.syncStateReconnecting)c("ChannelConnection").reconnect()}.bind(this)})}return null};n.prototype.$ChatSidebarSheet7=function(){return c("React").createElement(c("ChatSidebarSheetChatOffline.react"),{onGoOnlineClick:function(o){this.$ChatSidebarSheet10();k.log("sidebar_go_online");c("ChatVisibility").goOnline()}.bind(this)})};n.prototype.$ChatSidebarSheet10=function(){c("Bootloader").loadModules(["FunnelLogger"],function(o){o.startFunnel("WWW_PRESENCE_FUNNEL");o.appendActionWithTag("WWW_PRESENCE_FUNNEL","sidebar_turn_on_chat",c("PresencePrivacy").getOnlinePolicyStr());o.endFunnel("WWW_PRESENCE_FUNNEL")},"ChatSidebarSheet.react")};n.prototype.$ChatSidebarSheet9=function(){return c("React").createElement("div",null,h._("Alerts are off while you use another client to chat."))};n.prototype.$ChatSidebarSheet5=function(){this.setState({syncStateReconnecting:true})};n.prototype.$ChatSidebarSheet6=function(){this.setState({syncStateInvalid:false,syncStateReconnecting:false})};f.exports=n}),null);
__d("ChatSidebarSheetReact.bs",["ReasonReact.bs","ChatSidebarSheet.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact.bs").wrapJsForReason(c("ChatSidebarSheet.react"),{className:i},j)}g.make=h}),null);
__d("CustomColorHighlightingReact.bs",["ReasonReact.bs","bs_js_null_undefined","CustomColorHighlighting.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact.bs").wrapJsForReason(c("CustomColorHighlighting.react"),{customColor:c("bs_js_null_undefined").fromOption(i)},j)}g.make=h}),null);
__d("LinkWithHiddenURLBarReact.bs",["ReasonReact.bs","bs_js_null_undefined","LinkWithHiddenURLBar.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){return c("ReasonReact.bs").wrapJsForReason(c("LinkWithHiddenURLBar.react"),{"aria-label":c("bs_js_null_undefined").fromOption(i),"data-hover":c("bs_js_null_undefined").fromOption(k),"data-tooltip-content":c("bs_js_null_undefined").fromOption(l),"data-tooltip-alignh":c("bs_js_null_undefined").fromOption(m),"data-tooltip-position":c("bs_js_null_undefined").fromOption(n),className:c("bs_js_null_undefined").fromOption(j),href:c("bs_js_null_undefined").fromOption(o),linkRef:c("bs_js_null_undefined").fromOption(p),onClick:c("bs_js_null_undefined").fromOption(q),onAllClicks:c("bs_js_null_undefined").fromOption(r),onMouseDown:c("bs_js_null_undefined").fromOption(s),onMouseEnter:c("bs_js_null_undefined").fromOption(t),role:c("bs_js_null_undefined").fromOption(u),style:c("bs_js_null_undefined").fromOption(v),tabIndex:c("bs_js_null_undefined").fromOption(w),target:c("bs_js_null_undefined").fromOption(x),title:c("bs_js_null_undefined").fromOption(y)},z)}g.make=h}),null);
__d("MercuryThreadTitleReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MercuryThreadTitle.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q){return c("ReasonReact.bs").wrapJsForReason(c("MercuryThreadTitle.react"),{className:c("bs_js_null_undefined").fromOption(i),maxTitle:c("bs_js_null_undefined").fromOption(j),thread:k,viewer:l,isNewThread:c("Utils.bs").optionBoolToNullUndefinedBoolean(m),showUnreadCount:c("Utils.bs").optionBoolToNullUndefinedBoolean(n),useShortName:c("Utils.bs").optionBoolToNullUndefinedBoolean(o),useAndSeparator:c("Utils.bs").optionBoolToNullUndefinedBoolean(p)},q)}g.make=h}),null);
__d("MessageRequestLogger.bs",["MessengerMessageRequestsTypedLogger"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){new(c("MessengerMessageRequestsTypedLogger"))().setSurface("inbox").setFolderType(k).setAction("message_requests_thread_impression").addToExtraData("threads",i).setThreadKeyList(j).log();return 0}g.logItemImpression=h}),null);
__d("MessengerChatOnOffToggleReact.bs",["cx","fbt","bs_curry","React","LinkReact.bs","ReasonReact.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact.bs").statelessComponent("MessengerChatOnOffToggleReact");function k(l,m,n){var o=function o(n,p){if(m)return c("bs_curry")._1(m[0],!l);else return 0};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],function(p){var q=l?i._("Go Offline"):i._("Go Online");return c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make([q],0,["tooltip"],[q],["center"],["above"],0,0,[c("bs_curry")._1(p[0],o)],0,0,0,0,0,0,0,c("React").createElement("div",{className:"_3dwl"+(l?" _337l":"")},c("React").createElement("div",{className:"_3dwf"+(l?" _3dwk":"")}))))},j[10],j[11],j[12],j[13]]}g.component=j;g.make=k}),null);
__d("MessengerCheckboxInputReact.bs",["cx","ReasonReact.bs","AbstractCheckboxInputReact.bs"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("ReasonReact.bs").statelessComponent("MessengerCheckboxInputReact");function j(k,l,m){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],function(){return c("ReasonReact.bs").element(0,0,c("AbstractCheckboxInputReact.bs").make("_55sg _4ng2",k,l,[]))},i[10],i[11],i[12],i[13]]}g.component=i;g.make=j}),null);
__d("MessengerCustomColorUtils.bs",["cssVar","CurrentUser"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){var k=j.custom_color,l=c("CurrentUser").isWorkUser();if(k==null)if(l)return"#373e4c";else return"#0084ff";else return k}g.customColorOrBlue=i}),null);
__d("MessengerDeleteAllMenuBootloaderReact.bs",["ReasonReact.bs","MessengerDeleteAllMenuBootloader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n){return c("ReasonReact.bs").wrapJsForReason(c("MessengerDeleteAllMenuBootloader.react"),{filter:i,folder:j,viewer:k,threadIDs:l,aggregationView:m},n)}g.make=h}),null);
__d("MessengerInfoPanelButtonReact.bs",["ix","cx","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={height:"32px",width:"32px"};function k(n){return c("React").createElement("svg",{viewBox:"0 0 64 64"},c("React").createElement("g",undefined,c("React").createElement("g",undefined,c("React").createElement("path",{style:{fill:n},d:"M32,10c-12.2,0-22,9.8-22,22s9.8,22,22,22s22-9.8,22-22S44.2,10,32,10z M32,19c1.6,0,3,1.4,3,3s-1.4,3-3,3 c-1.6,0-3-1.4-3-3S30.4,19,32,19z M36,45h-2h-4h-2v-1h2V29h-2v-1h2h4v1v15h2V45z"}))))}function l(n){var o={fill:n};return c("React").createElement("svg",{style:{stroke:n},viewBox:"0 0 64 64"},c("React").createElement("g",undefined,c("React").createElement("polygon",{style:o,points:"34,44 34,29 34,28 30,28 28,28 28,29 30,29 30,44 28,44 28,45 30,45 34,45 36,45 36,44"}),c("React").createElement("circle",{style:o,cx:"32",cy:"22",r:"3"})),c("React").createElement("path",{style:{fill:"none",stroke:n,strokeMiterlimit:"10",strokeWidth:"2"},d:"M32,11c11.6,0,21,9.4,21,21s-9.4,21-21,21s-21-9.4-21-21S20.4,11,32,11z"}))}function m(n,o){var p=c("CurrentUser").isWorkUser();if(p)return c("React").createElement("div",{className:"_2phz"},c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(0,0,[o?h("413962"):h("413953")],0,0,0,0,[])));else return c("React").createElement("div",{style:j},o?l(n):k(n))}g.svgWrapperStyle=j;g.selected=k;g.notSelected=l;g.make=m}),null);
__d("MessengerPresenceStatusReact.bs",["fbt","React","ReasonReact.bs","bs_js_primitive"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact.bs").statelessComponent("MessengerPresenceStatusReact");function j(l,m,n,o,p){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],function(){__p&&__p();var q,r=0;if(m&&o)q=h._("Active on {platform}",[h._param("platform",o[0])]);else r=1;if(r===1)q=n?h._("Active {time} ago",[h._param("time",n[0])]):null;var s={};if(l)s.className=l[0];return c("React").createElement("span",s,q)},i[10],i[11],i[12],i[13]]}var k=c("ReasonReact.bs").wrapReasonForJs(i,function(l){return j(c("bs_js_primitive").null_undefined_to_opt(l.className),l.isUserActive,c("bs_js_primitive").null_undefined_to_opt(l.lastActive),c("bs_js_primitive").null_undefined_to_opt(l.platform),[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("MessengerRTCCallButtonReact.bs",["ReasonReact.bs","MessengerRTCCallButton.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q){return c("ReasonReact.bs").wrapJsForReason(c("MessengerRTCCallButton.react"),{className:i,customColor:j,isVideo:k,participants:l,thread:m,threadID:n,viewer:o,calleeName:p},q)}g.make=h}),null);
__d("MontageThreadViewContainerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MontageThreadViewContainer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact.bs").wrapJsForReason(c("MontageThreadViewContainer.react"),{threadID:i,onResize:c("bs_js_null_undefined").fromOption(j)},k)}g.make=h}),null);
__d("messengerCalculateTruncationState",["Style"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k,l,m){__p&&__p();if(!l||!j)return;var n=m?m.offsetWidth:0,o=Math.ceil(.5*(i.offsetWidth+l.offsetWidth)),p=i.offsetWidth-k.offsetWidth-12;if(o<=p){c("Style").set(i,"text-align","center");c("Style").set(j,"width","auto");c("Style").set(j,"margin-left","auto")}else{if(document.body.dir==="rtl")c("Style").set(i,"text-align","right");else{c("Style").set(i,"text-align","left");c("Style").set(j,"margin-left",n+"px")}var q=Math.max(i.offsetWidth-n-k.offsetWidth-11,0);c("Style").set(j,"width",q+"px")}}f.exports=h}),null);
__d("MessengerDetailViewHeaderReact.bs",["cx","fbt","FBID.bs","bs_curry","Event","React","Utils.bs","gkx","Bootload.bs","ReactDOM","debounce","LinkReact.bs","QE2Logger","Bootloader","CurrentUser","ReasonReact.bs","FBRTCSupport","bs_js_primitive","MercuryConfig","FBRTCExperiment","MessengerDomIDs.bs","bs_js_null_undefined","MercuryThreadInfo","ArchiveWarningReact.bs","MessageRequestUtils","MercuryParticipantTypes","MercuryThreadTitleReact.bs","MessengerLocalTimeReact.bs","MessengerCustomColorUtils.bs","MessengerJoinableModeType","MessengerWebDriverTestIDs","MessengerRTCCallButtonReact.bs","MessengerPresenceStatusReact.bs","MessengerInfoPanelButtonReact.bs","MontageThreadViewContainerReact.bs","messengerCalculateTruncationState","MessengerPlatformUserControlConfig"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(A){c("Bootloader").loadModules(["BootloadableMessengerUserControlsButtonReact.bs"],A,"MessengerDetailViewHeaderReact.bs");return 0}var k=[j],l=c("Bootload.bs").Create(k);function m(A){var B=c("bs_js_null_undefined").fromOption(A[0][0]),C=c("bs_js_null_undefined").fromOption(A[1][0]),D=c("bs_js_null_undefined").fromOption(A[2][0]),E=c("bs_js_null_undefined").fromOption(A[3][0]),F=c("bs_js_null_undefined").fromOption(A[4][0]);return c("messengerCalculateTruncationState")(B,C,D,E,F)}function n(A,B){B[1][3][0]=A==null?0:[c("ReactDOM").findDOMNode(A)];return 0}function o(A,B){B[1][1][0]=A==null?0:[A];return 0}function p(A,B){B[1][0][0]=A==null?0:[A];return 0}function q(A,B){B[1][2][0]=A==null?0:[A];return 0}function r(A,B){B[1][4][0]=A==null?0:[A];return 0}function s(A,B){if(A.has_montage&&c("MercuryConfig").MontageThreadViewer)return c("React").createElement("div",{ref:c("bs_curry")._1(B[0],r),className:"_1cwz"},c("ReasonReact.bs").element(0,0,c("MontageThreadViewContainerReact.bs").make(A.thread_id,0,[])));else return null}function t(A,B,C,D){__p&&__p();if(c("CurrentUser").isWorkUser()||!A)return null;else{var E=A[0],F=E.contact.type===c("MercuryParticipantTypes").PAGE;if(F&&c("gkx")("AT6mUVDD74IWOTG0apJZF1LePh7SrhTQTrb19q8AoflSv5-DHG9ZPR3YfgtHmrA5yQIw4oTG7io_Cp0zzeQ4tvCvUxrq6ExcZIsaJQRg7A8JWA")){c("QE2Logger").logExposureForUser("messenger_platform_user_controls_v2_www",c("CurrentUser").getID());if(c("MessengerPlatformUserControlConfig").v2_enabled){var G=D[1][5][0],H;if(G){var I=E.contact.is_messenger_blocked,J=E.contact.fbid;H=c("ReasonReact.bs").element(0,0,c("bs_curry")._7(G[0][8],"_3xb9 _30yy",c("MercuryThreadInfo").isMuted(B),I,J,B.thread_id,C,[]))}else H=null;return c("React").createElement("li",undefined,H)}else return null}else return null}}function u(A,B){__p&&__p();var C=B.filter(function(F,G,H){if(F==null)return false;else{var D=F.fbid;if(D==null)return false;else return D!==A}}),D=C.count(),E=C.first();if(D!==1||E==null)return null;else return c("ReasonReact.bs").element(0,0,c("MessengerLocalTimeReact.bs").make("_5eu7",c("bs_js_primitive").null_undefined_to_opt(E.timezone),[]))}function v(){var A=c("FBRTCExperiment").gen("rtc_www_unsupported_browser_call_buttons_qe");return A.getBool("show_buttons",false)}function w(A,B){var C=c("FBRTCSupport").isOSSupported()&&(c("FBRTCSupport").isWebrtcSupported()||v(0)),D=A?A[0].contact.type===c("MercuryParticipantTypes").PAGE:false,E=B?B[0].joinable_mode===c("MessengerJoinableModeType").JOINABLE:false,F;if(B){var G=B[0];F=G.participants.length>1&&c("MercuryThreadInfo").canReply(G)&&!c("MessageRequestUtils").isMessageRequest(G)}else F=false;if(C&&!D&&!E)return F;else return false}var x=c("ReasonReact.bs").reducerComponent("MessengerDetailViewHeaderReact");function y(A,B,C,D,E,F,G,H){__p&&__p();var I=function I(G){if(w(A,F)&&F){var L=F[0],M=L.thread_id;return c("React").createElement("li",undefined,c("ReasonReact.bs").element(0,0,c("MessengerRTCCallButtonReact.bs").make("_30yy",c("MessengerCustomColorUtils.bs").customColorOrBlue(L),false,E,L,M,G,A?A[0].contact.name:"",[])))}else return null},J=function J(G){__p&&__p();if(w(A,F)&&F){var L=F[0],M=L.thread_id,N;if(A){var O=A[0].isUserActive;N=O?"_3qfl":""}else N="";return c("React").createElement("li",undefined,c("ReasonReact.bs").element(0,0,c("MessengerRTCCallButtonReact.bs").make("_30yy",c("MessengerCustomColorUtils.bs").customColorOrBlue(L),true,E,L,M,G,A?A[0].contact.name:"",[])),c("React").createElement("div",{className:N}))}else return null},K=function K(){if(A){var L=A[0];return[false,c("ReasonReact.bs").element(0,0,c("MessengerPresenceStatusReact.bs").make(["_2v6o"],L.isUserActive,c("bs_js_primitive").null_undefined_to_opt(L.lastActive),[L.platform],[]))]}else return[true,null]};return[x[0],x[1],x[2],x[3],function(L){var M=c("Event").listen(window,"resize",c("debounce")(function(){return m(L[1])},20));c("bs_curry")._1(L[4],function(){return M.remove()});c("bs_curry")._1(l[0],function(N){var O=L,P=N;O[1][5][0]=[P];return 0});return 0},function(L){return m(L[1][1])},x[6],x[7],x[8],function(L){if(G&&F){var M=F[0],N=G[0],O=!E.isEmpty()&&E.every(function(R,H,S){if(R==null)return false;else return R.employee}),P=i._("Conversation information"),Q=K(0);return c("React").createElement("div",{ref:c("bs_curry")._1(L[0],p),className:"_673w"+(Q[0]?" _1_fz":"")},s(M,L),c("React").createElement("div",{key:"threadTitle",ref:c("bs_curry")._1(L[0],o),className:"_5743"},c("React").createElement("h2",{className:"_17w2",id:c("MessengerDomIDs.bs").ids.THREAD_TITLE},c("ReasonReact.bs").element(0,[c("bs_curry")._1(L[0],n)],c("MercuryThreadTitleReact.bs").make(["_3oh-"],[c("Utils.bs").$pipe$unknown(C,0)],M,N,0,0,0,0,[]))),Q[1],u(N,E)),c("React").createElement("ul",{key:"buttonsContainer",ref:c("bs_curry")._1(L[0],q),className:"_fl2"},c("React").createElement("li",undefined,c("ReasonReact.bs").element(0,0,c("ArchiveWarningReact.bs").make(O,[]))),t(A,M,N,L),I(N),J(N),c("React").createElement("li",undefined,c("React").cloneElement(c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make(0,["_30yy"],0,0,0,0,0,0,[D],0,0,["button"],0,0,0,[P],[])),{"aria-expanded":B?false:true,"aria-label":P,"data-testid":c("MessengerWebDriverTestIDs").INFO_PANEL_BUTTON},c("MessengerInfoPanelButtonReact.bs").make(c("MessengerCustomColorUtils.bs").customColorOrBlue(M),B)),c("React").cloneElement(c("React").createElement("div",undefined),{"aria-owns":c("MessengerDomIDs.bs").ids.THREAD_INFO_PANEL}))))}else return null},function(){return[[0],[0],[0],[0],[0],[0]]},x[11],function(H,L){return 0},x[13]]}var z=c("ReasonReact.bs").wrapReasonForJs(x,function(A){return y(c("bs_js_primitive").null_undefined_to_opt(A.contactData),A.infoPanelCollapsed,c("bs_js_primitive").null_undefined_to_opt(A.maxTitle),A.onInfoPanelToggle,A.participants,c("bs_js_primitive").null_undefined_to_opt(A.thread),c("FBID.bs").ofString(A.viewer),[])});g.BootloadableMessengerUserControlsButtonReact=k;g.LoadableMessengerUserControlsButtonReact=l;g.calculateTruncationState=m;g.findMercuryTitle=n;g.findTitle=o;g.findRoot=p;g.findButtons=q;g.findMontage=r;g.renderMontageThread=s;g.renderUserControls=t;g.renderLocalTime=u;g.showOnUnsupportedBrowsers=v;g.shouldShowCallButton=w;g.component=x;g.make=y;g.jsComponent=z}),null);
__d("MessengerFlexScrollableAreaReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerFlexScrollableArea.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact.bs").wrapJsForReason(c("MessengerFlexScrollableArea.react"),{onScroll:c("bs_js_null_undefined").fromOption(i)},j)}g.make=h}),null);
__d("MessengerGraphQLSearchTypeaheadReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessengerGraphQLSearchTypeahead.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){return c("ReasonReact.bs").wrapJsForReason(c("MessengerGraphQLSearchTypeahead.react"),{className:i,enableMessageSearch:j,excludeGroups:k,excludePages:l,hasHoverState:m,hideClearButton:c("Utils.bs").optionBoolToNullUndefinedBoolean(n),hideResults:c("Utils.bs").optionBoolToNullUndefinedBoolean(o),isFocused:c("Utils.bs").optionBoolToNullUndefinedBoolean(p),onBlur:q,onChange:r,onClear:s,onFocus:t,onScrollIntoView:u,onSelect:v,placeholder:w,queryString:c("bs_js_null_undefined").fromOption(x),shouldQueryInternalBot:y,shouldQueryVCEndpoint:z,typeaheadViewClassName:A,viewer:B},C)}g.make=h}),null);
__d("MessengerSettingsStore",["CacheStorage","MessengerSettingsActions","MessengerStore","MessengerDotComSettingsInitialData"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=new(c("CacheStorage"))("localstorage"),k="desktopNotifsEnabled";h=babelHelpers.inherits(l,c("MessengerStore"));i=h&&h.prototype;function l(){i.constructor.call(this);this.$MessengerSettingsStore1=babelHelpers["extends"]({},c("MessengerDotComSettingsInitialData"),{desktopNotifsEnabled:this.$MessengerSettingsStore2()})}l.prototype.getSettings=function(){return this.$MessengerSettingsStore1};l.prototype.$MessengerSettingsStore2=function(){return j.get(k,false)};l.prototype.$MessengerSettingsStore3=function(m){j.set(k,m)};l.prototype.__onDispatch=function(m){switch(m.type){case c("MessengerSettingsActions").Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,m.newSettings);this.emitChange();break;case c("MessengerSettingsActions").Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:m.desktopNotifsEnabled});this.$MessengerSettingsStore3(m.desktopNotifsEnabled);this.emitChange();break}};f.exports=new l()}),null);
__d("MessengerViewerCardReact.bs",["cx","React","ReasonReact.bs","joinClasses","ImageBlockReact.bs","MessengerContactImageReact.bs","MessengerChatOnOffToggleReact.bs"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact.bs").statelessComponent("MessengerViewerCardReact");function j(l,m,n,o,p){var q=l?l[0]:"";return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],function(){if(o){var r=o[0];return c("ReasonReact.bs").element(0,0,c("ImageBlockReact.bs").make([c("joinClasses")(q,"_1u5d")],0,0,["medium"],[c("ReasonReact.bs").element(0,0,c("MessengerContactImageReact.bs").StraightJSComponent[0](["_1u5h"],0,[true],0,34,[r.image_src],0,[])),c("React").createElement("div",{className:"_1u5i"},c("React").createElement("div",{className:"_364g"},r.name)),c("ReasonReact.bs").element(0,0,c("MessengerChatOnOffToggleReact.bs").make(m,n,[]))]))}else return c("React").createElement("div",undefined)},i[10],i[11],i[12],i[13]]}var k=34;g.imageSize=k;g.component=i;g.make=j}),null);
__d("MessengerSettingsDialogReact.bs",["cx","fbt","bs_array","bs_block","bs_curry","React","LinkReact.bs","MercuryIDs","CurrentUser","ReasonReact.bs","EmojiActions","bs_js_primitive","EmojiStateStore","PresencePrivacy","MessengerDialogs.bs","MercuryParticipants","MessengerDialogReact.bs","SubscriptionsHandler","MessengerSpinnerReact.bs","MessengerSettingsStore","MessengerSettingsActions","MessengerViewerCardReact.bs","MessengerCheckboxInputReact.bs","MessengerDesktopNotifications","ChatEmojiSkinTonePreferencePickerReact.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact.bs").reducerComponent("MessengerSettingsDialogReact");function k(y){if(y)return 0;else return c("MessengerDialogs.bs").removeDialog(0)}function l(){return c("MessengerDialogs.bs").removeDialog(0)}function m(y,z){var A=z[1][1];c("PresencePrivacy").setVisibility(A?c("PresencePrivacy").OFFLINE:c("PresencePrivacy").ONLINE);return 0}function n(y,z){var A=y[2];if(A)return c("ReasonReact.bs").element(0,0,c("MessengerViewerCardReact.bs").make(["_3xld"],y[1],[c("bs_curry")._1(z,m)],[A[0]],[]));else return c("ReasonReact.bs").element(0,0,c("MessengerSpinnerReact.bs").make(0,0,0,[]))}function o(y,z){var A=z[3];c("MessengerSettingsActions").changeDesktopNotifs(!z[1][3].desktopNotifsEnabled,function(){return c("bs_curry")._1(A,1)});return 0}function p(y){var z=y[1];if(z[4]){var A=c("CurrentUser").isWorkUser();return i._({"Workplace Chat":"You can allow Workplace Chat to send you desktop notifications from your browser preferences.","Messenger":"You can allow Messenger to send you desktop notifications from your browser preferences."},[i._enum(A?"Workplace Chat":"Messenger",{"Workplace Chat":"Workplace Chat",Messenger:"Messenger"})])}else return c("bs_array").of_list([c("ReasonReact.bs").element(["notifications-checkox"],0,c("MessengerCheckboxInputReact.bs").make(z[3].desktopNotifsEnabled&&z[5],c("bs_curry")._1(y[0],o),[])),[c("React").createElement("span",{key:"notifications-checkbox-label",className:"_1pr_"},i._("Desktop notifications enabled")),0]])}function q(y){if(c("MessengerDesktopNotifications").isSupported())return c("React").createElement("div",{className:"_374b"+(y[1][4]?" _2bd0":"")},c("React").createElement("div",{className:"_374c"},i._("Notifications")),c("React").createElement("div",{className:"_374d"},p(y)));else return null}function r(){if(c("CurrentUser").isWorkUser()||c("CurrentUser").isMessengerOnlyUser())return null;else return c("React").createElement("div",{className:"_374b"},c("React").createElement("div",{className:"_374c"},i._("Payments")),c("React").createElement("div",{className:"_374d"},c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make(0,0,0,0,0,0,["https://secure.facebook.com/settings?tab=payments&ref=messengerdotcom_settings"],0,0,0,0,0,0,0,["_blank"],0,[i._("Manage on Facebook")]))))}function s(){if(c("CurrentUser").isWorkUser()||c("CurrentUser").isMessengerOnlyUser())return null;else return c("React").createElement("div",{className:"_374b"},c("React").createElement("div",{className:"_374c"},i._("Blocking")),c("React").createElement("div",{className:"_374d"},c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make(0,0,0,0,0,0,["https://www.facebook.com/settings?tab=blocking"],0,0,0,0,0,0,0,["_blank"],0,[i._("Manage on Facebook")]))))}function t(y,z){var A=z[1][0];if(A&&y===A[0])return 0;else{c("EmojiActions").changeEmojiColor(y);return 0}}function u(y){var z=y[1][0];if(z)return c("ReasonReact.bs").element(0,0,c("ChatEmojiSkinTonePreferencePickerReact.bs").make(z[0],c("bs_curry")._1(y[0],t),[]));else return c("ReasonReact.bs").element(0,0,c("MessengerSpinnerReact.bs").make(0,0,0,[]))}function v(y){var z=y.target;c("MessengerSettingsActions").changeSettings({sound_enabled:z.checked});return 0}function w(y,z){__p&&__p();return[j[0],j[1],j[2],j[3],function(A){__p&&__p();var B=new(c("SubscriptionsHandler"))();B.addSubscriptions(c("PresencePrivacy").subscribe("privacy-changed",function(){return c("bs_curry")._1(A[3],0)}),c("PresencePrivacy").subscribe("privacy-user-presence-changed",function(){return c("bs_curry")._1(A[3],0)}),c("MessengerSettingsStore").addListener("change",function(){return c("bs_curry")._1(A[3],0)}),c("EmojiStateStore").addListener(function(){return c("bs_curry")._1(A[3],0)}),c("MercuryParticipants").addListener("change",function(){return c("bs_curry")._1(A[3],0)}));c("bs_curry")._1(A[4],function(){B.release();return 0});return 0},j[5],j[6],j[7],j[8],function(A){var B=A[1];return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Dialog[0](0,k,0,0,0,["default"],[544],[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Header[0](0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Title[0](0,[i._("Settings")])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Button[0](0,[i._("Done")],0,0,[l],[0],0,0,[]))])),c("React").createElement("div",{className:"_374b"},c("React").createElement("div",{className:"_374c"},i._("Account")),c("React").createElement("div",{className:"_374d"},n(B,A[0]))),c("React").createElement("div",{className:"_374b"},c("React").createElement("div",{className:"_374c"},i._("Sounds")),c("React").createElement("div",{className:"_374d"},c("ReasonReact.bs").element(0,0,c("MessengerCheckboxInputReact.bs").make(B[3].sound_enabled,v,[])),c("React").createElement("span",{className:"_1pr_"},i._("Enabled")))),q(A),r(0),s(0),c("React").createElement("div",{className:"_374b"},c("React").createElement("div",{className:"_374c"},i._("Emoji")),c("React").createElement("div",{className:"_374d _5jb0"},u(A)))]))},function(){return[[c("EmojiStateStore").getState().emojiColor],c("PresencePrivacy").getVisibility()===c("PresencePrivacy").ONLINE,c("bs_js_primitive").null_undefined_to_opt(c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(y))),c("MessengerSettingsStore").getSettings(),c("MessengerDesktopNotifications").isDenied(),c("MessengerDesktopNotifications").isGranted()]},j[11],function(A,B){if(A)return c("bs_block").__(0,[[B[0],B[1],B[2],B[3],true,B[5]]]);else return c("bs_block").__(0,[[[c("EmojiStateStore").getState().emojiColor],c("PresencePrivacy").getVisibility()===c("PresencePrivacy").ONLINE,c("bs_js_primitive").null_undefined_to_opt(c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(y))),c("MessengerSettingsStore").getSettings(),c("MessengerDesktopNotifications").isDenied(),c("MessengerDesktopNotifications").isGranted()]])},j[13]]}var x=c("ReasonReact.bs").wrapReasonForJs(j,function(y){return w(y.viewer,y.children)});g.component=j;g.handleToggle=k;g.handleDone=l;g.handleTogglePresence=m;g.renderAccountSection=n;g.handleNotificationsChange=o;g.renderNotificationsContent=p;g.renderNotificationsSection=q;g.renderPaymentsSection=r;g.renderBlockingSection=s;g.handleChooseEmojiColor=t;g.renderEmojiColorSection=u;g.handleSoundChange=v;g.make=w;g.jsComponent=x}),null);
__d("WorkChatDoNotDisturbDialogReactBootloader.bs",["bs_block","bs_curry","React","Bootload.bs","Bootloader","ReasonReact.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(n){c("Bootloader").loadModules(["BootloadableWorkChatDoNotDisturbDialogReact.bs"],n,"WorkChatDoNotDisturbDialogReactBootloader.bs");return 0}var i=[h],j=c("Bootload.bs").Create(i),k=c("ReasonReact.bs").reducerComponent("WorkChatDoNotDisturbDialogReactBootloader");function l(n,o){return c("bs_curry")._1(n[3],[o])}function m(n,o){__p&&__p();return[k[0],k[1],k[2],k[3],function(p){c("bs_curry")._1(j[0],function(q){return l(p,q)});return 0},k[5],k[6],k[7],k[8],function(p){var q=p[1][0];if(q)return c("ReasonReact.bs").element(0,0,c("bs_curry")._2(q[0][10],n,[]));else return c("React").createElement("div",undefined)},function(){return[0]},k[11],function(p,o){return c("bs_block").__(0,[[[p[0]]]])},k[13]]}g.BootloadableWorkChatDoNotDisturbDialogReact=i;g.LoadableWorkChatDoNotDisturbDialogReact=j;g.component=k;g.handleDoNotDisturbDialogLoad=l;g.make=m}),null);
__d("XMessengerDotComDYIController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/dyi/",{__asyncDialog:{type:"Int"}})}),null);
__d("XMessengerDotComLogoutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/logout/",{next:{type:"String"}})}),null);
__d("XWorkLogoutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/work/logout/",{next:{type:"String"}})}),null);
__d("MessengerSettingsMenuReact.bs",["cx","fbt","Run","Form","Utils.bs","goURI","gkx","LinkReact.bs","AsyncDialog","CurrentUser","ReasonReact.bs","AsyncRequest","MessagingTag","MercuryConfig","MessengerView","MercuryFilters","MessengerSpoof","MessengerConfig","MessengerActions","MessengerDialogs.bs","WebStorageMonster","MessengerMenuReact.bs","MessengerEnvironment","XWorkLogoutController","WorkChatCustomMenuItem.bs","MessengerPopoverMenuReact.bs","AbstractPopoverButtonReact.bs","ServiceWorkerLoginAndLogout","MessengerSettingsDialogReact.bs","XMessengerDotComDYIController","XMessengerDotComLogoutController","WorkChatDoNotDisturbDialogReactBootloader.bs","WorkChatDoNotDisturbMenuItemContentReactBootloader.bs"],(function a(b,c,d,aa,ba,e,ca,f){"use strict";__p&&__p();function g(o){o.preventDefault();return 0}function h(){var o=c("CurrentUser").isWorkUser();return c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0]([o?"https://www.facebook.com/workplace":"https://www.messenger.com/about"],f._("About"),0,["_blank"],[]))}function i(){var o=c("Utils.bs").$pipe$unknown(c("MercuryConfig").WorkTermsURI==null?0:[c("MercuryConfig").WorkTermsURI],"https://www.facebook.com/policies");return c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0]([o],f._("Terms"),0,["_blank"],[]))}function j(){var o=c("Utils.bs").$pipe$unknown(c("MercuryConfig").WorkPrivacyURI==null?0:[c("MercuryConfig").WorkPrivacyURI],"https://www.facebook.com/privacy/explanation");return c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0]([o],f._("Privacy Policy"),0,["_blank"],[]))}function k(){var o=c("Utils.bs").$pipe$unknown(c("MercuryConfig").WorkCookiesURI==null?0:[c("MercuryConfig").WorkCookiesURI],"https://www.facebook.com/help/cookies");return c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0]([o],f._("Cookie Policy"),0,["_blank"],[]))}var l=c("ReasonReact.bs").statelessComponent("MessengerSettingsMenuReact");function m(o,p,q,r,da){__p&&__p();var s=function s(J){J.preventDefault();return c("MessengerDialogs.bs").showDialog(function(){return c("ReasonReact.bs").element(0,0,c("MessengerSettingsDialogReact.bs").make(r,[]))})},t=function t(J){J.preventDefault();return c("MessengerDialogs.bs").showDialog(function(){return c("ReasonReact.bs").element(0,0,c("WorkChatDoNotDisturbDialogReactBootloader.bs").make(r,[]))})},u=function u(J){J.preventDefault();var G=q===c("MessengerView").MASTER.RECENT;c("MessengerActions").changeMasterView(G?c("MessengerView").MASTER.PEOPLE:c("MessengerView").MASTER.RECENT);return 0},v=function v(J){J.preventDefault();var G=p===c("MessagingTag").PENDING;c("MessengerActions").changeFolder(G?c("MessagingTag").INBOX:c("MessagingTag").PENDING);return 0},w=function w(J){J.preventDefault();var G=p===c("MessagingTag").ACTION_ARCHIVED;c("MessengerActions").changeFolder(G?c("MessagingTag").INBOX:c("MessagingTag").ACTION_ARCHIVED);return 0},x=function x(J){J.preventDefault();c("MessengerSpoof").init(function(){c("goURI")(window.location.href,true,undefined);return 0});return 0},y=function y(){c("Run").onUnload(function(){c("WebStorageMonster").cleanOnLogout(0);c("ServiceWorkerLoginAndLogout").logout();return 0});var G=c("CurrentUser").isWorkUser();c("Form").post((G?c("XWorkLogoutController"):c("XMessengerDotComLogoutController")).getURIBuilder().getURI(),{});return 0},z=function z(J){J.preventDefault();c("AsyncDialog").send(new(c("AsyncRequest"))("/ajax/bugs/report"));return 0},A=function A(J){J.preventDefault();var G=o===c("MercuryFilters").UNREAD;c("MessengerActions").changeFilter(G?c("MercuryFilters").ALL:c("MercuryFilters").UNREAD);return 0},B=function B(J){var K=c("XMessengerDotComDYIController").getURIBuilder().getURI();J.preventDefault();new(c("AsyncRequest"))(K).send();return 0},C=function C(){return c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,f._("Download your information"),[B],0,[]))},D=function D(){return c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,f._("Log Out"),[y],0,[]))},E=function E(){var G=c("MercuryConfig").RTCR;return c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,G?f._("Connection requests"):f._("Message requests"),[v],0,[]))},F=function F(){return c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,f._("Archived threads"),[w],0,[]))},G=c("CurrentUser").isWorkUser(),H=G?"/help/work/682468881954082":"https://www.facebook.com/help/735006619902401",I=function I(){return c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,"[FB-Only] Copy Spoofs",[x],0,[]))};return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],function(){var G=c("CurrentUser").isWorkUser()&&c("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6"),J=q===c("MessengerView").MASTER.RECENT,K;if(J){var L=c("CurrentUser").isWorkUser();K=L?f._("People"):f._("Active contacts")}else K=f._("Recent messages");var M=q===c("MessengerView").MASTER.RECENT,N=q===c("MessengerView").MASTER.RECENT&&p===c("MessagingTag").INBOX,O=o===c("MercuryFilters").UNREAD,P=c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser(),Q=c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser(),R=c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser()&&(c("MercuryConfig").WorkTermsURI==null?0:[c("MercuryConfig").WorkTermsURI])!==0,S=c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser()&&(c("MercuryConfig").WorkPrivacyURI==null?0:[c("MercuryConfig").WorkPrivacyURI])!==0,T=c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser()&&(c("MercuryConfig").WorkCookiesURI==null?0:[c("MercuryConfig").WorkCookiesURI])!==0,U=c("gkx")("AT5Zc6wkJa2X436OfpnfW0nVUslQcHz-DvI97W0kc5d4yo3kmawY8Ezfar8s8ZhvhsEPhT0sBvC585ry6dCa-rJ9")&&c("CurrentUser").isMessengerOnlyUser(),V=c("MessengerConfig").GKSpoof,W=c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser(),X=c("MessengerEnvironment").messengerdotcom||c("CurrentUser").isWorkUser(),Y=c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").Menu[0]([G?[c("ReasonReact.bs").element(0,0,c("WorkChatCustomMenuItem.bs").make(0,f._("Do Not Disturb"),[t],0,[c("ReasonReact.bs").element(0,0,c("WorkChatDoNotDisturbMenuItemContentReactBootloader.bs").make(r,[]))])),c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuSeparator[0]([]))]:null,c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,f._("Settings"),[s],0,[])),c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuSeparator[0]([])),c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,K,[u],0,[])),M?E(0):null,N?F(0):null,c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,O?f._("All threads"):f._("Unread threads"),[A],0,[])),P?c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuSeparator[0]([])):null,Q?h(0):null,R?i(0):null,S?j(0):null,T?k(0):null,U?C(0):null,c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuSeparator[0]([])),c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0]([H],f._("Help"),0,["_blank"],[])),c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,f._("Report a Problem"),[z],0,[])),V?I(0):null,W?c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuSeparator[0]([])):null,X?D(0):null])),Z=f._("Settings, help and more"),$={button:c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make([Z],["_30yy _2fug"],0,0,0,0,0,0,0,0,0,["button"],0,0,0,[Z],[])),defaultMaxWidth:200};return c("ReasonReact.bs").element(0,0,c("MessengerPopoverMenuReact.bs").make(0,0,0,Y,0,0,[c("ReasonReact.bs").element(0,0,c("AbstractPopoverButtonReact.bs").make([$],[false],0,0,[200],[]))]))},l[10],l[11],l[12],l[13]]}var n=c("Utils.bs").$pipe$unknown;e.preventDefault=g;e.$pipe$unknown=n;e.renderAbout=h;e.renderPolicies=i;e.renderPrivacy=j;e.renderCookies=k;e.component=l;e.make=m}),null);
__d("WorkchatNotificationsJewelBootloaderReact.bs",["ReasonReact.bs","WorkchatNotificationsJewelBootloader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("ReasonReact.bs").wrapJsForReason(c("WorkchatNotificationsJewelBootloader.react"),{},i)}g.make=h}),null);
__d("WorkplaceLogoReact.bs",["cx","fbt","React","LinkReact.bs","ReasonReact.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=c("ReasonReact.bs").statelessComponent("WorkplaceLogoReact");function k(){return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],function(){var l=i._("Go to Workplace News Feed");return c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make([l],["_2z9u"],0,0,0,0,["/feed"],0,0,0,0,["button"],0,0,["_blank"],[l],[c("React").createElement("span",{className:"_2z9t"},l)]))},j[10],j[11],j[12],j[13]]}g.component=j;g.make=k}),null);
__d("MessengerMasterViewHeaderReact.bs",["cx","fbt","bs_curry","React","gkx","CurrentUser","ReasonReact.bs","MessagingTag","MercuryConfig","MessengerView","MessengerActions","WorkplaceLogoReact.bs","MessengerURIConstants","LinkWithHiddenURLBarReact.bs","MessengerSettingsMenuReact.bs","MessengerDeleteAllMenuBootloaderReact.bs","WorkchatNotificationsJewelBootloaderReact.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact.bs").statelessComponent("MessengerMasterViewHeaderReact");function k(o){o.preventDefault();c("MessengerActions").changeDetailView(c("MessengerView").DETAIL.COMPOSE);c("MessengerActions").changeQuery(null);return 0}function l(o){o.preventDefault();c("MessengerActions").changeFolder(c("MessagingTag").PENDING);return 0}function m(o,p,q,r,s,t,u,v){__p&&__p();var w=c("MercuryConfig").RTCR,x=w?i._("Back to connection requests"):i._("Back to Message Requests"),y=function y(G){G.preventDefault();if(q!==c("MessengerView").MASTER.RECENT)c("MessengerActions").changeMasterView(c("MessengerView").MASTER.RECENT);if(s)c("bs_curry")._1(t,0);c("MessengerActions").changeFolder(c("MessagingTag").INBOX);return 0},z=function z(){var G=s||p===c("MessagingTag").PENDING||p===c("MessagingTag").ACTION_ARCHIVED||q!==c("MessengerView").MASTER.RECENT,H=G?y:l,I=G?i._("Back to Recent Messages"):x;return c("ReasonReact.bs").element(0,0,c("LinkWithHiddenURLBarReact.bs").make([I],["_30yy _2oc9"],0,0,0,0,0,0,[H],0,0,0,["button"],0,0,0,[I],[]))},A=function A(){__p&&__p();if(p===c("MessagingTag").PENDING||s){var w=c("MercuryConfig").RTCR;if(w)return i._("Connection requests");else return i._("Message requests")}else if(p===c("MessagingTag").OTHER)return i._("Filtered requests");else if(q===c("MessengerView").MASTER.PEOPLE){var G=c("CurrentUser").isWorkUser();if(G)return i._("People");else return i._("Active now")}else if(c("CurrentUser").isWorkUser())return i._("Chat");else return i._("Messenger")},B=function B(){return c("React").createElement("div",{className:"_4kzu"},c("ReasonReact.bs").element(0,0,c("MessengerSettingsMenuReact.bs").make(o,p,q,r,[])))},C=function C(){return c("React").createElement("div",{className:"_4kzu"},c("ReasonReact.bs").element(0,0,c("MessengerDeleteAllMenuBootloaderReact.bs").make(o,p,r,u,s,[])))},D=function D(){return c("ReasonReact.bs").element(0,0,c("WorkchatNotificationsJewelBootloaderReact.bs").make([]))},E=function E(){var G=i._("New Message");return c("ReasonReact.bs").element(0,0,c("LinkWithHiddenURLBarReact.bs").make([G],["_30yy _2oc8"],0,0,0,0,[c("MessengerURIConstants").COMPOSE_SUBPATH],0,[k],0,0,0,["button"],0,0,0,[G],[]))},F=function F(){if(c("CurrentUser").isWorkUser())return c("gkx")("AT5ad75lfUu_LEQloT_GHl5l4DgqBru4g1KtvnZgqgchaE21iYmpzSvKrpk6THSFyobb17PT_X_4ySOjfDebuqUc");else return false};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],function(){var w=s||p!==c("MessagingTag").INBOX||q!==c("MessengerView").MASTER.RECENT,G;if(w)G=z(0);else{var H=F(0);G=H?D(0):B(0)}var I=(s||p===c("MessagingTag").PENDING||p===c("MessagingTag").OTHER)&&c("MercuryConfig").MessengerInboxRequests,J=I?C(0):E(0),K=F(0);return c("React").createElement("div",{className:"_36ic _5l-3",role:"banner"},K?c("ReasonReact.bs").element(0,0,c("WorkplaceLogoReact.bs").make([])):null,G,c("React").createElement("div",{className:"_1tqi"},A(0)),J)},j[10],j[11],j[12],j[13]]}var n=c("ReasonReact.bs").wrapReasonForJs(j,function(o){return m(o.filter,o.folder,o.view,o.viewer,o.aggregationView,o.onBackToRecent,o.threadIDs,[])});g.component=j;g.handleAddClick=k;g.handleFilteredRequestsBackArrowClick=l;g.make=m;g.jsComponent=n}),null);
__d("MessengerMessageRequestsInfoReact.bs",["ReasonReact.bs","MessengerMessageRequestsInfo.react"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("ReasonReact.bs").wrapJsForReason(c("MessengerMessageRequestsInfo.react"),{},i)}g.make=h}),null);
__d("MessengerScrollableAreaReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerScrollableArea.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact.bs").wrapJsForReason(c("MessengerScrollableArea.react"),{height:c("bs_js_null_undefined").fromOption(i)},j)}g.make=h}),null);
__d("MessengerThreadListGridWrapperReact.bs",["ReasonReact.bs","MessengerThreadListGridWrapper.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact.bs").wrapJsForReason(c("MessengerThreadListGridWrapper.react"),{label:i},j)}g.make=h}),null);
__d("MessengerThreadlistLinkRowReact.bs",["cx","fbt","React","LinkReact.bs","ReasonReact.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";function j(k){return c("React").createElement("li",{className:"_5l-3 _1ht1 _2ogr"},c("React").createElement("div",{className:"_2ogs"},c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make(0,["_2ogt"],0,0,0,0,0,0,[k],0,0,0,0,0,0,0,i._("See filtered requests")))))}g.make=j}),null);
__d("MessengerThreadlistMessageRequestsRowReact.bs",["ReasonReact.bs","MessengerThreadlistMessageRequestsRow.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p){return c("ReasonReact.bs").wrapJsForReason(c("MessengerThreadlistMessageRequestsRow.react"),{onAggregationClick:i,isFocused:j,onFocus:k,pendingFolderUnseenCount:m,newMessageRequestThreads:l,aggregatedThreads:n,viewer:o},p)}g.make=h}),null);
__d("MessengerThreadlistNewMessageRowReact.bs",["ReasonReact.bs","MessengerThreadlistNewMessageRow.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact.bs").wrapJsForReason(c("MessengerThreadlistNewMessageRow.react"),{isActive:i,onClose:j},k)}g.make=h}),null);
__d("MessengerThreadlistRowContainerReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessengerThreadlistRowContainer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q,r,s,t,u){return c("ReasonReact.bs").wrapJsForReason(c("MessengerThreadlistRowContainer.react"),{folder:c("bs_js_null_undefined").fromOption(i),blockedIds:t,isActive:c("Utils.bs").optionBoolToBoolean(j),isFocused:c("Utils.bs").optionBoolToBoolean(k),isActionsFocused:c("Utils.bs").optionBoolToBoolean(l),isTabbable:c("Utils.bs").optionBoolToBoolean(m),onFocus:n,onScrollIntoView:o,thread:p,viewer:q,readReceipts:r,showAggregation:s},u)}g.make=h}),null);
__d("XUIButtonReact.bs",["Utils.bs","ReasonReact.bs","XUIButton.react","bs_js_null_undefined"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l){if(l)switch(l[0]){case 0:return["default"];case 1:return["special"];case 2:return["confirm"]}else return 0}function i(l){if(l)switch(l[0]){case 0:return["small"];case 1:return["medium"];case 2:return["large"];case 3:return["xlarge"];case 4:return["xxlarge"]}else return 0}function j(l){if(l)if(l[0])return["dark"];else return["light"];else return 0}function k(l,m,n,o,p,q,r,s,t,u,v,w){return c("ReasonReact.bs").wrapJsForReason(c("XUIButton.react"),{className:c("bs_js_null_undefined").fromOption(l),onClick:c("bs_js_null_undefined").fromOption(m),label:c("bs_js_null_undefined").fromOption(n),use:c("bs_js_null_undefined").fromOption(h(o)),size:c("bs_js_null_undefined").fromOption(i(p)),borderShade:c("bs_js_null_undefined").fromOption(j(q)),suppressed:c("bs_js_null_undefined").fromOption(r),href:c("bs_js_null_undefined").fromOption(s),target:c("bs_js_null_undefined").fromOption(t),disabled:c("Utils.bs").optionBoolToBoolean(u),image:c("bs_js_null_undefined").fromOption(v)},w)}g.stringOfUse=h;g.stringOfSize=i;g.stringOfBorderShade=j;g.make=k}),null);
__d("WorkChatThreadlistNewsfeedActionReact.bs",["cx","fbt","bs_block","bs_curry","React","gkx","ReasonReact.bs","AsyncRequest","XUIButtonReact.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact.bs").reducerComponent("WorkChatThreadlistNewsfeedActionReact");function k(){__p&&__p();return[j[0],j[1],j[2],j[3],function(m){var n=setInterval(function(){return c("bs_curry")._1(m[3],1)},6e4);c("bs_curry")._1(m[4],function(){clearInterval(n);return 0});return 0},j[5],j[6],j[7],j[8],function(m){var n=m[1],o=n!==0?i._({"*":"{post count} unread posts","_1":"{post count} unread post"},[i._param("post count",String(n)),i._plural(n)]):i._("Go To News Feed"),p=m[1],q=p!==0?2:0,r=c("gkx")("AT5bsDZiHMWtE2UowLAt2aHF1xqlqGKl8yICLll1Wu-J_t74abq6btJr92TeaiK_cpisH5W4HQQB08thCKN0MwcDBLaAz1ePIpoBNZzuZ0lxOg");if(r)return c("React").createElement("div",{className:"_25ar"+(q===0?" _1ngy":"")},c("ReasonReact.bs").element(0,0,c("XUIButtonReact.bs").make(0,[function(){return c("bs_curry")._1(m[3],0)}],[o],[q],0,0,0,["/feed?ref=chat_threadlist"],["_blank"],0,0,[])));else return null},function(){return 0},j[11],function(m,n){if(typeof m==="number")if(m!==0)return c("bs_block").__(1,[function(o){new(c("AsyncRequest"))("/ajax/litestand/newsfeed_count").setHandler(function(p){return c("bs_curry")._1(o[3],[p.payload])}).send();return 0}]);else return c("bs_block").__(0,[0]);else return c("bs_block").__(0,[m[0]])},j[13]]}var l=6e4;g.component=j;g.updateInterval=l;g.make=k}),null);
__d("WorkChatActivityTypedLogger.bs",[],(function a(b,c,d,e,f,g){"use strict";function h(i){switch(i){case 0:return"notifs_jewel_links_click";case 1:return"nav_tab_click";case 2:return"info_panel_profile_link_click";case 3:return"notifs_jewel_click"}}g.string_of_event=h}),null);
__d("WorkChatThreadlistTabsReact.bs",["cx","fbt","React","LinkReact.bs","ReasonReact.bs","MessagingTag","MessengerView","MercuryFilters","MessengerActions","MessengerSettingsMenuReact.bs","WorkChatActivityTypedLogger.bs","WorkChatActivityTypedLogger"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact.bs").statelessComponent("WorkChatThreadlistTabsReact");function k(l,m,n,o,p){__p&&__p();var q=l?l[0]:c("MercuryFilters").ALL,r=m?m[0]:"",s=function s(n){if(r!==c("MessagingTag").INBOX)c("MessengerActions").changeFolder(c("MessagingTag").INBOX);var t=n===c("MessengerView").MASTER.RECENT;new(c("WorkChatActivityTypedLogger"))().setEvent(c("WorkChatActivityTypedLogger.bs").string_of_event(1)).addToExtraData("data",[t?"recent":"people"]).log();c("MessengerActions").changeMasterView(n);return 0};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],function(){var t=i._("Home"),u=i._("People"),v=n===c("MessengerView").MASTER.RECENT&&r===c("MessagingTag").INBOX;return c("React").createElement("div",{className:"_65ty"},c("React").createElement("div",{className:"_65tz"},c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make([t],["_65t-"+(!v?" _65t_":"")+(v?" _65u0":"")],0,0,0,0,0,0,[function(){return s(c("MessengerView").MASTER.RECENT)}],0,0,["button"],0,0,0,[t],[]))),c("React").createElement("div",{className:"_65tz"},c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make([u],["_65t-"+(n!==c("MessengerView").MASTER.PEOPLE?" _65u1":"")+(n===c("MessengerView").MASTER.PEOPLE?" _65u2":"")],0,0,0,0,0,0,[function(){return s(c("MessengerView").MASTER.PEOPLE)}],0,0,["button"],0,0,0,[u],[]))),c("React").createElement("div",{className:"_65tz"},c("ReasonReact.bs").element(0,0,c("MessengerSettingsMenuReact.bs").make(q,r,n,o,[]))))},j[10],j[11],j[12],j[13]]}g.component=j;g.make=k}),null);
__d("WorkGalahadNavMenu",["cx","ReactXUIMenu","joinClasses"],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c("ReactXUIMenu"));j=i&&i.prototype;function k(l){"use strict";var m=c("joinClasses")(l.className,"_4ue0");j.constructor.call(this,babelHelpers["extends"]({className:m},l))}f.exports=k}),null);
__d("WorkGalahadNavMenuItem",["cx","MenuItem","joinClasses"],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c("MenuItem"));j=i&&i.prototype;function k(l){"use strict";var m=c("joinClasses")(l.className,"_13vw");j.constructor.call(this,babelHelpers["extends"]({className:m},l))}f.exports=k}),null);
__d("WorkGalahadNavMenuItemContent.react",["cx","FlexLayout.react","Image.react","React","XUIText.react"],(function a(b,c,d,e,f,g,h){function i(j){var k=j.icon,l=j.text;if(k)return c("React").createElement(c("FlexLayout.react"),{align:"start",direction:"horizontal"},c("React").createElement(c("Image.react"),{className:"_3-90",src:k}),c("React").createElement(c("XUIText.react"),{size:"body2"},l));else return c("React").createElement(c("XUIText.react"),{size:"body2"},l)}f.exports=i}),null);
__d("WorkGalahadNavMenuSelectableItem",["cx","MenuSelectableItem","joinClasses"],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c("MenuSelectableItem"));j=i&&i.prototype;function k(l){"use strict";var m=c("joinClasses")(l.className,"_13vw _2r9d");j.constructor.call(this,babelHelpers["extends"]({className:m},l))}f.exports=k}),null);
__d("WorkGalahadNavMenuTitle",["cx","MenuStaticItem","joinClasses"],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c("MenuStaticItem"));j=i&&i.prototype;function k(l){"use strict";var m=c("joinClasses")(l.className,"_13vw _2_h5");j.constructor.call(this,babelHelpers["extends"]({className:m},l))}f.exports=k}),null);
__d("WorkGalahadChatsThreadlistMenu",["ix","fbt","MenuSeparator.react","MercuryFilters","MessagingTag","MessengerActions","MessengerDialogs.bs","MessengerSettingsDialogReact.bs","React","WorkGalahadNavMenu","WorkGalahadNavMenuItem","WorkGalahadNavMenuItemContent.react","WorkGalahadNavMenuTitle","WorkGalahadNavMenuSelectableItem","XUIText.react","asset"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("MessengerSettingsDialogReact.bs").jsComponent;function k(){c("MessengerActions").changeFilter(c("MercuryFilters").UNREAD)}function l(){c("MessengerActions").changeFilter(c("MercuryFilters").ALL)}function m(){c("MessengerActions").changeFolder(c("MessagingTag").INBOX)}function n(){c("MessengerActions").changeFolder(c("MessagingTag").ACTION_ARCHIVED)}function o(){c("MessengerActions").changeFolder(c("MessagingTag").PENDING)}function p(r){c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(j,{viewer:r})})}function q(r,s,t){return c("React").createElement(c("WorkGalahadNavMenu"),null,c("React").createElement(c("WorkGalahadNavMenuTitle"),null,c("React").createElement(c("XUIText.react"),{size:"header3",weight:"bold"},i._("Chats"))),c("React").createElement(c("WorkGalahadNavMenuSelectableItem"),{onClick:l,selected:r===c("MercuryFilters").ALL},c("React").createElement(c("WorkGalahadNavMenuItemContent.react"),{text:i._("All")})),c("React").createElement(c("WorkGalahadNavMenuSelectableItem"),{onClick:k,selected:r===c("MercuryFilters").UNREAD},c("React").createElement(c("WorkGalahadNavMenuItemContent.react"),{text:i._("Unread")})),c("React").createElement(c("MenuSeparator.react"),null),c("React").createElement(c("WorkGalahadNavMenuSelectableItem"),{onClick:m,selected:s===c("MessagingTag").INBOX},c("React").createElement(c("WorkGalahadNavMenuItemContent.react"),{text:i._("Messages")})),c("React").createElement(c("WorkGalahadNavMenuSelectableItem"),{onClick:o,selected:s===c("MessagingTag").PENDING},c("React").createElement(c("WorkGalahadNavMenuItemContent.react"),{text:i._("Message Requests")})),c("React").createElement(c("WorkGalahadNavMenuSelectableItem"),{onClick:n,selected:s===c("MessagingTag").ACTION_ARCHIVED},c("React").createElement(c("WorkGalahadNavMenuItemContent.react"),{text:i._("Archived Threads")})),c("React").createElement(c("MenuSeparator.react"),null),c("React").createElement(c("WorkGalahadNavMenuItem"),{onClick:function u(){return p(t)}},c("React").createElement(c("WorkGalahadNavMenuItemContent.react"),{icon:h("499562"),text:i._("Settings")})))}f.exports=q}),null);
__d("WorkGalahadNavHeader.react",["cx","FbtResultBase","FlexLayout.react","Image.react","Link.react","PopoverMenu.react","React","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){var k=j.action,l=j.title,m=k?c("React").createElement(c("Link.react"),{className:"_67k6",href:k.href,onClick:k.onClick},c("React").createElement(c("FlexLayout.react"),{align:"center",direction:"horizontal"},c("React").createElement(c("XUIText.react"),{display:"block"},k.title),k.icon?c("React").createElement(c("Image.react"),{className:"_3-9a",src:k.icon}):null)):null;if(k&&k.menu)m=c("React").createElement(c("PopoverMenu.react"),{menu:k.menu,alignh:"right"},m);return c("React").createElement(c("FlexLayout.react"),{align:"center",className:"_3-8m _2o1m",direction:"horizontal",justify:"all"},c("React").createElement(c("XUIText.react"),{className:"_4es7",display:"block",weight:"bold"},l),m)}f.exports=i}),null);
__d("WorkGalahadChatsThreadlistHeader.react",["ix","fbt","MercuryFilters","MessagingTag","WorkGalahadNavHeader.react","WorkGalahadChatsThreadlistMenu","React","asset"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(l,m){var n=l===c("MercuryFilters").UNREAD;switch(m){case c("MessagingTag").INBOX:return n?i._("Unread messages"):i._("Messages");case c("MessagingTag").ACTION_ARCHIVED:return n?i._("Unread Archived Threads"):i._("Archived threads");case c("MessagingTag").PENDING:return n?i._("Unread Message Requests"):i._("Message Requests")}return null}function k(l){var m=l.filter,n=l.folder,o=l.viewer;return c("React").createElement(c("WorkGalahadNavHeader.react"),{title:j(m,n),action:{menu:c("WorkGalahadChatsThreadlistMenu")(m,n,o),title:i._("Filter"),icon:h("507990")}})}f.exports=k}),null);
__d("WorkGalahadChatsThreadlistHeaderReact.bs",["ReasonReact.bs","WorkGalahadChatsThreadlistHeader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){return c("ReasonReact.bs").wrapJsForReason(c("WorkGalahadChatsThreadlistHeader.react"),{filter:j,folder:i,viewer:k},l)}g.make=h}),null);
__d("WorkchatThreadListInviteRow.react",["cssVar","cx","fbt","Link.react","MercuryConfig","MessengerAddIconSVG.react","React","WorkInviteSource","XWorkInviteCoworkersDialogController"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;function m(){l.constructor.call(this);this.state={inviteURI:c("XWorkInviteCoworkersDialogController").getURIBuilder().setEnum("source",c("WorkInviteSource").WWW_CHAT_THREAD_LIST).getURI()}}m.prototype.render=function(){if(!c("MercuryConfig").ShowInviteSurface)return null;return c("React").createElement("li",{className:"_5l-3 _1q5x",role:"row",tabIndex:0},c("React").createElement("div",{className:"_5l-3 _1q5y",id:"work_thread_list_invite_row",role:"gridcell",tabIndex:-1},c("React").createElement(c("Link.react"),{href:"#",ajaxify:this.state.inviteURI,rel:"dialog",className:"_1q5y _1q61 _5l-3",s:"true",ref:"link",role:"link",tabIndex:-1},c("React").createElement("div",{className:"_5l-3 _1q60"},c("React").createElement("div",{"aria-hidden":true,className:"_1qt3 _5l-3"},c("React").createElement(c("MessengerAddIconSVG.react"),{className:"_1q5z",customColor:"#0084ff"})),c("React").createElement("div",{className:"_1qt4 _5l-m"},c("React").createElement("div",{className:"_1qt5 _5l-3"},c("React").createElement("div",{className:"_1ht6"},j._("Invite Colleagues"))))))))};f.exports=m}),null);
__d("WorkchatThreadListInviteRowReact.bs",["ReasonReact.bs","WorkchatThreadListInviteRow.react"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("ReasonReact.bs").wrapJsForReason(c("WorkchatThreadListInviteRow.react"),{},i)}g.make=h}),null);
__d("WorkTopGroupThreadsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"2198593563493465"};j.getQueryID=function(){"use strict";return"2045724578974210"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MercuryWorkTopGroupThreads",["EmitterSubscription","EventEmitter","ImmutableObject","KeyedCallbackManager","MercuryDispatcher","MercuryServerPayloadPreprocessor","MessengerServerPayloadTransformer.bs","MercurySingletonProvider","WorkTopGroupThreadsWebGraphQLQuery","WebGraphQL"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("EventEmitter"))();function i(k){__p&&__p();this.$MercuryWorkTopGroupThreads5=function(l){if(l&&l.viewer&&l.viewer.message_threads){var m=(l.viewer.message_threads.nodes||[]).map(function(o){return c("MessengerServerPayloadTransformer.bs").transformThread(this.$MercuryWorkTopGroupThreads1,o,false)}.bind(this));if(m.length>0){var n=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercuryWorkTopGroupThreads1);n.handleUpdate({work_top_named_threads:m})}}}.bind(this);this.$MercuryWorkTopGroupThreads1=k;this.$MercuryWorkTopGroupThreads2=c("MercuryDispatcher").getForFBID(this.$MercuryWorkTopGroupThreads1);this.$MercuryWorkTopGroupThreads3=new(c("KeyedCallbackManager"))();this.$MercuryWorkTopGroupThreads4()}i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};i.prototype.getTopThreads=function(){return this.$MercuryWorkTopGroupThreads3.getAllResources()};i.prototype.requestPull=function(){c("WebGraphQL").exec(new(c("WorkTopGroupThreadsWebGraphQLQuery"))({limit:20})).done(this.$MercuryWorkTopGroupThreads5)};i.prototype.$MercuryWorkTopGroupThreads4=function(){__p&&__p();this.$MercuryWorkTopGroupThreads2.subscribe("update-work-group-threads",function(k,l){var m=l.work_top_named_threads;if(!m||!m.length)return;this.$MercuryWorkTopGroupThreads3.reset();var n={};m.forEach(function(o){return n[o.thread_id]=new(c("ImmutableObject"))(o)});this.$MercuryWorkTopGroupThreads3.addResourcesAndExecute(n);h.emit("change")}.bind(this))};i.addListener=function(k,l){return h.addListener(k,l)};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("WorkchatThreadlistGroupCarouselContainer.react",["MercuryWorkTopGroupThreads","React","SubscriptionsHandler","WorkchatThreadlistGroupCarousel"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k=c("WorkchatThreadlistGroupCarousel").module,l=1e3*60*60;h=babelHelpers.inherits(m,c("React").Component);i=h&&h.prototype;function m(n){i.constructor.call(this,n);this.$WorkchatThreadlistGroupCarouselContainer2=null;this.state={threads:null};this.$WorkchatThreadlistGroupCarouselContainer1=new(c("SubscriptionsHandler"))()}m.prototype.componentDidMount=function(){if(k){this.pullThreads();this.$WorkchatThreadlistGroupCarouselContainer1.addSubscriptions(c("MercuryWorkTopGroupThreads").addListener("change",function(){return this.pullThreads()}.bind(this)));this.$WorkchatThreadlistGroupCarouselContainer2=setInterval(function(){return c("MercuryWorkTopGroupThreads").get().requestPull()},l)}};m.prototype.componentWillUnmount=function(){this.$WorkchatThreadlistGroupCarouselContainer1.release();if(this.$WorkchatThreadlistGroupCarouselContainer2!==null)clearInterval(this.$WorkchatThreadlistGroupCarouselContainer2)};m.prototype.pullThreads=function(){var n=Object.values(c("MercuryWorkTopGroupThreads").get().getTopThreads());this.setState({threads:n})};m.prototype.render=function(){var n=this.state.threads;if(!k||!n||n.length===0)return null;return c("React").createElement(k,{threads:n,viewerID:this.props.viewerID})};m.propTypes={viewerID:j.string.isRequired};f.exports=m}),null);
__d("workchatThreadlistGroupCarouselContainerReact.bs",["ReasonReact.bs","WorkchatThreadlistGroupCarouselContainer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact.bs").wrapJsForReason(c("WorkchatThreadlistGroupCarouselContainer.react"),{viewerID:i},j)}g.make=h}),null);
__d("MessengerThreadlistReact.bs",["cx","csx","fbt","bs_array","bs_block","bs_curry","React","Utils.bs","Parent","gkx","ReactDOM","debounce","LinkReact.bs","UserAgent","bs_caml_array","MercuryIDs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessagingTag","MercuryConfig","MessengerView","bs_caml_primitive","MercuryFilters","MessengerActions","MercuryThreadInfo","KeyEventController","MessageRequestLogger.bs","SubscriptionsHandler","ChatSidebarSheetReact.bs","MessengerSpinnerReact.bs","MessengerTypeaheadUtils","MessengerComposerActions","MercuryTypeaheadConstants","MessengerSearchFunnelLogger","WorkChatThreadlistTabsReact.bs","MessengerNewMessagesNoticeReact.bs","MessengerThreadlistLinkRowReact.bs","MessengerFlexScrollableAreaReact.bs","WorkchatThreadListInviteRowReact.bs","MessengerMessageRequestsInfoReact.bs","MessengerThreadListGridWrapperReact.bs","MessengerGraphQLSearchTypeaheadReact.bs","MessengerSearchFunnelLoggerConstants","MessengerThreadlistRowContainerReact.bs","MessengerThreadlistNewMessageRowReact.bs","WorkChatThreadlistNewsfeedActionReact.bs","WorkGalahadChatsThreadlistHeaderReact.bs","MessengerThreadlistMessageRequestsRowReact.bs","workchatThreadlistGroupCarouselContainerReact.bs"],(function aa(ba,a,ca,da,ea,b,fa,ga,c){"use strict";__p&&__p();function d(q,r,s){if(s&&q.length>0&&r.length>0){var t=a("bs_caml_array").caml_array_get(a("bs_caml_array").caml_array_get(q,0),0),u=a("bs_caml_array").caml_array_get(a("bs_caml_array").caml_array_get(r,0),0);if(t.unread_count>0&&t.thread_id!==s[0]&&t!==u)return a("MercuryThreadInfo").isMuted(t);else return false}else return false}function e(q,r){var s=q.ctrlKey,t=q.metaKey,u=q.shiftKey,v=a("KeyEventController").filterEventTypes(q,r),w=a("KeyEventController").filterEventTargets(q,r),x=a("Parent").bySelector(q.target,"._150g");if(s||t||u||!(v&&w&&x==null))return false;else return true}function f(q,r){__p&&__p();var s=q.ctrlKey,t=q.metaKey,u=a("UserAgent").isPlatform("Mac OS X"),v=a("UserAgent").isPlatform("iOS"),w=a("KeyEventController").filterEventTypes(q,r),x=a("Parent").bySelector(q.target,"._150g");if(s)if(t||u||v||!(w&&x==null))return false;else return true;else if(t)if(u)if(v||!(w&&x==null))return false;else return true;else if(v&&w&&x==null)return true;else return false;else return false}var g=a("UserAgent").isPlatform("Mac OS X")||a("UserAgent").isPlatform("iOS")?"Cmd":"Ctrl",h="K",i=g+" + K";function j(q,r){r[1][6][0]=q==null?0:[q];return 0}function k(q,r,s){__p&&__p();var t=s.findIndex(function(v){__p&&__p();var w=v.length;if(w!==1)if(w!==0&&q&&a("bs_caml_array").caml_array_get(v,0).thread_id===q[0])return true;else return false;else{var x=v[0];if(q&&x.thread_id===q[0])return true;else return false}}),u=a("bs_caml_primitive").caml_int_min(a("bs_caml_primitive").caml_int_max(t+r|0,0),s.length-1|0);return a("bs_caml_array").caml_array_get(a("bs_caml_array").caml_array_get(s,u),0).thread_id}function l(q,r){q.preventDefault();var s=r[1][4][0];if(s)return s[0].focusInput();else return 0}function ha(q,r){r[1][4][0]=q==null?0:[q];return 0}function m(q,r){var s=r[1];setTimeout(function(){var t=s[6][0];if(t){a("MessengerTypeaheadUtils").scrollEntryIntoView(q,t[0]);return 0}else return 0},0);return 0}function ia(q){q.preventDefault();a("MessengerActions").changeFolder(a("MessagingTag").OTHER);return 0}function ja(q){q.preventDefault();a("MessengerActions").changeFilter(a("MercuryFilters").ALL);a("MessengerActions").changeFolder(a("MessagingTag").INBOX);return 0}function n(q,r,s,t){__p&&__p();var u=[];a("bs_array").iter(function(x){__p&&__p();var y=r[x];if(y!==undefined){var z=y[1],A=y[0];if(A==null)return 0;else{var B=a("ReactDOM").findDOMNode(A).getBoundingClientRect();if(B.top>q.top-10&&B.bottom<q.bottom+10){u.push({threadID:z.thread_id,unread:z.unread_count>0});return 0}else return 0}}else return 0},Object.keys(r));if(u.length){var v=a("bs_array").map(function(x){return a("MercuryIDs").getThreadKeyfromThreadIDUserID(x.threadID,t)},u),w=v.join(",");return a("MessageRequestLogger.bs").logItemImpression(u,w,s)}else return 0}var o=a("debounce")(function(q){__p&&__p();var r=q[1],s=q[0],t=s[6][0];if(t){var u=t[0].getArea();if(u==null)return 0;else{var v=u.getElement().getBoundingClientRect();n(v,s[7],a("MessagingTag").PENDING,r);return n(v,s[8],a("MessagingTag").OTHER,r)}}else return 0},500);function ka(q,r,s,t,u){var v=r[1],w=v[0],x=w&&w[0]===a("bs_caml_array").caml_array_get(u,0).thread_id?true:false;return a("ReasonReact.bs").element([a("bs_caml_array").caml_array_get(u,0).thread_id],0,a("MessengerThreadlistMessageRequestsRowReact.bs").make(s,x,function(y){return a("bs_curry")._1(r[3],a("bs_block").__(2,[y]))},[],t,u,q,[]))}function la(q,r,s){__p&&__p();var t=s[1];if(q.folder===a("MessagingTag").PENDING){t[7][q.thread_id]=[r,q];return 0}else if(q.folder===a("MessagingTag").OTHER){t[8][q.thread_id]=[r,q];return 0}else return 0}function ma(q,r,s,t,u,v,w,x){var y=s[1],z=q&&q[0]===x.thread_id?true:false,A=y[0],B=A?true:false,C=y[0],D=C&&C[0]===x.thread_id?true:false,E=z?B&&!D?false:true:D?true:false,F=x.folder===a("MessagingTag").PENDING||x.folder===a("MessagingTag").OTHER;return a("ReasonReact.bs").element([x.thread_id],[F?a("bs_curry")._1(s[0],function(G,H){return la(x,G,H)}):function(){return 0}],a("MessengerThreadlistRowContainerReact.bs").make([t],[z],[D],[y[2]],[E],function(G){return a("bs_curry")._1(s[3],a("bs_block").__(2,[G]))},a("bs_curry")._1(s[0],m),x,r,w,u,v,[]))}function na(q,r){var s=q[1],t=q[0],u=s==null?a("MessengerSearchFunnelLoggerConstants").OTHER:s===a("MercuryTypeaheadConstants").FRIEND_TYPE?a("MessengerSearchFunnelLoggerConstants").USER_CONTACT:s===a("MercuryTypeaheadConstants").NON_FRIEND_TYPE?a("MessengerSearchFunnelLoggerConstants").USER_NON_CONTACT:s===a("MercuryTypeaheadConstants").FB4C_TYPE?a("MessengerSearchFunnelLoggerConstants").COWORKER:s===a("MercuryTypeaheadConstants").GAME_TYPE?a("MessengerSearchFunnelLoggerConstants").GAME:s===a("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE||s===a("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE||s===a("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE||s===a("MercuryTypeaheadConstants").PAGE_TYPE?a("MessengerSearchFunnelLoggerConstants").PAGE:s===a("MercuryTypeaheadConstants").THREAD_TYPE?a("MessengerSearchFunnelLoggerConstants").GROUP:a("MessengerSearchFunnelLoggerConstants").OTHER;a("MessengerActions").selectThread(t,s);a("MessengerSearchFunnelLogger").logResultSelection("WWW_MESSENGER_SEARCH_SESSION_FUNNEL",r[1][3],t,u);return 0}var p=a("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerThreadlistReact");function oa(q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,ra){__p&&__p();var J=function J(K,L,M){__p&&__p();var N=M[2],E=N[0],O=typeof K==="number"?K!==0?E.length-1|0:(-E.length|0)-1|0:K[0],P=L.altKey,Q=a("Parent").bySelector(L.target,"._4rv3"),R=M[1][0],S=a("Parent").bySelector(L.target,"._1ht1"),T=0;if(P&&!(Q==null)){var U=N[4];if(U)if(O===1&&E.length>0){a("MessengerActions").selectThread(a("bs_caml_array").caml_array_get(a("bs_caml_array").caml_array_get(E,0),0).thread_id,null);return 0}else return 0;else{var V=E.findIndex(function(X){if(X.length!==1)return false;else{var Y=X[0],P=N[2];if(P&&P[0]===Y.thread_id)return true;else return false}});if(V!==-1){var W=a("bs_caml_array").caml_array_get(E,V+O|0);a("MessengerActions").selectThread(a("bs_caml_array").caml_array_get(W,0).thread_id);if(N[1]&&V===0&&O===-1)a("MessengerActions").changeDetailView(a("MessengerView").DETAIL.COMPOSE);if(V===(E.length-1|0))return a("bs_curry")._1(N[3],0);else return 0}else return 0}}else T=1;if(T===1)if(R&&!(S==null)){L.preventDefault();return a("bs_curry")._1(M[3],a("bs_block").__(3,[O]))}else return 0},sa=function sa(K,ra){__p&&__p();K.stopPropagation();a("MessengerComposerActions").exitComposeState();if(y){var L=E.find(function(M){var N=M.length;if(N!==1)if(N!==0)return a("bs_js_primitive").undefined_to_opt(M.find(function(L){return L.unread_count===0}))===0;else return false;else{var O=M[0];return O.unread_count===0}});a("MessengerActions").selectThread(L!==undefined?a("bs_caml_array").caml_array_get(L,0).thread_id:null,null);return 0}else return 0},ta=function ta(K,ra){K.preventDefault();return a("bs_curry")._1(A,0)},ua=function ua(w,x,I,K){__p&&__p();var L=0,M=0;if(I||w&&w[0])return null;else M=2;if(M===2)if(x&&x[0])return a("React").createElement("div",{className:"_19hf"},a("ReasonReact.bs").element(0,0,a("MessengerSpinnerReact.bs").make(0,0,0,[])));else L=1;if(L===1)return a("React").createElement("div",{className:"_19hf"},a("ReasonReact.bs").element(0,0,a("LinkReact.bs").make(0,0,0,0,0,0,["#"],0,[a("bs_curry")._1(K[0],ta)],0,0,0,0,[-1],0,0,[c._("Show older")])))},va=function va(K){__p&&__p();if(E.length===0){var L;if(u===a("MessagingTag").INBOX){var M=t===a("MercuryFilters").UNREAD;L=M?c._("No unread messages found."):c._("No messages found.")}else if(u===a("MessagingTag").PENDING){var N=a("MercuryConfig").RTCR;L=N?c._("No connection requests found."):c._("No message requests found.")}else L=c._("No filtered requests found.");var O=u!==a("MessagingTag").INBOX||t!==a("MercuryFilters").ALL,P=O?a("ReasonReact.bs").element(0,0,a("LinkReact.bs").make(0,0,0,0,0,0,0,0,[ja],0,0,0,0,0,0,0,[c._("Return to inbox.")])):null;return a("React").createElement("div",{className:"_3blk"},L,a("React").createElement("div",{className:"_3bll"},P))}else return a("ReasonReact.bs").element(0,0,a("MessengerThreadListGridWrapperReact.bs").make(c._("Conversation list"),[a("bs_array").map(function(Q){if(Q.length!==1)return ka(F,K,G,B,Q);else{var R=Q[0];return ma(q,F,K,u,I,r,H,R)}},E)]))};return[p[0],p[1],p[2],function(K){__p&&__p();var L=K[2],M=K[1];if(L[5]!==u||I!==L[6])o([M,F]);var N=M[6][0],O=N?N[0].isScrolledToTop():false,P=d(E,L[0],q),Q=0;if(O||!P)Q=1;else if(C){var R=C[0],S=R.length===0;return[M[0],M[1],M[2],S?R:M[3],M[4],true,M[6],M[7],M[8]]}else return M;if(Q===1)if(C){var T=C[0],U=T.length===0;return[M[0],M[1],M[2],U?T:M[3],M[4],M[5]&&!O,M[6],M[7],M[8]]}else return M},function(K){__p&&__p();var L=function L(R,S){var T=a("Parent").bySelector(S.target,"._1ht1");if(T==null)return 0;else{S.preventDefault();return a("bs_curry")._1(K[3],a("bs_block").__(1,[R]))}},M=new(a("SubscriptionsHandler"))(),N=[-1],O=[1],P=[-5],Q=[5];M.addSubscriptions(a("KeyEventController").registerKey("UP",a("bs_curry")._1(K[0],function(R,S){return J(N,R,S)}),e),a("KeyEventController").registerKey("DOWN",a("bs_curry")._1(K[0],function(R,S){return J(O,R,S)}),e),a("KeyEventController").registerKey("PAGE_UP",a("bs_curry")._1(K[0],function(R,S){return J(P,R,S)})),a("KeyEventController").registerKey("PAGE_DOWN",a("bs_curry")._1(K[0],function(R,S){return J(Q,R,S)})),a("KeyEventController").registerKey("HOME",a("bs_curry")._1(K[0],function(R,S){return J(0,R,S)})),a("KeyEventController").registerKey("END",a("bs_curry")._1(K[0],function(R,S){return J(1,R,S)})),a("KeyEventController").registerKey("LEFT",function(R){return L(false,R)}),a("KeyEventController").registerKey("RIGHT",function(R){return L(true,R)}),a("KeyEventController").registerKey(h,a("bs_curry")._1(K[0],l),f));a("bs_curry")._1(K[4],function(){M.release();return 0});o([K[1],F]);return 0},function(K){var L=K[1],M=K[0],N=L[1][1]!==M[1][1],O=v&&!M[2][1],P=L[1][6][0];if(N&&O&&P){P[0].scrollToTop();return 0}else return 0},p[6],p[7],p[8],function(K){__p&&__p();var L=K[1],M=L[5]&&!L[1],N=a("gkx")("AT54UChk2NoqJXFF1MV8aQRxUoOW3ZErAtJcgLTvrnCV9rvMkUPp0medMsVOVunTnRfJjVXDEMxLY3wQwE_72fY7"),O=a("CurrentUser").isWorkUser()&&!L[1]&&a("gkx")("AT58O0ueTgrNywfhkMH9fYHs8_paoL8Uj3nAzEseDtJbi75rIYW1Jld0CDq2Sj1iPDsNcWsScyu5Jv7kTxxdRT_i")&&u===a("MessagingTag").INBOX,P=c._("Conversations"),Q=C?true:false,R=u===a("MessagingTag").INBOX,S;if(R){var T=a("CurrentUser").isWorkUser(),U;if(T){var V=L[1];U=c._("Search chats {keyboard shortcut help}",[c._param("keyboard shortcut help",V?"":" ("+(i+")"))])}else U=c._("Search Messenger");S=a("ReasonReact.bs").element(0,[a("bs_curry")._1(K[0],ha)],a("MessengerGraphQLSearchTypeaheadReact.bs").make("_5iwm"+(L[1]||L[3].length>0?" _5iwn":"")+" _150g",true,false,false,false,[L[3]===""&&!Q],[Q],[L[1]],function(){a("MessengerSearchFunnelLogger").endFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");return a("bs_curry")._1(K[3],1)},function($){return a("bs_curry")._1(K[3],a("bs_block").__(0,[$.target.value]))},function(){a("MessengerSearchFunnelLogger").logClearQuery("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");if(s)a("bs_curry")._1(s[0],0);return a("bs_curry")._1(K[3],2)},function(){a("MessengerSearchFunnelLogger").startFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL",a("MessengerSearchFunnelLoggerConstants").MESSENGER_DOT_COM,a("MessengerSearchFunnelLoggerConstants").UNIVERSAL_SEARCH);return a("bs_curry")._1(K[3],0)},a("bs_curry")._1(K[0],m),function($,za){return a("bs_curry")._2(K[0],na,[$,za])},U,[L[3]],true,true,"_11_d",F,[]))}else S=null;var W=a("CurrentUser").isWorkUser()&&!L[1],X=u===a("MessagingTag").PENDING,Y=u===a("MessagingTag").INBOX&&z.length>0,wa=u===a("MessagingTag").PENDING,xa=a("CurrentUser").isWorkUser()&&!N,Z;if(xa){var ya=a("gkx")("AT5ad75lfUu_LEQloT_GHl5l4DgqBru4g1KtvnZgqgchaE21iYmpzSvKrpk6THSFyobb17PT_X_4ySOjfDebuqUc");Z=ya?a("ReasonReact.bs").element(0,0,a("WorkChatThreadlistTabsReact.bs").make([t],[u],a("MessengerView").MASTER.RECENT,F,[])):a("ReasonReact.bs").element(0,0,a("WorkChatThreadlistNewsfeedActionReact.bs").make([]))}else Z=null;return a("React").createElement("div",{className:"_2xhi"},a("ReasonReact.bs").element(0,0,a("ChatSidebarSheetReact.bs").make("_p0g",[])),a("ReasonReact.bs").element(0,0,a("MessengerNewMessagesNoticeReact.bs").make(M,function($){$.preventDefault();return a("bs_curry")._1(K[3],4)},0,[])),a("ReasonReact.bs").element(0,[a("bs_curry")._1(K[0],j)],a("MessengerFlexScrollableAreaReact.bs").make([function(){return a("bs_curry")._1(K[3],3)}],[S,W?a("ReasonReact.bs").element(0,0,a("WorkchatThreadListInviteRowReact.bs").make([])):null,O?a("ReasonReact.bs").element(0,0,a("workchatThreadlistGroupCarouselContainerReact.bs").make(F,[])):null,N?a("ReasonReact.bs").element(0,0,a("WorkGalahadChatsThreadlistHeaderReact.bs").make(u,t,F,[])):O?a("React").createElement("div",undefined,a("React").createElement("span",{className:"_1p5i"},c._("Recent"))):null,X?a("ReasonReact.bs").element(0,0,a("MessengerMessageRequestsInfoReact.bs").make([])):null,a("React").cloneElement(a("React").createElement("div",{className:L[1]&&!Q?"accessible_elem":"",role:"navigation"}),{"aria-label":P},Y?a("ReasonReact.bs").element(0,0,a("MessengerThreadlistMessageRequestsRowReact.bs").make(G,false,function($){return a("bs_curry")._1(K[3],a("bs_block").__(2,[$]))},z,B,[],F,[])):null,v?a("ReasonReact.bs").element(0,0,a("MessengerThreadlistNewMessageRowReact.bs").make(y,a("bs_curry")._1(K[0],sa),[])):null,va(K),wa?a("MessengerThreadlistLinkRowReact.bs").make(ia):null,D?a("bs_curry")._1(D[0],0):ua(w,x,I,K))])),Z)},function(){return[0,false,false,"",[0],false,[0],{},{}]},[E,v,q,A,y,u,I],function(K,L){__p&&__p();if(typeof K==="number")switch(K){case 0:return a("bs_block").__(0,[[L[0],true,L[2],L[3],L[4],L[5],L[6],L[7],L[8]]]);case 1:return a("bs_block").__(0,[[L[0],false,L[2],"",L[4],L[5],L[6],L[7],L[8]]]);case 2:return a("bs_block").__(0,[[L[0],L[1],L[2],"",L[4],L[5],L[6],L[7],L[8]]]);case 3:if(L[1])return 0;else{var M=L[6][0];if(M){var N=M[0],O=N.isScrolledToBottom(),P=N.isScrolledToTop(),Q=L[5];if(O){var R=0;if(P&&Q)return a("bs_block").__(2,[[L[0],L[1],L[2],L[3],L[4],false,L[6],L[7],L[8]],function(T){a("bs_curry")._1(A,0);return o([T[1],F])}]);else R=1;if(R===1)return a("bs_block").__(1,[function(T){a("bs_curry")._1(A,0);return o([T[1],F])}])}else{var S=0;if(P&&Q)return a("bs_block").__(2,[[L[0],L[1],L[2],L[3],L[4],false,L[6],L[7],L[8]],function(T){return o([T[1],F])}]);else S=1;if(S===1)return a("bs_block").__(1,[function(T){return o([T[1],F])}])}}else return 0}break;case 4:return a("bs_block").__(2,[[L[0],L[1],L[2],L[3],L[4],false,L[6],L[7],L[8]],function(T){var M=T[1][6][0];if(M){M[0].scrollToTop();return 0}else return 0}])}else switch(K.tag|0){case 0:return a("bs_block").__(0,[[L[0],L[1],L[2],K[0],L[4],L[5],L[6],L[7],L[8]]]);case 1:return a("bs_block").__(0,[[L[0],L[1],K[0],L[3],L[4],L[5],L[6],L[7],L[8]]]);case 2:return a("bs_block").__(0,[[[K[0]],L[1],L[2],L[3],L[4],L[5],L[6],L[7],L[8]]]);case 3:return a("bs_block").__(0,[[[k(L[0],K[0],E)],L[1],L[2],L[3],L[4],L[5],L[6],L[7],L[8]]])}},p[13]]}var pa=a("ReasonReact.bs").wrapReasonForJs(p,function(q){var r=a("Utils.bs").nullUndefinedBooleanToOptionBool(q.isComposing);return oa(a("bs_js_primitive").null_undefined_to_opt(q.activeThreadID),q.blockedIds,a("bs_js_primitive").null_undefined_to_opt(q.clearQuery),q.filter,q.folder,r?r[0]:false,a("Utils.bs").nullUndefinedBooleanToOptionBool(q.isLoaded),a("Utils.bs").nullUndefinedBooleanToOptionBool(q.isLoading),q.isNewMessageActive,q.newMessageRequestThreads,q.onLoadMoreRequest,q.pendingFolderUnseenCount,a("bs_js_primitive").null_undefined_to_opt(q.queryString),a("bs_js_primitive").null_undefined_to_opt(q.renderLoadMore),a("bs_array").map(function(s){return[].concat(s)},q.threads),q.viewer,q.onAggregationClick,q.readReceipts,q.showAggregation,[])}),qa=10;b.hasNewUnreadMessages=d;b.filterKeyEvent=e;b.filterPlatformSpecificModifierKey=f;b.platformSpecificModiferKeyLabel=g;b.searchKeyboardMainKey=h;b.searchKeyboardShortcut=i;b.setScrollable=j;b.getFocusedThreadId=k;b.handleFocusSearchBar=l;b.setSearchInputNode=ha;b.handleScrollIntoView=m;b.handleFilteredRequestsClick=ia;b.handleReturnToInboxClick=ja;b.impressionOffset=qa;b.logNodeImpressions=n;b.checkAndUpdateMessageRequestImpressions=o;b.renderAggregatedRequests=ka;b.setter=la;b.renderThread=ma;b.handleSelect=na;b.component=p;b.make=oa;b.jsComponent=pa}),null);
__d("MessengerPage",["EventEmitter","EventEmitterWithHolding","EventHolder","keyMirror","performanceAbsoluteNow"],(function a(b,c,d,e,f,g){"use strict";var h={Events:c("keyMirror")({APP_MOUNTED:null,DATA_INITIALIZED:null,JS_LOADED:null}),addRetroactiveListener:function j(k,l){return i.addRetroactiveListener(k,l)},emit:function j(k){i.emitAndHold(k,c("performanceAbsoluteNow")())},removeCurrentListener:function j(){i.removeCurrentListener()}},i=new(c("EventEmitterWithHolding"))(new(c("EventEmitter"))(),new(c("EventHolder"))());f.exports=h}),null);
__d("MercuryMessageList",["immutable","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$MercuryMessageList1=c("immutable").List(i||[]);this.$MercuryMessageList2()}h.prototype.append=function(i){var j;this.$MercuryMessageList1=(j=this.$MercuryMessageList1).push.apply(j,i);this.$MercuryMessageList2()};h.prototype.prepend=function(i){var j;this.$MercuryMessageList1=(j=this.$MercuryMessageList1).unshift.apply(j,i);this.$MercuryMessageList2()};h.prototype.update=function(i){var j=i.filter(function(k){return this.contains(k)}.bind(this));if(j.length===0)return;this.$MercuryMessageList1=this.$MercuryMessageList1.withMutations(function(k){j.forEach(function(l){var m=this.$MercuryMessageList3.get(l.message_id);if(m!==undefined)k.set(m,l)}.bind(this))}.bind(this))};h.prototype.reorder=function(i){this.$MercuryMessageList1=c("immutable").List(i.filter(Boolean));this.$MercuryMessageList2()};h.prototype.at=function(i){return this.$MercuryMessageList1.get(i)};h.prototype.contains=function(i){return this.$MercuryMessageList3.has(i.message_id)};h.prototype.toArray=function(){return this.$MercuryMessageList1.toArray()};h.prototype.toMap=function(){return new Map(c("immutable").Seq(this.$MercuryMessageList1).map(function(i){return[i.message_id,i]}))};h.prototype.$MercuryMessageList2=function(){this.$MercuryMessageList3=new Map(c("immutable").Seq(this.$MercuryMessageList1).map(function(i,j){return[i.message_id,j]}))};f.exports=h}),null);
__d("MercuryMessageStore",["MercuryAPIArgsSource","LogHistory","MercuryMessages","MercuryViewer","MercuryMessageList","SubscriptionsHandler","MercuryThreadInformer","MercuryThreadlistConstants","MercuryThreads","mixInEventEmitter","setImmediate","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryThreads").get(),i=c("LogHistory").getInstance("mercury_message_store");function j(k,l,m){__p&&__p();this.$MercuryMessageStore9=k;this.$MercuryMessageStore6=new(c("MercuryMessageList"))();this.$MercuryMessageStore4=m?c("MercuryMessages").getForFBID(m):c("MercuryMessages").get();this.$MercuryMessageStore2=1;this.$MercuryMessageStore1=null;this.$MercuryMessageStore5=0;this.$MercuryMessageStore3=l||c("MercuryThreadlistConstants").RECENT_MESSAGES_LIMIT;this.$MercuryMessageStore10=m?c("MercuryThreadInformer").getForFBID(m):c("MercuryThreadInformer").get();this.$MercuryMessageStore8=new(c("SubscriptionsHandler"))();this.$MercuryMessageStore8.addSubscriptions(this.$MercuryMessageStore10.subscribe("messages-received",function(n,o){return this.$MercuryMessageStore11(o)}.bind(this)),this.$MercuryMessageStore10.subscribe("messages-updated",function(n,o){return o[this.$MercuryMessageStore9]&&this.$MercuryMessageStore12(o[this.$MercuryMessageStore9])}.bind(this)),this.$MercuryMessageStore10.subscribe("messages-reordered",function(n,o){return o[this.$MercuryMessageStore9]&&this.$MercuryMessageStore13()}.bind(this)),this.$MercuryMessageStore10.subscribe("thread-invalidated",function(n,o){return o[this.$MercuryMessageStore9]&&this.$MercuryMessageStore14()}.bind(this)));i.debug("constructed",JSON.stringify({threadID:this.$MercuryMessageStore9}));this.$MercuryMessageStore15()}j.prototype.setNewThreadID=function(k){this.$MercuryMessageStore7=k};j.prototype.destroy=function(){this.$MercuryMessageStore8&&this.$MercuryMessageStore8.release();i.debug("destroyed",JSON.stringify({threadID:this.$MercuryMessageStore9}))};j.prototype.subscribe=function(k){return this.addRetroactiveListener("updated",k)};j.prototype.fetchMoreMessages=function(){if(this.hasFetchedAll())return false;this.$MercuryMessageStore15();return true};j.prototype.hasFetchedAll=function(){if(this.$MercuryMessageStore4.hasLoadedExactlyNMessages(this.$MercuryMessageStore9,this.$MercuryMessageStore5)&&this.$MercuryMessageStore4.hasLoadedAllMessages(this.$MercuryMessageStore9))return true;return h.isNewEmptyLocalThread(this.$MercuryMessageStore9)};j.prototype.$MercuryMessageStore15=function(){var k=this.$MercuryMessageStore5+this.$MercuryMessageStore3*this.$MercuryMessageStore2;this.$MercuryMessageStore4.getThreadMessagesRange(this.$MercuryMessageStore9,0,k,this.$MercuryMessageStore16.bind(this),null,c("MercuryAPIArgsSource").MERCURY);if(this.$MercuryMessageStore2<10)this.$MercuryMessageStore2+=1;if(this.$MercuryMessageStore4.hasLoadedNMessages(this.$MercuryMessageStore9,k))c("setImmediate")(function(){this.$MercuryMessageStore13()}.bind(this))};j.prototype.$MercuryMessageStore16=function(k){if(k&&k.length){this.$MercuryMessageStore1=k[0].timestamp;this.$MercuryMessageStore5=k.length}else if(k&&!k.length&&!this.$MercuryMessageStore5)this.$MercuryMessageStore17(j.THREAD_IS_EMPTY)};j.prototype.$MercuryMessageStore11=function(k){__p&&__p();var l=[],m=k[this.$MercuryMessageStore9];if(m&&m.length)l=l.concat(m.filter(function(p){return!!p}));if(this.$MercuryMessageStore7){var n=k[this.$MercuryMessageStore7];if(n&&n.length){l=l.concat(n.filter(function(p){return!!p}));this.$MercuryMessageStore7=null}}if(l.length){this.$MercuryMessageStore6.append(l);this.$MercuryMessageStore5+=l.length;var o=l.every(function(p){return p.author!=c("MercuryViewer").getID()});this.$MercuryMessageStore17(j.MESSAGES_RECEIVED,{allFromOthers:o})}};j.prototype.$MercuryMessageStore12=function(k){this.$MercuryMessageStore6.update(this.$MercuryMessageStore4.getMessagesFromIDs(Object.keys(k)));this.$MercuryMessageStore18();this.$MercuryMessageStore17(j.MESSAGES_CHANGED)};j.prototype.$MercuryMessageStore13=function(){if(!this.$MercuryMessageStore1)return;this.$MercuryMessageStore6.reorder(this.$MercuryMessageStore4.getThreadMessagesSinceTimestamp(this.$MercuryMessageStore9,this.$MercuryMessageStore1));this.$MercuryMessageStore18();this.$MercuryMessageStore17(j.MESSAGES_REORDERED)};j.prototype.$MercuryMessageStore14=function(){this.$MercuryMessageStore6=new(c("MercuryMessageList"))();this.$MercuryMessageStore2=1;this.$MercuryMessageStore1=null;this.$MercuryMessageStore5=0;this.$MercuryMessageStore15()};j.prototype.$MercuryMessageStore17=function(k,l){var m=this.$MercuryMessageStore6.toArray();this.releaseHeldEventType("updated");this.emitAndHold("updated",babelHelpers["extends"]({messages:m,eventType:k},l))};j.prototype.$MercuryMessageStore18=function(){var k=this.$MercuryMessageStore6.at(0);if(k)this.$MercuryMessageStore1=k.timestamp};Object.assign(j,{MESSAGES_FETCHED:"fetched",MESSAGES_CHANGED:"changed",MESSAGES_RECEIVED:"received",MESSAGES_REORDERED:"reordered",THREAD_IS_EMPTY:"thread-is-empty"});c("mixInEventEmitter")(j,{updated:true});f.exports=j}),null);
__d("PageMessageEnumTag",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLAG:"flag",IMPORTANT:"important",LOW_VALUE:"low_value",SPAM_SPOOFING:"spam_spoofing",JOB_APPLICATION:"job_application",CONFIRMED_APPOINTMENT:"confirmed_appointment",PENDING_APPOINTMENT:"pending_appointment",REQUESTED_APPOINTMENT:"requested_appointment",MESSENGER_ADS:"messenger_ads"})}),null);
__d("MercuryOrderedThreadlist",["invariant","LogHistory","MercuryActionType","MercuryAPIArgsSource","MercuryDispatcher","MercuryFilters","MercuryFolders","MercuryPayloadSource","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MessagingTag","PageMessageEnumTag","RangedCallbackManager","MercuryThreadInformer","MercuryThreads"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("LogHistory").getInstance("ordered_threadlist_model"),j=c("MercuryFilters").getSupportedFilters().concat([c("MercuryFilters").ALL,c("MessagingTag").GROUPS]),k=c("MercuryFolders").getSupportedFolders().concat([c("MessagingTag").SPAM,c("MessagingTag").PAGE_BACKGROUND]);l.getForFBID=function(o){return n.getForFBID(o)};l.get=function(){return n.get()};function l(o){__p&&__p();this.$MercuryOrderedThreadlist1=o;this.$MercuryOrderedThreadlist2=c("MercuryThreadIDMap").getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist3=c("MercuryThreadInformer").getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist4=c("MercuryThreads").getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist5=c("MercuryDispatcher").getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist6={};this.$MercuryOrderedThreadlist7();this.$MercuryOrderedThreadlist5.subscribe("update-threadlist",function(p,q){__p&&__p();if(!m(q))return;var r=q.ordered_threadlists;if(r&&r.length)this.$MercuryOrderedThreadlist8(r);else{var s=(q.actions||[]).filter(function(t){return t.thread_id});this.$MercuryOrderedThreadlist9(q.threads||[]);this.$MercuryOrderedThreadlist10(s)}this.$MercuryOrderedThreadlist3.updatedThreadlist()}.bind(this));this.$MercuryOrderedThreadlist5.subscribe("invalidate-global-state",function(){return this.$MercuryOrderedThreadlist11()}.bind(this))}l.prototype.getThreadlistOrderMap=function(o,p){if(!this.$MercuryOrderedThreadlist6[o][p]){j=j.concat([p]);k.forEach(function(o){this.$MercuryOrderedThreadlist6[o][p]=new(c("RangedCallbackManager"))(function(q){var r=this.$MercuryOrderedThreadlist4.getThreadMetaNow(q);return r&&r.timestamp}.bind(this),function(q,r){return r-q},this.$MercuryOrderedThreadlist2.canLinkExternally.bind(this.$MercuryOrderedThreadlist2))}.bind(this))}return this.$MercuryOrderedThreadlist6[o][p]};l.prototype.getThreadlist=function(o,p,q,r,s,t){return this.getFilteredThreadlist(o,p,q,c("MercuryFilters").ALL,r,s,t)};l.prototype.getFilteredThreadlist=function(o,p,q,r,s,t,u){__p&&__p();var v=this.getThreadlistOrderMap(q,r),w=v.executeOrEnqueue(o,p,s,t),x=v.getUnavailableResources(w),y=v.getError(o,p,t);if(x.length||y){if(v.getCurrentArraySize()<o){var z={start:o,limit:p,filter:r,resources_size:v.getCurrentArraySize()};i.warn("range_with_gap",JSON.stringify(z))}v.setError(false);this.getServerRequests().fetchThreadlistInfo(v.getCurrentArraySize(),x.length,q,r==c("MercuryFilters").ALL?null:r,u,this.$MercuryOrderedThreadlist12(v.getAllResources()))}return w};l.prototype.getServerRequests=function(){return c("MercuryServerRequests").getForFBID(this.$MercuryOrderedThreadlist1)};l.prototype.getThreadlistUntilTimestamp=function(o,p,q){q=q||c("MercuryFilters").ALL;return this.getThreadlistOrderMap(p,q).getElementsUntil(o)};l.prototype.getAvailableThreadlistNow=function(o,p){p=p||c("MercuryFilters").ALL;return this.getThreadlistOrderMap(o,p).getAllResources()};l.prototype.getThreadCount=function(o,p){p=p||c("MercuryFilters").ALL;return this.getThreadlistOrderMap(o,p).getCurrentArraySize()};l.prototype.hasLoadedThreadlist=function(o,p){p=p||c("MercuryFilters").ALL;return this.getThreadlistOrderMap(o,p).hasReachedEndOfArray()};l.prototype.unsubscribe=function(o,p,q){q=q||c("MercuryFilters").ALL;this.getThreadlistOrderMap(p,q).unsubscribe(o)};l.prototype.$MercuryOrderedThreadlist11=function(){this.$MercuryOrderedThreadlist6={};this.$MercuryOrderedThreadlist7()};l.prototype.$MercuryOrderedThreadlist7=function(){k.forEach(function(o){this.$MercuryOrderedThreadlist6[o]={};j.forEach(function(p){this.$MercuryOrderedThreadlist6[o][p]=new(c("RangedCallbackManager"))(function(q){var r=this.$MercuryOrderedThreadlist4.getThreadMetaNow(q);return r&&r.timestamp}.bind(this),function(q,r){return r-q},this.$MercuryOrderedThreadlist2.canLinkExternally.bind(this.$MercuryOrderedThreadlist2))}.bind(this))}.bind(this))};l.prototype.$MercuryOrderedThreadlist13=function(o,p,q){var r=this.$MercuryOrderedThreadlist4.getThreadMetaNow(o);return!!(r&&r.timestamp&&q&&p&&this.$MercuryOrderedThreadlist14(o)==p&&this.$MercuryOrderedThreadlist15(o).includes(q))};l.prototype.$MercuryOrderedThreadlist16=function(o,p,q){__p&&__p();var r,s=this,t=[],u=false,v=false,w=(o||[]).filter(function(A){var B=A.filter||c("MercuryFilters").ALL;return(A.folder==p||!A.folder&&p==c("MessagingTag").INBOX)&&B==q}),x=this.$MercuryOrderedThreadlist6[p][q].getAllResources(),y=void 0;w.forEach(function(A){__p&&__p();t=t.concat(A.thread_ids);if(A.error){if(A.end>x.length)v=A.error}else{var B=A.end-A.start;if(A.thread_ids.length<B)u=true}if(!y||A.end>y)y=A.end});this.$MercuryOrderedThreadlist17(t,p,q);if(u)this.$MercuryOrderedThreadlist6[p][q].setReachedEndOfArray();else if(v)this.$MercuryOrderedThreadlist6[p][q].setError(v);else{var z=this.$MercuryOrderedThreadlist6[p][q].getCurrentArraySize();if(y&&z<y)(function(){var A={},B=x.concat(t),C=B.filter(function(D){var E=A[D];A[D]=true;return E});if(C.length){i.warn("duplicate_threads",JSON.stringify({folder:p,expected_final_size:y,actual_final_size:z,duplicate_thread_ids:C}));s.getServerRequests().fetchThreadlistInfo(y,C.length,p,q==c("MercuryFilters").ALL?null:q,c("MercuryAPIArgsSource").MERCURY,s.$MercuryOrderedThreadlist12(s.$MercuryOrderedThreadlist6[p][q].getAllResources()))}})()}};l.prototype.$MercuryOrderedThreadlist8=function(o){k.forEach(function(p){j.forEach(function(q){this.$MercuryOrderedThreadlist16(o,p,q)}.bind(this))}.bind(this))};l.prototype.$MercuryOrderedThreadlist10=function(o){__p&&__p();var p={},q=this.$MercuryOrderedThreadlist4;k.forEach(function(r){p[r]={};j.forEach(function(s){p[r][s]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}}})});o.forEach(function(r){__p&&__p();var s=r.thread_id;this.$MercuryOrderedThreadlist18(s,function(t){__p&&__p();this.$MercuryOrderedThreadlist19(s,function(u){__p&&__p();var v=function(){u.forEach(function(x){if(!j.includes(x))return;!!t||h(0);p[t][x].to_add.push(s);if(!this.$MercuryOrderedThreadlist6[t][x].hasReachedEndOfArray()&&!this.$MercuryOrderedThreadlist6[t][x].hasResource(s))p[t][x].to_remove_if_last_after_add[s]=true}.bind(this))}.bind(this);function w(x){!!t||h(0);if(j.includes(x))if(u.includes(x))p[t][x].to_add.push(s);else p[t][x].to_remove.push(s)}if(!t){if(r.action_type===c("MercuryActionType").CHANGE_FOLDER||r.action_type===c("MercuryActionType").CHANGE_ARCHIVED_STATUS)k.forEach(function(x){if(x!==t)j.forEach(function(y){this.$MercuryOrderedThreadlist6[x][y].removeResources([s])}.bind(this))}.bind(this));return}!!t||h(0);switch(r.action_type){case c("MercuryActionType").DELETE_THREAD:u.forEach(function(x){if(!j.includes(x))return;p[t][x].to_remove.push(s)});break;case c("MercuryActionType").CHANGE_ARCHIVED_STATUS:case c("MercuryActionType").CHANGE_FOLDER:v();break;case c("MercuryActionType").CHANGE_READ_STATUS:w(c("MessagingTag").UNREAD);break;case c("MercuryActionType").USER_GENERATED_MESSAGE:case c("MercuryActionType").LOG_MESSAGE:u.forEach(function(x){if(!j.includes(x))return;if(this.$MercuryOrderedThreadlist13(s,t,x))p[t][x].to_add.push(s)}.bind(this));break;case c("MercuryActionType").CHANGE_FLAG:w(c("PageMessageEnumTag").FLAG);break}}.bind(this))}.bind(this))}.bind(this));k.forEach(function(r){__p&&__p();j.forEach(function(s){var t=this.$MercuryOrderedThreadlist6[r][s];this.$MercuryOrderedThreadlist17(p[r][s].to_add,r,s);for(var u=t.getCurrentArraySize()-1;u>=0;u--){var v=t.getResourceAtIndex(u);if(!p[r][s].to_remove_if_last_after_add[v])break;p[r][s].to_remove.push(v)}t.removeResources(p[r][s].to_remove)}.bind(this))}.bind(this))};l.prototype.$MercuryOrderedThreadlist9=function(o){__p&&__p();var p={};k.forEach(function(q){p[q]={};j.forEach(function(r){p[q][r]=[]})});o.forEach(function(q){this.$MercuryOrderedThreadlist18(q.thread_id,function(r){this.$MercuryOrderedThreadlist19(q.thread_id,function(s){if(r)s.forEach(function(t){if(this.$MercuryOrderedThreadlist13(q.thread_id,r,t))p[r][t].push(q.thread_id)}.bind(this))}.bind(this))}.bind(this))}.bind(this));k.forEach(function(q){j.forEach(function(r){if(p[q][r].length>0)this.$MercuryOrderedThreadlist17(p[q][r],q,r)}.bind(this))}.bind(this))};l.prototype.$MercuryOrderedThreadlist17=function(o,p,q){q=q||c("MercuryFilters").ALL;this.$MercuryOrderedThreadlist6[p][q].addResources(o);k.forEach(function(r){if(r!=p)this.$MercuryOrderedThreadlist6[r][q].removeResources(o)}.bind(this))};l.prototype.$MercuryOrderedThreadlist18=function(o,p){this.$MercuryOrderedThreadlist4.getThreadMeta(o,function(q){p(this.$MercuryOrderedThreadlist14(o,q))}.bind(this))};l.prototype.$MercuryOrderedThreadlist14=function(o,p){__p&&__p();p=p||this.$MercuryOrderedThreadlist4.getThreadMetaNow(o);var q=null;if(!p)q="No thread metadata";else if(!p.folder)q="No thread folder";if(q){var r={error:q,tid:o};i.warn("no_thread_folder",JSON.stringify(r));return null}!!p||h(0);var s=p.folder;if(p.is_archived)s=c("MessagingTag").ACTION_ARCHIVED;if(this.$MercuryOrderedThreadlist6[s])return s;else return null};l.prototype.$MercuryOrderedThreadlist19=function(o,p){this.$MercuryOrderedThreadlist4.getThreadMeta(o,function(q){p(this.$MercuryOrderedThreadlist15(o,q))}.bind(this))};l.prototype.$MercuryOrderedThreadlist15=function(o,p){__p&&__p();p=p||this.$MercuryOrderedThreadlist4.getThreadMetaNow(o);var q=[c("MercuryFilters").ALL];if(!p){var r={error:"no_thread_metadata",tid:o};i.warn("no_thread_metadata",JSON.stringify(r));return[]}if(p.unread_count)q.push(c("MessagingTag").UNREAD);if(!p.is_canonical)q.push(c("MessagingTag").GROUPS);var s=p.page_thread_info;if(s&&s.flagged)q.push(c("PageMessageEnumTag").FLAG);return q};l.prototype.$MercuryOrderedThreadlist12=function(o){var p=null;if(o.length>0){var q=this.$MercuryOrderedThreadlist4.getThreadMetaNow(o[o.length-1]);p=q?q.timestamp:null}return p};function m(o){switch(o.payload_source){case c("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS:case c("MercuryPayloadSource").CLIENT_CHANGE_PAGE_FOLLOW_UP_STATUS:case c("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS:case c("MercuryPayloadSource").CLIENT_CHANGE_FOLDER:case c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE:case c("MercuryPayloadSource").CLIENT_DELETE_MESSAGES:case c("MercuryPayloadSource").CLIENT_DELETE_THREAD:case c("MercuryPayloadSource").CLIENT_SEND_MESSAGE:case c("MercuryPayloadSource").SERVER_SEND_MESSAGE:case c("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO:case c("MercuryPayloadSource").SERVER_THREAD_SYNC:case c("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE:case c("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS:return true;case c("MercuryPayloadSource").SERVER_INITIAL_DATA:return!!o.ordered_threadlists;default:return false}}var n=new(c("MercurySingletonProvider"))(l);f.exports=l}),null);
__d("MercurySearchSnippetResults",["MercuryAPIArgsSource","MercuryIDs","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonMixin","MercuryThreadlistConstants","MercuryThreadIDMap","MessengerEnvironment","MessengerServerPayloadTransformer.bs","RangedCallbackManager","MercuryServerDispatcher"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("MessengerEnvironment").messengerui?c("MercuryAPIArgsSource").MESSENGER:c("MercuryAPIArgsSource").WEBMESSENGER,i={},j={},k=null,l=c("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,m=c("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_LIMIT,n=c("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_MORE;function o(x){"use strict";this.$MercurySearchSnippetResults1=x;this.$MercurySearchSnippetResults2=c("MercuryServerPayloadPreprocessor").getForFBID(x);c("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_snippets.php":{request_user_id:x,mode:c("MercuryServerDispatcher").IMMEDIATE,handler:function(y){this.handleUpdate(y)}.bind(this)}});this.$MercurySearchSnippetResults3=c("MercuryThreadIDMap").getForFBID(x)}o.prototype.getFBID=function(){"use strict";return this.$MercurySearchSnippetResults1};o.prototype.getThreadIDMap=function(){"use strict";return this.$MercurySearchSnippetResults3};o.prototype.getAllThreadSearchResults=function(x,y){"use strict";if(x)p(this.$MercurySearchSnippetResults1,x,m,0,y)};o.prototype.getAllLocalThreadSearchResults=function(x,y){"use strict";if(x){var z=i[x];if(z){var A=z.getCurrentArraySize();p(this.$MercurySearchSnippetResults1,x,0,A,y)}}};o.prototype.getAllThreadSearchMoreResults=function(x,y){"use strict";if(x){var z=i[x];if(z){var A=z.getCurrentArraySize();p(this.$MercurySearchSnippetResults1,x,n,A,y)}}};o.prototype.getSingleThreadSearchResults=function(x,y,z){"use strict";if(!x||!y)return;q.call(this,x,y,l,0,z)};o.prototype.getSingleThreadSearchMoreResults=function(x,y,z){"use strict";__p&&__p();if(!x||!y)return;if(!j[y])return;var A=j[y][x];if(A){var B=A.num_total_snippets,C=A.snippets_cbm.getCurrentArraySize(),D=B-C;if(D>0){var E=D>n?n:D;q.call(this,x,y,E,C,z)}}};o.prototype.countSnippetsMatchingQueryInThread=function(x,y){"use strict";var z=j[y][x];if(z)return z.num_total_snippets};o.prototype.findIndexOfSnippet=function(x,y,z,A){"use strict";var B=v(x,y),C=B.getAllResources();for(var D=0;D<C.length;D++)if(z===C[D].message_id)return D};o.prototype.findSnippetAtIndex=function(x,y,z,A){"use strict";s(x,y,z);t.call(this,x,y,z,A)};o.prototype.handleUpdate=function(x){"use strict";__p&&__p();if(x.graphql_payload){var y=(x.graphql_payload.message_threads||[]).map(function(P){return c("MessengerServerPayloadTransformer.bs").transformThread(this.$MercurySearchSnippetResults1,P,x.is_page)}.bind(this));this.$MercurySearchSnippetResults2.handleUpdate({threads:y,payload_source:c("MercuryPayloadSource").SERVER_SEARCH})}else if(x.mercury_payload)this.$MercurySearchSnippetResults2.handleUpdate(x.mercury_payload);var z=x.search_snippets||{};Object.keys(z).filter(function(C){return!!z[C]}).forEach(function(C){Object.keys(z[C]).forEach(function(H){if(!z[C][H].snippets)return;z[C][H].snippets.forEach(function(P){P.matched_keywords=r(P.matched_keywords)})})});var A=x.offset,B=[];for(var C in z){var D=z[C];for(var E in D){var F=D[E],G=x.other_user_fbid||x.thread_fbid,H=this.$MercurySearchSnippetResults3.getClientIDFromServerIDNow(E),I=F.snippets,J=v(C,H),K=J.getCurrentArraySize();if(!G){B.push(H);if(K)continue}else if(A!=K)continue;var L=j[H][C];L.num_total_snippets=F.num_total_snippets;var M=I?I.length:0;if(M>0)J.addResourcesWithoutSorting(I,K);if(!G||x.limit>M)if(J.getCurrentArraySize()==L.num_total_snippets)J.setReachedEndOfArray()}if(!G){var N=u(C),O=N.getCurrentArraySize();if(A==O){N.addResourcesWithoutSorting(B,O);if(x.limit>B.length)N.setReachedEndOfArray()}}}};function p(x,y,z,A,B){__p&&__p();if(k)if(!k.thread_id){var C=u(k.query);C.unsubscribe(k.subscriber_id);k=null}var C=u(y),D=A+z,E=C.executeOrEnqueue(0,D,function(H){var I={};for(var J=0;J<H.length;J++){var K=H[J],L=j[K][y];I[K]={num_total_snippets:L.num_total_snippets,snippets:L.snippets_cbm.getAllResources()}}var M=C.hasReachedEndOfArray();B(I,M)}),F=C.getUnavailableResources(E);if(F.length){k={query:y,thread_id:null,subscriber_id:E};var G={query:y,offset:A,limit:z+1,snippetLimit:l};G.identifier="thread_fbid";w(G,x)}}function q(x,y,z,A,B){__p&&__p();if(k)if(k.thread_id){var C=v(k.query,k.thread_id);C.unsubscribe(k.subscriber_id);k=null}var C=v(x,y),D=A+z,E=C.executeOrEnqueue(0,D,function(){var K=C.getAllResources(),D=j[y][x].num_total_snippets;B(K,D)}),F=C.getUnavailableResources(E);if(F.length){k={query:x,thread_id:y,subscriber_id:E};var G={query:x,snippetOffset:A,snippetLimit:z},H=this.getThreadIDMap().getServerIDFromClientIDNow(y),I=c("MercuryIDs").tokenize(y),J=I.type;if(J=="user")G.other_user_fbid=H;else G.thread_fbid=H;G.identifier="thread_fbid";w(G,this.getFBID())}}function r(x){if(x instanceof Array){var y={};for(var z=0;z<x.length;z++)y[z.toString()]=x[z];return y}else return x}function s(x,y,z){}function t(x,y,z,A){var B=j[y][x],C=B.snippets_cbm.getAllResources(),D=B.num_total_snippets,E=C.length;if(z<E){A(C[z].message_id);return}var F=D-E,G=F>n?n:F;q.call(this,x,y,G,E,function(H,I){t.call(this,x,y,z,A)})}function u(x){if(!i[x])i[x]=new(c("RangedCallbackManager"))();return i[x]}function v(x,y){if(!j[y])j[y]={};var z=j[y][x];if(!z){z={num_total_snippets:-1,snippets_cbm:new(c("RangedCallbackManager"))()};j[y][x]=z}return z.snippets_cbm}function w(x,y){x.client=h;c("MercuryServerDispatcher").trySend("/ajax/mercury/search_snippets.php",x,null,y)}Object.assign(o,c("MercurySingletonMixin"));f.exports=o}),null);
__d("bs_marshal",["bs_caml_string","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(p,q,r,s,t){if(q<0||r<0||q>(p.length-r|0))throw[c("bs_caml_builtin_exceptions").invalid_argument,"Marshal.to_buffer: substring out of bounds"];else return c("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_buffer")}function i(p,q){if(q<0||q>(p.length-20|0))throw[c("bs_caml_builtin_exceptions").invalid_argument,"Marshal.data_size"];else return c("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size")}function j(p,q){return 20+i(p,q)|0}function k(p,q){if(q<0||q>(p.length-20|0))throw[c("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else{var r=c("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size");if(q>(p.length-(20+r|0)|0))throw[c("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else return c("bs_caml_missing_polyfill").not_implemented("caml_input_value_from_string")}}function l(p,q){return k(c("bs_caml_string").bytes_of_string(p),q)}function m(p,q,r){return c("bs_caml_missing_polyfill").not_implemented("caml_output_value")}function n(){return c("bs_caml_missing_polyfill").not_implemented("caml_input_value")}var o=20;g.to_channel=m;g.to_buffer=h;g.from_channel=n;g.from_bytes=k;g.from_string=l;g.header_size=o;g.data_size=i;g.total_size=j}),null);
__d("bs_obj",["bs_marshal","bs_caml_array","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("bs_caml_array").caml_array_get,i=c("bs_caml_array").caml_array_set;function j(){return c("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_string")}function k(G,H){return[c("bs_marshal").from_bytes(G,H),H+c("bs_marshal").total_size(G,H)|0]}function l(G){var H=G.length!==undefined&&(G.tag|0)!==248&&G.length>=1?G[0]:G,I;if(H.length!==undefined&&H.tag===248)I=H[0];else throw c("bs_caml_builtin_exceptions").not_found;if(I.tag===252)return H;else throw c("bs_caml_builtin_exceptions").not_found}function m(G){try{var H=l(G);return H[0]}catch(I){if(I===c("bs_caml_builtin_exceptions").not_found)throw[c("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_name"];else throw I}}function n(G){try{var H=l(G);return H[1]}catch(I){if(I===c("bs_caml_builtin_exceptions").not_found)throw[c("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_id"];else throw I}}function o(G){try{return l(G)}catch(H){if(H===c("bs_caml_builtin_exceptions").not_found)throw[c("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_slot"];else throw H}}var p=0,q=245,r=246,s=247,t=248,u=249,v=250,w=251,x=251,y=252,z=253,A=254,B=255,C=255,D=1e3,E=1001,F=1002;g.double_field=h;g.set_double_field=i;g.first_non_constant_constructor_tag=p;g.last_non_constant_constructor_tag=q;g.lazy_tag=r;g.closure_tag=s;g.object_tag=t;g.infix_tag=u;g.forward_tag=v;g.no_scan_tag=w;g.abstract_tag=x;g.string_tag=y;g.double_tag=z;g.double_array_tag=A;g.custom_tag=B;g.final_tag=C;g.int_tag=D;g.out_of_heap_tag=E;g.unaligned_tag=F;g.extension_name=m;g.extension_id=n;g.extension_slot=o;g.marshal=j;g.unmarshal=k}),null);
__d("bs_camlinternalLazy",["bs_obj","bs_curry","bs_caml_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("bs_caml_exceptions").create("CamlinternalLazy.Undefined");function i(){throw h}function j(n){__p&&__p();var o=n[0];n[0]=i;try{var p=c("bs_curry")._1(o,0);n[0]=p;n.tag=c("bs_obj").forward_tag;return p}catch(q){n[0]=function(){throw q};throw q}}function k(n){var o=n[0];n[0]=i;var p=c("bs_curry")._1(o,0);n[0]=p;n.tag=c("bs_obj").forward_tag;return p}function l(n){var o=n.tag|0;if(o===c("bs_obj").forward_tag)return n[0];else if(o!==c("bs_obj").lazy_tag)return n;else return j(n)}function m(n){var o=n.tag|0;if(o===c("bs_obj").forward_tag)return n[0];else if(o!==c("bs_obj").lazy_tag)return n;else return k(n)}g.Undefined=h;g.force_lazy_block=j;g.force_val_lazy_block=k;g.force=l;g.force_val=m}),null);