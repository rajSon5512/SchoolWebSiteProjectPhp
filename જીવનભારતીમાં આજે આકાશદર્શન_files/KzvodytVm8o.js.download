if (self.CavalryLogger) { CavalryLogger.start_js(["tg3gS"]); }

__d("FeedStoryCategory",[],(function a(b,c,d,e,f,g){f.exports={UNKNOWN:0,ORGANIC:1,ENGAGEMENT:2,FIXED_POSITION:3,PROMOTION:4,SPONSORED:5,END_OF_FEED_CONTENT:6}}),null);
__d("FeedQuickLogModule",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CACHE_FETCH:655545,LOAD:655546,NETWORK_FETCH:655544,CONSUMPTION_RESTORATION_WWW:655575,IMAGE_LOAD_WWW:655576,NOTIFICATION_INTERACTION_WWW:655584})}),null);
__d("QuickLogActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({START:1,SUCCESS:2,FAIL:3,CANCEL:4,DRAW_COMPLETE:5,ON_RESUME:6,ACTIVITY_CREATED:7,CONSISTENCY_MODEL_UPDATER:8,SEND_MESSAGE:9,SUCCESS_COLD:10,SUCCESS_WARM:11,UI_IDLE:12,PHASE_ONE:13,PHASE_TWO:14,DEQUEUE:15,NETWORK_COMPLETE:16,MEMORY_CACHE_VISIT:17,DISK_CACHE_VISIT:18,CONSISTENCY_UPDATE:19,RETURN_TO_CALLER:20,PHOTO_UPLOAD_COMPLETE:21,USER_NAVIGATION_CANCELLATION:22,DB_FETCH:23,SERVER_FETCH:24,SUCCESS_CACHE:25,SUCCESS_DB:26,SUCCESS_NETWORK:27,SUCCESS_LOCAL_UNSPECIFIED:28,CACHE_UPDATED:29,DB_UPDATED:30,DATA_RECEIVED:31,DRAW_VIEW:32,DATA_EMPTY:33,CACHE_FETCH:34,PREPARE_BEGIN:35,PREPARE_END:36,ASYNC_BEGIN:37,ASYNC_END:38,REMOVE_BEGIN:39,REMOVE_END:40,BROADCAST_DONE:41,ON_RESUME_END:42,ON_ATTACH_END:43,ON_FRAGMENT_CREATE_END:44,ON_CREATE_VIEW_END:45,ON_ACTIVITY_CREATED_END:46,ON_START_END:47,QUEUED:48,IN_PROGRESS:49,INIT:50,UNKNOWN:51,RETRY_AFTER_FAILURE:52,RETRY_AFTER_RECONNECT:53,QUEUEING_BEGIN:54,QUEUEING_SUCCESS:55,QUEUEING_FAIL:56,MESSAGE_UPDATE_START:57,MESSAGE_UPDATE_END:58,PHOTO_CAPTURED:59,MEDIA_PREVIEW_VISIBLE:60,COUNTER:61,INTERACTION_LOAD_TIMELINE_HEADER:62,INTERACTION_LOAD_EVENT_PERMALINK:63,INTERACTION_LOAD_GROUPS_FEED:64,INTERACTION_LOAD_PAGE_HEADER:65,INTERACTION_LOAD_PAGE_HEADER_ADMIN:66,INTERACTION_LOAD_PERMALINK:67,INTERACTION_OPEN_COMPOSER:68,INTERACTION_OPEN_MEDIA_PICKER:69,INTERACTION_OPEN_PHOTO_GALLERY:70,INTERACTION_OPEN_CHECK_IN:71,INTERACTION_LOAD_WEB_VIEW:72,INTENT_MAPPED:73,ACTIVITY_LAUNCHED:74,ACTIVITY_PAUSED:75,ACTIVITY_STARTED:76,ACTIVITY_RESUMED:77,FRAGMENT_CREATED:78,FRAGMENT_RESUMED:79,ACTIVITY_ON_CREATE:80,INTENT_MAPPING_BEGIN:81,FRAGMENT_ON_CREATE:82,FRAGMENT_NEW_INSTANCE:83,MARKER_SWAPPED:84,FRAGMENT_INSTANCE_CREATED:85,PREV_ACTIVITY_PAUSED:86,ERROR:87,METHOD_INVOKE:88,FINALLY:89,PHOTO_DOWNLOAD_COMPLETE:90,MINIPREVIEW_COMPLETE:91,SEARCH_TYPEAHEAD:92,ANIMATION_END:93,UDP_REQUEST_SEND:94,MAIN_COMPLETE:95,INTERRUPTED:96,NETWORK_FAILED:97,NETWORK_RESPONSE:98,EDGE_PROCESSING_BEGIN:99,NEWSFEED_PROCESS_RESPONSE:100,ON_VIEW_CREATED_END:101,DATA_LOAD_START:102,LEGACY_MARKER:103,ACTION_BAR_COMPLETE:104,ABORTED:105,QUERY_READY:106,RTMP_PACKET_RECEIVED:107,REQUESTED_PLAYING:108,RTMP_CONNECTION_REQUESTED:109,RTMP_CONNECTION_RELEASE:110,NEW_START_FOUND:111,MISSED_EVENT:112,TIMEOUT:113,CONTROLLER_INITIATED:114,RTMP_STREAM_PREPARED:115,VIDEO_PLAYING:116,RTMP_CONNECTION_CONNECTED:117,RTMP_CONNECTION_FAILED:118,RTMP_CONNECTION_INTERCEPTED:119,VIDEO_SET_RENDERER_CONTEXT:120,HEADER_DATA_LOADED:121,CARD_DATA_LOADED:122,VIEW_WILL_APPEAR_BEGIN:123,VIEW_DID_LOAD_BEGIN:124,COMPONENTS_DATA_SOURCE_WILL_BEGIN_UPDATES:125,COMPONENTS_DATA_SOURCE_DID_END_UPDATES:126,LOAD_VIEW_BEGIN:127,RTMP_FIRST_KEY_FRAME_RECEIVED:128,MESSENGER_QUEUE_CREATION:129,APP_DID_FINISH_LAUNCHING:130,APP_DID_BECOME_ACTIVE:131,APP_WILL_ENTER_FOREGROUND:132,APP_DID_ENTER_BACKGROUND:133,APP_MAIN:134,MQTT_CONNECTING:135,MQTT_CONNECTED:136,MQTT_DISCONNECTED:137,MESSENGER_DELTA_REQUEST:138,APP_FIRST_VIEW_CONTROLLER:139,MESSENGER_THREAD_LIST_LOADED:140,MESSENGER_THREAD_LIST_DISPLAYED:141,PREV_ACTIVITY_PAUSE:142,ACTIVITY_RESUME:143,ACTIVITY_START:144,BEGIN_START_ACTIVITY:145,END_START_ACTIVITY:146,FILE_SYSTEM_FAIL:147,FORMAT_ERROR:148,PRIVACY_VIOLATION:149,NETWORK_RESPONSE_INITIAL_SCAN:150,POPULATE_CONSISTENCY_MEMORY_CACHE:151,APPLY_OPTIMISTICS:152,APPLY_FINISHED_LIST:153,APPLY_FINISHED_LIST_AGAIN:154,FUTURE_LISTENERS_COMPLETE:155,SERVICE_ON_START_COMMAND:156,WAIT_FOR_BLOCKERS:157,NOTIFY_SUBSCRIBERS:158,FAIL_FILE_TOO_LARGE:159,OFFLINE:160,ASNYC_FAILED:161,ASYNC_FAIL:162,ON_ATTACH_FRAGMENT:163,VIEW_DID_APPEAR_BEGIN:164,DISPLAYED:165,DISPLAYED_ON_SCREEN:166,ASYNC_ACTION_SUCCESS:167,ASYNC_ACTION_FAIL:168,CONNECTIVITY_CHANGED:169,VIDEO_DISPLAYED:170,VIDEO_REQUESTED_PLAYING:171,LOADED_AUDIO_SESSION:172,LOADED_CAMERA_SESSION:173,SUCCESS_OPTIMISTIC:174,OUT_OF_ORDER:175,NOT_READY:176,JSON_PARSE:177,FILE_NOT_FOUND:178,METABOX_COMPLETE:179,CALL_TO_ACTION_COMPLETE:180,HEADER_DRAW_COMPLETE:181,COVER_PHOTO_COMPLETE:182,COMPONENT_WILL_CREATE:183,COMPONENT_DID_CREATE:184,COMPONENT_WILL_LAYOUT:185,COMPONENT_DID_LAYOUT:186,COMPONENT_WILL_MOUNT:187,COMPONENT_DID_MOUNT:188,PRECALCULATE_EDGES:189,UI_THREAD_DEQUEUE:190,CALLBACKS_COMPLETE:191,CALLBACKS_DISPATCHED:192,NETWORK_PARSE_COMPLETE:193,START_LOADING_JS_BUNDLE:194,FINISH_LOADING_JS_BUNDLE:195,START_EXECUTING_JS_BUNDLE:196,FINISH_EXECUTING_JS_BUNDLE:197,START_CALLING_JS_FUNCTION:198,FINISH_CALLING_JS_FUNCTION:199,CREATED_MODEL_FILE:200,DB_SUPPLIER_GET:201,BEGIN_TRANSACTION:202,FILE_FLUSHED:203,OPTIMISTIC_UPDATES_APPLIED:204,FRAGMENT_VISIBLE:205,STALE:206,SUCCESS_GET_MODEL:207,FAIL_GET_MODEL:208,ALREADY_SEEN:209,UNKNOWN_SEEN_STATE:210,CREATED_INTENT:211,INVALID_INTENT:212,SHOW_NOTIFICATION:213,SUCCESS_FETCH_IMAGE:214,FAIL_FETCH_IMAGE:215,DROPPED:216,QUERY_CHUNKS:217,QUERY_ROWS:218,COMPUTE_CHUNKS:219,SCROLL_COMPLETE:220,USE_INSTANCE_STATE:221,USE_ARGUMENTS:222,OFFSCREEN:223,LOG_READ:224,LOG_COMPACTED:225,LOG_WRITER_OPENED:226,TAB_SWITCH:227,EXIT_VIEW_CONTROLLER:228,TAGS_PREPARED:229,VIEW_DID_APPEAR:230,MEDIA_TOO_SMALL:231,ITEM_SELECTED:232,REPOSITIONED:233,PHOTO_UPLOAD_START:234,MEDIA_EDIT:235,MEDIA_EDIT_COMPLETE:236,VIDEO_PAUSE:237,VIDEO_COMPLETE:238,VIDEO_PLAYING_TIMEOUT:239,VIDEO_PLAYING_QPL_TIMEOUT:240,SESSION_OPEN:241,SCHEMA_HASH_MISMATCH:242,OVERRIDES_EXIST:243,DI_DONE:244,FLATBUFFER_SCHEMA_ABSENT:245,SUCCESS_NONEXISTENCE:246,VIDEO_CANCELLED:247,MESSENGER_QUEUE_CREATION_FAILURE:248,MESSENGER_DELTA_REQUEST_FAILURE:249,RETURN_EXCEPTION_TO_CALLER:250,SURFACE_TEXTURE_AVAILABLE:251,NEWS_FEED_FRAGMENT:252,HEADER_CACHE_FETCH_STARTED:253,CHANGESET_ENQUEUED:258,RTC_BROADCAST_INITIALIZED:259,RTC_STREAMING_INITIALIZED:260,RTC_STREAMING_STARTED:261,CAMERA_VIDEO_OUTPUT_SWITCHED:262,RTMP_STREAM_STOPPED:263,LOCATION_FETCH_BEGIN:264,LOCATION_FETCH_SUCCESS:265,LOCATION_FETCH_FAILED:266,FIRST_UPDATE_SUCCESS:267,FIRST_UPDATE_FAILURE:268,RTMP_STREAMING_HANDLED_FRAME:269,RTMP_DVR_HANDLED_FRAME:274,LIVE_RTMP_STREAMING_HANDLED_FRAME:275,LIVE_RTMP_DVR_HANDLED_FRAME:276,PASS_QE_CHECK:277,PASS_AD_CHECK:278,PASS_SAMPLE_RATE_CHECK:279,HAS_VALID_HTML:280,FOUND_IMAGES:281,TIGON_REQUEST_BEGIN:282,TIGON_REQUEST_END:283,TIGON_RESPONSE_BEGIN:284,TIGON_RESPONSE_END:285,TIGON_PARSE_BEGIN:286,TIGON_PARSE_END:287,GRAPHQL_CACHE_FETCH_START:288,GRAPHQL_CACHE_FETCH_END:289,VIDEO_START_STALL:290,VIDEO_END_STALL:291,MERGE_LOCAL_FIELDS:292,LOAD_QUERY_STRING:293,CONFIG_TABLE_SCHEMA_HASH_MISMATCH:294,CONFIG_TABLE_SCHEMA_ABSENT:295,CONFIG_TABLE_MAGIC_MISMATCH:296,OBJSEL_FETCH:297,GO_TO_AD_ACTIVITY:298,SAVE_AD:299,UNSAVE_AD:300,SAVE_MODE:301,GO_AD_ACTIVITY_MODE:302,ACCESSIBILITY_ACTIVATE:303,ACCESSIBILITY_CUSTOM:304,ACCESSIBILITY_MAGIC_TAP:305,FINAL_IMAGE_SET:306,INTERMEDIATE_IMAGE_SET:307,INTERMEDIATE_IMAGE_FAIL:308,INTERMEDIATE_IMAGE_GOOD_ENOUGH_SET:309,APP_BACKGROUND:310,APP_FOREGROUND:311,RECEIVED_HARDWARE_FRAME:312,CAMERA_COMPONENT_MOUNTED:313,MQTT_CONNECTION_ATTEMPTED:314,DELTA_APPLICATION_COMPLETED:325,DELTAS_RECEIVED_AFTER_CONNECT:326,MESSENGER_DAY_UNIT_DISPLAYED:327,DATA_LOAD_END:328,VIEW_DID_BECOME_VISIBLE:329,DELTA_APPLICATION_INTERRUPTED:330,DELTA_BATCH_APPLICATION_COMPLETED:331,MESSAGE_LIST_DID_UPDATE:332,MESSAGE_LIST_WILL_UPDATE:333,SUCCESS_ZERO_WAIT_TIME:334,USER_SCROLLED:335,SPINNER_APPEARED:336,MODEL_ENQUEUED:337,VIEW_MODEL_APPLIED:338,PRESENTED:339,VIEW_DID_BECOME_VISIBLE_END:340,MESSENGER_DELTA_REQUEST_INIT:341,FEED_REQUEST_STARTED:342,FEED_REQUEST_FAILED:343,FEED_REQUEST_SUCCEEDED:344,FEED_LOAD_FROM_DISK_FINISHED:345,STORIES_REQUEST_STARTED:346,STORIES_REQUEST_FAILED:392,STORIES_REQUEST_SUCCEEDED:393,STORIES_LOAD_FROM_DISK_FINISHED:394,USER_INFO_LOADED:395,APP_CREATED:396,INIT_TO_USABLE:397,INIT_TO_NETWORK_CONTENT:398,TOTAL:399,HEAD:400,TAIL:401,INITIAL:402,OTHER:403,ANR_START_DATA_CAPTURE:404,ANR_ENQUEUE:405,NOTIF_NOT_ALERTED:406,NOTIF_DUPLICATE:407,NOTIF_MUTED:408,NOTIF_BUZZED:409,FEED_RESPONSE_PROCESSED:410,STORIES_RESPONSE_PROCESSED:411,APP_DID_FINISH_LAUNCHING_ENDED:412,ASYNC_BEGIN_DB:413,DELTA_APPLICATION_STARTED:414,ASYNC_SUCCESS_DB:415,ASYNC_FAIL_DB:416,ASYNC_BEGIN_SERVER:417,ASYNC_SUCCESS_SERVER:418,ASYNC_FAIL_SERVER:419,LEAVE:420,ASYNC_SUCCESS_DB_NO_DATA:429,ASYNC_FAIL_SERVER_NO_DATA:430,SUCCESS_MEMORY:431,SUCCESS_SERVER:432,FAIL_NO_DATA:433,ACTIVITY_NEW_INTENT:434,GRID_MEDIA_LOADED:435,STORY_TRAY_MEDIA_LOADED:436,INTERACTION_OPEN_QRCODE_SCANNER:437,MEDIA_LOAD_CACHE:438,MEDIA_LOAD_NETWORK:439,COMMENTS_LOAD_START:440,COMMENTS_LOAD_COMPLETE:441,MEDIA_LOAD_START:442,SCROLL_START:443,QRCODE_SCANNER_SCAN_SUCCESS:444,QRCODE_SCANNER_SCAN_FAILURE:445,APP_CREATED_MAIN_PROCESS:446,FINISH_REGISTERING_JS_NATIVE_MODULES:447,NON_ANR:448,FINISH_INITIALIZING_JS_BRIDGE:449,FINISH_INJECTING_JS_HOOKS:450,FINISH_RUNNING_JS_INITIALIZER:451,UI_RESPONSIVE:452,PHASE_ONE_COMPLETE:453,PHASE_TWO_COMPLETE:454,LS_HEADER_START:455,LS_HEADER_LOAD:456,LS_BODY_START:457,LS_BODY_LOAD:458,APP_ONCREATE:459,START_FETCH_IMAGE:460,LOGGED_OUT:461,LS_HEADER_LAYOUT_SUCCESS:462,STARTED_CAPTURE_SESSION:463,CAMERA_VIEW_READY:464,CAMERA_FIRST_FRAME:465,PHOTO_BITMAP_READY:466,END:467,FRAME_RENDERED:468,LS_MAP_LIST_START:469,LS_MAP_LIST_LOADED:470,LS_MAP_LIST_SUCCESS:471,FETCH_THREAD_STARTED:472,FETCH_THREAD_SUCCEEDED:473,FETCH_THREAD_FAILED:474,STRUCTURE_FETCH_COMPLETE:475,FOLLOWED_SHOWS_FETCHED:476,ABANDONED:477,ENTERED:478,LS_FILTER_START:479,LS_FILTER_LOAD:480,LS_FILTER_SUCCESS:481,LS_SEARCH_RESULT_START:482,LS_SEARCH_RESULT_LOAD:483,NETWORK_PARSE_START:484,NETWORK_REQUEST_SENT:485,COMPONENT_DATA_MODEL_UPDATE_START:486,COMPONENT_DATA_MODEL_UPDATE_COMPLETE:487,HIGH_RES_PHOTO_FILE_READY:488,NATIVE_PHOTO_BITMAP_READY:489,REEL_JSON_RECEIVED:490,REEL_MEDIA_RECEIVED:491,STORY_VIEWER_APPEAR:492,FETCH_INBOX_STARTED:493,FETCH_INBOX_SUCCEEDED:494,FETCH_INBOX_FAILED:495,REQUEST_ADDED:496,INIT_QE_START:497,INIT_QE_END:498,MULTIDEX_INSTALLED:499,PREPARE_CAMERA_SESSION:500,START_CAMERA_SESSION:501,DID_START_CAMERA_SESSION:502,FIRST_HARDWARE_FRAME:503,START_RENDERING_FIRST_USER_FRAME:504,FIRST_MEDIA_RENDERED:505,FIRST_CACHED_MEDIA_RENDERED:506,CAMERA_INITIALIZED:507,HTTP_TRANSACTION_STARTED:508,REMOTE_PROCESS:509,PRE_REQUEST_SEND_CALLED:510,BRIDGE_STARTUP_WILL_START:511,BRIDGE_STARTUP_DID_FINISH:512,COVER_PHOTO_LOW_RES:513,COVER_PHOTO_HIGH_RES:514,PROFILE_PIC_LOW_RES:515,PROFILE_PIC_HIGH_RES:516,CONTEXT_ITEMS:517,MEDIA_LOADED:518,STATE_UPDATE:519,ON_SHOW_LOGIN:520,EMPTY_REQUEST:521,METERED_CONNECTION:522,VIDEO_DOWNSTREAM_FORMAT_CHANGED:523,DISABLED:524,NO_METADATA:525,INCOMPLETE_METADATA:526,PHOTO_CAPTURE_READY:527,CAMERA_START_READY:528,DELAY_START:529,DELAY_STOP:530,RANK_START:531,RANK_STOP:532,DB_WRITE_START:533,DB_WRITE_STOP:534,ADD_STORY_TO_UI:535,WEBVIEW_URI_REDIRECTOR_CONSTRUCTION:536,UNINTERRUPTED:537,VIDEO_TOGGLE_FULL_SCREEN:538,CONFIGURE_START:539,CONFIGURE_END:540,BROWSER_OPEN:541,FIRST_DATA_RECEIVED:542,RVP_WILL_LOAD:543,RVP_DID_LOAD:544,CACHE_WRITE_START:545,CACHE_WRITE_SUCCESS:546,CACHE_WRITE_FAIL:547,RVP_WILL_PAUSE:548,RVP_DID_PAUSE:549,RVP_WILL_PLAY:550,RVP_DID_PLAY:551,RVP_WILL_PREPARE:552,RVP_DID_PREPARE:553,RVP_WILL_RELOAD:554,RVP_DID_RELOAD:555,RVP_WILL_CREATE:556,RVP_DID_CREATE:557,RVP_WILL_FINISH_INFLATE:558,RVP_DID_FINISH_INFLATE:559,RVP_WILL_MOUNT:560,RVP_DID_MOUNT:561,START_COMPRESSING_MESSAGE:562,MESSAGE_COMPRESSED:563,START_DECOMPRESSING_MESSAGE:564,MESSAGE_DECOMPRESSED:565,START_SENDING_MESSAGE:566,CAMERA_PREVIEW_FROZEN:567,VC_INIT_START:569,VC_INIT_BEGIN:570,VC_INIT_END:571,VC_VIEW_DID_LOAD_BEGIN:572,VC_VIEW_DID_LOAD_END:573,ROOT_QUERY_START:574,ROOT_QUERY_SUCCESS:575,ROOT_QUERY_FAIL:576,CACHE_INITIALIZED:577,FETCH_BEGIN:578,FETCH_FINISHED:579,PARSING_FINISHED:580,LOAD_VIEW_END:581,LOAD_URL_BEGIN:582,LOAD_URL_END:583,SHOULD_LOAD_URL_BEGIN:598,SHOULD_LOAD_URL_END:599,BLOCKING_RESOURCES_LOADED:600,WEB_PAGE_LOADED:601,JS_TEARDOWN:603,JS_SETUP:604,PREP_STATE:605,PREP_FORMS:606,RUN_FUNCTION:610,LOAD_MODULES:613,VIDEO_READY_TO_PLAY:614,CANCEL_NAVIGATION:615,BEGIN_HANDLE_EVENT:626,END_HANDLE_EVENT:627,BEGIN_PROCESS_EVENT:628,END_PROCESS_EVENT:629,CANCEL_BACKGROUND:630,SC_TRACKER_SETUP_BEGIN:631,SC_TRACKER_SETUP_END:632,PROFILE_TOOLBOX_SETUP_BEGIN:633,PROFILE_TOOLBOX_SETUP_END:634,FEED_TOOLBOX_SETUP_BEGIN:635,FEED_TOOLBOX_SETUP_END:636,SCREEN_PART_RECEIVED:637,RVP_DID_FAIL_AUTOPLAY:638,VIEW_WILL_APPEAR_END:639,VIDEO_RENDERED:640,VIEW_DID_APPEAR_END:641,SHARE_FLOW_LOADED:642})}),null);
__d("QuickLogEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({655575:{moduleName:"FEED",name:"CONSUMPTION_RESTORATION_WWW",sampleRate:1},655576:{moduleName:"FEED",name:"IMAGE_LOAD_WWW",sampleRate:1e3},655584:{moduleName:"FEED",name:"NOTIFICATION_INTERACTION_WWW",sampleRate:1},11075606:{moduleName:"MARKETPLACE",name:"REACT_TTI_WWW",sampleRate:null}})}),null);
__d("QuickPerformanceLogger",["Banzai","Random","performance","QuickLogActionType","QuickLogEvents"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i=(h={},h[c("QuickLogActionType").SUCCESS]="SUCCESS",h[c("QuickLogActionType").FAIL]="FAIL",h[c("QuickLogActionType").CANCEL]="CANCEL",h);function j(){this.$QuickPerformanceLogger1={};this.$QuickPerformanceLogger2={};this.$QuickPerformanceLogger3=100}j.prototype.$QuickPerformanceLogger4=function(k,l){var m=this.$QuickPerformanceLogger1[k];if(!m)return null;var n=m[l];if(!n)return null;return n};j.prototype.markerStart=function(k){__p&&__p();var l=arguments.length<=1||arguments[1]===undefined?0:arguments[1],m=arguments.length<=2||arguments[2]===undefined?this.currentTimestamp():arguments[2],n=c("QuickLogEvents")[k.toString()];if(!n)return;var o=this.$QuickPerformanceLogger2[k]||n.sampleRate||this.$QuickPerformanceLogger3;if(!c("Random").coinflip(o))return;var p=this.$QuickPerformanceLogger1[k];if(!p)this.$QuickPerformanceLogger1[k]={};this.$QuickPerformanceLogger1[k][l]={timestamp:m,sampleRate:o,points:{}}};j.prototype.annotateMarkerString=function(k,l,m){var n=arguments.length<=3||arguments[3]===undefined?0:arguments[3],o=this.$QuickPerformanceLogger4(k,n);if(!o)return;var p=this.$QuickPerformanceLogger1[k][n].annotations||{};p[l]=m;this.$QuickPerformanceLogger1[k][n].annotations=p};j.prototype.annotateMarkerStringArray=function(k,l,m){var n=arguments.length<=3||arguments[3]===undefined?0:arguments[3],o=this.$QuickPerformanceLogger4(k,n);if(!o)return;var p=this.$QuickPerformanceLogger1[k][n].annotationsStringArray||{};p[l]=m;this.$QuickPerformanceLogger1[k][n].annotationsStringArray=p};j.prototype.annotateMarkerInt=function(k,l,m){var n=arguments.length<=3||arguments[3]===undefined?0:arguments[3],o=this.$QuickPerformanceLogger4(k,n);if(!o)return;var p=this.$QuickPerformanceLogger1[k][n].annotationsInt||{};p[l]=m;this.$QuickPerformanceLogger1[k][n].annotationsInt=p};j.prototype.annotateMarkerIntArray=function(k,l,m){var n=arguments.length<=3||arguments[3]===undefined?0:arguments[3],o=this.$QuickPerformanceLogger4(k,n);if(!o)return;var p=this.$QuickPerformanceLogger1[k][n].annotationsIntArray||{};p[l]=m;this.$QuickPerformanceLogger1[k][n].annotationsIntArray=p};j.prototype.markerPoint=function(k,l,m){var n=arguments.length<=3||arguments[3]===undefined?0:arguments[3],o=arguments.length<=4||arguments[4]===undefined?this.currentTimestamp():arguments[4],p=this.$QuickPerformanceLogger4(k,n);if(!p)return;this.$QuickPerformanceLogger1[k][n].points[l]={data:m,timeSinceStart:o-p.timestamp}};j.prototype.markerEnd=function(k,l){__p&&__p();var m=arguments.length<=2||arguments[2]===undefined?0:arguments[2],n=arguments.length<=3||arguments[3]===undefined?this.currentTimestamp():arguments[3],o=this.$QuickPerformanceLogger1[k];if(!o)return;var p=o[m];if(!p)return;var q=c("QuickLogEvents")[k.toString()];if(!q)return;var r=p.points;this.uploadEvent({event_is_intermediate_marker:"false",instance_id:m,quicklog_module:q.moduleName,quicklog_event:q.name,quicklog_action:i[l],sample_rate:p.sampleRate,trace_tags:"",value:n-p.timestamp,annotations:p.annotations,annotations_int:p.annotationsInt,annotations_int_array:p.annotationsIntArray,annotations_string_array:p.annotationsStringArray,points:Object.keys(r).map(function(s){return{data:r[s].data,name:s,timeSinceStart:r[s].timeSinceStart}})});delete this.$QuickPerformanceLogger1[k][m]};j.prototype.markerCancel=function(k){var l=arguments.length<=1||arguments[1]===undefined?0:arguments[1],m=this.$QuickPerformanceLogger1[k];if(m)delete m[l]};j.prototype.clearAllMarkers=function(){this.$QuickPerformanceLogger1={}};j.prototype.setAlwaysOnSampleRate=function(k,l){this.$QuickPerformanceLogger2[k]=l};j.prototype.currentTimestamp=function(){return c("performance").now()};j.prototype.uploadEvent=function(event){c("Banzai").post("perf",this.addCanonicalFields(event))};j.prototype.addCanonicalFields=function(event){return{appversion:"0 (web)",deviceid:"0",extra:event}};f.exports=new j()}),null);
__d("FeedImageLoadPerfLogger",["DOMQuery","Event","FeedQuickLogModule","QuickLogActionType","QuickPerformanceLogger","Run","crc32"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FeedQuickLogModule").IMAGE_LOAD_WWW;function i(o){if(!o||!o.target||!o.target.src)return;var p=o.target,q=p.src;if(p.complete)c("QuickPerformanceLogger").markerEnd(h,c("QuickLogActionType").SUCCESS,c("crc32")(q));k(p)}function j(o){if(!o||!o.target||!o.target.src)return;var p=o.target,q=p.src;if(!q)return;c("QuickPerformanceLogger").markerEnd(h,c("QuickLogActionType").ERROR,c("crc32")(q));k(p)}function k(o){if(!o)return;o.removeEventListener("load",i,true);o.removeEventListener("error",j,true)}function l(o){__p&&__p();if(!o||!o.src)return;c("QuickPerformanceLogger").markerStart(h,c("crc32")(o.src));if(o.complete){c("QuickPerformanceLogger").markerEnd(h,c("QuickLogActionType").SUCCESS,c("crc32")(o.src));return}o.addEventListener("load",i,true);o.addEventListener("error",j,true);c("Run").onLeave(function(){m(o)})}function m(o){if(!o||!o.src)return;if(o.complete)return;c("QuickPerformanceLogger").markerEnd(h,c("QuickLogActionType").CANCEL,c("crc32")(o.src));k(o)}var n={startMarkers:function o(p){if(!p)return;var q=c("DOMQuery").scry(p,"img");q.forEach(function(r){l(r)})},cancelMarkers:function o(p){if(!p)return;var q=c("DOMQuery").scry(p,"img");q.forEach(function(r){m(r)})}};f.exports=n}),null);
__d("MainThreadPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MainThreadPerformanceLoggerConfig",this.$MainThreadPerformanceTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MainThreadPerformanceLoggerConfig",this.$MainThreadPerformanceTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:MainThreadPerformanceLoggerConfig",this.$MainThreadPerformanceTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$MainThreadPerformanceTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$MainThreadPerformanceTypedLogger1)};h.prototype.updateData=function(j){this.$MainThreadPerformanceTypedLogger1=babelHelpers["extends"]({},this.$MainThreadPerformanceTypedLogger1,j);return this};h.prototype.setAction=function(j){this.$MainThreadPerformanceTypedLogger1.action=j;return this};h.prototype.setEventDurationMs=function(j){this.$MainThreadPerformanceTypedLogger1.event_duration_ms=j;return this};h.prototype.setFrameDrops=function(j){this.$MainThreadPerformanceTypedLogger1.frame_drops=j;return this};h.prototype.setLargeFrameDrops=function(j){this.$MainThreadPerformanceTypedLogger1.large_frame_drops=j;return this};h.prototype.setMaxFrameDrops=function(j){this.$MainThreadPerformanceTypedLogger1.max_frame_drops=j;return this};h.prototype.setParallelActions=function(j){this.$MainThreadPerformanceTypedLogger1.parallel_actions=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setVC=function(j){this.$MainThreadPerformanceTypedLogger1.vc=j;return this};var i={action:true,event_duration_ms:true,frame_drops:true,large_frame_drops:true,max_frame_drops:true,parallel_actions:true,vc:true};f.exports=h}),null);
__d("AdAllocationIntegrityGapsInfo",["FeedStoryCategory"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.story_category=i;this.dist_to_top=-1;this.dist_to_fixed=-1;this.dist_to_promo=-1;this.dist_to_sponsored=-1;this.dist_to_engagement=-1}h.prototype.setDistToTop=function(i){"use strict";this.dist_to_top=i};h.prototype.setDistIfAbsent=function(i,j){"use strict";__p&&__p();if(j<0||i===c("FeedStoryCategory").UNKNOWN||i===c("FeedStoryCategory").ORGANIC)return;switch(i){case c("FeedStoryCategory").ENGAGEMENT:this.dist_to_engagement=this.$AdAllocationIntegrityGapsInfo1(j,this.dist_to_engagement);break;case c("FeedStoryCategory").FIXED_POSITION:this.dist_to_fixed=this.$AdAllocationIntegrityGapsInfo1(j,this.dist_to_fixed);break;case c("FeedStoryCategory").PROMOTION:this.dist_to_promo=this.$AdAllocationIntegrityGapsInfo1(j,this.dist_to_promo);break;case c("FeedStoryCategory").SPONSORED:this.dist_to_sponsored=this.$AdAllocationIntegrityGapsInfo1(j,this.dist_to_sponsored);break}};h.prototype.$AdAllocationIntegrityGapsInfo1=function(i,j){"use strict";if(j===-1)return i;return j};f.exports=h}),null);
__d("AdAllocationIntegrityUtils",["FeedStoryCategory","collectDataAttributes","DataAttributeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="data-story_category",i="data-dedupekey",j="ft",k={getFeedStoryCategory:function l(m){__p&&__p();var n=c("collectDataAttributes")(m,[j]).ft,o=c("DataAttributeUtils").getDataAttribute(m,h);if(o)switch(o){case"2":return c("FeedStoryCategory").ENGAGEMENT;case"3":return c("FeedStoryCategory").FIXED_POSITION;case"4":return c("FeedStoryCategory").PROMOTION;default:return c("FeedStoryCategory").UNKNOWN}else if(n.ei)return c("FeedStoryCategory").SPONSORED;else return c("FeedStoryCategory").ORGANIC},isGapRuleCategory:function l(m){if(m===c("FeedStoryCategory").SPONSORED||m===c("FeedStoryCategory").ENGAGEMENT||m===c("FeedStoryCategory").FIXED_POSITION||m===c("FeedStoryCategory").PROMOTION)return true;else return false},getDedupKey:function l(m){return c("DataAttributeUtils").getDataAttribute(m,i)}};f.exports=k}),null);
__d("ViewportTrackingHooks",["Base64"],(function a(b,c,d,e,f,g){__p&&__p();var h={},i=[],j={registerFeedObject:function k(l,m){h[l]=c("Base64").encode(m)},updateVisibleViewportObjects:function k(l){__p&&__p();var m=[],n=false;for(var o=0;o<l.length;o++){var p=l[o],q=p.id;while(!(q in h)&&p.firstChild!=undefined&&p.firstChild.id!=undefined&&p.firstChild.id.startsWith("u_")){q=p.firstChild.id;p=p.firstChild}if(q in h){m.push(h[q]);if(!(o in i)||i[o]!=h[q])n=true}}if(!n&&i.length!=m.length)n=true;if(n){i=m;if(typeof __EXT__updateVisibleViewportObjects==="function")__EXT__updateVisibleViewportObjects(i)}}};f.exports=j}),null);
__d("viewportTrackingBuilder",[],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){var j=null;return{factory:i,singleton:function k(){if(!j)j=i.apply(undefined,arguments);return j},clearSingleton:function k(){j=null}}};f.exports=h}),null);
__d("ViewportTracking",["cx","invariant","AdAllocationIntegrityGapsInfo","AdAllocationIntegrityUtils","Arbiter","Banzai","BanzaiScuba","CSS","CurrentUser","DOM","DOMDimensions","Event","LitestandMessages","NavigationMessage","pageID","Run","SubscriptionsHandler","TimeSlice","UserActivity","ViewportTrackingHelper","ViewportTrackingHooks","clearTimeout","clickRefAction","collectDataAttributes","debounce","getElementPosition","getViewportDimensions","throttle","viewportTrackingBuilder","setTimeout"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=97,k="vpv",l=3,m=2,n=1,o=0,p=1,q=2,r=3,s=4;function t(w){this.cachedAllStories=[];this.cachedVisibleStories={init:false,data:{}};this.fireTimer=this.fireTimer.bind(this);this.logAnnotatedVPV=this.logAnnotatedVPV.bind(this);this.markStoryRead=this.markStoryRead.bind(this);this.behavior=w}t.prototype.init=function(w){__p&&__p();this.useBanzai=true;this.vpvDebug=!!w.vpv_debug;this.vpvdDebug=!!w.vpvd_debug;this.vpvdAnalysis=!!w.vpvd_analysis;this.trackingHooks=!!w.tracking_hooks;this.ctaLoggingEnabled=!!w.cta_logging_enabled;this.adAllocationIntegrityLoggingEnabled=!!w.ad_allocation_integrity_logging_enabled;this.readStoryIDs={};this.annotatedStoryIDs={};this.minSizeToBeVisible=200;this.storyIDsWasInView={};this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.userActivityPollingInterval=5e3;this.timeToBeConsideredInactive=15e3;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=9e4;this.active_state_duration=1e3;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.invalidateAllStoriesCache();this.cachedViewportHeight=c("getViewportDimensions")().height;this.isTimetrackingEnabled=false;this.activeStories={};this.userInactiveLock=false;this.userActivityPollerTimeoutID=null;this._headLoadStoryCount=0;if(this.behavior.getDataFromConfig)this.behavior.getDataFromConfig(w,this);if(this.isTimetrackingEnabled){this.lastMouseX=-1;this.lastMouseY=-1;this.lastStreamY=-1;this.latestStreamYChangedTimeStamp=-1;this.userFocus=q;this.latestUserFocus=q;this.latestUserActivity="init";this.focusedStory=null;this.latestFocusedStory=null;this.latestActiveStory=null;this.totalVPVDuration={}}if(w.tracking_duration_config){this.scrollThrottlingInterval=w.tracking_duration_config.scroll_throttling_interval;this.mouseThrottlingInterval=w.tracking_duration_config.mouse_throttling_interval;this.keyboardThrottlingInterval=w.tracking_duration_config.keyboardThrottlingInterval;this.userActivityPollingInterval=w.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=w.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=w.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=w.tracking_duration_config.min_time_to_report_immediately;this.active_state_duration=w.tracking_duration_config.active_state_duration;this.height_diff_to_change_state=w.tracking_duration_config.story_height_diff_to_change_state;this.focused_state_duration=w.tracking_duration_config.focused_state_duration;this.discardVPVDIntervalThreshold=w.tracking_duration_config.discard_vpvd_interval_threshold}w.record_delay!==undefined||i(0);var x=c("debounce")(this.fireTimer,w.record_delay,this);this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;if(this.annotatedVPVLogging)this.initialStories.forEach(this.logAnnotatedVPV,this);this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(this._getScrollListener(x),c("Event").listen(window,"resize",function(){this.invalidateVisibleStoriesCache();this.cachedViewportHeight=c("getViewportDimensions")().height;x()}.bind(this)),c("Event").listen(window,"focus",function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,"window_focus")}.bind(this)),c("Event").listen(window,"blur",function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(true,"window_blur")}.bind(this)),c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,this.cleanup.bind(this)),c("Arbiter").subscribe("Stream/totalHeadLoadedStories",function(B,C){this._headLoadStoryCount=C.count}.bind(this)),c("Arbiter").subscribe(c("LitestandMessages").STORIES_INSERTED,function(){if(!this.initialStoriesLogged){var B=this.getStoriesInView();B.forEach(this.logAnnotatedVPV,this)}else x();if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,"stories_inserted")}.bind(this)));if(this.isTimetrackingEnabled&&this.behavior.getStream){this.updateTimeTrackingData(false,"init");var y=c("throttle")(function(event){this.invalidateVisibleStoriesCache();this.handleScroll(event)}.bind(this),this.scrollThrottlingInterval),z=c("throttle")(function(event){return this.handleKeyboard(event)}.bind(this),this.keyboardThrottlingInterval),A=c("throttle")(function(event){return this.handleMouse(event)}.bind(this),this.mouseThrottlingInterval);this.subscriptions.addSubscriptions(c("Event").listen(window,"scroll",y),c("Event").listen(document.documentElement,"DOMMouseScroll",y,undefined,{passive:true}),c("Event").listen(document.documentElement,"mousewheel",y,undefined,{passive:true}),c("Event").listen(document.documentElement,"keydown",z),c("Event").listen(document.documentElement,"mouseover",A),c("Event").listen(document.documentElement,"mousemove",A),c("Event").listen(document.documentElement,"click",function(event){this.handleMouse(event)}.bind(this)),c("Arbiter").subscribe("Event/stop",function(B,C){this.handleMouse(C.event)}.bind(this)),c("Arbiter").subscribe("PhotoSnowlift.OPEN",function(){this.userFocus=r;this.handleLayers()}.bind(this)),c("Arbiter").subscribe("PhotoSnowlift.CLOSE",function(){this.userFocus=p;this.focusedStory=null;this.updateTimeTrackingData(false,"snowlift_close")}.bind(this)));this._userActivityPoller()}c("Run").onLeave(this.cleanup.bind(this));c("Run").onUnload(this.cleanup.bind(this))};t.prototype._getScrollListener=function(w){return c("Event").listen(window,"scroll",w)};t.prototype.cleanup=function(){__p&&__p();if(this.subscriptions){this.subscriptions.release();this.subscriptions=null}if(this.isTimetrackingEnabled){c("clearTimeout")(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true,"cleanup")}if(this.annotatedVPVLogging){var w=this.getStoriesInView();w.forEach(this.logAnnotatedVPV,this)}this.initialStories=[];this._headLoadStoryCount=0};t.prototype.fireTimer=function(){__p&&__p();if(!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true}this.storiesInView=this.getStoriesInView();this.storiesInView.forEach(this.markStoryRead,this);if(this.trackingHooks){var w=this.isTimetrackingEnabled?this.getVisibleStoriesFromCache():this.getAllStoriesInView(),x=[],y=Object.keys(w);for(var z=0,A=y.length;z<A;z++){var B=y[z];if(w[B].story)x.push(w[B].story)}c("ViewportTrackingHooks").updateVisibleViewportObjects(x)}};t.prototype.getSessionID=function(){return null};t.prototype._userActivityPoller=function(){__p&&__p();if(!this.userInactiveLock&&!c("UserActivity").isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.userFocus=q;this.updateTimeTrackingData(false,"user_activity_inactive");c("UserActivity").subscribeOnce(function(){this.userFocus=p;this.updateTimeTrackingData(false,"user_activity_active");this.userInactiveLock=false}.bind(this))}this.userActivityPollerTimeoutID=c("setTimeout")(c("TimeSlice").guard(this._userActivityPoller.bind(this),"ViewportTracking poll setTimeout",{propagationType:c("TimeSlice").PropagationType.EXECUTION}),this.userActivityPollingInterval)};t.prototype.getQueryID=function(w){return-1};t.prototype.getFBFeedLocations=function(w){return-1};t.prototype.getFBFeedInsertionPosition=function(w){return-1};t.prototype.createVPVDTimer=function(w){var x=document.createElement("label");x.setAttribute("for",w.toString());x.setAttribute("class","vpvd_debug_timer");return x};t.prototype.updateVPVDTimer=function(w){__p&&__p();var x=this.activeStories[w].story;if(!x)return;var y=c("DOM").scry(x,".vpvd_debug_timer");if(!y.length){y=[this.createVPVDTimer(x),this.createVPVDTimer(x)];var z=c("DOM").scry(x,".UFIRow");if(z.length&&z[z.length-1].clientWidth>0)z[z.length-1].appendChild(y[0]);else x.appendChild(y[0]);x.insertBefore(y[1],x.firstChild)}var A=this.totalVPVDuration[w],B=Math.floor(A/1e3)+"."+Math.floor(A%1e3/100);c("DOM").setContent(y[0],B);c("DOM").setContent(y[1],B)};t.prototype.updateVPVDTimers=function(){for(var w in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,w))this.updateVPVDTimer(w)};t.prototype.logVpvdAnalysis=function(w,x,y,z,A,B){__p&&__p();var C=new(c("BanzaiScuba"))("vpv_duration");C.addDenorm("qid",this.getQueryID(this.activeStories[w].story));C.addDenorm("uid",c("CurrentUser").getID());C.addDenorm("vsid",w);C.addInteger("time",Math.round(Date.now()/1e3));C.addInteger("duration",z);C.addInteger("total_duration",A);C.addNormal("story_state",this.activeStories[w].state);C.addNormal("is_active_state",y);C.addNormal("num_visible_stories",this.numVisibleStories);C.addInteger("story_height",this.activeStories[w].story_height);C.addInteger("story_visible_height",this.activeStories[w].height);C.addInteger("state_visible_height",B);C.addInteger("total_visible_height",this.totalVisibleHeight);C.addInteger("total_height",this.totalHeight);C.addNormal("user_focus",this.latestUserFocus);C.addNormal("next_user_focus",this.userFocus);C.addInteger("vpvd",x);C.addInteger("accumulated_vpvd",this.activeStories[w].vpvd);C.addNormal("user_activity",this.latestUserActivity);C.addNormal("next_user_activity",this.userActivity);C.addInteger("story_position_y",this.activeStories[w].y);C.addInteger("feed_insertion_position",this.getFBFeedInsertionPosition(this.activeStories[w].story));C.addNormal("visible_position",this.activeStories[w].visible_position);C.addNormal("is_focused_story",this.activeStories[w].is_focused);C.post()};t.prototype.shouldDiscardStory=function(w){var x=this.activeStories[w].height||0;return x!=this.activeStories[w].story_height&&x<this.totalHeight/2};t.prototype.calculateTotalHeight=function(){this.totalHeight=0;for(var w in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,w))this.totalHeight+=this.activeStories[w].height};t.prototype.updateVPVDurations=function(w){__p&&__p();var x;if(this.latestUserFocus===q||w-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;var y=(x={},x[n]=0,x[m]=0,x[l]=0,x),z=w-this.latestTimeTrackingTimestamp>=this.focused_state_duration;this.totalVisibleHeight=0;for(var A in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,A))if(!(this.latestUserFocus===p&&z&&this.shouldDiscardStory(A))){var B=this.activeStories[A].state||null,C=this.activeStories[A].height||0;if(B!==null&&Object.prototype.hasOwnProperty.call(y,B))y[B]+=C;this.totalVisibleHeight+=C}var D=0,E=w-this.latestTimeTrackingTimestamp;if(this.latestUserFocus===p){E=y[l]>0?this.focused_state_duration:this.active_state_duration;E=Math.min(E,w-this.latestTimeTrackingTimestamp);D=w-this.latestTimeTrackingTimestamp-E}var F=0,G=l;for(var H=l;H>=n;H--)if(y[H]>0){F=y[H];G=H;break}var I=y[l]+y[m]+y[n],J=0;for(A in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,A)){if(this.latestUserFocus===p&&z&&this.shouldDiscardStory(A))continue;var K=this.activeStories[A].state||o;if(F>0&&K>=G){var L=this.activeStories[A].height||0;J=E*(L/F);if(this.vpvdAnalysis&&E>0)this.logVpvdAnalysis(A,J,true,E,E+D,F);this.activeStories[A].vpvd+=J;this.totalVPVDuration[A]+=J}if(I>0){var M=this.activeStories[A].height||0;J=D*(M/I);if(this.vpvdAnalysis&&D>0)this.logVpvdAnalysis(A,J,false,D,E+D,I);this.activeStories[A].vpvd+=J;this.totalVPVDuration[A]+=J}}};t.prototype.updateActiveStory=function(w,x,y,z){this.activeStories[w].state=x;this.activeStories[w].ts=y;this.activeStories[w].height_snapshot=z[w].height;this.activeStories[w].is_focused=this.focusedStory===z[w].story;this.activeStories[w].story_height=z[w].story_height;if(this.vpvdAnalysis){this.activeStories[w].visible_position=z[w].visible_position;this.activeStories[w].y=z[w].y}};t.prototype.updateActiveStories=function(w,x){__p&&__p();for(var y in w)if(Object.prototype.hasOwnProperty.call(w,y))if(y in this.activeStories){var z=w[y].height||0;this.activeStories[y].height=z;var A=z-(this.activeStories[y].height_snapshot||0);if(this.focusedStory===w[y].story)this.updateActiveStory(y,l,x,w);else if(A<=-this.height_diff_to_change_state)this.updateActiveStory(y,this.shouldDiscardStory(y)?o:n,x,w);else if(A>=this.height_diff_to_change_state||this.activeStories[y].is_focused||this.activeStories[y].height===this.activeStories[y].story_height)this.updateActiveStory(y,m,x,w)}else{this.storyIDsWasInView[y]=true;this.activeStories[y]={evp_ts:x,story:w[y].story,height:w[y].height,vpvd:0};if(!this.totalVPVDuration[y])this.totalVPVDuration[y]=0;this.updateActiveStory(y,m,x,w);if(this.behavior.afterStoryEntersViewport)this.behavior.afterStoryEntersViewport(this.activeStories[y].story)}};t.prototype.recordVPVDurations=function(w,x){__p&&__p();for(var y in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,y))if(x||!(y in w)){var z=this.activeStories[y].vpvd||0;if(z>this.focused_state_duration||z===this.totalVPVDuration[y])this.recordTimeStoryWasInView(this.activeStories[y]);if(this.behavior.afterStoryExitsViewport)this.behavior.afterStoryExitsViewport(this.activeStories[y].story);delete this.activeStories[y]}};t.prototype.updateTimeTrackingData=function(w,x){__p&&__p();this.userActivity=x;if(!this.activeStories)this.activeStories={};var y=Date.now();if(!this.latestTimeTrackingTimestamp)this.latestTimeTrackingTimestamp=y;var z=this.getVisibleStoriesFromCache();this.calculateTotalHeight();this.updateVPVDurations(y);this.updateActiveStories(z,y);if(this.vpvdDebug)this.updateVPVDTimers();this.recordVPVDurations(z,w);if(w)this.latestTimeTrackingTimestamp=0;else this.latestTimeTrackingTimestamp=y;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;if(this.focusedStory)this.latestActiveStory=this.focusedStory;this.latestFocusedStory=this.focusedStory;this.focusedStory=null};t.prototype.needsToUpdateTimeTrackingData=function(){return!(this.latestUserFocus===this.userFocus&&(this.userFocus===q||this.userFocus===p&&!this.latestFocusedStory&&!this.focusedStory))};t.prototype.getfocusedStory=function(w){var x=this.getVisibleStoriesFromCache();for(var y in x)if(Object.prototype.hasOwnProperty.call(x,y)){var z=x[y].story;if(z&&c("ViewportTrackingHelper").isDescendantOf(w,z))return z}return null};t.prototype.handleLayers=function(){if(this.userFocus===r||this.userFocus===s){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(false,"media_layer");return true}return false};t.prototype.didInteractWithStream=function(w){if(!this.behavior.getStream)return false;var x=this.behavior.getStream();return c("ViewportTrackingHelper").isDescendantOf(w,x)||c("ViewportTrackingHelper").isDescendantOf(x,w)};t.prototype.handleScroll=function(event){__p&&__p();if(this.handleLayers())return;var w=Date.now();this.behavior.getStream||i(0);var x=c("getElementPosition")(this.behavior.getStream()).y;if(x!=this.lastStreamY||w-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(event.target)){this.latestStreamYChangedTimeStamp=w;this.userFocus=p}else this.userFocus=q;this.lastStreamY=x;if(this.userFocus===p||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,"scroll")};t.prototype.handleKeyboard=function(event){__p&&__p();if(this.handleLayers())return;if(this.didInteractWithStream(event.target)){this.userFocus=p;this.focusedStory=this.getfocusedStory(event.target)}else if(c("CSS").hasClass(event.target,"shareInput")){this.userFocus=p;this.focusedStory=this.latestActiveStory}else this.userFocus=q;if(this.userFocus===p||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,"keyboard")};t.prototype.handleMouse=function(event){__p&&__p();if(this.handleLayers())return;if(event.type!="click"&&event.clientX===this.lastMouseX&&event.clientY===this.lastMouseY)return;if(event.type==="click")this.invalidateVisibleStoriesCache();if(this.didInteractWithStream(event.target)){this.userFocus=p;this.focusedStory=this.getfocusedStory(event.target)}else this.userFocus=q;this.lastMouseX=event.clientX;this.lastMouseY=event.clientY;if(this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,event.type)};t.prototype.getStoriesInView=function(){__p&&__p();var w=this.behavior.getAllStories(),x=[],y=false;for(var z=0;z<w.length;z++){var A=w[z],B=this.behavior.getStoryID(A);if(B&&this.hasBeenVisible(B))continue;if(c("ViewportTrackingHelper").isVisible(A,this.minSizeToBeVisible)){if(A.getAttribute("data-insertion-position")===null)A.setAttribute("data-insertion-position",(z-this._headLoadStoryCount).toString());x.push(A);y=true}else if(y)break}return x};t.prototype.getAllStoriesFromCache=function(){if(this.cachedAllStories.length===0)this.cachedAllStories=this.behavior.getAllStories();return this.cachedAllStories};t.prototype.invalidateAllStoriesCache=function(){this.cachedAllStories=[];this.invalidateVisibleStoriesCache()};t.prototype.getVisibleStoriesFromCache=function(){if(!this.cachedVisibleStories.init)this.cachedVisibleStories={init:true,data:this.getAllStoriesInView()};return this.cachedVisibleStories.data};t.prototype.invalidateVisibleStoriesCache=function(){this.cachedVisibleStories={init:false,data:{}}};t.prototype.getAllStoriesInView=function(){__p&&__p();var w=this.getAllStoriesFromCache(),x={},y=false,z=0,A=w.length,B=1,C=w.length;if(this._indexOfLastVisibleStoryOnPreviousPass>A/2){z=A-1;A=-1;B=-B}for(var D=z;D!=A;D+=B){var E=w[D],F=c("ViewportTrackingHelper").getHeightIfVisible(E,Math.min(this.minSizeToBeVisible,this.minFractionToBeVisibleForTimetracking*c("DOMDimensions").getElementDimensions(E).height));if(F>0||E===this.focusedStory){if(E.getAttribute("data-insertion-position")===null)E.setAttribute("data-insertion-position",(D-this._headLoadStoryCount).toString());var G=this.behavior.getStoryID(E);if(G){x[G]={story:E,height:F,story_height:c("DOMDimensions").getElementDimensions(E).height};y=true;if(this.vpvdAnalysis){x[G].y=c("getElementPosition")(E).y;x[G].visible_position=D;C=Math.min(C,D)}}}else if(y){this._indexOfLastVisibleStoryOnPreviousPass=D-B;break}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(G in x)if(Object.prototype.hasOwnProperty.call(x,G)){x[G].visible_position-=C;this.numVisibleStories++}}return x};t.prototype.getTimetrackingDataToLog=function(w){var x={evt:j,time_spent_id:c("pageID"),vpvd_start_timestamp:w.evp_ts||null,vpvd_time_delta:Math.round(w.vpvd||0),story_height:c("DOMDimensions").getElementDimensions(w.story).height,viewport_height:this.cachedViewportHeight};return{ft:x}};t.prototype.getGapsInfoToLog=function(w){__p&&__p();if(w===null||w===undefined)return null;var x=c("AdAllocationIntegrityUtils").getFeedStoryCategory(w),y=new(c("AdAllocationIntegrityGapsInfo"))(x);if(!c("AdAllocationIntegrityUtils").isGapRuleCategory(x))return y;else{var z=c("AdAllocationIntegrityUtils").getDedupKey(w);if(z===null)return null;var A=this.behavior.getAllStories().filter(function(F){return Object.prototype.hasOwnProperty.call(this.storyIDsWasInView,this.behavior.getStoryID(F))}.bind(this)),B=-1;for(var C=A.length-1;C>=0;C--){var D=c("AdAllocationIntegrityUtils").getDedupKey(A[C]);if(B<0){if(D!==null&&z===D){B=C;y.setDistToTop(B+1)}}else{var E=c("AdAllocationIntegrityUtils").getFeedStoryCategory(A[C]);if(c("AdAllocationIntegrityUtils").isGapRuleCategory(E))y.setDistIfAbsent(E,B-C)}}return y}};t.prototype.recordTimeStoryWasInView=function(w){__p&&__p();if(!this.isTimetrackingEnabled)return;var x=w.story;if(!w.vpvd||!x)return;if(w.vpvd>0){var y=this.getTimetrackingDataToLog(w),z=c("collectDataAttributes")(x,["ft"]);Object.assign(y.ft,z.ft);if(this.adAllocationIntegrityLoggingEnabled){var A=this.getGapsInfoToLog(x);Object.assign(y.ft,A)}var B=!!z.ft.ei&&y.ft.vpvd_time_delta>this.minTimeToReportImmediately;if(y.ei)delete y.ei;this.sendDataToLog(x,y,B)}};t.prototype.hasBeenVisible=function(w){return w in this.readStoryIDs};t.prototype.sendDataToLog=function(w,x,y){__p&&__p();if(this.useBanzai){var z={};if(y)z.delay=3e3;var A=this.getSessionID();if(A)x.ft.session_id=A;x.ft.raw_client_time=Date.now()/1e3;c("Banzai").post("feed_tracking",x,z)}else c("clickRefAction")(k,w,null,"FORCE",x)};t.prototype.markStoryRead=function(w){__p&&__p();var x=this.behavior.getStoryID(w);if(!x||this.hasBeenVisible(x))return;this.readStoryIDs[x]=true;this.annotatedStoryIDs[x]=true;var y=this._getDataToLogImpl(w),z=c("collectDataAttributes")(w,["ft"]);Object.assign(y.ft,z.ft);delete y.ei;this.sendDataToLog(w,y,false);if(this.vpvDebug)c("CSS").addClass(w,"_5m7s")};t.prototype.logAnnotatedVPV=function(w){var x=this.behavior.getStoryID(w);if(!x||x in this.annotatedStoryIDs)return;this.annotatedStoryIDs[x]=true;var y=this._getDataToLogImpl(w),z=c("collectDataAttributes")(w,["ft"]);Object.assign(y.ft,z.ft);delete y.ei;y.ft.vpv_ft_only=1;this.sendDataToLog(w,y,false)};t.prototype._getDataToLogImpl=function(w){var x=this.behavior.getDataToLog(w);if(!x.ft)x.ft={};return x};t.clearSingleton=function(){};var u={getAllStories:function w(){return[]},getStoryID:function w(x){return null},getDataToLog:function w(x){return{}}},v=c("viewportTrackingBuilder")(function(w){return new t(u)});t.factory=v.factory.bind(v);t.singleton=v.singleton.bind(v);t.clearSingleton=v.clearSingleton.bind(v);t.getBehavior=function(){return u};f.exports=t}),null);
__d("collectSubtreeData",[],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l,m,n){__p&&__p();if(j.offsetWidth===0&&j.offsetHeight===0)return n;var o={};if(j.getAttribute)for(s=0;s<k.length;s++){u=k[s];var p=j.getAttribute(l[u]);if(p){o[u]={};var q=JSON.parse(p);for(var r in m)if(q[r]!==undefined){o[u][r]=true;if(n[u]===undefined)n[u]={};if(n[u][r]===undefined)n[u][r]=[];if(m[r].length>0)n[u][r].push(m[r]);n[u][r].push("("+q[r])}}}for(var s=0;s<j.childNodes.length;s++){var t=j.childNodes[s];h(t,k,l,m,n)}for(var u in o)for(var v in o[u]){var w=n[u][v][n[u][v].length-1];if(w.length>0&&w.charAt(0)=="(")n[u][v][n[u][v].length-1]=w.substr(1);else n[u][v].push(")")}return n}function i(j,k){var l={};for(var m=0;m<k.length;++m)l[k[m]]="data-"+k[m];var n={tn:"","tn-debug":","},o={};h(j,k,l,n,o);for(var p in o)for(var q in o[p])o[p][q]=o[p][q].join("");return o}f.exports=i}),null);
__d("recordTNTreeData",["collectSubtreeData"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){__p&&__p();var k={},l=c("collectSubtreeData")(i,["ft"]);for(var m in l.ft){k[m+"_tree"]=l.ft[m];if(m==="tn-debug")i.setAttribute("tn-debug_subtree",l.ft[m])}k.evt_value=i.offsetHeight;if(j)k.offset=Math.max(0,i.offsetTop-j.offsetTop);return k}f.exports=h}),null);
__d("PageLikeButtonLazy",["Arbiter","Bootloader","Event","PageLikeConstants","SubscriptionsHandler","ifRequired","setImmediate"],(function a(b,c,d,e,f,g){__p&&__p();var h=new(c("SubscriptionsHandler"))(),i=[],j=false,k=false,l=c("PageLikeConstants").LIKED,m=c("PageLikeConstants").UNLIKED,n=c("PageLikeConstants").SPM_CALLOUT,o=c("PageLikeConstants").LAZY_CLICK,p={init:function q(r,s,t,u,v,w,x,y,z,A,B,C){p._initWithArgs(r,s,t,u,v,w,x,y,z,A,B,C)},_initWithArgs:function q(){for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];c("ifRequired")("PageLikeButton",function(u){return u.init.apply(u,s)},function(){s[11]=babelHelpers["extends"]({},s[11],{isLazy:true});this._startListening(s[1]);i.push(s)}.bind(this))},_startListening:function q(r){__p&&__p();if(!j){j=true;h.addSubscriptions(c("Arbiter").subscribe([l,m,n],function(event,s){c("Arbiter").inform(event+".lazy",s,c("Arbiter").BEHAVIOR_PERSISTENT);this._bootload()}.bind(this)))}h.addSubscriptions(c("Event").listen(r,"click",function(event){c("Arbiter").inform(o,{event:event,node:r},c("Arbiter").BEHAVIOR_PERSISTENT);c("setImmediate")(function(){return this._bootload()}.bind(this))}.bind(this)))},_bootload:function q(){if(k)return;k=true;c("Bootloader").loadModules(["PageLikeButton"],function(r){h.release();i.forEach(function(s){return r.init.apply(r,s)})},"PageLikeButtonLazy")}};f.exports=p}),null);
__d("MainThreadPerformanceMonitorActionEntry",["MainThreadPerformanceTypedLogger","performanceNow"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){this.$MainThreadPerformanceMonitorActionEntry2=0;this.$MainThreadPerformanceMonitorActionEntry3=0;this.$MainThreadPerformanceMonitorActionEntry5=0;this.$MainThreadPerformanceMonitorActionEntry1=i;this.$MainThreadPerformanceMonitorActionEntry6=c("performanceNow")();this.$MainThreadPerformanceMonitorActionEntry4=new Set(j)}h.prototype.addLargeFrameDrops=function(i){this.$MainThreadPerformanceMonitorActionEntry2+=i;return this};h.prototype.addSmallFrameDrops=function(i){this.$MainThreadPerformanceMonitorActionEntry3=Math.max(this.$MainThreadPerformanceMonitorActionEntry3,i);this.$MainThreadPerformanceMonitorActionEntry5+=i;return this};h.prototype.addParallelAction=function(i){this.$MainThreadPerformanceMonitorActionEntry4.add(i);return this};h.prototype.log=function(){if(this.$MainThreadPerformanceMonitorActionEntry5>0){var i=c("performanceNow")()-this.$MainThreadPerformanceMonitorActionEntry6;new(c("MainThreadPerformanceTypedLogger"))().setFrameDrops(this.$MainThreadPerformanceMonitorActionEntry5).setLargeFrameDrops(this.$MainThreadPerformanceMonitorActionEntry2).setMaxFrameDrops(this.$MainThreadPerformanceMonitorActionEntry3).setAction(this.$MainThreadPerformanceMonitorActionEntry1).setEventDurationMs(Math.round(i)).setParallelActions(this.$MainThreadPerformanceMonitorActionEntry4).log()}};f.exports=h}),null);
__d("MainThreadPerformanceMonitor",["MainThreadPerformanceMonitorActionEntry","MainThreadPerformanceMonitorConfig","Random","Run","SubscriptionsHandler","Visibility","clearTimeout","gkx","requestAnimationFrame","setTimeout"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MainThreadPerformanceMonitorConfig").actionMaxDuration||12e4,i=1,j=4,k=60,l=1e3/k,m=l*60,n=new Map(),o={},p=void 0,q=void 0,r=new(c("SubscriptionsHandler"))();function s(){if(r)r.release();w();n.clear()}function t(){v();r.addSubscriptions(c("Run").onLeave(s),c("Visibility").addListener(c("Visibility").VISIBLE,function(){return v()}),c("Visibility").addListener(c("Visibility").HIDDEN,function(){return w()}))}function u(z){__p&&__p();var A;if(q){var B=z-q;if(B<m)(function(){var C=Math.max(Math.round(B/l)-1,0),D=C>=i?C/i:0,E=C>=j?C/j:0;n.forEach(function(F){return F.addSmallFrameDrops(D).addLargeFrameDrops(E)})})()}q=z;p=c("requestAnimationFrame")(u)}function v(){if(!p){q=0;p=c("requestAnimationFrame")(u)}}function w(){cancelAnimationFrame(p);p=null}function x(z){var A=c("MainThreadPerformanceMonitorConfig").actionSamplingRates[z];if(A)return c("Random").coinflip(A);return false}var y={isEnabled:function z(){return c("gkx")("AT48oP3qlO_qasOV_h94qll3jPQ1V5QVFT5P3MtrMKmfW8diaT5FIfE8P2aCarVGEDmKzy_8uE5m_sPgjM4m5eD2RJ8KRZAEA2IEZex1eHhOPQ")},start:function z(A){__p&&__p();if(n.has(A))return true;if(!this.isEnabled())return false;n.forEach(function(B){return B.addParallelAction(A)});if(!x(A))return false;if(n.size===0)t();n.set(A,new(c("MainThreadPerformanceMonitorActionEntry"))(A,n.keys()));o[A]=c("setTimeout")(function(){return this.stop(A)}.bind(this),h);return true},stop:function z(A){__p&&__p();if(!this.isEnabled())return;var B=n.get(A);if(!B)return;B.log();n["delete"](A);c("clearTimeout")(o[A]);delete o[A];if(n.size===0)s()}};f.exports=y}),null);
__d("StreamViewportTracking",["DataAttributeUtils","DOM","DOMDimensions","FeedImageLoadPerfLogger","ViewportTracking","ge","gkx","recordTNTreeData","viewportTrackingBuilder"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=51;function k(n,o,p){__p&&__p();var q=arguments.length<=3||arguments[3]===undefined?j:arguments[3];return{_stream:null,getDataFromConfig:function r(s,t){t.isTimetrackingEnabled=true},getAllStories:function r(){var s=c("DOM").scry(this.getStream(),p);return s.filter(function(t){return c("DataAttributeUtils").getDataFt(t)})},getStream:function r(){if(o)return o;if(!this._stream)this._stream=c("ge")("home_stream");return this._stream},getStoryID:function r(s){var t=JSON.parse(c("DataAttributeUtils").getDataFt(s));return t&&t.mf_story_key},getDataToLog:function r(s){__p&&__p();var t=this.getStream(),u=c("recordTNTreeData")(s,t),v=s.getAttribute("data-insertion-position");if(v!==null)u.inspos=v;u.evt=q;u.vpv_time=Math.round(Date.now()/1e3);var w=c("DOM").scry(s,".fbStoryAttachmentImage")[0];if(w){var x=c("DOMDimensions").getElementDimensions(w);u.story_image_height=x.height;u.story_image_width=x.width}return{ft:u}},afterStoryEntersViewport:c("gkx")("AT6iI7ZM-DEUqLyzH0WIG7tai1ljdAuMyZ79cNQA7lTOnZyBqjqwUgFPVt96-L_E3U8HkpYLqVG1H03r2SDZc5ot")?function(r){c("FeedImageLoadPerfLogger").startMarkers(r)}:function(r){},afterStoryExitsViewport:c("gkx")("AT6iI7ZM-DEUqLyzH0WIG7tai1ljdAuMyZ79cNQA7lTOnZyBqjqwUgFPVt96-L_E3U8HkpYLqVG1H03r2SDZc5ot")?function(r){c("FeedImageLoadPerfLogger").cancelMarkers(r)}:function(r){}}}h=babelHelpers.inherits(l,c("ViewportTracking"));i=h&&h.prototype;l.prototype.getQueryID=function(n){var o=JSON.parse(c("DataAttributeUtils").getDataFt(n));return o.qid};l.prototype.getFBFeedLocations=function(n){var o=JSON.parse(c("DataAttributeUtils").getDataFt(n));return o.fbfeed_location};l.prototype.getFBFeedInsertionPosition=function(n){var o=JSON.parse(c("DataAttributeUtils").getDataFt(n));return o.insertion_position};l.prototype.getTimetrackingDataToLog=function(n){__p&&__p();var o=i.getTimetrackingDataToLog.call(this,n);if(this.ctaLoggingEnabled){var p=c("DOM").scry(n.story,"[data-is-cta]").map(function(q){var r=c("DataAttributeUtils").getDataFt(q),o=r&&JSON.parse(r);return o&&o.cta_types}).filter(function(q){return!!q});if(p.length>0)o.ft.cta_types=p}return o};l.prototype.cleanup=function(){m.clearSingleton();i.cleanup.call(this)};function l(){h.apply(this,arguments)}var m=c("viewportTrackingBuilder")(function(n,o){var p=new l(k(n,o,".uiStreamStory"));p.init(n);return p});l.factory=m.factory.bind(m);l.singleton=m.singleton.bind(m);l.clearSingleton=m.clearSingleton.bind(m);l.getBehavior=k;f.exports=l}),null);
__d("HoverButton",["csx","cx","AsyncRequest","CSS","DOM","URI"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l,m,n){"use strict";this._button=k;this._flyout=l;this._flyoutAjaxify=n;this._flyoutContent=m;l.subscribe("show",this._onShow.bind(this));l.subscribe("hide",this._onHide.bind(this))}j.prototype.showFlyoutBriefly=function(){"use strict";this.showFlyout();this._flyout.hideFlyoutDelayed(5e3)};j.prototype.showFlyout=function(){"use strict";this._flyout.showFlyout(this._button,true);this._flyout.inform("show",this._button)};j.prototype.hideFlyout=function(){"use strict";this._flyout.hideFlyout(true);this._flyout.inform("hide",this._button)};j.prototype.enableButton=function(){"use strict";this._flyout.initNode(this._button)};j.prototype.disableButton=function(){"use strict";this.hideFlyout();this._flyout.deactivateNode(this._button)};j.prototype._onShow=function(k,l){"use strict";__p&&__p();c("CSS").addClass(l,"_52nd");if(c("CSS").hasClass(l,"uiButton")||c("CSS").matchesSelector(l,"._42fu"))c("CSS").addClass(l,"selected");if(this._flyoutAjaxify){c("CSS").addClass(this._flyoutContent,"async_saving");new(c("AsyncRequest"))().setURI(new(c("URI"))(this._flyoutAjaxify)).setHandler(function(m){c("CSS").removeClass(this._flyoutContent,"async_saving");c("DOM").setContent(this._flyoutContent,m.payload)}.bind(this)).send();this._flyoutAjaxify=null}};j.prototype._onHide=function(k,l){"use strict";c("CSS").removeClass(l,"_52nd");if(c("CSS").hasClass(l,"uiButton")||c("CSS").matchesSelector(l,"._42fu"))c("CSS").removeClass(l,"selected")};j.prototype.destroy=function(){"use strict";this.hideFlyout();this._flyout.destroy()};j.prototype.suppressNextMouseEnter=function(){"use strict";this._flyout.setActiveNode(this._button)};Object.assign(j.prototype,{_button:null,_flyout:null,_flyoutAjaxify:null,_flyoutContent:null});f.exports=j}),null);
__d("SwapButton",["DOM","Event","Focus"],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l){c("DOM").insertAfter(k,j);c("DOM").remove(k);l&&c("Focus").setWithoutOutline(j)}function i(j,k,l){"use strict";this._swapperButton=j;this._swappeeButton=k;c("Event").listen(j,"click",h.bind(null,k,j,true));if(l)c("Event").listen(k,"click",h.bind(null,j,k,true))}i.prototype.swap=function(j){"use strict";if(this._swapperButton.parentNode)h(this._swappeeButton,this._swapperButton,j)};i.prototype.unswap=function(j){"use strict";if(!this._swapperButton.parentNode)h(this._swapperButton,this._swappeeButton,j)};i.prototype.toggle=function(j){"use strict";if(this._swapperButton.parentNode)this.swap(j);else this.unswap(j)};i.prototype.getCurrentButton=function(){"use strict";return this._swapperButton.parentNode?this._swapperButton:this._swappeeButton};Object.assign(i.prototype,{_swapperButton:null,_swappeeButton:null});f.exports=i}),null);
__d("HoverFlyout",["Arbiter","ArbiterMixin","DataStore","Event","Keys","mixin","removeFromArray","shield"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l,m,n){"use strict";__p&&__p();i.constructor.call(this);if(k){this._showDelay=m;this._hideDelay=n;this.init(k);if(l)this.initNode(l)}c("Arbiter").subscribe("SwapButtonDEPRECATED/focusOnJoinButton",c("shield")(this.hideFlyout,this),c("Arbiter").SUBSCRIBE_ALL)}j.prototype.init=function(k){"use strict";__p&&__p();this._flyout=k;this._showDelay=this._showDelay||0;this._hideDelay=this._hideDelay||100;this._showTimeout=null;this._hideTimeout=null;this._flyoutSubscriptions=[this._flyout.subscribe("mouseenter",this._onFlyoutMouseEnter.bind(this)),this._flyout.subscribe("mouseleave",c("shield")(this.hideFlyout,this))];this._nodes=[];this._dataStoreUnique="HoverFlyout_"+Date.now()+"_listeners";return this};j.prototype.initNode=function(k){"use strict";if(this._nodes.includes(k))return this;this._nodes.push(k);c("DataStore").set(k,this._dataStoreUnique,[c("Event").listen(k,"mouseenter",this._onNodeMouseEnter.bind(this,k)),c("Event").listen(k,"mouseleave",c("shield")(this.hideFlyout,this)),c("Event").listen(k,"click",this._onNodeMouseEnter.bind(this,k)),c("Event").listen(k,"keydown",this._onNodeKeyEscape.bind(this))]);return this};j.prototype.deactivateNode=function(k){"use strict";var l=c("DataStore").get(k,this._dataStoreUnique);if(l)while(l.length)l.pop().remove();c("removeFromArray")(this._nodes,k)};j.prototype.setShowDelay=function(k){"use strict";this._showDelay=k;return this};j.prototype.setHideDelay=function(k){"use strict";this._hideDelay=k;return this};j.prototype.showFlyout=function(k,l){"use strict";this.setActiveNode(k);if(l){this._flyout.setContext(k).show();this.inform("show",k)}else this._showTimeout=setTimeout(this.showFlyout.bind(this,k,true),this._showDelay);return this};j.prototype.hideFlyout=function(k){"use strict";clearTimeout(this._showTimeout);if(k){this._flyout.hide();this._activeNode&&this.inform("hide",this._activeNode);this._activeNode=null}else this._hideTimeout=setTimeout(this.hideFlyout.bind(this,true),this._hideDelay)};j.prototype.hideFlyoutDelayed=function(k){"use strict";clearTimeout(this._showTimeout);clearTimeout(this._hideTimeout);this._hideTimeout=setTimeout(this.hideFlyout.bind(this,true),k)};j.prototype.getActiveNode=function(){"use strict";return this._activeNode};j.prototype.setActiveNode=function(k){"use strict";clearTimeout(this._hideTimeout);if(this._activeNode&&this._activeNode!==k)this.hideFlyout(true);this._activeNode=k;return this};j.prototype.clearNodes=function(){"use strict";for(var k=this._nodes.length;k>0;k--)this.deactivateNode(this._nodes[k-1])};j.prototype.destroy=function(){"use strict";while(this._flyoutSubscriptions.length)this._flyout.unsubscribe(this._flyoutSubscriptions.pop());this.clearNodes()};j.prototype._onNodeMouseEnter=function(k){"use strict";if(this._activeNode===k)clearTimeout(this._hideTimeout);else this.showFlyout(k)};j.prototype._onFlyoutMouseEnter=function(){"use strict";clearTimeout(this._hideTimeout)};j.prototype._onNodeKeyEscape=function(event){"use strict";if(c("Event").getKeyCode(event)===c("Keys").ESC){this._activeNode&&this.inform("hide",this._activeNode);this._activeNode=null}};f.exports=b.HoverFlyout||j}),null);
__d("MainThreadPerformanceLoggerActions",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SCROLL:"scroll",TAIL_LOAD:"tail_load"})}),null);
__d("XFeedEgoImpressionLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ego/feed/logging/impression/",{ego_id:{type:"Int",required:true},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true},uid:{type:"Int"}})}),null);