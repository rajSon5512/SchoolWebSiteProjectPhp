if (self.CavalryLogger) { CavalryLogger.start_js(["ZnmTg"]); }

__d("MNCommercePageSetting",[],(function a(b,c,d,e,f,g){f.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"}}),null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","SubscriptionsHandler","TypingStates","createObjectFrom","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){this._input=i;this._ignoreKeys={};this._getValueFn=j}Object.assign(h.prototype,c("ArbiterMixin"),{_timeout:7e3,_currentState:c("TypingStates").INACTIVE,init:function i(){this.init=c("emptyFunction");this.reset();this._subscriptions=new(c("SubscriptionsHandler"))();this._subscriptions.addSubscriptions(c("Event").listen(this._input,"keyup",this._update.bind(this)),c("Run").onUnload(this._onunload.bind(this)))},reset:function i(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=c("TypingStates").INACTIVE},setIgnoreKeys:function i(j){this._ignoreKeys=c("createObjectFrom")(j)},destroy:function i(){this._subscriptions.release()},_onunload:function i(){if(this._currentState==c("TypingStates").TYPING)this._transition(c("TypingStates").QUITTING)},_update:function i(event){__p&&__p();var j=c("Event").getKeyCode(event),k=this._currentState;if(!this._ignoreKeys[j]){var l=this._getValueFn?this._getValueFn():c("Input").getValue(this._input);if(l.trim().length===0){if(k==c("TypingStates").TYPING)this._transition(c("TypingStates").INACTIVE)}else if(k==c("TypingStates").TYPING)this._recordKeystroke();else if(k==c("TypingStates").INACTIVE){this._transition(c("TypingStates").TYPING);this._recordKeystroke()}}},_transition:function i(j){this.reset();this._currentState=j;this.inform("change",j)},_recordKeystroke:function i(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout)},_checkTyping:function i(){var j=this._lastKeystrokeTime+this._timeout,k=Date.now();if(k>j)this._transition(c("TypingStates").INACTIVE);else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),j-k+10)}}});f.exports=h}),null);
__d("TypingDetectorController",["ActorURI","AsyncRequest","AvailableList","AvailableListConstants","ChatVisibility","Keys","MercuryServerRequestsConfig","TypingDetector","TypingStates","clearTimeout","emptyFunction","ifRequired","setTimeoutAcrossTransitions","shield"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="/ajax/messaging/typ.php";function i(j,k,l,m,n,o,p){__p&&__p();this.userID=j;this.input=k;this.source=l;this.threadID=n;this.pageID=p;this.remoteState=c("TypingStates").INACTIVE;this.notifyTimer=null;m=m||{};this.notifyDelay=m.notifyDelay||this.notifyDelay;this._typingDetector=new(c("TypingDetector"))(k,o);this._typingDetector.init(m);this._typingDetector.subscribe("change",this._stateChange.bind(this))}i.prototype.setUserAndThread=function(j,k){if(this.userID!==j||this.threadID!==k){this.resetState();this.userID=j;this.threadID=k}};i.prototype.setIgnoreEnter=function(j){var k=j?[c("Keys").RETURN]:[];this._typingDetector.setIgnoreKeys(k)};i.prototype.resetState=function(){this._notifyState(c("TypingStates").INACTIVE);this.remoteState=c("TypingStates").INACTIVE;this._typingDetector.reset();c("clearTimeout")(this.notifyTimer);this.notifyTimer=null};i.prototype.destroy=function(){this.resetState();this._typingDetector.destroy()};i.prototype._stateChange=function(j,k){if(k!=c("TypingStates").QUITTING){c("clearTimeout")(this.notifyTimer);this.notifyTimer=c("setTimeoutAcrossTransitions")(c("shield")(this._notifyState,this,k),this.notifyDelay)}else this._notifyState(k,true)};i.prototype._notifyState=function(j,k){if(!this.userID&&!this.threadID||!c("ChatVisibility").isOnline()||j===this.remoteState||c("ifRequired")("ChannelConnection",function(l){return l.disconnected()},function(){return true}))return;this._sendRequest(j,this.userID,k)};i.prototype._sendRequest=function(j,k,l){this.remoteState=j;var m={typ:j,to:k,source:this.source,thread:this.threadID},n=this.pageID?c("ActorURI").create(h,this.pageID):h,o=new(c("AsyncRequest"))().setHandler(this._onTypResponse.bind(this,k)).setErrorHandler(c("emptyFunction")).setData(m).setURI(n).setAllowCrossPageTransition(true).setOption("asynchronous_DEPRECATED",!l);if(c("MercuryServerRequestsConfig").msgrRegion)o.setRequestHeader("X-MSGR-Region",c("MercuryServerRequestsConfig").msgrRegion);o.send()};i.prototype._onTypResponse=function(j,k){var l=k.getPayload()||{};if(l.offline)c("AvailableList").set(j,c("AvailableListConstants").OFFLINE,"typing_response")};Object.assign(i.prototype,{notifyDelay:1e3});f.exports=i}),null);
__d("EmployeeLinkMatcher",["CurrentUser"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new RegExp("^[\\s.,:]"),i=new RegExp("(?:\\b)(([BDFTPSXJN]|(AIP)|(PR )|(PO ))\\d{4,})(?:\\b)","im"),j=new RegExp("(?:\\b)(designpack://.+)(?:\\b)","im"),k=function k(n){if(!c("CurrentUser").isEmployee())return null;var o=i.exec(n)||j.exec(n);if(o===null)return null;return{lnk:o[1],idx:o.index+(h.exec(o[0])?1:0)}},l=function l(n){var o=c("CurrentUser").isEmployee()&&(i.exec(n)!==null||j.exec(n)!==null);return o},m={match:k,isMatch:l};f.exports=m}),null);
__d("EmployeeLinkRanges",["EmployeeLinkMatcher","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={PHABRICATOR_PREFIX:"https://phabricator.intern.facebook.com/",TASKS_PREFIX:"https://our.intern.facebook.com/intern/tasks/?t=",BUSINESS_PREFIX:"https://our.intern.facebook.com/intern/business/?q=",SEV_PREFIX:"https://our.intern.facebook.com/intern/sevmanager/view/s/",CHRONOS_PREFIX:"https://our.intern.facebook.com/intern/chronos/lucky/?query=",ADS_PARTNER_PREFIX:"https://our.intern.facebook.com/intern/ads/partner_projects/projects/",SRT_JOB_PREFIX:"https://our.intern.facebook.com/intern/bunny/?srt+",ANALYTICS_NOTEBOOKS_PREFIX:"https://our.intern.facebook.com/intern/bunny/?anp+",FBLEARNER_RUN_PREFIX:"https://our.intern.facebook.com/intern/fblearner/details/",PURCHASE_REQUEST_PREFIX:"https://our.intern.facebook.com/intern/bunny/?q=pr+",PURCHASE_ORDER_PREFIX:"https://our.intern.facebook.com/intern/bunny/?q=po+",get:function i(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c("EmployeeLinkMatcher").match(l);if(!m)return[];var n=m.lnk,o=m.idx,p=c("UnicodeUtils").strlen(l.substr(0,o));k+=p;var q="";if(n.substr(0,3).toLowerCase()==="aip")q=this.ADS_PARTNER_PREFIX+n.substr(3);else if(n.substr(0,3).toLowerCase()==="pr ")q=this.PURCHASE_REQUEST_PREFIX+n.substr(3);else if(n.substr(0,3).toLowerCase()==="po ")q=this.PURCHASE_ORDER_PREFIX+n.substr(3);else switch(n[0].toLowerCase()){case"d":if(n.indexOf("designpack://")===0)q=n;else q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case"p":q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case"t":q=this.TASKS_PREFIX+n.substr(1);break;case"b":q=this.BUSINESS_PREFIX+n.substr(1);break;case"s":q=this.SEV_PREFIX+n.substr(1);break;case"x":q=this.CHRONOS_PREFIX+n.substr(1);break;case"j":q=this.SRT_JOB_PREFIX+n.substr(1);break;case"n":q=this.ANALYTICS_NOTEBOOKS_PREFIX+n.substr(1);break;case"f":q=this.FBLEARNER_RUN_PREFIX+n.substr(1);break;default:return[]}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r))}};f.exports=h}),null);
__d("EventReminderDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("EventReminderActions",["EventReminderDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({DELETE_EVENT_REMINDER:null,UPDATE_EVENT_REMINDER:null}),i={Types:h,updateEventReminder:function j(k,event,l){c("EventReminderDispatcher").dispatch({type:i.Types.UPDATE_EVENT_REMINDER,threadID:k,event:event,participantsEventStatus:l})},deleteEventReminder:function j(k){c("EventReminderDispatcher").dispatch({type:i.Types.DELETE_EVENT_REMINDER,threadID:k})}};f.exports=i}),null);
__d("EventReminderMembersMap",["CurrentUser","EventReminderConstants","MercuryIDs","MercuryParticipants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("EventReminderConstants").EventGuestStates,i=c("EventReminderConstants").GuestStates;function j(k){this.$EventReminderMembersMap1=k;this.$EventReminderMembersMap2=new Map();this.$EventReminderMembersMap3=new Map();this.$EventReminderMembersMap4=new Map();this.$EventReminderMembersMap5=new Map();this.$EventReminderMembersMap6=new Map();this.$EventReminderMembersMap7=new Map()}j.prototype.setAllMembers=function(k,l){__p&&__p();if(!k)return;this.$EventReminderMembersMap2.set(l,i.INVITED);var m=[],n=[],o=[],p=[];for(var q in k){m.push(c("MercuryIDs").getParticipantIDFromUserID(q));var r=k[q];if(q===c("CurrentUser").getID())this.$EventReminderMembersMap2.set(l,r);var s={fbid:q,guestState:r,imageSrc:""};if(r===i.GOING)n.push(s);else if(r===i.DECLINED)o.push(s);else p.push(s)}var t=n.concat(o,p);this.$EventReminderMembersMap3.set(l,t);this.$EventReminderMembersMap4.set(l,n);this.$EventReminderMembersMap7.set(l,false);this.$EventReminderMembersMap8(l,m,t)};j.prototype.setAllMembersOfAssociatedEvent=function(k,l){__p&&__p();if(!k)return;this.$EventReminderMembersMap2.set(l,h.INITIAL);var m=[],n=[],o=[],p=[];k.map(function(r){__p&&__p();m.push(c("MercuryIDs").getParticipantIDFromUserID(r.participant_id));var s=r.participant_id.toString(),t=r.event_status||h.INITIAL;if(s===c("CurrentUser").getID())this.$EventReminderMembersMap2.set(l,t);var u={fbid:s,guestState:t,imageSrc:""};if(t===h.GOING)n.push(u);else if(t===h.WATCHED)o.push(u);else p.push(u)},this);var q=n.concat(o,p);this.$EventReminderMembersMap3.set(l,q);this.$EventReminderMembersMap4.set(l,n);this.$EventReminderMembersMap5.set(l,o);this.$EventReminderMembersMap6.set(l,p);this.$EventReminderMembersMap7.set(l,false);this.$EventReminderMembersMap8(l,m,q)};j.prototype.clearMembers=function(k){this.$EventReminderMembersMap2["delete"](k);this.$EventReminderMembersMap3["delete"](k);this.$EventReminderMembersMap4["delete"](k);this.$EventReminderMembersMap5["delete"](k);this.$EventReminderMembersMap6["delete"](k)};j.prototype.getAllMembers=function(k){return this.$EventReminderMembersMap3.get(k)};j.prototype.getGoingMembers=function(k){return this.$EventReminderMembersMap4.get(k)};j.prototype.getInterestedMembers=function(k){return this.$EventReminderMembersMap5.get(k)};j.prototype.getSelfGuestState=function(k){if(!this.$EventReminderMembersMap2.has(k))return i.INVITED;return this.$EventReminderMembersMap2.get(k)};j.prototype.getProfileImagesLoaded=function(k){return!!this.$EventReminderMembersMap7.get(k)};j.prototype.$EventReminderMembersMap8=function(k,l,m){c("MercuryParticipants").getBigImageMulti(l,function(n){for(var o=0;o<m.length;o++)if(m[o].fbid)m[o].imageSrc=n[c("MercuryIDs").getParticipantIDFromUserID(m[o].fbid)];this.$EventReminderMembersMap7.set(k,true);this.$EventReminderMembersMap1.__emitChange()}.bind(this))};f.exports=j}),null);
__d("EventReminderStateStore",["EventReminderActions","EventReminderConstants","EventReminderDispatcher","EventReminderMembersMap","EventRemindersGating","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("EventReminderConstants").EventPlanType,k=36e5;h=babelHelpers.inherits(l,c("FluxStore"));i=h&&h.prototype;function l(){i.constructor.call(this,c("EventReminderDispatcher"));this.__moduleID=f.id;this.$EventReminderStateStore1={};this.$EventReminderStateStore2=new(c("EventReminderMembersMap"))(this);this.$EventReminderStateStore3=new Map()}l.prototype.getEvent=function(m){return this.$EventReminderStateStore1[m]};l.prototype.getEventMembers=function(m){return this.$EventReminderStateStore2.getAllMembers(m)};l.prototype.getSelfGuestState=function(m){return this.$EventReminderStateStore2.getSelfGuestState(m)};l.prototype.getNumOfGoingMembers=function(m){var n=this.$EventReminderStateStore2.getGoingMembers(m);return n?n.length:0};l.prototype.getNumOfInterestedMembers=function(m){var n=this.$EventReminderStateStore2.getInterestedMembers(m);return n?n.length:0};l.prototype.getProfileImagesLoaded=function(m){return this.$EventReminderStateStore2.getProfileImagesLoaded(m)};l.prototype.shouldShowCTA=function(m,n){var o=this.getEvent(m),p=Date.now(),q=this.$EventReminderStateStore3.get(m);if((!o||!o.exist)&&n>c("EventRemindersGating").eventPlanCTAThreashold&&(!q||p-q>k)&&c("EventRemindersGating").shouldShowCTA){this.$EventReminderStateStore3.set(m,p);return true}else return false};l.prototype.clearEventMembers=function(m){this.$EventReminderStateStore2.clearMembers(m)};l.prototype.getTransformedEvent=function(event){if(event.room_type==="EVENT"){var m=event.event_place&&event.event_place.name,n=event.event_place&&event.event_place.address&&event.event_place.address.single_line_full_address;return{allowRSVP:true,eventDate:event.start_timestamp,eventName:event.name,eventLocationName:m,eventLocationAddress:n,eventID:event.id.toString(),eventType:j.ASSOCIATED_EVENT,exists:true}}return{allowRSVP:!!event.track_rsvp,eventDate:event.event_time,eventName:event.title,eventLocationName:event.location_name,eventLocationAddress:event.location_address,eventID:event.oid.toString(),eventType:event.event_type,exists:true}};l.prototype.__onDispatch=function(m){__p&&__p();var n=c("EventReminderActions").Types,o=m.threadID;switch(m.type){case n.UPDATE_EVENT_REMINDER:var event=m.event;this.$EventReminderStateStore1[o]=this.getTransformedEvent(event);if(this.$EventReminderStateStore1[o].allowRSVP)if(event.room_type==="EVENT")this.$EventReminderStateStore2.setAllMembersOfAssociatedEvent(m.participantsEventStatus,o);else this.$EventReminderStateStore2.setAllMembers(event.event_members,o);break;case n.DELETE_EVENT_REMINDER:this.$EventReminderStateStore1[o].exists=false;this.clearEventMembers(o);break}this.__emitChange()};f.exports=new l()}),null);
__d("MercuryMessageRenderLocations",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({CHAT:"chat",MESSENGER:"messenger",PAGES:"pages"});f.exports=h}),null);
__d("MessengerFormattingUtils",["cx","Newline.react","React","ReactFragment","UnicodeUtils","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(u){return{offset:u[1].length,length:c("UnicodeUtils").strlen(u[2])+2,innerOffset:1,innerText:u[2]}}var j={pattern:/([\s_~\'\"(]|^)\*(\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s_~\'\"(]|^)\*(?:\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/,formatter:function u(v){return c("React").createElement("b",null,v)},getRangeInMatch:i,recursivelyFormat:true},k={pattern:/([\s*~\'\"(]|^)_(\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*~\'\"(]|^)_(?:\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/,formatter:function u(v){return c("React").createElement("i",null,v)},getRangeInMatch:i,recursivelyFormat:true},l={pattern:/([\s*_\'\"(]|^)~(\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_\'\"(]|^)~(?:\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/,formatter:function u(v){return c("React").createElement("s",null,v)},getRangeInMatch:i,recursivelyFormat:true},m={pattern:/([\s*_~\'\"(]|^)`(\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_~\'\"(]|^)`(?:\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/,formatter:function u(v){return c("React").createElement("code",null,v)},getRangeInMatch:i,recursivelyFormat:false},n=function n(u){var v={blockquote1:c("React").createElement("blockquote",{className:"_pye"},c("React").createElement("div",{className:"_pyf"}),u),blockquote2:c("React").createElement(c("Newline.react"),null)};return c("ReactFragment").create(v)},o={pattern:/(^>>> ?)((.|(\r\n)|\r|\n)*?\S(.|(\r\n)|\r|\n)*?)^<<<\s*?((\r\n)|\r|\n|$)/gm,nonCapturingPattern:/(^>>> ?)((.|(\r\n)|\r|\n)*?\S(.|(\r\n)|\r|\n)*?)^<<<\s*((\r\n)|\r|\n|$)/m,formatter:n,getRangeInMatch:function u(v){return{offset:0,length:c("UnicodeUtils").strlen(v[0]),innerOffset:c("UnicodeUtils").strlen(v[1]),innerText:v[2]}},recursivelyFormat:true},p={pattern:/((^> )(.*\S.*)((\r\n)|\r|\n)?)(^> ?(.*)((\r\n)|\r|\n)?)*/gm,nonCapturingPattern:/(^> (.*\S.*)((\r\n)|\r|\n)?)(^> ?(.*)((\r\n)|\r|\n)?)*/m,formatter:n,getRangeInMatch:function u(v){var w=v[0],x=c("UnicodeUtils").strlen(w),y=c("UnicodeUtils").strlen(v[2]);return{offset:0,length:x,innerOffset:y,innerText:w.substring(y,x)}},recursivelyFormat:true,getAdditionalInnerRanges:function u(v){return t(v.innerText,[q]).map(function(w){return babelHelpers["extends"]({},w,{offset:w.offset+v.innerOffset,innerOffset:w.innerOffset+v.innerOffset})})}},q={pattern:/(^> ?)(.*?$)/gm,nonCapturingPattern:/^> ?(.*?$)/m,formatter:function u(v){return v},getRangeInMatch:function u(v){return{offset:0,length:c("UnicodeUtils").strlen(v[0]),innerOffset:c("UnicodeUtils").strlen(v[1]),innerText:v[2]}},recursivelyFormat:true},r=[j,k,l,m];if(c("gkx")("AT6IFGvJKEskVV3MpDhLcaRYk55exGzbLc4uf2H4PkUSB_m2BNrrV8nK4TTyE-IEyhbw2ed0C_HlWoHBx_yhMSmL")){r.push(o);r.push(p)}function s(u){var v=arguments.length<=1||arguments[1]===undefined?r:arguments[1];for(var w=0;w<v.length;w++){var x=v[w].nonCapturingPattern;if(x.test(u))return true}return false}function t(u){__p&&__p();var v=arguments.length<=1||arguments[1]===undefined?r:arguments[1],w=[];for(var x=0;x<v.length;x++){var y=v[x];y.pattern.lastIndex=0;var z=void 0;while((z=y.pattern.exec(u))!=null){var A=y.getRangeInMatch(z),B=u.substr(0,z.index+A.offset),C=c("UnicodeUtils").strlen(B),D={offset:C,length:A.length,innerText:A.innerText,innerOffset:C+A.innerOffset,formatter:y.formatter,recursivelyFormat:y.recursivelyFormat},E=y.getAdditionalInnerRanges?y.getAdditionalInnerRanges(D):[];w.push(D);w=w.concat(E)}}return w}f.exports={defaultFormatConfigs:r,hasMatch:s,getRanges:t,formatConfigs:{bold:j,italic:k,strikethrough:l,code:m,blockquote:o,multipleInlineBlockquote:p,singleInlineBlockquote:q}}}),null);
__d("MessengerMathUtils",["UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=2,i=/^(?:\$\$|\\\[)[\s\S]*?\S[\s\S]*?(?:\$\$|\\\])$/,j=/\\\([\s\S]*?\S[\s\S]*?\\\)/g;function k(p){return i.test(p)}function l(p){return p.substring(h,p.length-h)}function m(p){j.lastIndex=0;return j.test(p)}function n(p){var q=arguments.length<=1||arguments[1]===undefined?0:arguments[1],r=[];j.lastIndex=0;var s=void 0;while((s=j.exec(p))!==null){var t=p.substring(0,s.index),u=c("UnicodeUtils").strlen(t);r.push({offset:u,length:c("UnicodeUtils").strlen(s[0]),math:true})}return r}function o(p){__p&&__p();var q=p.length,r=0,s=0;for(var t=0;t<q;t++)if(p[t]==="\\")if(p.slice(t,t+6)==="\\begin"){r+=2;s=Math.max(s,r)}else if(p.slice(t,t+4)==="\\end")r-=2;else t++;else if(p[t]==="{"){r++;s=Math.max(s,r)}else if(p[t]==="}")r--;return s}f.exports={MATH_DELIMITER_LENGTH:h,isMathBlock:k,hasInlineMath:m,getInlineMathRanges:n,getMathBlockInner:l,getMaxBraceDepth:o}}),null);
__d("P2PTriggersUtils",["P2PGKValues"],(function a(b,c,d,e,f,g){var h=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,i={canSeeTriggers:function j(k){if(!c("P2PGKValues").P2PEnabled)return false;return true},getMatches:function j(k){return k.match(h)}};f.exports=i}),null);
__d("RedditLinkMatcher",[],(function a(b,c,d,e,f,g){"use strict";var h=new RegExp("(^|\\s)(\\/[ru]\\/\\w{1,21})(?:\\b)","i"),i=function i(l){var m=h.exec(l);if(m===null)return null;return{lnk:m[2],idx:m.index+m[1].length}},j=function j(l){return h.exec(l)!==null},k={match:i,isMatch:j};f.exports=k}),null);
__d("RedditLinkRanges",["RedditLinkMatcher","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={REDDIT_PREFIX:"https://reddit.com",get:function i(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c("RedditLinkMatcher").match(l);if(!m)return[];var n=m.lnk,o=m.idx,p=c("UnicodeUtils").strlen(l.substr(0,o));k+=p;var q="";switch(n[1].toLowerCase()){case"r":q=this.REDDIT_PREFIX+n;break;case"u":q=this.REDDIT_PREFIX+n;break;default:return[]}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r))}};f.exports=h}),null);
__d("TextWithEntitiesMetadataType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:0,CONCEPT:1,INTENT:2})}),null);
__d("shouldAddMRefParam",["isFacebookURI"],(function a(b,c,d,e,f,g){var h=function h(i){if(!c("isFacebookURI")(i)||i.getFragment())return false;if(/^\/events\//.test(i.getPath()))return true;return false};f.exports=h}),null);
__d("MercuryMessageBody.react",["cx","fbt","BootloadedComponent.react","CurrentUser","DateConsts","EmojiRenderer","EmoticonEmojiList","EmoticonsList","EmployeeLinkMatcher","EmployeeLinkRanges","EventRemindersGating","EventReminderStateStore","JSResource","Link.react","MercuryIDs","MercuryMessageRenderLocations","MessengerContactActions.bs","MessengerFormattingUtils","MessengerMathUtils","MessengerSupportedEmojiUtils","MessengerTextWithEntities.react","P2PTriggersUtils","React","RedditLinkMatcher","RedditLinkRanges","TextWithEntities.react","TextWithEntitiesMetadataType","UnicodeUtils","URI","URLMatcher","emptyFunction","getURLRanges","gkx","ifRequired","requireWeak","shouldAddMRefParam"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MessengerContactActions.bs").actions,m=c("React").PropTypes,n=function p(){n=c("emptyFunction");c("ifRequired")("ChatAppActions",function(q){q.setInitialDisplayDone()})};j=babelHelpers.inherits(o,c("React").PureComponent);k=j&&j.prototype;function o(p){__p&&__p();k.constructor.call(this,p);this.interpolator=function(q,r){__p&&__p();var s,t=this;if(r.className)return c("React").createElement("span",{className:r.className},q);if(r.math)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,q),body:this.$MercuryMessageBody4(q),fallbackBody:q,inline:true,stripDelimiters:true,className:"_1e4d _1e4e"});if(r.id){var s=function(){__p&&__p();var y={};if(!c("CurrentUser").isWorkUser()&&!t.props.isFromViewer&&t.props.threadCustomColor)y.color=t.props.threadCustomColor;var z=t.props.onContactSelect,A=t.props.threadID?c("MercuryIDs").getThreadFBIDFromThreadID(t.props.threadID)===r.id:false,B=new(c("URI"))("/ajax/hovercard/user.php").setQueryData({id:r.id}),C=c("gkx")("AT6RjIJVvIfplq-ZeT5_MD81B3OgeLlmewNtJ7hzw811gUcL2KB7zXVo29pTy6tr5BFiWzx-vsgfOHRh3TsCXQ_N"),D=c("React").createElement(c("Link.react"),{className:"_ih-"+(c("CurrentUser").isWorkUser()&&r.id===c("CurrentUser").getID()?" _1zle":""),href:A?"#":r.url,"data-hovercard":C?B:null,style:y,onClick:z&&!A?function(E){this.$MercuryMessageBody3(z,r,E)}.bind(t):c("emptyFunction")},q);if(c("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu")&&!A&&z&&!C){if(typeof q==="string")r.contactName=q&&q.replace("@","");D=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerAvatarActions.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:D,avatar:D,contact:r,showSendMessageItem:true,onAction:t.props.onContactSelect})}return{v:D}}();if(typeof s==="object")return s.v}if(r.formatter)if(r.recursivelyFormat){var u=this.renderBody(r.innerText,true,r.innerOffset);return r.formatter(u)}else return r.formatter(r.innerText);if(r.entity&&r.entity.url){var v=new(c("URI"))(r.entity.url.replace(/#+$/,""));if(c("shouldAddMRefParam")(v))v.addQueryData({__mref:"mb"});var w=v.toString();if(c("URI").isValidURI(w))return c("React").createElement(c("Link.react"),{href:{url:w,shimhash:r.entity.shimhash},s:r.entity.s,target:"_blank"},q);else return q}if(!r.entity){var x=typeof r.type==="number"?r.type:c("TextWithEntitiesMetadataType")[r.type];switch(x){case c("TextWithEntitiesMetadataType").NONE:return c("React").createElement("span",{className:"_2y9",title:JSON.stringify(r.data)},q);case c("TextWithEntitiesMetadataType").CONCEPT:return this.renderConceptMetadata(q,r.data);case c("TextWithEntitiesMetadataType").INTENT:return this.renderIntentMetadata(q,r.data);default:return q}}return q}.bind(this);this.state=this.parseMessageBody(p)}o.prototype.UNSAFE_componentWillReceiveProps=function(p){if(this.props.body!==p.body||this.props.metaRanges!==p.metaRanges||this.props.ranges!==p.ranges)this.setState(this.parseMessageBody(p))};o.prototype.parseMessageBody=function(p){__p&&__p();var q=(p.body||"").replace(/\s+$/,""),r=this.$MercuryMessageBody1(p.metaRanges||[]),s={normalizedBody:q,isEncrypted:false,isMathBlock:false,isRichText:false,ranges:[],filteredMetaRanges:r};if(q.length===0)return s;if(q.startsWith("?OTR")){s.isEncrypted=true;return s}if(c("MessengerMathUtils").isMathBlock(q)){s.isMathBlock=true;return s}var t=p.ranges,u=p.metaRanges,v=t&&t.length||u&&u.length||c("EmoticonsList").noncapturingRegexp.test(q)||c("EmojiRenderer").containsEmoji(q)||c("URLMatcher").match(q)||c("EmployeeLinkMatcher").isMatch(q)||c("RedditLinkMatcher").isMatch(q)||this.$MercuryMessageBody2(q,p)||c("MessengerSupportedEmojiUtils").containsEmoji(q)||c("EmoticonEmojiList").noncapturingRegexp.test(q)||c("MessengerFormattingUtils").hasMatch(q)||c("MessengerMathUtils").hasInlineMath(q);if(!v)return s;s.isRichText=true;if(t&&t.length===1&&t[0].className==="__in")t=c("getURLRanges")(q).concat(t);t=t||[];t=t.concat(c("getURLRanges")(q),c("EmployeeLinkRanges").get(q));t=t.concat(c("RedditLinkRanges").get(q));t=t.concat(c("MessengerFormattingUtils").getRanges(q));t=t.concat(c("MessengerMathUtils").getInlineMathRanges(q));s.ranges=t.filter(function(w){return w!=undefined});return s};o.prototype.hasFormatting=function(){return this.state.isRichText||this.state.isMathBlock||this.state.isEncrypted};o.prototype.$MercuryMessageBody3=function(p,q,r){c("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu")?r.preventDefault():p(l.MESSAGE,q,r)};o.prototype.$MercuryMessageBody4=function(p){if(this.props.isFromViewer)return"\\color{#fff}{"+c("MessengerMathUtils").getMathBlockInner(p)+"}";else return c("MessengerMathUtils").getMathBlockInner(p)};o.prototype.renderConceptMetadata=function(p,q){if(!q)return p;if(q.intent_name||q.name)return this.renderIntentMetadata(p,q);return p};o.prototype.renderIntentMetadata=function(p,q){__p&&__p();if(!q)return p;var r=q.intent_name||q.name;switch(r){case"request_time":return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ServicesVerticalRequestTimeTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});case"timestamp":if(this.$MercuryMessageBody5(q.value)&&c("EventRemindersGating").shouldShowTriggerWords)if(this.props.renderLocation===c("MercuryMessageRenderLocations").CHAT)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});else if(this.props.renderLocation===c("MercuryMessageRenderLocations").MESSENGER)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});return p;default:return p}};o.prototype.renderIntentCTA=function(p){__p&&__p();if(p){var q=p.intent_name||p.name;switch(q){case"request_time":return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ServicesRequestTimeIntentCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,isFromViewer:this.props.isFromViewer,threadID:this.props.threadID});case"create_event":c("requireWeak")("EventReminderActionsLogger",function(t){t.logTriggerOnTriggerCTA()});var r=this.props.threadID,s=r&&this.$MercuryMessageBody5(p.timestamp)&&c("EventReminderStateStore").shouldShowCTA(r,p.confidence);if(!s)return null;if(this.props.renderLocation===c("MercuryMessageRenderLocations").CHAT)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,threadID:r});else if(this.props.renderLocation===c("MercuryMessageRenderLocations").MESSENGER)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,threadID:r})}}return null};o.prototype.renderCTAs=function(p){var q=null;if(p.length>0){var r=p[0]||{},s=typeof r.type==="number"?r.type:c("TextWithEntitiesMetadataType")[r.type];switch(s){case c("TextWithEntitiesMetadataType").CONCEPT:case c("TextWithEntitiesMetadataType").INTENT:q=this.renderIntentCTA(r.data);break}}return q};o.prototype.renderBody=function(p){__p&&__p();var q=arguments.length<=1||arguments[1]===undefined?false:arguments[1],r=arguments.length<=2||arguments[2]===undefined?0:arguments[2],s=this.state,t=s.isRichText,u=s.ranges,v=s.filteredMetaRanges,w=c("UnicodeUtils").strlen(p);if(!t)return c("React").createElement("span",{className:this.props.className},p);if(q){u=u.filter(function(B){return B.offset>=r&&B.offset+B.length<=r+w}).map(function(B){return babelHelpers["extends"]({},B,{offset:B.offset-r})});v=v.filter(function(B){return B.offset>=r&&B.offset+B.length<=r+w}).map(function(B){return babelHelpers["extends"]({},B,{offset:B.offset-r})})}var x={className:this.props.className,interpolator:this.interpolator,metaRanges:v,ranges:u,renderEmoji:true,renderEmoticons:true,text:p};if(this.$MercuryMessageBody2(p)){var y=c("React").createElement(c("TextWithEntities.react"),x);return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:y,bootloadLoader:c("JSResource")("TextWithEntitiesAndP2P.react").__setRef("MercuryMessageBody.react")},x,{getMessengerEmote:this.$MercuryMessageBody6,isSupportedEmoji:this.$MercuryMessageBody7,threadID:this.props.threadID}))}var z=c("React").createElement(c("MessengerTextWithEntities.react"),x);if(q)return z;var A=this.renderCTAs(this.props.metaRanges||[]);if(!A)return z;return c("React").createElement("span",null,z,A)};o.prototype.render=function(){__p&&__p();var p=this.state,q=p.normalizedBody,r=p.isEncrypted,s=p.isMathBlock;if(q.length===0)return null;n();if(this.props.plainText)return c("React").createElement("span",null,q);else if(r)return c("React").createElement("span",{className:"_89h"},i._("[encrypted message]"));else if(s)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("div",null,q),body:this.$MercuryMessageBody4(q),fallbackBody:q,stripDelimiters:true,className:"_1e4d"});else return this.renderBody(q)};o.prototype.$MercuryMessageBody7=function(p){return c("MessengerSupportedEmojiUtils").isSupportedEmojiKey(p)};o.prototype.$MercuryMessageBody6=function(p){var q=c("EmoticonEmojiList").emote2emojis[p];return c("MessengerSupportedEmojiUtils").isSupportedEmojiKey(q)?q:null};o.prototype.$MercuryMessageBody5=function(p){var q=new Date(p*c("DateConsts").MS_PER_SEC),r=new Date(Date.now()+5*c("DateConsts").MS_PER_MIN),s=new Date(new Date().setFullYear(new Date().getFullYear()+1));return q>r&&q<s};o.prototype.$MercuryMessageBody1=function(p){var q=p.filter(function(r){return r.data&&(r.data.intent_name==="create_event"||r.data.name==="create_event")});return q.length!==0?q:p};o.prototype.$MercuryMessageBody2=function(p){var q=arguments.length<=1||arguments[1]===undefined?this.props:arguments[1];return!!(q.threadID&&c("P2PTriggersUtils").canSeeTriggers(q.threadID)&&c("P2PTriggersUtils").getMatches(p))};o.propTypes={body:m.string,customLike:m.object,isFromViewer:m.bool,metaRanges:m.array,ranges:m.array,threadCustomColor:m.string,threadID:m.string,onContactSelect:m.func,renderLocation:m.oneOf([c("MercuryMessageRenderLocations").CHAT,c("MercuryMessageRenderLocations").MESSENGER,c("MercuryMessageRenderLocations").PAGES])};f.exports=o}),null);
__d("MercuryMessageDeliveryState",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1});f.exports=h}),null);
__d("MercuryMessageInfo",["MercuryActionStatus","MercuryIDs","MercuryMessageDeliveryState","MercuryViewer"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={isOutbound:function i(j){return j.author===c("MercuryViewer").getID()},isInbound:function i(j){return!h.isOutbound(j)},isSending:function i(j){return j.status===c("MercuryActionStatus").UNSENT||j.status===c("MercuryActionStatus").UNCONFIRMED||j.status===c("MercuryActionStatus").UNABLE_TO_CONFIRM||j.status===c("MercuryActionStatus").RESENDING},isSent:function i(j){return j.status==null||j.status===c("MercuryActionStatus").SUCCESS},hasError:function i(j){return j.status===c("MercuryActionStatus").FAILED_UNKNOWN_REASON||j.status===c("MercuryActionStatus").UNABLE_TO_CONFIRM||j.status===c("MercuryActionStatus").ERROR},getDeliveryState:function i(j,k){__p&&__p();if(this.hasError(j))return c("MercuryMessageDeliveryState").ERROR;if(this.isSending(j))return c("MercuryMessageDeliveryState").SENDING;if(this.isSent(j)){if(j.timestamp<=k)return c("MercuryMessageDeliveryState").DELIVERED;return c("MercuryMessageDeliveryState").SENT}return c("MercuryMessageDeliveryState").UNKNOWN},getPersona:function i(j){var k=j&&j.platform_xmd&&JSON.parse(j.platform_xmd);return k&&k.persona_id?{id:c("MercuryIDs").getParticipantIDFromUserID(k.persona_id)}:null}};f.exports=h}),null);
__d("MercuryErrorInfo",["fbt","MercuryErrorType","MercuryMessageInfo"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={getMessage:function j(k){__p&&__p();var l="";if(i.isConnectionError(k)){l=h._("This message didn't send.");if(i.isTransient(k))l=h._("{message} Check your internet connection and click to try again.",[h._param("message",l)])}else{if(k&&k.description)l=k.description;else l=h._("This message failed to send.");if(i.isTransient(k))l=h._("{message} Click to send again.",[h._param("message",l)])}return l},isConnectionError:function j(k){if(k&&k.type==c("MercuryErrorType").TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false},isTransient:function j(k){return k&&k.is_transient},isPermanent:function j(k){return k?!this.isTransient(k):false},hasErrorStatus:function j(k){return c("MercuryMessageInfo").hasError(k)}};f.exports=i}),null);
__d("MercuryMessageError.react",["cx","CurrentUser","ImmutableObject","Link.react","MercuryErrorInfo","MercuryMessageActions","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.messageResend=function(r){r.preventDefault();var s=this.props.message,t=s.error_data;if(c("MercuryErrorInfo").isTransient(t))c("MercuryMessageActions").getForFBID(this.props.authorFBID).resend(this.props.message)}.bind(this),n}l.prototype.render=function(){var m=this.props.message,n=m.error_data;return c("React").createElement(c("Link.react"),babelHelpers["extends"]({},this.props,{href:"#",className:c("joinClasses")(this.props.className,this.$MercuryMessageError1(m)),tabIndex:c("MercuryErrorInfo").isTransient(n)?0:null,onClick:this.messageResend}),c("React").createElement("i",{className:"_2fs1"}),c("React").createElement("span",{className:"_61ag",dangerouslySetInnerHTML:{__html:this.$MercuryMessageError2(m)}}))};l.prototype.$MercuryMessageError1=function(m){if(c("MercuryErrorInfo").hasErrorStatus(m))return"_2fs2 _2fs3"+(c("MercuryErrorInfo").isTransient(m.error_data)?" _2fs4":"")+(c("MercuryErrorInfo").isPermanent(m.error_data)?" _2fs5":"");else return"_2fs6 _2fs2"};l.prototype.$MercuryMessageError2=function(m){var n="",o=m.error_data;if(c("MercuryErrorInfo").hasErrorStatus(m)){var p=c("MercuryErrorInfo").getMessage(o);if(p)n=p.toString()}if(typeof n==="object"&&n.__html)n=n.__html;return n};l.propTypes={authorFBID:k.string,message:k.instanceOf(c("ImmutableObject")).isRequired};l.defaultProps={authorFBID:c("CurrentUser").getID()};f.exports=l}),null);
__d("XEventReminderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/eventreminder/",{event_reminder_id:{type:"Int",required:true}})}),null);
__d("EventReminderRequestHelper",["AsyncRequest","EventReminderActions","XEventReminderController"],(function a(b,c,d,e,f,g){"use strict";var h={fetchEventReminder:function i(j,k,l){var m=c("XEventReminderController").getURIBuilder().setInt("event_reminder_id",k);new(c("AsyncRequest"))(m.getURI()).setHandler(function(n){if(n.payload){c("EventReminderActions").updateEventReminder(j,n.payload);l()}}).send()}};f.exports=h}),null);
__d("MessengerMessageActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$MessengerMessageActionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$MessengerMessageActionsTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$MessengerMessageActionsTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$MessengerMessageActionsTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$MessengerMessageActionsTypedLogger1)};h.prototype.updateData=function(j){this.$MessengerMessageActionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerMessageActionsTypedLogger1,j);return this};h.prototype.setAction=function(j){this.$MessengerMessageActionsTypedLogger1.action=j;return this};h.prototype.setAppID=function(j){this.$MessengerMessageActionsTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$MessengerMessageActionsTypedLogger1.appversion=j;return this};h.prototype.setClienttime=function(j){this.$MessengerMessageActionsTypedLogger1.clienttime=j;return this};h.prototype.setContainermodule=function(j){this.$MessengerMessageActionsTypedLogger1.containermodule=j;return this};h.prototype.setCountry=function(j){this.$MessengerMessageActionsTypedLogger1.country=j;return this};h.prototype.setEntryPoint=function(j){this.$MessengerMessageActionsTypedLogger1.entry_point=j;return this};h.prototype.setErrorText=function(j){this.$MessengerMessageActionsTypedLogger1.error_text=j;return this};h.prototype.setGroupSize=function(j){this.$MessengerMessageActionsTypedLogger1.group_size=j;return this};h.prototype.setMessageType=function(j){this.$MessengerMessageActionsTypedLogger1.message_type=j;return this};h.prototype.setMid=function(j){this.$MessengerMessageActionsTypedLogger1.mid=j;return this};h.prototype.setName=function(j){this.$MessengerMessageActionsTypedLogger1.name=j;return this};h.prototype.setOfflineThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.offline_threadid=j;return this};h.prototype.setPreviousReaction=function(j){this.$MessengerMessageActionsTypedLogger1.previous_reaction=j;return this};h.prototype.setReaction=function(j){this.$MessengerMessageActionsTypedLogger1.reaction=j;return this};h.prototype.setRecipientID=function(j){this.$MessengerMessageActionsTypedLogger1.recipient_id=j;return this};h.prototype.setThreadType=function(j){this.$MessengerMessageActionsTypedLogger1.thread_type=j;return this};h.prototype.setThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.threadid=j;return this};h.prototype.setVC=function(j){this.$MessengerMessageActionsTypedLogger1.vc=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$MessengerMessageActionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerMessageActionsTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={action:true,appid:true,appversion:true,clienttime:true,containermodule:true,country:true,entry_point:true,error_text:true,group_size:true,message_type:true,mid:true,name:true,offline_threadid:true,previous_reaction:true,reaction:true,recipient_id:true,thread_type:true,threadid:true,vc:true};f.exports=h}),null);
__d("MessengerWebViewReactionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$MessengerWebViewReactionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$MessengerWebViewReactionsTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$MessengerWebViewReactionsTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$MessengerWebViewReactionsTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$MessengerWebViewReactionsTypedLogger1)};h.prototype.updateData=function(j){this.$MessengerWebViewReactionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerWebViewReactionsTypedLogger1,j);return this};h.prototype.setEmojiGroup=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group=j;return this};h.prototype.setEmojiGroupCount=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group_count=j;return this};h.prototype.setEvent=function(j){this.$MessengerWebViewReactionsTypedLogger1.event=j;return this};h.prototype.setMid=function(j){this.$MessengerWebViewReactionsTypedLogger1.mid=j;return this};h.prototype.setSenderID=function(j){this.$MessengerWebViewReactionsTypedLogger1.sender_id=j;return this};h.prototype.setVC=function(j){this.$MessengerWebViewReactionsTypedLogger1.vc=j;return this};var i={emoji_group:true,emoji_group_count:true,event:true,mid:true,sender_id:true,vc:true};f.exports=h}),null);
__d("StickersTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$StickersTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$StickersTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$StickersTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$StickersTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$StickersTypedLogger1)};h.prototype.updateData=function(j){this.$StickersTypedLogger1=babelHelpers["extends"]({},this.$StickersTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$StickersTypedLogger1.event=j;return this};h.prototype.setNumsearchresults=function(j){this.$StickersTypedLogger1.numsearchresults=j;return this};h.prototype.setPackid=function(j){this.$StickersTypedLogger1.packid=j;return this};h.prototype.setPackids=function(j){this.$StickersTypedLogger1.packids=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setSearchtoken=function(j){this.$StickersTypedLogger1.searchtoken=j;return this};h.prototype.setStickerid=function(j){this.$StickersTypedLogger1.stickerid=j;return this};h.prototype.setTagid=function(j){this.$StickersTypedLogger1.tagid=j;return this};h.prototype.setTriggeredword=function(j){this.$StickersTypedLogger1.triggeredword=j;return this};h.prototype.setTriggerused=function(j){this.$StickersTypedLogger1.triggerused=j;return this};var i={event:true,numsearchresults:true,packid:true,packids:true,searchtoken:true,stickerid:true,tagid:true,triggeredword:true,triggerused:true};f.exports=h}),null);
__d("MessagesViewerSetID",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("MessagesViewer",["AsyncRequest","DOM","MessagesViewerSetID","PhotoStore","React","ReactDOM","emptyFunction","ge"],(function a(b,c,d,e,f,g){__p&&__p();var h={renderSpotlight:function j(k,l,m,n){__p&&__p();var o=k.setID;if(!o)o=c("MessagesViewerSetID").MESSAGES;i(c("React").createElement(m,{actorid:k.actorid,dimensions:[k.dimensions],disablepaging:k.disablePaging,disableForward:k.disableForward,forwardDialogComponent:n,open:true,photoid:k.fbid,reverse:false,rootClassName:k.rootClassName,setid:o,snapToPhoto:k.snapToPhoto,thumbsrc:k.src}));if(!c("PhotoStore").hasBeenCreated(o)&&k.endpoint){var p=new(c("AsyncRequest"))(k.endpoint);if(l)p.setRelativeTo(l);p.send()}},renderVideo:function j(k){i(k)}};function i(j){var k=c("ge")("messages_viewer");if(!k){k=c("DOM").create("div",{id:"messages_viewer"});document.body.appendChild(k)}c("ReactDOM").render(j,k,function(){this.subscribeOnce("close",function(){c("ReactDOM").unmountComponentAtNode(k)})})}f.exports=h}),null);
__d("MercuryAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";var h={renderVideo:function i(j){c("Bootloader").loadModules(["MessagingVideoViewer.react","MessagingForwardAttachmentDialog.react"],function(k,l){c("MessagesViewer").renderVideo(c("React").createElement(k,babelHelpers["extends"]({},j,{forwardDialogComponent:l})))},"MercuryAttachmentViewer")},bootstrapWithConfig:function i(j,k){c("Bootloader").loadModules(["SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],function(l,m){c("MessagesViewer").renderSpotlight(j,k,l,m)},"MercuryAttachmentViewer")},preload:function i(){c("Run").onAfterLoad(function(){c("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],c("emptyFunction"),"MercuryAttachmentViewer")})}};f.exports=h}),null);
__d("ChatNotificationConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1})}),null);
__d("ChatBehavior",["Arbiter","AvailableList","AvailableListConstants","ChatNotificationConstants"],(function a(b,c,d,e,f,g){__p&&__p();var h=false,i=c("AvailableList").getWebChatNotification&&c("AvailableList").getWebChatNotification(),j=h,k=true,l=Object.assign(new(c("Arbiter"))(),{ON_CHANGED:"changed",notifiesUserMessages:function n(){return i!==c("ChatNotificationConstants").NO_USER_MESSAGE_NOTIFICATION},ignoresRemoteTabRaise:function n(){return j},showsTabUnreadUI:function n(){return k}});function m(){l.inform(l.ON_CHANGED)}c("AvailableList").subscribe&&c("AvailableList").subscribe(c("AvailableListConstants").ON_CHAT_NOTIFICATION_CHANGED,function(){var n=i,o=c("AvailableList").getWebChatNotification();i=o;if(n!=o)m()});c("Arbiter").subscribe("chat/set_does_page_occlude_tabs",function(n,o){j=!!o;m()});c("Arbiter").subscribe("chat/set_show_tab_unread_ui",function(n,o){k=!!o;m()});f.exports=l}),null);
__d("MercuryTypingAnimation.react",["cx","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m="_4a0v _1x3z";return c("React").createElement("div",{className:c("joinClasses")(this.props.className,m)},c("React").createElement("div",{className:"_4b0g"},c("React").createElement("div",{className:"_5pd7"}),c("React").createElement("div",{className:"_5pd7"}),c("React").createElement("div",{className:"_5pd7"})))};function l(){i.apply(this,arguments)}l.propTypes={color:k.oneOf(["light","dark"])};l.defaultProps={color:"dark"};f.exports=l}),null);
__d("ChatTypingIndicator.react",["cx","fbt","ChatConfig","Image.react","MercuryConfig","MercuryParticipants","MercuryTypingAnimation.react","ReactComponentWithPureRenderMixin","React","QE2Logger"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("React").PropTypes,k=c("ChatConfig").get("chattab_rounded_profile",false),l=c("React").createClass({displayName:"ChatTypingIndicator",mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{isOnline:j.bool,userID:j.string,showName:j.bool},componentDidMount:function n(){c("QE2Logger").logExposureForUser("messenger_growth_tombstone")},render:function n(){var o=void 0;if(this.props.userID)o=c("MercuryParticipants").getNow(this.props.userID);if(!o)return null;var p=c("MercuryConfig").GDWC&&!!this.props.isOnline;return c("React").createElement("div",{className:"_4tdt"},m(o,p),this._renderBubble())},getBubble:function n(){return this.refs.bubble},_renderBubble:function n(){var o=this.props.showName;return c("React").createElement("div",{className:"_4tdv"},c("React").createElement("div",{className:"_5wd4 _1nc7 _2cnu"+(o?" _5ysy":"")},c("React").createElement("div",{className:"_5wd9 _n4o"},c("React").createElement("div",{className:"_5w1r _5wdf _3_om"},c("React").createElement(c("MercuryTypingAnimation.react"),{className:"_5x7x",ref:"bubble"})))))}});function m(n,o){var p=i._("{name}",[i._param("name",n.name)]);return c("React").createElement("div",{className:"_31o4"+(k?" _3njy":"")},c("React").createElement("a",{"aria-label":p,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":p,"data-tooltip-position":"left",href:n.href||"#",ref:"link"},c("React").createElement(c("Image.react"),{src:n.image_src,ref:"image"})),o?c("React").createElement("div",{className:"_sce"}):null)}f.exports=l}),null);
__d("ChatTypingIndicators.react",["fbt","ChatTypingIndicator.react","DOM","immutable","MercuryIDs","MercuryThreadInformer","MercuryThreads","MercuryParticipants","React","ReactDOM","SubscriptionsHandler","TooltipData","createObjectFrom","emptyFunction"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("MercuryThreads").get(),j=c("React").PropTypes,k=c("React").createClass({displayName:"ChatTypingIndicators",propTypes:{indicatorClass:j.func,indicatorsDidShow:j.func,indicatorsDidHide:j.func,onlineUsers:j.instanceOf(c("immutable").List),rootClassName:j.string,threadID:j.string.isRequired,viewer:j.string.isRequired,typingUserIDs:j.arrayOf(j.string.isRequired).isRequired},getDefaultProps:function l(){return{indicatorClass:c("ChatTypingIndicator.react"),indicatorsDidShow:c("emptyFunction"),indicatorsDidHide:c("emptyFunction")}},shouldComponentUpdate:function l(m){__p&&__p();var n=new Set(m.typingUserIDs),o=new Set(this.props.typingUserIDs);if(n.size!==o.size)return true;for(var p=n,q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var s;if(q){if(r>=p.length)break;s=p[r++]}else{r=p.next();if(r.done)break;s=r.value}var t=s;if(!o.has(t))return true}return m.threadID!==this.props.threadID||m.viewer!==this.props.viewer||m.onlineUsers!==this.props.onlineUsers||m.rootClassName!==this.props.rootClassName},componentDidUpdate:function l(){if(this.props.typingUserIDs.length>0)this.props.indicatorsDidShow();else this.props.indicatorsDidHide();c("MercuryParticipants").getMulti(this.props.typingUserIDs,function(m){if(this.isMounted())this.props.typingUserIDs.forEach(function(n){var o=m[n],p=this.refs[n]&&this.refs[n].getBubble();if(p&&o)c("TooltipData").set(c("ReactDOM").findDOMNode(p),this.renderTooltip(o.short_name),"above","left")}.bind(this))}.bind(this))},render:function l(){if(!c("MercuryIDs").isValid(this.props.threadID))return null;var m=i.getThreadMetaNow(this.props.threadID);if(m&&!m.is_subscribed)return null;var n=c("MercuryIDs").isGroupChat(this.props.threadID);return c("React").createElement("div",{className:this.props.rootClassName},this.props.typingUserIDs.slice().sort().map(function(o){return this._renderTypingIndicator(o,!!n)}.bind(this)))},_renderTypingIndicator:function l(m,n){var o=this.props.indicatorClass,p=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(c("MercuryIDs").getUserIDFromParticipantID(m));return c("React").createElement(o,{key:m,ref:m,showName:n,userID:m,isOnline:p})},renderTooltip:function l(m){var n=c("DOM").create("span");c("ReactDOM").render(c("React").createElement("span",null,h._("{name} is typing...",[h._param("name",m)])),n);return n}});f.exports=k}),null);
__d("ChatTypingIndicatorsWrapper.react",["ChatTypingIndicators.react","immutable","MessengerState.bs","React"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){"use strict";return c("React").createElement(c("MessengerState.bs").jsComponent,{fbid:this.props.viewer},function(k){return c("React").createElement(c("ChatTypingIndicators.react"),{indicatorClass:this.props.indicatorClass,indicatorsDidHide:this.props.indicatorsDidHide,indicatorsDidShow:this.props.indicatorsDidShow,onlineUsers:this.props.onlineUsers,rootClassName:this.props.rootClassName,threadID:this.props.threadID,typingUserIDs:Object.keys(c("MessengerState.bs").typing(k)[this.props.threadID]||{}),viewer:this.props.viewer})}.bind(this))};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("MessageBorderType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLOWERS:"flowers"})}),null);
__d("MessageCustomizationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BORDER:"border"})}),null);
__d("MessagingFlowerCornerArrangements",["invariant","ix","Random","randomShuffle"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=Object.freeze({TOP_LEFT:"topLeft",BOTTOM_RIGHT:"bottomRight"}),k=Object.freeze({PINK:"pink",PURPLE:"purple",YELLOW:"yellow"}),l=Object.freeze({ROUND:"round",POINTY:"pointy"}),m=-10;function n(r,s){this.$ElementProducer1=r;this.$ElementProducer4=s;this.$ElementProducer2=c("Random").random()<.5;this.$ElementProducer3=[];var t=[k.PINK,k.PURPLE,k.YELLOW],u=[l.ROUND,l.POINTY,c("Random").random()>=.5?l.ROUND:l.POINTY];c("randomShuffle")(t);c("randomShuffle")(u);for(var v=0;v<3;v++)this.$ElementProducer3.push(this.$ElementProducer5(t[v],u[v]))}n.prototype.$ElementProducer6=function(r){switch(r){case k.PINK:return i("86995");case k.PURPLE:return i("86997");case k.YELLOW:default:return i("86999")}};n.prototype.$ElementProducer7=function(r){switch(r){case k.PINK:return i("86996");case k.PURPLE:return i("86998");case k.YELLOW:default:return i("87000")}};n.prototype.$ElementProducer5=function(r,s){return s===l.POINTY?this.$ElementProducer6(r):this.$ElementProducer7(r)};n.prototype.$ElementProducer8=function(){return this.$ElementProducer3.pop()};n.prototype.flower=function(r){var s=c("Random").random()*360;return this.$ElementProducer9(this.$ElementProducer8(),{pivot:.5,rotationStart:s+r.rotationStartOffset,rotationEnd:s,scale:r.scale,x:r.x,y:r.y})};n.prototype.leaf=function(r){return this.$ElementProducer9(i("86994"),{pivot:1,rotationStart:0,rotationEnd:r.rotationEnd,scale:r.scale,x:r.x,y:r.y})};n.prototype.$ElementProducer9=function(r,s){__p&&__p();var t=s.pivot*100+"%",u=s.x+m,v=s.y+m,w=-s.pivot*100,x=s.scale,y=s.rotationEnd,z=void 0,A=void 0,B=void 0,C=void 0;if(this.$ElementProducer2){var D=u;u=v;v=D;y=-y}if(this.$ElementProducer1===j.BOTTOM_RIGHT){C=this.$ElementProducer4+u+"px";A=this.$ElementProducer4+v+"px";w=100+w;y+=180}else if(this.$ElementProducer1===j.TOP_LEFT){B=this.$ElementProducer4+u+"px";z=this.$ElementProducer4+v+"px"}else h(0);var E=[];if(w!==0)E.push("translate("+w+"%, "+w+"%)");E.push("scale("+x+")");if(y!==0)E.push("rotate("+y+"deg)");return{style:{bottom:A,left:B,position:"absolute",right:C,top:z,transform:E.join(" "),transformOrigin:t+" "+t},image:r}};function o(r){return[r.leaf({x:20.5,y:38,scale:.225,rotationEnd:-80}),r.leaf({x:29,y:22.5,scale:.35,rotationEnd:35}),r.flower({x:31.5,y:22,scale:.6,rotationStartOffset:-70}),r.flower({x:21,y:35,scale:.65,rotationStartOffset:-70}),r.flower({x:21.75,y:24.75,scale:1,rotationStartOffset:50})]}function p(r){return[r.leaf({x:22.25,y:35.25,scale:.225,rotationEnd:-115}),r.leaf({x:35,y:24,scale:.35,rotationEnd:110}),r.flower({x:21.5,y:32.5,scale:.68,rotationStartOffset:-60}),r.flower({x:21.5,y:23.5,scale:.67,rotationStartOffset:-70}),r.flower({x:31,y:21,scale:.95,rotationStartOffset:50})]}function q(r,s){var t=new n(r,s);return c("Random").random()<.5?o(t):p(t)}f.exports={createFlowers:q,corners:j}}),null);
__d("MessagingFlowerBorder.react",["Image.react","MessagingFlowerCornerArrangements","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessagingFlowerBorder1=function(){return c("MessagingFlowerCornerArrangements").createFlowers(c("MessagingFlowerCornerArrangements").corners.TOP_LEFT,this.props.offset).concat(c("MessagingFlowerCornerArrangements").createFlowers(c("MessagingFlowerCornerArrangements").corners.BOTTOM_RIGHT,this.props.offset))}.bind(this),this.state={elements:this.$MessagingFlowerBorder1()},m}k.prototype.render=function(){return c("React").createElement("div",null,this.state.elements.map(function(l,m){return c("React").createElement(c("Image.react"),{key:m,style:l.style,src:l.image})}))};k.propTypes={ChildClass:j.number};k.defaultProps={offset:0};f.exports=k}),null);
__d("MessagingGiftWrap.react",["cx","MessengerEnvironment","React","emptyFunction"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={unwrapped:false},this.$MessagingGiftWrap1=function(r){r.stopPropagation();this.setState({unwrapped:true});this.props.onUnwrap&&this.props.onUnwrap()}.bind(this),n}l.prototype.render=function(){var m=c("MessengerEnvironment").messengerui;return c("React").createElement("div",{className:"_4p0m"+(this.state.unwrapped?" _4p0o":"")+(m?" _mxz":"")+(m?" _4br2":"")+(!m?" _3_om":"")+(this.props.isSticker?" _52vq":""),onClick:this.$MessagingGiftWrap1,role:"presentation"},c("React").createElement("div",{className:"_4p0r"}),c("React").createElement("div",{className:"_4p0s _4p0t"}),c("React").createElement("div",{className:"_4p0s _4p0u"}))};l.propTypes={isSticker:k.bool,onUnwrap:k.func};l.defaultProps={onUnwrap:c("emptyFunction")};f.exports=l}),null);
__d("MessengerDecoratorP2PUtil",["MercuryAttachment","MercuryAttachmentType","StoryAttachmentStyle"],(function a(b,c,d,e,f,g){"use strict";var h=function h(j){return j===Object(j)},i={isP2PAttachment:function j(k){var l=c("MercuryAttachment").get(k).filter(function(m){return h(m)&&this.isP2P(m)}.bind(this));return!!l.length},isP2P:function j(k){return!!(this._isStoryBased(k)&&(k.share.style_list.indexOf(c("StoryAttachmentStyle").ORION)>-1||k.share.style_list.indexOf(c("StoryAttachmentStyle").ORION_REQUEST)>-1))},_isStoryBased:function j(k){return!!(k.attach_type===c("MercuryAttachmentType").SHARE&&k.share&&k.share.style_list)}};f.exports=i}),null);
__d("MessageReactionMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1491398900900362"};j.getQueryID=function(){"use strict";return"254517288326467"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerReactionsContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerHideOnScrollOut","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("ReactLayer").createClass(c("ReactAbstractContextualDialog").createSpec({addedBehaviors:[c("ContextualLayerAutoFlipHorizontal"),c("ContextualLayerHideOnScrollOut"),c("ContextualLayerUpdateOnScroll"),c("LayerHideOnEscape"),c("AccessibleLayer")],displayName:"MessengerReactionsContextualDialog",shouldSetARIAProperties:false,theme:{wrapperClassName:"_4owc"}}));f.exports=i}),null);
__d("MessengerReactionsUtil",["EmojiFormat"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[[128525],[128518],[128558],[128546],[128544],[128077],[128078]],i={};h.forEach(function(j,k){i[c("EmojiFormat").codeArrayToUnicode(j)]=k+1});f.exports={sortFunction:function j(k,l){if(!i[k]&&!i[l])return 0;else if(!i[k])return 1;else if(!i[l])return-1;return i[k]-i[l]},defaultReactions:h.map(c("EmojiFormat").codeArrayToUnicode)}}),null);
__d("MessengerReactionsMenu.react",["cx","Promise","Bootloader","CurrentUser","CSS","DOMContainer.react","MercuryIDs","MercuryMessages","MercuryThreads","MessengerMessageActionsTypedLogger","MessengerReactionsContextualDialog.react","MessengerSupportedEmojiUtils","MessengerTextWithEmoticons.react","MessengerReactionsWebConfig","MessengerReactionsUtil","MessageReactionMutationWebGraphQLMutation","React","XAsyncRequest","createCancelableFunction","getThreadTypeNameFromThreadType","gkx","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={animations:{},reactions:c("MessengerReactionsUtil").defaultReactions.slice()},this.$MessengerReactionsMenu5=function(q){!q&&this.props.onHide()}.bind(this),m}k.prototype.componentDidMount=function(){if(c("gkx")("AT7dFvDvstgBLQPTzIVQ-K_BRNJQyn38FQ8LsrhoWHNPhYTHpIiylBssyGU3E_0HnxERJO-whPUbuICbRNRkf3gv")){this.$MessengerReactionsMenu1=c("createCancelableFunction")(function(l){return this.setState({animations:l})}.bind(this));this.loadAnimations().done(this.$MessengerReactionsMenu1)}this.$MessengerReactionsMenu2()};k.prototype.UNSAFE_componentWillReceiveProps=function(l){this.$MessengerReactionsMenu2()};k.prototype.componentWillUnmount=function(){this.$MessengerReactionsMenu1&&this.$MessengerReactionsMenu1.cancel()};k.prototype.$MessengerReactionsMenu2=function(){if(this.props.useChatEmojiReact){var l,m=c("MessengerReactionsUtil").defaultReactions.slice(),n=c("MercuryThreads").get().getThreadMetaNow(this.props.message.thread_id),o=(l=n)!=null?(l=l.custom_like_icon)!=null?l.emoji:l:l;if(o!=null&&!m.includes(o))m.push(o);this.setState({reactions:m})}};k.prototype.$MessengerReactionsMenu3=function(){return new(c("Promise"))(function(l){return c("Bootloader").loadModules(["Keyframes"],function(m){return l(m)},"MessengerReactionsMenu.react")})};k.prototype.$MessengerReactionsMenu4=function(){return this.$MessengerReactionsMenu3().then(function(l){return c("Promise").all(["love","haha","wow","sad","angry","thumbsup","thumbsdown"].map(function(m){return l.requestRenderer(c("MessengerReactionsWebConfig").paths[m],{projectName:"messaging_reactions",assetName:m})}))}).then(function(l){return l.map(function(m){var n=m.setWidth(45).setHeight(45).repeatForever().play().redrawIfNeeded().getElement();c("CSS").addClass(n,"_37pj");return n}).reduce(function(m,n,o){m[c("MessengerReactionsUtil").defaultReactions[o]]=n;return m},{})})};k.prototype.loadAnimations=function(){var l=Date.now(),m=this.$MessengerReactionsMenu4();m.done(function(n){c("Bootloader").loadModules(["MessengerRestReactionTypedLogger"],function(o){new o().setLoadedTime(Date.now()-l).log()},"MessengerReactionsMenu.react")});return m};k.prototype.render=function(){var l=c("CurrentUser").getID(),m=this.props.message.reactions&&this.props.message.reactions[l];return c("React").createElement(c("MessengerReactionsContextualDialog.react"),{alignment:"center",contextRef:this.props.refProp,shown:true,onBlur:this.props.onHide,onToggle:this.$MessengerReactionsMenu5},c("React").createElement("div",{role:"listbox","aria-orientation":"horizontal",className:"_1z8q _fy2"},this.state.reactions.map(function(n){return c("React").createElement("span",{className:"_1z8r"+(n===m?" _5-2b":""),id:n,key:n,onClick:function(){return this.$MessengerReactionsMenu6(n)}.bind(this),role:"option","aria-selected":n===m,tabIndex:"0"},!this.state.animations[n]?c("React").createElement(c("MessengerTextWithEmoticons.react"),{customSize:true,forceMessengerEmoji:true,renderEmoticons:true,renderEmoji:true,text:n}):c("React").createElement(c("DOMContainer.react"),null,this.state.animations[n]))}.bind(this))))};k.prototype.$MessengerReactionsMenu7=function(l){if(!c("MessengerReactionsUtil").defaultReactions.includes(l))return c("MessengerSupportedEmojiUtils").getSupportedEmojiKey(l);return l};k.prototype.$MessengerReactionsMenu6=function(l){var m=this.props,n=m.message,o=m.entryPoint,p=c("CurrentUser").getID(),q=n.reactions&&n.reactions[p],r=c("MercuryMessages").get().getServerMessageID(n.message_id),s=c("MessageReactionMutationWebGraphQLMutation").getURI({action:l===q?"REMOVE_REACTION":"ADD_REACTION",message_id:r,actor_id:p,reaction:l}),t=function(u){var v=n.other_user_fbid||n.thread_fbid,w=c("MercuryThreads").get().getThreadMetaNow(n.thread_id),x=w&&w.participants?w.participants.length:0,y=c("getThreadTypeNameFromThreadType")(w&&w.thread_type),z=n.attachments[0],A=new(c("MessengerMessageActionsTypedLogger"))().setAction("reaction").setOfflineThreadid(n.offline_threading_id).setMid(r).setRecipientID(c("MercuryIDs").getUserIDFromParticipantID(n.author)).setEntryPoint(o).setReaction(this.$MessengerReactionsMenu7(l)).setPreviousReaction(this.$MessengerReactionsMenu7(q)).setGroupSize(x).setThreadType(y).setThreadid(v);if(u.errorSummary)A=A.setErrorText(u.errorSummary.toString());if(z)A=A.setMessageType(z.attach_type);A.log()}.bind(this);new(c("XAsyncRequest"))(s).setMethod("POST").setHandler(t).send();this.props.onHide()};f.exports=k}),null);
__d("MessengerReactionsPrompt.react",["cx","ix","Image.react","MessengerReactionsMenu.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={open:false},this.$MessengerReactionsPrompt1=function(){this.setState({open:true},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this));this.props.setReactionsPromptShown&&this.props.setReactionsPromptShown(true)}.bind(this),this.$MessengerReactionsPrompt2=function(){this.setState({open:false},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this));this.props.setReactionsPromptShown&&this.props.setReactionsPromptShown(false)}.bind(this),n}l.prototype.render=function(){if(!this.props.messageIsSelected&&!this.state.open)return null;return c("React").createElement("span",{className:(!this.props.isQuickAdd?"_5zvq":"")+(this.props.isQuickAdd?" _yav":""),onClick:this.state.open?null:this.$MessengerReactionsPrompt1,ref:"button"},c("React").createElement(c("Image.react"),{src:this.props.isQuickAdd?i("278123"):this.state.open?i("277597"):i("277596")}),this.renderMenu())};l.prototype.renderMenu=function(){if(!this.state.open)return null;return c("React").createElement(c("MessengerReactionsMenu.react"),{entryPoint:"awareness_plus",message:this.props.message,onHide:this.$MessengerReactionsPrompt2,refProp:function(){return this.refs.button}.bind(this),useChatEmojiReact:this.props.useChatEmojiReact})};f.exports=l}),null);
__d("MessengerReactions.react",["cx","fbt","Bootloader","CurrentUser","MercuryAttachmentType","MercuryConfig","MercuryIDs","MercuryParticipants","MessengerEnvironment","MessengerReactionsPrompt.react","MessengerReactionsUtil","MessengerTextWithEmoticons.react","MessengerWebViewReactionsTypedLogger","React","ShimButton.react","StoryAttachmentStyle","TooltipData","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="ALL",n=c("CurrentUser").getID(),o=3,p=9;j=babelHelpers.inherits(q,c("React").Component);k=j&&j.prototype;function q(){__p&&__p();var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.state={reactionsPromptShown:false},this.$MessengerReactions1=function(w){this.setState({reactionsPromptShown:w})}.bind(this),this.$MessengerReactions3=function(){var w=c("MessengerEnvironment").messengerui,x=this.props,y=x.isFromViewer,z=x.message,A=x.participants,B=z.reactions;new(c("MessengerWebViewReactionsTypedLogger"))().setEvent("open_details").setMid(z.message_id).setSenderID(z.author).setEmojiGroup(m).setEmojiGroupCount(Object.values(B).length).log();if(w)c("Bootloader").loadModules(["MessengerDialogs.bs","MessengerReactionsDialogReact.bs"],function(C,D){var E=D.jsComponent;C.showDialog(function(){return c("React").createElement(E,{isFromViewer:y,participants:A,message:z})})},"MessengerReactions.react");else c("Bootloader").loadModules(["ChatReactionsDialog"],function(C){C.show(z,A,y)},"MessengerReactions.react")}.bind(this),s}q.prototype.render=function(){__p&&__p();var r,s=this.props,t=s.message,u=s.participants,v=s.renderQuickAdd,w=s.hovered,x=t.reactions,y=t.attachments,z=y&&y.length===1&&c("MercuryConfig").MNFWD&&x&&Object.keys(x).length===0;if(z&&y[0].attach_type===c("MercuryAttachmentType").STICKER)return null;if(!this.state.reactionsPromptShown&&!w&&z&&y[0].attach_type===c("MercuryAttachmentType").SHARE)return null;if(((r=y[0])!=null?(r=r.share)!=null?(r=r.style_list)!=null?r[0]:r:r:r)===c("StoryAttachmentStyle").MONTAGE_DIRECT)return null;if((!x||!u)&&!v)return null;var A={},B=0,C=false;Object.entries(x||{}).forEach(function(H){var I=H[0],J=H[1];if(typeof J==="string"){if(I===n)C=true;if(!A[J])A[J]=0;A[J]++;B++}});var D=Object.keys(A).sort(c("MessengerReactionsUtil").sortFunction).slice(0,o).map(function(H,I,x){return c("React").createElement("span",{className:"_4kf5",style:{zIndex:x.length-I,marginLeft:I===0?0:"-4px"},key:H},c("React").createElement(c("MessengerTextWithEmoticons.react"),{customSize:true,renderEmoticons:true,renderEmoji:true,forceMessengerEmoji:true,text:H}))}),E=B>0?c("React").createElement("span",{className:"_4kf5 _4kf6"+(C?" _fy2":"")},B):null,F=v&&!C?c("React").createElement("div",{className:"_aou _aov"},c("React").createElement("span",{className:"_aow"},c("React").createElement(c("MessengerReactionsPrompt.react"),{message:t,messageIsSelected:true,isQuickAdd:true,useChatEmojiReact:c("MercuryConfig").MCER,setReactionsPromptShown:this.$MessengerReactions1}))):null,G=c("TooltipData").propsFor(this.$MessengerReactions2());return c("React").createElement("div",babelHelpers["extends"]({},G,{className:"_4kf7 preview"}),c("React").createElement(c("ShimButton.react"),{className:"_aou",onClick:this.$MessengerReactions3},D,E),F)};q.prototype.$MessengerReactions2=function(){__p&&__p();var r=this.props.message.reactions,s=this.props.participants;if(!r||!s)return"";var t=Object.keys(r),u=t.reduce(function(u,y){if(u.length>=p)return u;var z=c("MercuryIDs").getParticipantIDFromUserID(y),A=s.get(z)||c("MercuryParticipants").getNow(z),B=A&&A.name;if(B)u.push(B);return u},[]),v=u.length,w=u.join("\n");if(t.length>v){var x=i._("and {count} other(s)",[i._param("count",t.length-v)]);w+="\n"+x.toString()}return w};q.propTypes={isFromViewer:l.bool.isRequired,message:l.object.isRequired,participants:l.object,renderQuickAdd:l.bool,hovered:l.bool};f.exports=q}),null);
__d("MessengerDecorator",["cssVar","cx","invariant","BootloadedComponent.react","CurrentUser","JSResource","MercuryAttachment","MercuryAttachmentType","MercuryConfig","MercuryMessageActions","MercuryMessageCustomizations","MercuryTagHelper","MessageBorderType","MessageCustomizationType","MessagingFlowerBorder.react","MessagingGiftWrap.react","MessagingGiftWrapConstants","MessengerDecoratorP2PUtil","MessengerEnvironment","MessengerReactions.react","React","StoryAttachmentStyle","gkx","idx"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=function k(w){var x=w.attachments&&w.attachments.length===1&&w.attachments[0]&&w.attachments[0].attach_type!==c("MercuryAttachmentType").STICKER&&!c("MessengerDecoratorP2PUtil").isP2PAttachment(w);return!!x},l=function l(w){return k(w)&&c("MercuryAttachment").isLightweightActionAttachment(w.attachments[0])},m=function m(w){__p&&__p();if(o(w))return false;var x=w.attachments&&w.attachments.length===1&&w.attachments[0];w||j(0);if(!x)return false;if(c("MercuryAttachment").isPhotoGroupAttachment(x))return true;if(c("MercuryAttachment").isFileAttachment(x))if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK&&x.message_file_fbid)return true;return false},n=function n(w){var x;if(c("MessengerEnvironment").messengerui)return false;var y=(x=w.reactions)!=null?x[c("CurrentUser").getID()]:x;return!!y&&typeof y==="string"},o=function o(w){var x;return c("gkx")("AT5MAotH6BG7mXo4DyZnW3seA7_jf32c8tGX1llmkbXJ5ui_oKs0jpz-iYum9Gkv1o7pv5ZMvW9WlaNx_vA1ZSmAhi0Rjb62jJA5vu2Oz81AxQ")&&((x=w)!=null?(x=x.attachments)!=null?(x=x[0])!=null?(x=x.share)!=null?(x=x.style_list)!=null?x[0]:x:x:x:x:x)===c("StoryAttachmentStyle").MONTAGE_DIRECT},p=function p(w){__p&&__p();var x=[],y=[];w.attachments.forEach(function(z){if(z.metadata&&z.metadata.fbid){x.push(z.metadata.fbid.toString());y.push(z.attach_type.toString())}if(c("MercuryAttachment").isFileAttachment(z)&&z.message_file_fbid)if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK){x.push(z.message_file_fbid);y.push(z.attach_type)}});return{ids:x,types:y}},q=[{name:"GiftWrap",check:function w(x){var y=function y(A){return c("MercuryTagHelper").get(A,c("MessagingGiftWrapConstants").TAG_PREFIX)===c("MessagingGiftWrapConstants").VALENTINES_GIFT},z=function z(A){return!!c("MercuryTagHelper").get(A,c("MessagingGiftWrapConstants").UNWRAPPED_TAG)};return!!(x.tags&&y(x.tags)&&!z(x.tags))},render:function w(x,y){return c("React").createElement(c("MessagingGiftWrap.react"),{key:"giftwrap",onUnwrap:function z(){var A="2500ms",B=parseInt(A.substring(0,A.length-2),10);setTimeout(function(){return c("MercuryMessageActions").get().unwrap(x)},B)}})},getAdditionalClassNames:function w(){return null}},{name:"FlowerBorder",check:function w(x){return c("gkx")("AT7rTubr3N_DsfglfGkvVFG3tMrhGme9-eELltAXoSOKkQuD-9JepjOeFPMl1e8XndLLgVmcw1EaaNThD3K6r4QJpohV9bITGr6_ur1k_X_RGQ")&&c("MercuryMessageCustomizations").getCustomizationValue(x,c("MessageCustomizationType").BORDER)===c("MessageBorderType").FLOWERS},render:function w(x,y){if(c("MessengerEnvironment").messengerui)return c("React").createElement(c("MessagingFlowerBorder.react"),{offset:-10,key:"giftwrap:"+x.message_id});return c("React").createElement(c("MessagingFlowerBorder.react"),{key:"giftwrap:"+x.message_id})},getAdditionalClassNames:function w(){if(!c("MessengerEnvironment").messengerui)return"_337n";return null}},{name:"Reactions",check:function w(x,y){if(o(x))return false;var z=!!(x.reactions&&Object.keys(x.reactions).length>0),A=!!(!y&&(m(x)||k(x)&&c("MercuryConfig").MNFWD));return(z||A)&&!l(x)},render:function w(x,y,z,A){var B=m(x)||k(x)&&c("MercuryConfig").MNFWD;return c("React").createElement(c("MessengerReactions.react"),{isFromViewer:y,key:x.message_id+"-reactions",message:x,renderQuickAdd:B&&!y,hovered:A,participants:z&&z.participants})},getAdditionalClassNames:function w(){return"_5z-5"}}],r=[],s=[],t=[{name:"MontageReply",check:function w(x){if(!c("MercuryConfig").MontageThreadViewer)return false;var y=x.montage_reply_data&&x.montage_reply_data.message_id;return!!y},render:function w(x,y){var z=x.montage_reply_data&&x.montage_reply_data.message_id,A=x.montage_reply_data&&x.montage_reply_data.reply_action;return c("React").createElement(c("BootloadedComponent.react"),{key:"montagereply:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MontageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:y,messageID:z,replyAction:A,replyAuthorID:x.author,threadID:x.thread_id})},getAdditionalClassNames:function w(){return null}},{name:"MessageReply",check:function w(x){if(!x.replied_to_message)return false;return c("gkx")("AT4CzFQpJfvFelj2165PMRpSmjl0KkqVpD7kcMn3m4229dpMBBNhzyATOEkUEFXxBLU6M-O8cZ7ZedDaOvs3WNr-i5u563hgB6TbE_VE4wwFnQ")},render:function w(x,y){return c("React").createElement(c("BootloadedComponent.react"),{key:"messagereply:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:y,authorID:x.author,repliedToMessage:x.replied_to_message,threadID:x.thread_id})},getAdditionalClassNames:function w(){return null}}],u=[{name:"ForwardImages",check:function w(x){return m(x)},render:function w(x,y){var z=p(x),A=z.ids,B=z.types;return c("React").createElement(c("BootloadedComponent.react"),{key:"forwardimages:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("MessengerEnvironment").messengerui?c("JSResource")("MessengerPhotoForwardButton.react").__setRef("MessengerDecorator"):c("JSResource")("ChatPhotoForwardButton.react").__setRef("MessengerDecorator"),attachmentIDs:A,attachmentTypes:B,isFromViewer:y})},getAdditionalClassNames:function w(){return"_ylc"}},{name:"MontageDirectKeep",check:function w(x){return o(x)},render:function w(x,y,z){return c("React").createElement(c("BootloadedComponent.react"),{key:"montagedirectkeep:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MontageDirectKeep.react").__setRef("MessengerDecorator"),message:x})},getAdditionalClassNames:function w(){return null}},{name:"ReactionPrompt",check:function w(x){if(o(x))return false;return n(x)||!m(x)&&!l(x)},render:function w(x,y,z){var A=c("MercuryConfig").MNFWD&&k(x);return c("React").createElement(c("BootloadedComponent.react"),{key:"reactionprompt:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerReactionsPrompt.react").__setRef("MessengerDecorator"),message:x,messageIsSelected:z&&z.messageIsSelected&&!A,useChatEmojiReact:c("MercuryConfig").MCER,onShowMenu:z&&z.onShowMenu})},getAdditionalClassNames:function w(){return null}},{name:"MessageActions",check:function w(x){if(o(x))return false;return c("MessengerEnvironment").messengerui},render:function w(x,y,z){var A=o(x)?false:(m(x)||k(x)&&c("MercuryConfig").MNFWD)&&!l(x);return c("React").createElement(c("BootloadedComponent.react"),{key:"messageactions:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerMessageActions.react").__setRef("MessengerDecorator"),message:x,isActive:z&&z.messageIsSelected,onShowMenu:z&&z.onShowMenu,includeReactions:A,isShowingOriginal:z&&z.isShowingOriginal,hasFormatting:z&&z.hasFormatting,onToggleOriginal:z&&z.handleToggleOriginal,onReplyToMessage:z&&z.onReplyToMessage})},getAdditionalClassNames:function w(){return null}}],v={getBeforeDecorators:function w(){return t},getAfterDecorators:function w(){return q},getInnerDecorators:function w(){return u},getAfterExternalDecorators:function w(){return r},getInsideDecorators:function w(){return s}};f.exports=v}),null);
__d("MessengerInnerDecorators.react",["cx","Locale","MessengerDecorator","React","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={shown:false},this.$MessengerInnerDecorators1=function(q){this.setState({shown:q})}.bind(this),m}k.prototype.render=function(){var l=c("MessengerDecorator").getInnerDecorators().map(function(m){if(m.check(this.props.message))return m.render(this.props.message,this.props.isFromViewer,babelHelpers["extends"]({},this.props.messageProps,{messageIsSelected:this.props.hovered||this.state.shown,onShowMenu:this.$MessengerInnerDecorators1}));return null}.bind(this)).filter(Boolean);return c("React").createElement("span",{className:"_40fu"+(c("gkx")("AT70rONwKRIflAfK7-b4vyJ1_mxpZCDSr6xln8L8WEV8pNQI_XsW4Dd8Eel-gRLLo1OcnJGbyGR6AUa0wFCxwPsr")&&c("Locale").isRTL()?" _64wc":"")},c("React").createElement("span",{className:"_2u_d"},l))};f.exports=k}),null);
__d("MessengerVideoAutoplayActions",["MessengerFluxReduceDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h="messenger_video",i=c("keyMirror")({DESTROY:null,DSTROY_ALL:null,SCROLL:null,UPDATE:null}),j={Types:i,Namespace:h,onScroll:function k(l,m,n,o){c("MessengerFluxReduceDispatcher").dispatch({type:i.SCROLL,namespace:h,threadID:l,messageIDs:m,messageRectMap:n,viewportRect:o})},updateStore:function k(l,m){c("MessengerFluxReduceDispatcher").dispatch({type:i.UPDATE,namespace:h,threadID:l,messageIDs:m})},deleteThread:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:i.DESTROY,namespace:h,threadID:l})},deleteAllThreads:function k(){c("MessengerFluxReduceDispatcher").dispatch({type:i.DESTROY_ALL,namespace:h})}};f.exports=j}),null);
__d("MessengerVideoAutoplayStore",["FluxReduceStore","immutable","MessengerVideoAutoplayActions","MessengerFluxReduceDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("MessengerVideoAutoplayActions").Types;h=babelHelpers.inherits(m,c("immutable").Record({currentVideoMessageID:null,lastVideoMessageID:null,messageIDs:null,videoVisibilityMap:null}));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.__moduleID=f.id,p}n.prototype.getInitialState=function(){return c("immutable").Map()};n.prototype.reduce=function(o,p){__p&&__p();if(p.namespace!==c("MessengerVideoAutoplayActions").Namespace)return o;switch(p.type){case l.SCROLL:if(p.messageIDs)o=this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);return this.$MessengerVideoAutoplayStore2(o,p.threadID,p.messageRectMap,p.viewportRect);case l.UPDATE:return this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);case l.DESTROY:return this.$MessengerVideoAutoplayStore3(o,p.threadID);case l.DESTROY_ALL:return o.clear()}return o};n.prototype.$MessengerVideoAutoplayStore1=function(o,p,q){if(!q)return o["delete"](p);return o.set(p,new m({currentVideoMessageID:null,lastVideoMessageID:q.first(),messageIDs:q,videoVisibilityMap:null}))};n.prototype.$MessengerVideoAutoplayStore3=function(o,p){return o["delete"](p)};n.prototype.$MessengerVideoAutoplayStore4=function(o,p,q,r,s){var t=null,u=q.map(function(v){if(t)return[v,false];else{var w=this.$MessengerVideoAutoplayStore5(v,r,s);if(w)t=v;return[v,w]}}.bind(this)).fromEntrySeq().toOrderedMap();return o.mergeIn([p],{currentVideoMessageID:t,videoVisibilityMap:u})};n.prototype.$MessengerVideoAutoplayStore2=function(o,p,q,r){__p&&__p();var s=o.getIn([p,"messageIDs"]);if(!s||!q||!r)return o;if(!o.getIn([p,"currentVideoMessageID"]))return this.$MessengerVideoAutoplayStore4(o,p,s,q,r);else{var t=o.getIn([p,"videoVisibilityMap"]),u=o.getIn([p,"lastVideoMessageID"]),v=o.getIn([p,"currentVideoMessageID"]);if(this.$MessengerVideoAutoplayStore5(u,q,r)){if(t&&t.first())return o}else if(this.$MessengerVideoAutoplayStore5(v,q,r))return o;o=o.setIn([p,"currentVideoMessageID"],null);return this.$MessengerVideoAutoplayStore4(o,p,s,q,r)}};n.prototype.$MessengerVideoAutoplayStore6=function(o,p){if(!o)return false;return o.top>p.top&&o.bottom<p.bottom};n.prototype.$MessengerVideoAutoplayStore5=function(o,p,q){var r=p.get(o);return this.$MessengerVideoAutoplayStore6(r,q)};n.prototype.getVideoVisibilityMap=function(o){return this.getState().getIn([o,"videoVisibilityMap"])};n.prototype.getMessageIDs=function(o){return this.getState().getIn([o,"messageIDs"])};n.prototype.isVisible=function(o,p){return!!this.getState().getIn([o,"videoVisibilityMap",p])};f.exports=new n(c("MessengerFluxReduceDispatcher"))}),null);
__d("XMNCommercePostbackCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/postback/",{cta_id:{type:"String",required:true},message_id:{type:"String"},ref:{type:"String"},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackCTADataManager",["AsyncRequest","BanzaiODS","CurrentUser","getPageIDFromThreadID","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MNPlatformTagsDataManager","XMNCommercePostbackCTAController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryMessageActions").get();i.prototype.send=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=arguments.length<=2||arguments[2]===undefined?null:arguments[2],m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=c("XMNCommercePostbackCTAController").getURIBuilder().setString("cta_id",j).setString("ref",l).setString("message_id",m).getURI();if(k!==null)new(c("AsyncRequest"))().setURI(n).setMethod("POST").setErrorHandler(k).send();else new(c("AsyncRequest"))().setURI(n).setMethod("POST").send()};i.prototype.sendAndConfirm=function(j,k,l,m){var n=arguments.length<=4||arguments[4]===undefined?null:arguments[4],o=arguments.length<=5||arguments[5]===undefined?null:arguments[5],p=arguments.length<=6||arguments[6]===undefined?[]:arguments[6],q=arguments.length<=7||arguments[7]===undefined?null:arguments[7];if(k!==null)this.sendConfirmationText(k,l,m,p);this.send(j,n,o,q)};i.prototype.sendConfirmationText=function(j,k,l){if(!k)c("BanzaiODS").bumpEntityKey("messenger_commerce","confirm_message_failed.empty_threadID");else{var m=new(c("MercuryMessageObject"))(c("CurrentUser").getID()),n=[],o=c("getPageIDFromThreadID")(k);if(c("MNPlatformTagsDataManager").hasThreadTags(o))n=c("MNPlatformTagsDataManager").getThreadTags();h.send(m.constructCTAConfirmationMessageObject(j,c("MercurySourceType").TITAN_WEB,k,l,n));if(n&&n.length>0)c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread()}};function i(){}f.exports=new i()}),null);
__d("MessengerMDotMeReferralStore",["MessengerActions","MessengerStore"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MessengerStore"));i=h&&h.prototype;function j(){"use strict";i.constructor.call(this);this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null}}j.prototype.getState=function(){"use strict";return this.$MessengerMDotMeReferralStore1};j.prototype.__onDispatch=function(k){"use strict";switch(k.type){case c("MessengerActions").Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=k.refCode;this.$MessengerMDotMeReferralStore1.refThreadID=k.refThreadID;this.emitChange()}};f.exports=new j()}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/postback_ref/",{page_id:{type:"String",required:true},ref:{type:"String",required:true},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackRefSendManager",["AsyncRequest","MessengerActions","MessengerMDotMeReferralStore","XMNCommercePostbackRefSendController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.prototype.sendMDotMeRef=function(i,j){var k=this.getMdotMeRef();if(this.shouldSendRef(j,i)){var l=c("XMNCommercePostbackRefSendController").getURIBuilder().setString("page_id",i).setString("ref",k).getURI();new(c("AsyncRequest"))().setURI(l).setMethod("POST").send();c("MessengerActions").changeMDotMeReferral()}};h.prototype.shouldSendRef=function(i,j){if(!j||!i)return false;return this.hasMDotMeRef(j)};h.prototype.hasMDotMeRef=function(i){var j=c("MessengerMDotMeReferralStore").getState();return!!(j.refCode&&i&&j.refThreadID&&j.refThreadID===i)};h.prototype.getMdotMeRef=function(){var i=c("MessengerMDotMeReferralStore").getState();return i.refCode};function h(){}f.exports=new h()}),null);
__d("MessengerDomIDs.bs",["uniqueID"],(function a(b,c,d,e,f,g){"use strict";var h={COMPOSER_INPUT_DESCRIPTION:c("uniqueID")(),CONVERSATION:c("uniqueID")(),MAIN_LABEL:c("uniqueID")(),MUTE_DIALOG_TITLE:c("uniqueID")(),THREAD_INFO_PANEL:c("uniqueID")(),THREAD_TITLE:c("uniqueID")()};g.ids=h}),null);
__d("MessengerParticipants.bs",["bs_caml_obj","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k,l,m){var n=c("MercuryIDs").getParticipantIDFromUserID(k),o=m.participants.filter(function(p){return c("bs_caml_obj").caml_notequal(p,n)});return o.filter(function(p){return l.has(p)})}function i(k,l,m){if(m.is_canonical)return[];else return h(k,l,m)}function j(k,l,m){return i(k,l,m).length>0}g.findIntersection=h;g.participantsInGroupThread=i;g.areParticipantsInGroupThread=j}),null);
__d("messengerCustomColorUtils",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){j=j||{};j.backgroundColor=i;return j}f.exports={customBubbleStyle:h}}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1193572474099061"};j.getQueryID=function(){"use strict";return"1132183563559860"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("XMessengerBotsMenuController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messenger/commerce/bots/menu/",{page_id:{type:"String",required:true}})}),null);
__d("MessengerBotMenuDataFetcher",["AsyncRequest","Cache","MessengerBotComposerWebGraphQLQuery","XMessengerBotsMenuController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$MessengerBotMenuDataFetcher1=new(c("Cache"))();this.$MessengerBotMenuDataFetcher2=new(c("Cache"))()}h.prototype.getMenuItems=function(i,j,k){__p&&__p();if(this.$MessengerBotMenuDataFetcher1.has(i)){j(this.$MessengerBotMenuDataFetcher1.get(i));return}var l=c("XMessengerBotsMenuController").getURIBuilder().setString("page_id",i).getURI();new(c("AsyncRequest"))().setURI(l).setHandler(function(m){var n=m.payload.menu;this.$MessengerBotMenuDataFetcher1.set(i,n);j(n)}.bind(this)).setErrorHandler(function(m){k()}).send()};h.prototype.getHasPageSetting=function(i,j,k,l){__p&&__p();if(!this.$MessengerBotMenuDataFetcher2.has(i)){var m=c("MessengerBotComposerWebGraphQLQuery").getURI({node_id:i});new(c("AsyncRequest"))().setURI(m).setHandler(function(o){var p=o.payload.data.node,n=p&&p.commerce_page_settings||[];this.$MessengerBotMenuDataFetcher2.set(i,n);j(n.indexOf(l)!==-1)}.bind(this)).setErrorHandler(function(o){this.$MessengerBotMenuDataFetcher2.set(i,[]);k()}.bind(this)).send()}var n=this.$MessengerBotMenuDataFetcher2.get(i)||[];j(n.indexOf(l)!==-1);return n.indexOf(l)!==-1};f.exports=new h()}),null);
__d("EmojiOnlyMessage.react",["cx","EmojiImageURL","EmojiLikeConstants","Image.react","React","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m="_1ift _1ifu",n=0,o=this.props.contents.map(function(p){n++;var q=p.emojiKey;if(q){var r=c("gkx")("AT7ffoM8gf91Fer7cUMkwGH62Vum20vkKo_AIqUOx27bu9y21PoFYcSzgDJj_KAeh5RgHmHKzv6c5n2RlIxDAfXE")?c("EmojiImageURL").getFBEmojiURL(q,c("EmojiLikeConstants").sizeMap.dp32):c("EmojiImageURL").getMessengerURL(q,c("EmojiLikeConstants").sizeMap.dp32);return c("React").createElement(c("Image.react"),{alt:p.text,className:m,key:n,src:r})}else return c("React").createElement("span",{key:n},p.text)});return c("React").createElement("div",{tabIndex:"0"},o)};function l(){i.apply(this,arguments)}l.propTypes={contents:k.arrayOf(k.shape({emojiKey:k.string,text:k.string.isRequired})).isRequired};f.exports=l}),null);
__d("MercuryMessageGroup",["MercuryActionType","MercuryAttachmentType","MercuryMessageInfo","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","MessengerLightweightActionUtils","enumerate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={calculateMessageGroups:function k(l,m){__p&&__p();var n=[],o=null,p={value:null},q=c("enumerate")(l),r=void 0;while(!(r=q.next()).done){var s=h.canAppendMessageToLastGroup(p.value,r.value,m);if(!s){o=[];n.push(o)}o.push(r.value);p=r}return n},canAppendMessageToLastGroup:function k(l,m,n){var o=c("MercuryThreadlistConstants").GROUPING_THRESHOLD;if(!l||i(l,n)||i(m,n)||l.author!=m.author||l.timestamp<m.timestamp-o||l.is_spoof_warning!==m.is_spoof_warning||l.page_admin_notes||m.replied_to_message)return false;var p=c("MercuryMessageInfo").getPersona(l),q=c("MercuryMessageInfo").getPersona(m);if(!p&&!q)return true;return p===null||q===null?false:p.id===q.id}};function i(k,l){var m=k.has_attachment;if(m&&(l===c("MercuryShareAttachmentRenderLocations").MESSENGER||l===c("MercuryShareAttachmentRenderLocations").CHAT))m=j(k);return!!(c("MessengerLightweightActionUtils").isLWAMessage(k)||k.action_type==c("MercuryActionType").LOG_MESSAGE||m||k.html_body||k.body&&k.body.length>c("MercuryThreadlistConstants").MAX_CHARS_BEFORE_BREAK)}function j(k){var l=k.attachments[0];return!l||l.attach_type===c("MercuryAttachmentType").STICKER||l.attach_type===c("MercuryAttachmentType").ANIMATED_IMAGE}f.exports=h}),null);
__d("PagesMessagingMercuryChatTabActionKeys",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({REQUEST_GREETING_CONFIG:null,NOTIFY_GREETING_CONFIG_RECEIVED:null});f.exports=h}),null);
__d("PagesMessagingMercuryChatTabDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("PagesMessagingMercuryChatTabActions",["PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h={requestGreetingConfig:function i(j){c("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:c("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG,threadID:j})},notifyGreetingConfigReceived:function i(j,k){c("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:c("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED,threadID:j,payload:k})}};f.exports=h}),null);
__d("PagesMessagingMercuryChatTabState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("immutable").Record({pagesGreetingShouldShow:false,pagesGreetingContent:null,pageResponsiveness:null,coverPhotoData:null,connectionContext:null,pageOnlineMessage:null,icebreakers:null}));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("XMercuryChatTabPagesNullStateConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/messaging/mercury/greeting/",{})}),null);
__d("PagesMessagingMercuryChatTabStore",["invariant","PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabActions","AsyncRequest","PagesMessagingMercuryChatTabDispatcher","FluxStore","MercuryIDs","PagesMessagingMercuryChatTabState","XMercuryChatTabPagesNullStateConfigController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("FluxStore"));j=i&&i.prototype;function k(){j.constructor.call(this,c("PagesMessagingMercuryChatTabDispatcher"));this.__moduleID=f.id;this.$PagesMessagingMercuryChatTabStore1=new Map()}k.prototype.getStateByThread=function(l){if(!this.$PagesMessagingMercuryChatTabStore1.has(l))this.$PagesMessagingMercuryChatTabStore1.set(l,new(c("PagesMessagingMercuryChatTabState"))());var m=this.$PagesMessagingMercuryChatTabStore1.get(l);m||h(0);return m};k.prototype.__onDispatch=function(l){var m=l.actionType,n=l.payload,o=l.threadID,p=this.getStateByThread(o);p||h(0);switch(m){case c("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG:this.$PagesMessagingMercuryChatTabStore2(o);break;case c("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED:this.$PagesMessagingMercuryChatTabStore3(o,this.$PagesMessagingMercuryChatTabStore4(n,p));break}};k.prototype.$PagesMessagingMercuryChatTabStore2=function(l){var m=c("XMercuryChatTabPagesNullStateConfigController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(m).setMethod("POST").setData({page_id:c("MercuryIDs").getUserIDFromThreadID(l)}).setHandler(function(n){return c("PagesMessagingMercuryChatTabActions").notifyGreetingConfigReceived(l,n.payload)}).send()};k.prototype.$PagesMessagingMercuryChatTabStore3=function(l,m){this.$PagesMessagingMercuryChatTabStore1.set(l,m);this.__emitChange()};k.prototype.$PagesMessagingMercuryChatTabStore4=function(l,m){var n=m.set("pagesGreetingShouldShow",l.pagesGreetingShouldShow).set("pagesGreetingContent",l.pagesGreetingContent).set("pageResponsiveness",l.pageResponsiveness).set("coverPhotoData",l.coverPhotoData).set("connectionContext",l.connectionContext).set("pageOnlineMessage",l.pageOnlineMessage);if(m.icebreakers===null||m.icebreakers===undefined||Object.keys(m.icebreakers).length===0)n=n.set("icebreakers",l.icebreakers);return n};f.exports=new k()}),null);
__d("PagesMessageListGreeting.react",["cx","FluxContainer","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabStore","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("PagesMessagingMercuryChatTabStore")]};k.calculateState=function(l,m){if(m.messageCount>0)return{shouldShowGreeting:false};var n=c("PagesMessagingMercuryChatTabStore").getStateByThread(m.threadID);return{greetingContent:n.pagesGreetingContent,shouldShowGreeting:n.pagesGreetingShouldShow}};k.prototype.componentDidMount=function(){c("PagesMessagingMercuryChatTabActions").requestGreetingConfig(this.props.threadID)};k.prototype.render=function(){if(!this.state.shouldShowGreeting||!this.state.greetingContent||this.state.greetingContent.trim().length===0)return null;return c("React").createElement("div",{className:"_4fsh _3-8z"},this.state.greetingContent)};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("MessageList.react",["cx","immutable","ImmutableObject","MercuryActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageGroup","MercuryMessageInfo","MercuryShareAttachmentRenderLocations","MessagingGenericAdminTextType","MessengerAdminGroupUtils","MessengerDomIDs.bs","MessengerLightweightActionUtils","PagesMessageListGreeting.react","React","ReactDOM","idx"],(function aa(ba,a,ca,da,b,ea,fa){"use strict";__p&&__p();var c,d,e=a("MessengerDomIDs.bs").ids,f=a("React").PropTypes,g=1e3*60*60,h=function h(p){var q,r,s,t=(q=p)!=null?(q=q.log_message_data)!=null?q.message_type:q:q;switch(t){case a("MessagingGenericAdminTextType").GROUP_POLL:return(r=p)!=null?(r=r.log_message_data)!=null?(r=r.untypedData)!=null?r.question_id:r:r:r;case a("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE:return(s=p)!=null?(s=s.log_message_data)!=null?(s=s.untypedData)!=null?s.game_id:s:s:s;default:return null}},i=function i(p){if(a("MessengerLightweightActionUtils").isLWAMessage(p))return"lwa";return null};c=babelHelpers.inherits(j,a("React").PureComponent);d=c&&c.prototype;function j(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=d.constructor).call.apply(p,[this].concat(s)),this.state={activeMessageID:null,messageGroups:a("MercuryMessageGroup").calculateMessageGroups(this.props.messages,this.props.location)},this.$MessageList4=function(u){this.setState(function(v){return{activeMessageID:v.activeMessageID===u?null:v.activeMessageID}})}.bind(this),this.$MessageList5=function(u){this.setState({activeMessageID:u})}.bind(this),q}j.prototype.UNSAFE_componentWillReceiveProps=function(p){if(p.messages!==this.props.messages)this.setState({messageGroups:a("MercuryMessageGroup").calculateMessageGroups(p.messages,p.location)})};j.prototype.render=function(){__p&&__p();var p=this.props,q=p.DateBreak,r=p.location,s=p.MessageGroup,t=p.CollapsedLogMessageGroup,u=[],v=[],w=void 0,x=this.props.thread&&this.props.thread.custom_color,y=x?{backgroundColor:x}:null,z=this.state.activeMessageID,A=this.state.messageGroups,B=A.length,C=this.props.readReceipts,D=C.last(),E=D?D.watermark:0,F=a("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),G=a("MessengerAdminGroupUtils").isJoinableThread(this.props.thread),H={};for(var I=this.props.messages.size-1;I>=0;I--){var J=this.props.messages.get(I),K=h(J)||i(J);if(K&&!H[K])H[K]=J.message_id}for(var L=0;L<B;L++){var M=L>0?A[L-1]:null,N=M&&M.length>0?M[M.length-1]:null,O=A[L],P=O[0],Q=O[O.length-1],R=false;if(!N||P.timestamp-N.timestamp>g){R=true;var S=a("React").createElement(q,{date:new Date(P.timestamp),key:"db:"+P.message_id,ref:"db:"+P.message_id});if(v.length===0)u.push(S)}if(a("MessengerLightweightActionUtils").isLWAMessage(P))if(H[i(P)]!==P.message_id){var T=this.$MessageList1(P,H);u.push(T);continue}if(P.action_type==a("MercuryActionType").LOG_MESSAGE){var U,V=(U=P)!=null?(U=U.log_message_data)!=null?U.message_type:U:U,ga=V===a("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE,ha=V===a("MessagingGenericAdminTextType").GROUP_POLL;if((r===a("MercuryShareAttachmentRenderLocations").CHAT||r===a("MercuryShareAttachmentRenderLocations").MESSENGER)&&(P.log_message_type===a("MercuryLogMessageType").VIDEO_CALL||P.log_message_type===a("MercuryLogMessageType").PHONE_CALL)){var ia=this.$MessageList2(P,F,A,B,L,C,E,Q,H);u.push(ia)}else{var W=this.$MessageList3(P,H);w=P.message_id;if(G&&!ga&&!ha)v.push(W);else{if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}u.push(W)}}continue}if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}O=a("immutable").List(O);var X=l(A,B,L,H),ja=!n(C,O,X),ka=m(E,Q),la=o(this.props.deliveryTimestamp,Q),ma=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(a("MercuryIDs").getUserIDFromParticipantID(O.first().author)),Y=a("MercuryMessageInfo").getPersona(Q);u.push(a("React").createElement(s,{activeMessageID:k(z,O),author:O.first().author,deliveryTimestamp:la,hasDateBreak:R,isCanonical:this.props.isCanonical,isFromViewer:F===P.author,isPageMessage:this.props.isPageMessage,isOnline:ma,key:"mg:"+P.message_id,lastReadTimestamp:ka,maxBubbleWidth:this.props.maxBubbleWidth,messages:O,nextTimestamp:X,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,onReplyToMessage:this.props.onReplyToMessage,pageID:this.props.isPageMessage?this.props.viewer:null,personaID:Y?Y.id:null,readReceipts:ja?C:a("immutable").OrderedMap(),ref:"mg:"+P.message_id,thread:this.props.thread,threadID:this.props.threadID}))}if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}var Z=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid,$=null;if(r===a("MercuryShareAttachmentRenderLocations").MESSENGER&&Z&&this.props.isPageMessage)$=a("React").createElement(a("PagesMessageListGreeting.react"),{messageCount:v.length+B,threadID:Z});return a("React").createElement("div",{id:r===a("MercuryShareAttachmentRenderLocations").MESSENGER?e.CONVERSATION:null},$,u)};j.prototype.getMessageElement=function(p,q){__p&&__p();if(q){var r=this.refs["db:"+p];if(r)return a("ReactDOM").findDOMNode(r)}var s=this.state.messageGroups.find(function(v){return v.some(function(w){return w.message_id===p})});if(!s)return null;var t=s[0].message_id,u=this.refs["mg:"+t];if(!u)return null;if(q&&t===p)return a("ReactDOM").findDOMNode(u);return u.getMessageElement(p)};j.prototype.$MessageList2=function(p,q,r,s,t,u,v,w,x){var y=this.props.MessageGroup,z={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:p.log_message_body,log_message_data:p.log_message_data,log_message_type:p.log_message_type,timestamp:p.timestamp}},A=a("ImmutableObject").setProperty(p,"attachments",[z]);A=a("ImmutableObject").setProperty(A,"body","");var B=a("immutable").List([A]),C=l(r,s,t,x),D=!n(u,B,C),E=m(v,w),F=o(this.props.deliveryTimestamp,w);return a("React").createElement(y,{author:B.first().author,deliveryTimestamp:F,isFromViewer:q===p.author,isPageMessage:this.props.isPageMessage,key:p.message_id,lastReadTimestamp:E,maxBubbleWidth:this.props.maxBubbleWidth,messages:B,nextTimestamp:C,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,readReceipts:D?u:a("immutable").OrderedMap(),thread:this.props.thread,threadID:this.props.threadID})};j.prototype.$MessageList3=function(p,q){var r=this.props.LogMessage,s=q[h(p)];if(p.log_message_type!==a("MercuryLogMessageType").SERVER_ERROR)return a("React").createElement(r,{className:this.props.location===a("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:p.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:p,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:s===p.message_id});return null};j.prototype.$MessageList1=function(p,q){var r=q[i(p)],s=this.props.LogMessage;return a("React").createElement(s,{className:this.props.location===a("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:p.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:p,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:r===p.message_id})};j.propTypes={CollapsedLogMessageGroup:f.func.isRequired,DateBreak:f.func.isRequired,deliveryTimestamp:f.number.isRequired,isCanonical:f.bool,isPageMessage:f.bool,location:f.string.isRequired,LogMessage:f.func.isRequired,loadMoreMessages:f.func,MessageGroup:f.func.isRequired,messages:f.instanceOf(a("immutable").List).isRequired,onAttachmentLoad:f.func,onlineUsers:f.instanceOf(a("immutable").List),onStickerClick:f.func,onReplyToMessage:f.func,readReceipts:f.instanceOf(a("immutable").OrderedMap).isRequired,viewer:f.string.isRequired,thread:f.object,threadID:f.string};function k(p,q){return q.find(function(r){return r.message_id===p})?p:null}function l(p,q,r,s){if(r>=q-1)return Infinity;var t=p[r+1][0];if(a("MessengerLightweightActionUtils").isLWAMessage(t)&&s[i(t)]!==t.message_id||t.action_type==a("MercuryActionType").LOG_MESSAGE)return l(p,q,r+1,s);else return t.timestamp}function m(p,q){return q.timestamp>p?p:Infinity}function n(p,q,r){return q.isEmpty()||p.last()<q.first().timestamp||p.first()>=r}function o(p,q){return q.timestamp>p?p:Infinity}b.exports=j}),null);
__d("getEveryoneMentionIndex",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.findIndex(function(j){return j.type=="t"})}f.exports=h}),null);
__d("MessengerViewerContactMethodsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1868889766468115"};j.getQueryID=function(){"use strict";return"177554543035925"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);